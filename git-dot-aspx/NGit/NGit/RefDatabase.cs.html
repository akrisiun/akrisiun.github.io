<!DOCTYPE html>
<html><head><title>RefDatabase.cs</title><link rel="stylesheet" href="../../styles.css"><script src="../../scripts.js"></script></head>
<body class="cB" onload="i(285);"><div class="dH">
<table style="width: 100%">
<tr><td>File: <a id="filePath" class="blueLink" href="/#NGit/NGit/RefDatabase.cs" target="_top">NGit\RefDatabase.cs</a><br/></td><td></td></tr>
<tr><td>Project: <a id="projectPath" class="blueLink" href="/#NGit" target="_top">lib\NGit\NGit\NGit.csproj</a> (NGit)</td><td></td></tr>
</table>
</div>
<div class="cz"><table class="tb" cellpadding="0" cellspacing="0"><tr><td valign="top" align="right"><pre id="ln"></pre></td><td valign="top" align="left"><pre id="code">
<span class="c">/*
This code is derived from jgit (http://eclipse.org/jgit).
Copyright owners are documented in jgit&#39;s IP log.

This program and the accompanying materials are made available
under the terms of the Eclipse Distribution License v1.0 which
accompanies this distribution, is reproduced below, and is
available at http://www.eclipse.org/org/documents/edl-v10.php

All rights reserved.

Redistribution and use in source and binary forms, with or
without modification, are permitted provided that the following
conditions are met:

- Redistributions of source code must retain the above copyright
  notice, this list of conditions and the following disclaimer.

- Redistributions in binary form must reproduce the above
  copyright notice, this list of conditions and the following
  disclaimer in the documentation and/or other materials provided
  with the distribution.

- Neither the name of the Eclipse Foundation, Inc. nor the
  names of its contributors may be used to endorse or promote
  products derived from this software without specific prior
  written permission.

THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND
CONTRIBUTORS &quot;AS IS&quot; AND ANY EXPRESS OR IMPLIED WARRANTIES,
INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR
CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT
NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER
CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT,
STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF
ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/</span>

<b>using</b> <span class="i n">System</span>.<span class="i n">Collections</span>.<span class="i n">Generic</span>;
<b>using</b> <span class="i n">NGit</span>;
<b>using</b> <span class="i n">Sharpen</span>;

<b>namespace</b> <span class="i n">NGit</span>
{
	<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
	<span class="c">///</span><span class="c"> Abstraction of name to</span>
	<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">see</span><span class="c"> </span><span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="ObjectId.cs.html#96e3af3718f0610d" class="t t">ObjectId</a><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">ObjectId</span><span class="c">&lt;/</span><span class="c">see</span><span class="c">&gt;</span>
	<span class="c">///</span><span class="c"> mapping.</span>
	<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">p</span><span class="c">&gt;</span>
	<span class="c">///</span><span class="c"> A reference database stores a mapping of reference names to</span>
	<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">see</span><span class="c"> </span><span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="ObjectId.cs.html#96e3af3718f0610d" class="t t">ObjectId</a><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">ObjectId</span><span class="c">&lt;/</span><span class="c">see</span><span class="c">&gt;</span>
	<span class="c">///</span><span class="c"> .</span>
	<span class="c">///</span><span class="c"> Every</span>
	<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">see</span><span class="c"> </span><span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="Repository.cs.html#1e2067e7babb66d2" class="t t">Repository</a><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">Repository</span><span class="c">&lt;/</span><span class="c">see</span><span class="c">&gt;</span>
	<span class="c">///</span><span class="c"> has a single reference database, mapping names to</span>
	<span class="c">///</span><span class="c"> the tips of the object graph contained by the</span>
	<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">see</span><span class="c"> </span><span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="ObjectDatabase.cs.html#008098fa3f2fdd6a" class="t t">ObjectDatabase</a><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">ObjectDatabase</span><span class="c">&lt;/</span><span class="c">see</span><span class="c">&gt;</span>
	<span class="c">///</span><span class="c"> .</span>
	<span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
	<b>public abstract class</b> <a id="a8335c0f37d2d313" href="../R/a8335c0f37d2d313.html" target="n" data-glyph="0,0" class="t t"><span id="eb39d3304cc98001">RefDatabase</span></a>
	{
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span><span class="c">Order of prefixes to search when using non-absolute references.</span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">remarks</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> Order of prefixes to search when using non-absolute references.</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">p</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> The implementation&#39;s</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">see</span><span class="c"> </span><span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="#a56789de2fa35e9c" class="i method">GetRef</a>(<b>string</b>)<span class="c">&quot;</span><span class="c">&gt;</span><span class="c">GetRef(string)</span><span class="c">&lt;/</span><span class="c">see</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> method must take this search</span>
		<span class="c">///</span><span class="c"> space into consideration when locating a reference by name. The first</span>
		<span class="c">///</span><span class="c"> entry in the path is always</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">code</span><span class="c">&gt;</span><span class="c">&quot;&quot;</span><span class="c">&lt;/</span><span class="c">code</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> , ensuring that absolute references</span>
		<span class="c">///</span><span class="c"> are resolved without further mangling.</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">remarks</span><span class="c">&gt;</span>
		<b>protected internal static readonly string</b>[] <a id="157c51f72c9f24f5" href="../R/157c51f72c9f24f5.html" target="n" data-glyph="45,1" class="i field">SEARCH_PATH</a> = <b>new</b> <b>string</b>[] { <b>string</b>.<a href="@0@mscorlib/A.html#c9f70a27facb27cf" class="i field">Empty</a>
			, <a href="Constants.cs.html#71c965f28a6bcd51" class="t t">Constants</a>.<a href="Constants.cs.html#ec4c59db33b2098e" class="i field">R_REFS</a>, <a href="Constants.cs.html#71c965f28a6bcd51" class="t t">Constants</a>.<a href="Constants.cs.html#19dbc2a563e6b1ae" class="i field">R_TAGS</a>, <a href="Constants.cs.html#71c965f28a6bcd51" class="t t">Constants</a>.<a href="Constants.cs.html#51f9cfd1933180d7" class="i field">R_HEADS</a>, <a href="Constants.cs.html#71c965f28a6bcd51" class="t t">Constants</a>.<a href="Constants.cs.html#93389d0e98853ba6" class="i field">R_REMOTES</a> };

		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> Maximum number of times a</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">see</span><span class="c"> </span><span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="SymbolicRef.cs.html#dc18f7b0cb79a054" class="t t">SymbolicRef</a><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">SymbolicRef</span><span class="c">&lt;/</span><span class="c">see</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> can be traversed.</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">p</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> If the reference is nested deeper than this depth, the implementation</span>
		<span class="c">///</span><span class="c"> should either fail, or at least claim the reference does not exist.</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
		<b>protected internal const int</b> <a id="dc971075047fcd61" href="../R/dc971075047fcd61.html" target="n" data-glyph="9,1" class="i field">MAX_SYMBOLIC_REF_DEPTH</a> = 5;

		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> Magic value for</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">see</span><span class="c"> </span><span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="#34001e3f9d275898" class="i method">GetRefs</a>(<b>string</b>)<span class="c">&quot;</span><span class="c">&gt;</span><span class="c">GetRefs(string)</span><span class="c">&lt;/</span><span class="c">see</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> to return all references.</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
		<b>public static readonly string</b> <a id="f249efac1df21bfb" href="../R/f249efac1df21bfb.html" target="n" data-glyph="42,1" class="i field">ALL</a> = <b>string</b>.<a href="@0@mscorlib/A.html#c9f70a27facb27cf" class="i field">Empty</a>;

		<span class="c">//$NON-NLS-1$</span>
		<span class="c">//</span>
		<span class="c">//</span>
		<span class="c">//</span>
		<span class="c">//</span>
		<span class="c">//$NON-NLS-1$</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span><span class="c">Initialize a new reference database at this location.</span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">remarks</span><span class="c">&gt;</span><span class="c">Initialize a new reference database at this location.</span><span class="c">&lt;/</span><span class="c">remarks</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">exception</span><span class="c"> </span><span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><span class="i n">System</span>.<span class="i n">IO</span>.<a href="@0@mscorlib/A.html#bf546e435199e83c" class="t t">IOException</a><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">the database could not be created.</span><span class="c">&lt;/</span><span class="c">exception</span><span class="c">&gt;</span>
		<b>public abstract void</b> <a id="dac9b4000c1c453b" href="../R/dac9b4000c1c453b.html" target="n" data-glyph="72,1" class="i method">Create</a>();

		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span><span class="c">Close any resources held by this database.</span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">remarks</span><span class="c">&gt;</span><span class="c">Close any resources held by this database.</span><span class="c">&lt;/</span><span class="c">remarks</span><span class="c">&gt;</span>
		<b>public abstract void</b> <a id="645a923326a5023b" href="../R/645a923326a5023b.html" target="n" data-glyph="72,1" class="i method">Close</a>();

		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span><span class="c">Determine if a proposed reference name overlaps with an existing one.</span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">remarks</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> Determine if a proposed reference name overlaps with an existing one.</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">p</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> Reference names use &#39;/&#39; as a component separator, and may be stored in a</span>
		<span class="c">///</span><span class="c"> hierarchical storage such as a directory on the local filesystem.</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">p</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> If the reference &quot;refs/heads/foo&quot; exists then &quot;refs/heads/foo/bar&quot; must</span>
		<span class="c">///</span><span class="c"> not exist, as a reference cannot have a value and also be a container for</span>
		<span class="c">///</span><span class="c"> other references at the same time.</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">p</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> If the reference &quot;refs/heads/foo/bar&quot; exists than the reference</span>
		<span class="c">///</span><span class="c"> &quot;refs/heads/foo&quot; cannot exist, for the same reason.</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">remarks</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span><span class="c"> </span><span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r0 r">name</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">proposed name.</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">returns</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> true if the name overlaps with an existing reference; false if</span>
		<span class="c">///</span><span class="c"> using this name right now would be safe.</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">returns</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">exception</span><span class="c"> </span><span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><span class="i n">System</span>.<span class="i n">IO</span>.<a href="@0@mscorlib/A.html#bf546e435199e83c" class="t t">IOException</a><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">the database could not be read to check for conflicts.</span>
		<span class="c">///</span><span class="c"> 	</span><span class="c">&lt;/</span><span class="c">exception</span><span class="c">&gt;</span>
		<b>public abstract bool</b> <a id="79fa80857f94a118" href="../R/79fa80857f94a118.html" target="n" data-glyph="72,1" class="i method">IsNameConflicting</a>(<b>string</b> <span id="r0 rd" class="r0 r">name</span>);

		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span><span class="c">Create a new update command to create, modify or delete a reference.</span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">remarks</span><span class="c">&gt;</span><span class="c">Create a new update command to create, modify or delete a reference.</span><span class="c">&lt;/</span><span class="c">remarks</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span><span class="c"> </span><span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r1 r">name</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">the name of the reference.</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span><span class="c"> </span><span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r2 r">detach</span><span class="c">&quot;</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> if</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">code</span><span class="c">&gt;</span><span class="c">true</span><span class="c">&lt;/</span><span class="c">code</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> and</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">code</span><span class="c">&gt;</span><span class="c">name</span><span class="c">&lt;/</span><span class="c">code</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> is currently a</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">see</span><span class="c"> </span><span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="SymbolicRef.cs.html#dc18f7b0cb79a054" class="t t">SymbolicRef</a><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">SymbolicRef</span><span class="c">&lt;/</span><span class="c">see</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> , the update will replace it with an</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">see</span><span class="c"> </span><span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="ObjectIdRef.cs.html#e05503644522791c" class="t t">ObjectIdRef</a><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">ObjectIdRef</span><span class="c">&lt;/</span><span class="c">see</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> . Otherwise, the update will recursively</span>
		<span class="c">///</span><span class="c"> traverse</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">see</span><span class="c"> </span><span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="SymbolicRef.cs.html#dc18f7b0cb79a054" class="t t">SymbolicRef</a><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">SymbolicRef</span><span class="c">&lt;/</span><span class="c">see</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> s and operate on the leaf</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">see</span><span class="c"> </span><span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="ObjectIdRef.cs.html#e05503644522791c" class="t t">ObjectIdRef</a><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">ObjectIdRef</span><span class="c">&lt;/</span><span class="c">see</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> .</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">returns</span><span class="c">&gt;</span><span class="c">a new update for the requested name; never null.</span><span class="c">&lt;/</span><span class="c">returns</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">exception</span><span class="c"> </span><span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><span class="i n">System</span>.<span class="i n">IO</span>.<a href="@0@mscorlib/A.html#bf546e435199e83c" class="t t">IOException</a><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">the reference space cannot be accessed.</span><span class="c">&lt;/</span><span class="c">exception</span><span class="c">&gt;</span>
		<b>public abstract</b> <a href="RefUpdate.cs.html#2164cd1d8095d95b" class="t t">RefUpdate</a> <a id="8cba2ad0231455ba" href="../R/8cba2ad0231455ba.html" target="n" data-glyph="72,1" class="i method">NewUpdate</a>(<b>string</b> <span id="r1 rd" class="r1 r">name</span>, <b>bool</b> <span id="r2 rd" class="r2 r">detach</span>);

		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span><span class="c">Create a new update command to rename a reference.</span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">remarks</span><span class="c">&gt;</span><span class="c">Create a new update command to rename a reference.</span><span class="c">&lt;/</span><span class="c">remarks</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span><span class="c"> </span><span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r3 r">fromName</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">name of reference to rename from</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span><span class="c"> </span><span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r4 r">toName</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">name of reference to rename to</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">returns</span><span class="c">&gt;</span><span class="c">an update command that knows how to rename a branch to another.</span><span class="c">&lt;/</span><span class="c">returns</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">exception</span><span class="c"> </span><span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><span class="i n">System</span>.<span class="i n">IO</span>.<a href="@0@mscorlib/A.html#bf546e435199e83c" class="t t">IOException</a><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">the reference space cannot be accessed.</span><span class="c">&lt;/</span><span class="c">exception</span><span class="c">&gt;</span>
		<b>public abstract</b> <a href="RefRename.cs.html#7b893f0c52d73198" class="t t">RefRename</a> <a id="82f70d6b03d4e1eb" href="../R/82f70d6b03d4e1eb.html" target="n" data-glyph="72,1" class="i method">NewRename</a>(<b>string</b> <span id="r3 rd" class="r3 r">fromName</span>, <b>string</b> <span id="r4 rd" class="r4 r">toName</span>);

		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span><span class="c">Create a new batch update to attempt on this database.</span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">remarks</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> Create a new batch update to attempt on this database.</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">p</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> The default implementation performs a sequential update of each command.</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">remarks</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">returns</span><span class="c">&gt;</span><span class="c">a new batch update object.</span><span class="c">&lt;/</span><span class="c">returns</span><span class="c">&gt;</span>
		<b>public virtual</b> <a href="BatchRefUpdate.cs.html#3857cdfdcc1831c5" class="t t">BatchRefUpdate</a> <a id="cae3bf679efbb08c" href="../R/cae3bf679efbb08c.html" target="n" data-glyph="72,1" class="i method">NewBatchUpdate</a>()
		{
			<b>return</b> <b>new</b> <a href="BatchRefUpdate.cs.html#6d1bc2931f233897" class="t constructor">BatchRefUpdate</a>(<a href="#a8335c0f37d2d313" class="k">this</a>);
		}

		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span><span class="c">Read a single reference.</span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">remarks</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> Read a single reference.</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">p</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> Aside from taking advantage of</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">see</span><span class="c"> </span><span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="#157c51f72c9f24f5" class="i field">SEARCH_PATH</a><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">SEARCH_PATH</span><span class="c">&lt;/</span><span class="c">see</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> , this method may be</span>
		<span class="c">///</span><span class="c"> able to more quickly resolve a single reference name than obtaining the</span>
		<span class="c">///</span><span class="c"> complete namespace by</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">code</span><span class="c">&gt;</span><span class="c">getRefs(ALL).get(name)</span><span class="c">&lt;/</span><span class="c">code</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> .</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">remarks</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span><span class="c"> </span><span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r5 r">name</span><span class="c">&quot;</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> the name of the reference. May be a short name which must be</span>
		<span class="c">///</span><span class="c"> searched for using the standard</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">see</span><span class="c"> </span><span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="#157c51f72c9f24f5" class="i field">SEARCH_PATH</a><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">SEARCH_PATH</span><span class="c">&lt;/</span><span class="c">see</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> .</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">returns</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> the reference (if it exists); else</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">code</span><span class="c">&gt;</span><span class="c">null</span><span class="c">&lt;/</span><span class="c">code</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> .</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">returns</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">exception</span><span class="c"> </span><span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><span class="i n">System</span>.<span class="i n">IO</span>.<a href="@0@mscorlib/A.html#bf546e435199e83c" class="t t">IOException</a><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">the reference space cannot be accessed.</span><span class="c">&lt;/</span><span class="c">exception</span><span class="c">&gt;</span>
		<b>public abstract</b> <a href="Ref.cs.html#65afb4684ade4a12" class="t t">Ref</a> <a id="a56789de2fa35e9c" href="../R/a56789de2fa35e9c.html" target="n" data-glyph="72,1" class="i method">GetRef</a>(<b>string</b> <span id="r5 rd" class="r5 r">name</span>);

		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span><span class="c">Get a section of the reference namespace.</span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">remarks</span><span class="c">&gt;</span><span class="c">Get a section of the reference namespace.</span><span class="c">&lt;/</span><span class="c">remarks</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span><span class="c"> </span><span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r6 r">prefix</span><span class="c">&quot;</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> prefix to search the namespace with; must end with</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">code</span><span class="c">&gt;</span><span class="c">/</span><span class="c">&lt;/</span><span class="c">code</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> .</span>
		<span class="c">///</span><span class="c"> If the empty string (</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">see</span><span class="c"> </span><span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="#f249efac1df21bfb" class="i field">ALL</a><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">ALL</span><span class="c">&lt;/</span><span class="c">see</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> ), obtain a complete snapshot</span>
		<span class="c">///</span><span class="c"> of all references.</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">returns</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> modifiable map that is a complete snapshot of the current</span>
		<span class="c">///</span><span class="c"> reference namespace, with</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">code</span><span class="c">&gt;</span><span class="c">prefix</span><span class="c">&lt;/</span><span class="c">code</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> removed from the start</span>
		<span class="c">///</span><span class="c"> of each key. The map can be an unsorted map.</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">returns</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">exception</span><span class="c"> </span><span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><span class="i n">System</span>.<span class="i n">IO</span>.<a href="@0@mscorlib/A.html#bf546e435199e83c" class="t t">IOException</a><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">the reference space cannot be accessed.</span><span class="c">&lt;/</span><span class="c">exception</span><span class="c">&gt;</span>
		<b>public abstract</b> <a href="@0@mscorlib/A.html#20343df0c96b629b" class="t t">IDictionary</a>&lt;<b>string</b>, <a href="Ref.cs.html#65afb4684ade4a12" class="t t">Ref</a>&gt; <a id="34001e3f9d275898" href="../R/34001e3f9d275898.html" target="n" data-glyph="72,1" class="i method">GetRefs</a>(<b>string</b> <span id="r6 rd" class="r6 r">prefix</span>);

		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span><span class="c">Get the additional reference-like entities from the repository.</span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">remarks</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> Get the additional reference-like entities from the repository.</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">p</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> The result list includes non-ref items such as MERGE_HEAD and</span>
		<span class="c">///</span><span class="c"> FETCH_RESULT cast to be refs. The names of these refs are not returned by</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">code</span><span class="c">&gt;</span><span class="c">getRefs(ALL)</span><span class="c">&lt;/</span><span class="c">code</span><span class="c">&gt;</span><span class="c"> but are accepted by</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">see</span><span class="c"> </span><span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="#a56789de2fa35e9c" class="i method">GetRef</a>(<b>string</b>)<span class="c">&quot;</span><span class="c">&gt;</span><span class="c">GetRef(string)</span><span class="c">&lt;/</span><span class="c">see</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">remarks</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">returns</span><span class="c">&gt;</span><span class="c">a list of additional refs</span><span class="c">&lt;/</span><span class="c">returns</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">exception</span><span class="c"> </span><span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><span class="i n">System</span>.<span class="i n">IO</span>.<a href="@0@mscorlib/A.html#bf546e435199e83c" class="t t">IOException</a><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">the reference space cannot be accessed.</span><span class="c">&lt;/</span><span class="c">exception</span><span class="c">&gt;</span>
		<b>public abstract</b> <a href="@0@mscorlib/A.html#b19f71a84062554b" class="t t">IList</a>&lt;<a href="Ref.cs.html#65afb4684ade4a12" class="t t">Ref</a>&gt; <a id="6f818f2e5c05007d" href="../R/6f818f2e5c05007d.html" target="n" data-glyph="72,1" class="i method">GetAdditionalRefs</a>();

		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span><span class="c">Peel a possibly unpeeled reference by traversing the annotated tags.</span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">remarks</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> Peel a possibly unpeeled reference by traversing the annotated tags.</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">p</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> If the reference cannot be peeled (as it does not refer to an annotated</span>
		<span class="c">///</span><span class="c"> tag) the peeled id stays null, but</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">see</span><span class="c"> </span><span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="Ref.cs.html#65afb4684ade4a12" class="t t">Ref</a>.<a href="Ref.cs.html#126b3ed3add7a0cd" class="i method">IsPeeled</a>()<span class="c">&quot;</span><span class="c">&gt;</span><span class="c">Ref.IsPeeled()</span><span class="c">&lt;/</span><span class="c">see</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> will be true.</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">p</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> Implementors should check</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">see</span><span class="c"> </span><span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="Ref.cs.html#65afb4684ade4a12" class="t t">Ref</a>.<a href="Ref.cs.html#126b3ed3add7a0cd" class="i method">IsPeeled</a>()<span class="c">&quot;</span><span class="c">&gt;</span><span class="c">Ref.IsPeeled()</span><span class="c">&lt;/</span><span class="c">see</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> before performing any</span>
		<span class="c">///</span><span class="c"> additional work effort.</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">remarks</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span><span class="c"> </span><span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r7 r">ref</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">The reference to peel</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">returns</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">code</span><span class="c">&gt;</span><span class="c">ref</span><span class="c">&lt;/</span><span class="c">code</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> if</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">code</span><span class="c">&gt;</span><span class="c">ref.isPeeled()</span><span class="c">&lt;/</span><span class="c">code</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> is true; otherwise a new</span>
		<span class="c">///</span><span class="c"> Ref object representing the same data as Ref, but isPeeled() will</span>
		<span class="c">///</span><span class="c"> be true and getPeeledObjectId() will contain the peeled object</span>
		<span class="c">///</span><span class="c"> (or null).</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">returns</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">exception</span><span class="c"> </span><span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><span class="i n">System</span>.<span class="i n">IO</span>.<a href="@0@mscorlib/A.html#bf546e435199e83c" class="t t">IOException</a><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">the reference space or object space cannot be accessed.</span>
		<span class="c">///</span><span class="c"> 	</span><span class="c">&lt;/</span><span class="c">exception</span><span class="c">&gt;</span>
		<b>public abstract</b> <a href="Ref.cs.html#65afb4684ade4a12" class="t t">Ref</a> <a id="783cf4594a00d843" href="../R/783cf4594a00d843.html" target="n" data-glyph="72,1" class="i method">Peel</a>(<a href="Ref.cs.html#65afb4684ade4a12" class="t t">Ref</a> <span id="r7 rd" class="r7 r">@ref</span>);

		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span><span class="c">Triggers a refresh of all internal data structures.</span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">remarks</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> Triggers a refresh of all internal data structures.</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">p</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> In case the RefDatabase implementation has internal caches this method</span>
		<span class="c">///</span><span class="c"> will trigger that all these caches are cleared.</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">p</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> Implementors should overwrite this method if they use any kind of caches.</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">remarks</span><span class="c">&gt;</span>
		<b>public virtual void</b> <a id="ffedf853de5df9b9" href="../R/ffedf853de5df9b9.html" target="n" data-glyph="72,1" class="i method">Refresh</a>()
		{
		}
		<span class="c">// nothing</span>
	}
}
</pre></td></tr></table></div></body></html>
