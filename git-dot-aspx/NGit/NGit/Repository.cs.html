<!DOCTYPE html>
<html><head><title>Repository.cs</title><link rel="stylesheet" href="../../styles.css"><script src="../../scripts.js"></script></head>
<body class="cB" onload="i(1773);"><div class="dH">
<table style="width: 100%">
<tr><td>File: <a id="filePath" class="blueLink" href="/#NGit/NGit/Repository.cs" target="_top">NGit\Repository.cs</a><br/></td><td></td></tr>
<tr><td>Project: <a id="projectPath" class="blueLink" href="/#NGit" target="_top">lib\NGit\NGit\NGit.csproj</a> (NGit)</td><td></td></tr>
</table>
</div>
<div class="cz"><table class="tb" cellpadding="0" cellspacing="0"><tr><td valign="top" align="right"><pre id="ln"></pre></td><td valign="top" align="left"><pre id="code">
<span class="c">/*
This code is derived from jgit (http://eclipse.org/jgit).
Copyright owners are documented in jgit&#39;s IP log.

This program and the accompanying materials are made available
under the terms of the Eclipse Distribution License v1.0 which
accompanies this distribution, is reproduced below, and is
available at http://www.eclipse.org/org/documents/edl-v10.php

All rights reserved.

Redistribution and use in source and binary forms, with or
without modification, are permitted provided that the following
conditions are met:

- Redistributions of source code must retain the above copyright
  notice, this list of conditions and the following disclaimer.

- Redistributions in binary form must reproduce the above
  copyright notice, this list of conditions and the following
  disclaimer in the documentation and/or other materials provided
  with the distribution.

- Neither the name of the Eclipse Foundation, Inc. nor the
  names of its contributors may be used to endorse or promote
  products derived from this software without specific prior
  written permission.

THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND
CONTRIBUTORS &quot;AS IS&quot; AND ANY EXPRESS OR IMPLIED WARRANTIES,
INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR
CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT
NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER
CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT,
STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF
ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/</span>

<b>using</b> <span class="i n">System</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Collections</span>.<span class="i n">Generic</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">IO</span>;
<b>using</b> <span class="i n">NGit</span>;
<b>using</b> <span class="i n">NGit</span>.<span class="i n">Dircache</span>;
<b>using</b> <span class="i n">NGit</span>.<span class="i n">Errors</span>;
<b>using</b> <span class="i n">NGit</span>.<span class="i n">Events</span>;
<b>using</b> <span class="i n">NGit</span>.<span class="i n">Internal</span>;
<b>using</b> <span class="i n">NGit</span>.<span class="i n">Revwalk</span>;
<b>using</b> <span class="i n">NGit</span>.<span class="i n">Storage</span>.<span class="i n">File</span>;
<b>using</b> <span class="i n">NGit</span>.<span class="i n">Treewalk</span>;
<b>using</b> <span class="i n">NGit</span>.<span class="i n">Util</span>;
<b>using</b> <span class="i n">NGit</span>.<span class="i n">Util</span>.<span class="i n">IO</span>;
<b>using</b> <span class="i n">Sharpen</span>;

<b>namespace</b> <span class="i n">NGit</span>
{
	<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span><span class="c">Represents a Git repository.</span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
	<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">remarks</span><span class="c">&gt;</span>
	<span class="c">///</span><span class="c"> Represents a Git repository.</span>
	<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">p</span><span class="c">&gt;</span>
	<span class="c">///</span><span class="c"> A repository holds all objects and refs used for managing source code (could</span>
	<span class="c">///</span><span class="c"> be any type of file, but source code is what SCM&#39;s are typically used for).</span>
	<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">p</span><span class="c">&gt;</span>
	<span class="c">///</span><span class="c"> This class is thread-safe.</span>
	<span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">remarks</span><span class="c">&gt;</span>
	<b>public abstract class</b> <a id="1e2067e7babb66d2" href="../R/1e2067e7babb66d2.html" target="n" data-glyph="0,0" class="t t">Repository</a>
	{
		<b>private static readonly</b> <a href="../NGit.Events/ListenerList.cs.html#f9c6adff3e02e661" class="t t">ListenerList</a> <a id="44438af2558dc68d" href="../R/44438af2558dc68d.html" target="n" data-glyph="46,1" class="i field">globalListeners</a> = <b>new</b> <a href="../NGit.Events/ListenerList.cs.html#f9c6adff3e02e661" class="t constructor">ListenerList</a>();

		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">returns</span><span class="c">&gt;</span><span class="c">the global listener list observing all events in this JVM.</span><span class="c">&lt;/</span><span class="c">returns</span><span class="c">&gt;</span>
		<b>public static</b> <a href="../NGit.Events/ListenerList.cs.html#f9c6adff3e02e661" class="t t">ListenerList</a> <a id="6c4c44bb7739eb7d" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">GetGlobalListenerList</a>()
		{
			<b>return</b> <a href="#44438af2558dc68d" class="i field">globalListeners</a>;
		}

		<b>private readonly</b> <a href="/Sharpen/A.html#3c3ddcd16426376a" class="t t">AtomicInteger</a> <a id="bc1c24570ce41c4e" href="../R/bc1c24570ce41c4e.html" target="n" data-glyph="46,1" class="i field">useCnt</a> = <b>new</b> <a href="/Sharpen/A.html#137874f1c58142ef" class="t constructor">AtomicInteger</a>(1);

		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span><span class="c">Metadata directory holding the repository&#39;s critical files.</span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">remarks</span><span class="c">&gt;</span><span class="c">Metadata directory holding the repository&#39;s critical files.</span><span class="c">&lt;/</span><span class="c">remarks</span><span class="c">&gt;</span>
		<b>private readonly</b> <a href="/Sharpen/A.html#576a1e6f183e15dd" class="t t">FilePath</a> <a id="ffdf2541a537da50" href="../R/ffdf2541a537da50.html" target="n" data-glyph="46,1" class="i field">gitDir</a>;

		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span><span class="c">File abstraction used to resolve paths.</span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">remarks</span><span class="c">&gt;</span><span class="c">File abstraction used to resolve paths.</span><span class="c">&lt;/</span><span class="c">remarks</span><span class="c">&gt;</span>
		<b>private readonly</b> <a href="../NGit.Util/FS.cs.html#e131ecdeb2edce2f" class="t t">FS</a> <a id="b211da3b46ec6b88" href="../R/b211da3b46ec6b88.html" target="n" data-glyph="46,1" class="i field">fs</a>;

		<b>private readonly</b> <a href="../NGit.Events/ListenerList.cs.html#f9c6adff3e02e661" class="t t">ListenerList</a> <a id="81101c8ddbf5564b" href="../R/81101c8ddbf5564b.html" target="n" data-glyph="46,1" class="i field">myListeners</a> = <b>new</b> <a href="../NGit.Events/ListenerList.cs.html#f9c6adff3e02e661" class="t constructor">ListenerList</a>();

		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span><span class="c">If not bare, the top level directory of the working files.</span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">remarks</span><span class="c">&gt;</span><span class="c">If not bare, the top level directory of the working files.</span><span class="c">&lt;/</span><span class="c">remarks</span><span class="c">&gt;</span>
		<b>private readonly</b> <a href="/Sharpen/A.html#576a1e6f183e15dd" class="t t">FilePath</a> <a id="1c5ae0b8e2291faa" href="../R/1c5ae0b8e2291faa.html" target="n" data-glyph="46,1" class="i field">workTree</a>;

		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span><span class="c">If not bare, the index file caching the working file states.</span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">remarks</span><span class="c">&gt;</span><span class="c">If not bare, the index file caching the working file states.</span><span class="c">&lt;/</span><span class="c">remarks</span><span class="c">&gt;</span>
		<b>private readonly</b> <a href="/Sharpen/A.html#576a1e6f183e15dd" class="t t">FilePath</a> <a id="67628f56eb2139e9" href="../R/67628f56eb2139e9.html" target="n" data-glyph="46,1" class="i field">indexFile</a>;

		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span><span class="c">Initialize a new repository instance.</span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">remarks</span><span class="c">&gt;</span><span class="c">Initialize a new repository instance.</span><span class="c">&lt;/</span><span class="c">remarks</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span><span class="c"> </span><span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r0 r">options</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">options to configure the repository.</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
		<b>protected internal</b> <a id="ff596603b1459c85" href="../R/ff596603b1459c85.html" target="n" data-glyph="75,1" class="i constructor">Repository</a>(<a href="BaseRepositoryBuilder.cs.html#d831471914af0568" class="t t">BaseRepositoryBuilder</a> <span id="r0 rd" class="r0 r">options</span>)
		{
			<a href="#ffdf2541a537da50" class="i field">gitDir</a> = <span class="r0 r">options</span>.<a href="BaseRepositoryBuilder.cs.html#6dedb8b8b48a29d9" class="i method">GetGitDir</a>();
			<a href="#b211da3b46ec6b88" class="i field">fs</a> = <span class="r0 r">options</span>.<a href="BaseRepositoryBuilder.cs.html#72cb2922158cc2cb" class="i method">GetFS</a>();
			<a href="#1c5ae0b8e2291faa" class="i field">workTree</a> = <span class="r0 r">options</span>.<a href="BaseRepositoryBuilder.cs.html#a6703f9f61f340dc" class="i method">GetWorkTree</a>();
			<a href="#67628f56eb2139e9" class="i field">indexFile</a> = <span class="r0 r">options</span>.<a href="BaseRepositoryBuilder.cs.html#2b721b09fdf2cc60" class="i method">GetIndexFile</a>();
		}

		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">returns</span><span class="c">&gt;</span><span class="c">listeners observing only events on this repository.</span><span class="c">&lt;/</span><span class="c">returns</span><span class="c">&gt;</span>
		<b>public virtual</b> <a href="../NGit.Events/ListenerList.cs.html#f9c6adff3e02e661" class="t t">ListenerList</a> <a id="b6c8b803ad84f427" href="../R/../../0000000000.html" target="n" data-glyph="102,1" class="i property">Listeners</a>
		{
			<b>get</b>
			{
				<b>return</b> <a href="#81101c8ddbf5564b" class="i field">myListeners</a>;
			}
		}

		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span><span class="c">Fire an event to all registered listeners.</span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">remarks</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> Fire an event to all registered listeners.</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">p</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> The source repository of the event is automatically set to this</span>
		<span class="c">///</span><span class="c"> repository, before the event is delivered to any listeners.</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">remarks</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span><span class="c"> </span><span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r1 r">event</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">the event to deliver.</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
		<b>public virtual void</b> <a id="996eb11bb194bed7" href="../R/996eb11bb194bed7.html" target="n" data-glyph="72,1" class="i method">FireEvent</a>&lt;<span id="r2 rd t" class="r2 r t">_T0</span>&gt;(<a href="../NGit.Events/RepositoryEvent.cs.html#34981a3207b9d4e4" class="t t">RepositoryEvent</a>&lt;<span class="r2 r t">_T0</span>&gt; <span id="r1 rd" class="r1 r">@event</span>) <b>where</b> <span class="r2 r t">_T0</span>:<a href="../NGit.Events/RepositoryListener.cs.html#2f7575786aa458f7" class="t t">RepositoryListener</a>
		{
			<span class="r1 r">@event</span>.<a href="../NGit.Events/RepositoryEvent.cs.html#6f7d212995a7f935" class="i method">SetRepository</a>(<a href="#1e2067e7babb66d2" class="k">this</a>);
			<a href="#81101c8ddbf5564b" class="i field">myListeners</a>.<a href="../NGit.Events/ListenerList.cs.html#b76745c91597245c" class="i method">Dispatch</a>(<span class="r1 r">@event</span>);
			<a href="#44438af2558dc68d" class="i field">globalListeners</a>.<a href="../NGit.Events/ListenerList.cs.html#b76745c91597245c" class="i method">Dispatch</a>(<span class="r1 r">@event</span>);
		}

		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span><span class="c">Create a new Git repository.</span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">remarks</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> Create a new Git repository.</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">p</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> Repository with working tree is created using this method. This method is</span>
		<span class="c">///</span><span class="c"> the same as</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">code</span><span class="c">&gt;</span><span class="c">create(false)</span><span class="c">&lt;/</span><span class="c">code</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> .</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">remarks</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">exception</span><span class="c"> </span><span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><span class="i n">System</span>.<span class="i n">IO</span>.<a href="@0@mscorlib/A.html#bf546e435199e83c" class="t t">IOException</a><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">System.IO.IOException</span><span class="c">&lt;/</span><span class="c">exception</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">seealso</span><span class="c"> </span><span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="#ecf6ff24220e231e" class="i method">Create</a>(<b>bool</b>)<span class="c">&quot;</span><span class="c">&gt;</span><span class="c">Create(bool)</span><span class="c">&lt;/</span><span class="c">seealso</span><span class="c">&gt;</span>
		<b>public virtual void</b> <a id="02f642b73fd76acd" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">Create</a>()
		{
			<a href="#ecf6ff24220e231e" class="i method">Create</a>(<b>false</b>);
		}

		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> Create a new Git repository initializing the necessary files and</span>
		<span class="c">///</span><span class="c"> directories.</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">remarks</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> Create a new Git repository initializing the necessary files and</span>
		<span class="c">///</span><span class="c"> directories.</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">remarks</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span><span class="c"> </span><span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r3 r">bare</span><span class="c">&quot;</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> if true, a bare repository (a repository without a working</span>
		<span class="c">///</span><span class="c"> directory) is created.</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">exception</span><span class="c"> </span><span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><span class="i n">System</span>.<span class="i n">IO</span>.<a href="@0@mscorlib/A.html#bf546e435199e83c" class="t t">IOException</a><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">in case of IO problem</span><span class="c">&lt;/</span><span class="c">exception</span><span class="c">&gt;</span>
		<b>public abstract void</b> <a id="ecf6ff24220e231e" href="../R/ecf6ff24220e231e.html" target="n" data-glyph="72,1" class="i method">Create</a>(<b>bool</b> <span id="r3 rd" class="r3 r">bare</span>);

		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">returns</span><span class="c">&gt;</span><span class="c">local metadata directory; null if repository isn&#39;t local.</span><span class="c">&lt;/</span><span class="c">returns</span><span class="c">&gt;</span>
		<b>public virtual</b> <a href="/Sharpen/A.html#576a1e6f183e15dd" class="t t">FilePath</a> <a id="1cdf65c5d26abd34" href="../R/1cdf65c5d26abd34.html" target="n" data-glyph="102,1" class="i property">Directory</a>
		{
			<b>get</b>
			{
				<b>return</b> <a href="#ffdf2541a537da50" class="i field">gitDir</a>;
			}
		}

		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">returns</span><span class="c">&gt;</span><span class="c">the object database which stores this repository&#39;s data.</span><span class="c">&lt;/</span><span class="c">returns</span><span class="c">&gt;</span>
		<b>public abstract</b> <span class="i n">NGit</span>.<a href="ObjectDatabase.cs.html#008098fa3f2fdd6a" class="t t">ObjectDatabase</a> <a id="82d582041e6a7be3" href="../R/82d582041e6a7be3.html" target="n" data-glyph="102,1" class="i property">ObjectDatabase</a>
		{
			<b>get</b>;
		}

		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">returns</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> a new inserter to create objects in</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">see</span><span class="c"> </span><span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="#82d582041e6a7be3" class="i property">ObjectDatabase</a>()<span class="c">&quot;</span><span class="c">&gt;</span><span class="c">ObjectDatabase()</span><span class="c">&lt;/</span><span class="c">see</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">returns</span><span class="c">&gt;</span>
		<b>public virtual</b> <a href="ObjectInserter.cs.html#f245fd0ba211832f" class="t t">ObjectInserter</a> <a id="eabc65c069acaa26" href="../R/eabc65c069acaa26.html" target="n" data-glyph="72,1" class="i method">NewObjectInserter</a>()
		{
			<b>return</b> <a href="#82d582041e6a7be3" class="i property">ObjectDatabase</a>.<a href="ObjectDatabase.cs.html#8ace771ba2b5ac8f" class="i method">NewInserter</a>();
		}

		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">returns</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> a new reader to read objects from</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">see</span><span class="c"> </span><span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="#82d582041e6a7be3" class="i property">ObjectDatabase</a>()<span class="c">&quot;</span><span class="c">&gt;</span><span class="c">ObjectDatabase()</span><span class="c">&lt;/</span><span class="c">see</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">returns</span><span class="c">&gt;</span>
		<b>public virtual</b> <a href="ObjectReader.cs.html#c7891701ba17c6fc" class="t t">ObjectReader</a> <a id="3a94c2b862584307" href="../R/3a94c2b862584307.html" target="n" data-glyph="72,1" class="i method">NewObjectReader</a>()
		{
			<b>return</b> <a href="#82d582041e6a7be3" class="i property">ObjectDatabase</a>.<a href="ObjectDatabase.cs.html#b19b090cebcc1940" class="i method">NewReader</a>();
		}

		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">returns</span><span class="c">&gt;</span><span class="c">the reference database which stores the reference namespace.</span><span class="c">&lt;/</span><span class="c">returns</span><span class="c">&gt;</span>
		<b>public abstract</b> <span class="i n">NGit</span>.<a href="RefDatabase.cs.html#a8335c0f37d2d313" class="t t">RefDatabase</a> <a id="17810c303938d892" href="../R/17810c303938d892.html" target="n" data-glyph="102,1" class="i property">RefDatabase</a>
		{
			<b>get</b>;
		}

		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">returns</span><span class="c">&gt;</span><span class="c">the configuration of this repository</span><span class="c">&lt;/</span><span class="c">returns</span><span class="c">&gt;</span>
		<b>public abstract</b> <a href="StoredConfig.cs.html#7f4ef6d46ca0d942" class="t t">StoredConfig</a> <a id="92534c7d0a3b9913" href="../R/92534c7d0a3b9913.html" target="n" data-glyph="72,1" class="i method">GetConfig</a>();

		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">returns</span><span class="c">&gt;</span><span class="c">the used file system abstraction</span><span class="c">&lt;/</span><span class="c">returns</span><span class="c">&gt;</span>
		<b>public virtual</b> <a href="../NGit.Util/FS.cs.html#e131ecdeb2edce2f" class="t t">FS</a> <a id="d1abf7dc4ca536a9" href="../R/d1abf7dc4ca536a9.html" target="n" data-glyph="102,1" class="i property">FileSystem</a>
		{
			<b>get</b>
			{
				<b>return</b> <a href="#b211da3b46ec6b88" class="i field">fs</a>;
			}
		}

		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span><span class="c"> </span><span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r4 r">objectId</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">returns</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> true if the specified object is stored in this repo or any of the</span>
		<span class="c">///</span><span class="c"> known shared repositories.</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">returns</span><span class="c">&gt;</span>
		<b>public virtual bool</b> <a id="c8b9db3a70555b1d" href="../R/c8b9db3a70555b1d.html" target="n" data-glyph="72,1" class="i method">HasObject</a>(<a href="AnyObjectId.cs.html#648f486449087471" class="t t">AnyObjectId</a> <span id="r4 rd" class="r4 r">objectId</span>)
		{
			<b>try</b>
			{
				<b>return</b> <a href="#82d582041e6a7be3" class="i property">ObjectDatabase</a>.<a href="ObjectDatabase.cs.html#43abd880d3f08449" class="i method">Has</a>(<span class="r4 r">objectId</span>);
			}
			<b>catch</b> (<a href="@0@mscorlib/A.html#bf546e435199e83c" class="t t">IOException</a>)
			{
				<span class="c">// Legacy API, assume error means &quot;no&quot;</span>
				<b>return false</b>;
			}
		}

		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span><span class="c">Open an object from this repository.</span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">remarks</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> Open an object from this repository.</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">p</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> This is a one-shot call interface which may be faster than allocating a</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">see</span><span class="c"> </span><span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="#3a94c2b862584307" class="i method">NewObjectReader</a>()<span class="c">&quot;</span><span class="c">&gt;</span><span class="c">NewObjectReader()</span><span class="c">&lt;/</span><span class="c">see</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> to perform the lookup.</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">remarks</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span><span class="c"> </span><span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r5 r">objectId</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">identity of the object to open.</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">returns</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> a</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">see</span><span class="c"> </span><span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="ObjectLoader.cs.html#3278691da2df9ac1" class="t t">ObjectLoader</a><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">ObjectLoader</span><span class="c">&lt;/</span><span class="c">see</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> for accessing the object.</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">returns</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">exception</span><span class="c"> </span><span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><span class="i n">NGit</span>.<span class="i n">Errors</span>.<a href="../NGit.Errors/MissingObjectException.cs.html#01009483d28da410" class="t t">MissingObjectException</a><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">the object does not exist.</span><span class="c">&lt;/</span><span class="c">exception</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">exception</span><span class="c"> </span><span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><span class="i n">System</span>.<span class="i n">IO</span>.<a href="@0@mscorlib/A.html#bf546e435199e83c" class="t t">IOException</a><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">the object store cannot be accessed.</span><span class="c">&lt;/</span><span class="c">exception</span><span class="c">&gt;</span>
		<b>public virtual</b> <a href="ObjectLoader.cs.html#3278691da2df9ac1" class="t t">ObjectLoader</a> <a id="b982ba7928dda26a" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">Open</a>(<a href="AnyObjectId.cs.html#648f486449087471" class="t t">AnyObjectId</a> <span id="r5 rd" class="r5 r">objectId</span>)
		{
			<b>return</b> <a href="#82d582041e6a7be3" class="i property">ObjectDatabase</a>.<a href="ObjectDatabase.cs.html#f05e5d8559bec221" class="i method">Open</a>(<span class="r5 r">objectId</span>);
		}

		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span><span class="c">Open an object from this repository.</span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">remarks</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> Open an object from this repository.</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">p</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> This is a one-shot call interface which may be faster than allocating a</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">see</span><span class="c"> </span><span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="#3a94c2b862584307" class="i method">NewObjectReader</a>()<span class="c">&quot;</span><span class="c">&gt;</span><span class="c">NewObjectReader()</span><span class="c">&lt;/</span><span class="c">see</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> to perform the lookup.</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">remarks</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span><span class="c"> </span><span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r6 r">objectId</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">identity of the object to open.</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span><span class="c"> </span><span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r7 r">typeHint</span><span class="c">&quot;</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> hint about the type of object being requested;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">see</span><span class="c"> </span><span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="ObjectReader.cs.html#c7891701ba17c6fc" class="t t">ObjectReader</a>.<a href="ObjectReader.cs.html#dd8957dd153e9874" class="i field">OBJ_ANY</a><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">ObjectReader.OBJ_ANY</span><span class="c">&lt;/</span><span class="c">see</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> if the object type is not known,</span>
		<span class="c">///</span><span class="c"> or does not matter to the caller.</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">returns</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> a</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">see</span><span class="c"> </span><span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="ObjectLoader.cs.html#3278691da2df9ac1" class="t t">ObjectLoader</a><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">ObjectLoader</span><span class="c">&lt;/</span><span class="c">see</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> for accessing the object.</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">returns</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">exception</span><span class="c"> </span><span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><span class="i n">NGit</span>.<span class="i n">Errors</span>.<a href="../NGit.Errors/MissingObjectException.cs.html#01009483d28da410" class="t t">MissingObjectException</a><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">the object does not exist.</span><span class="c">&lt;/</span><span class="c">exception</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">exception</span><span class="c"> </span><span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><span class="i n">NGit</span>.<span class="i n">Errors</span>.<a href="../NGit.Errors/IncorrectObjectTypeException.cs.html#7a5fb726328ac329" class="t t">IncorrectObjectTypeException</a><span class="c">&quot;</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> typeHint was not OBJ_ANY, and the object&#39;s actual type does</span>
		<span class="c">///</span><span class="c"> not match typeHint.</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">exception</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">exception</span><span class="c"> </span><span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><span class="i n">System</span>.<span class="i n">IO</span>.<a href="@0@mscorlib/A.html#bf546e435199e83c" class="t t">IOException</a><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">the object store cannot be accessed.</span><span class="c">&lt;/</span><span class="c">exception</span><span class="c">&gt;</span>
		<b>public virtual</b> <a href="ObjectLoader.cs.html#3278691da2df9ac1" class="t t">ObjectLoader</a> <a id="2c77a365c4bc0175" href="../R/2c77a365c4bc0175.html" target="n" data-glyph="72,1" class="i method">Open</a>(<a href="AnyObjectId.cs.html#648f486449087471" class="t t">AnyObjectId</a> <span id="r6 rd" class="r6 r">objectId</span>, <b>int</b> <span id="r7 rd" class="r7 r">typeHint</span>)
		{
			<b>return</b> <a href="#82d582041e6a7be3" class="i property">ObjectDatabase</a>.<a href="ObjectDatabase.cs.html#51f6869eac364815" class="i method">Open</a>(<span class="r6 r">objectId</span>, <span class="r7 r">typeHint</span>);
		}

		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span><span class="c">Create a command to update, create or delete a ref in this repository.</span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">remarks</span><span class="c">&gt;</span><span class="c">Create a command to update, create or delete a ref in this repository.</span><span class="c">&lt;/</span><span class="c">remarks</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span><span class="c"> </span><span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r8 r">ref</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">name of the ref the caller wants to modify.</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">returns</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> an update command. The caller must finish populating this command</span>
		<span class="c">///</span><span class="c"> and then invoke one of the update methods to actually make a</span>
		<span class="c">///</span><span class="c"> change.</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">returns</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">exception</span><span class="c"> </span><span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><span class="i n">System</span>.<span class="i n">IO</span>.<a href="@0@mscorlib/A.html#bf546e435199e83c" class="t t">IOException</a><span class="c">&quot;</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> a symbolic ref was passed in and could not be resolved back</span>
		<span class="c">///</span><span class="c"> to the base ref, as the symbolic ref could not be read.</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">exception</span><span class="c">&gt;</span>
		<b>public virtual</b> <a href="RefUpdate.cs.html#2164cd1d8095d95b" class="t t">RefUpdate</a> <a id="e507581ff50608bc" href="../R/e507581ff50608bc.html" target="n" data-glyph="72,1" class="i method">UpdateRef</a>(<b>string</b> <span id="r8 rd" class="r8 r">@ref</span>)
		{
			<b>return</b> <a href="#27aa83b646df120f" class="i method">UpdateRef</a>(<span class="r8 r">@ref</span>, <b>false</b>);
		}

		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span><span class="c">Create a command to update, create or delete a ref in this repository.</span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">remarks</span><span class="c">&gt;</span><span class="c">Create a command to update, create or delete a ref in this repository.</span><span class="c">&lt;/</span><span class="c">remarks</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span><span class="c"> </span><span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r9 r">ref</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">name of the ref the caller wants to modify.</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span><span class="c"> </span><span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r10 r">detach</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">true to create a detached head</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">returns</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> an update command. The caller must finish populating this command</span>
		<span class="c">///</span><span class="c"> and then invoke one of the update methods to actually make a</span>
		<span class="c">///</span><span class="c"> change.</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">returns</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">exception</span><span class="c"> </span><span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><span class="i n">System</span>.<span class="i n">IO</span>.<a href="@0@mscorlib/A.html#bf546e435199e83c" class="t t">IOException</a><span class="c">&quot;</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> a symbolic ref was passed in and could not be resolved back</span>
		<span class="c">///</span><span class="c"> to the base ref, as the symbolic ref could not be read.</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">exception</span><span class="c">&gt;</span>
		<b>public virtual</b> <a href="RefUpdate.cs.html#2164cd1d8095d95b" class="t t">RefUpdate</a> <a id="27aa83b646df120f" href="../R/27aa83b646df120f.html" target="n" data-glyph="72,1" class="i method">UpdateRef</a>(<b>string</b> <span id="r9 rd" class="r9 r">@ref</span>, <b>bool</b> <span id="r10 rd" class="r10 r">detach</span>)
		{
			<b>return</b> <a href="#17810c303938d892" class="i property">RefDatabase</a>.<a href="RefDatabase.cs.html#8cba2ad0231455ba" class="i method">NewUpdate</a>(<span class="r9 r">@ref</span>, <span class="r10 r">detach</span>);
		}

		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span><span class="c">Create a command to rename a ref in this repository</span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span><span class="c"> </span><span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r11 r">fromRef</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">name of ref to rename from</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span><span class="c"> </span><span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r12 r">toRef</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">name of ref to rename to</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">returns</span><span class="c">&gt;</span><span class="c">an update command that knows how to rename a branch to another.</span><span class="c">&lt;/</span><span class="c">returns</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">exception</span><span class="c"> </span><span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><span class="i n">System</span>.<span class="i n">IO</span>.<a href="@0@mscorlib/A.html#bf546e435199e83c" class="t t">IOException</a><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">the rename could not be performed.</span><span class="c">&lt;/</span><span class="c">exception</span><span class="c">&gt;</span>
		<b>public virtual</b> <a href="RefRename.cs.html#7b893f0c52d73198" class="t t">RefRename</a> <a id="15e9f86bd8732735" href="../R/15e9f86bd8732735.html" target="n" data-glyph="72,1" class="i method">RenameRef</a>(<b>string</b> <span id="r11 rd" class="r11 r">fromRef</span>, <b>string</b> <span id="r12 rd" class="r12 r">toRef</span>)
		{
			<b>return</b> <a href="#17810c303938d892" class="i property">RefDatabase</a>.<a href="RefDatabase.cs.html#82f70d6b03d4e1eb" class="i method">NewRename</a>(<span class="r11 r">fromRef</span>, <span class="r12 r">toRef</span>);
		}

		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span><span class="c">Parse a git revision string and return an object id.</span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">remarks</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> Parse a git revision string and return an object id.</span>
		<span class="c">///</span><span class="c"> Combinations of these operators are supported:</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">ul</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">li</span><span class="c">&gt;</span><span class="c">&lt;</span><span class="c">b</span><span class="c">&gt;</span><span class="c">HEAD</span><span class="c">&lt;/</span><span class="c">b</span><span class="c">&gt;</span><span class="c">, </span><span class="c">&lt;</span><span class="c">b</span><span class="c">&gt;</span><span class="c">MERGE_HEAD</span><span class="c">&lt;/</span><span class="c">b</span><span class="c">&gt;</span><span class="c">, </span><span class="c">&lt;</span><span class="c">b</span><span class="c">&gt;</span><span class="c">FETCH_HEAD</span><span class="c">&lt;/</span><span class="c">b</span><span class="c">&gt;</span><span class="c">&lt;/</span><span class="c">li</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">li</span><span class="c">&gt;</span><span class="c">&lt;</span><span class="c">b</span><span class="c">&gt;</span><span class="c">SHA-1</span><span class="c">&lt;/</span><span class="c">b</span><span class="c">&gt;</span><span class="c">: a complete or abbreviated SHA-1</span><span class="c">&lt;/</span><span class="c">li</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">li</span><span class="c">&gt;</span><span class="c">&lt;</span><span class="c">b</span><span class="c">&gt;</span><span class="c">refs/...</span><span class="c">&lt;/</span><span class="c">b</span><span class="c">&gt;</span><span class="c">: a complete reference name</span><span class="c">&lt;/</span><span class="c">li</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">li</span><span class="c">&gt;</span><span class="c">&lt;</span><span class="c">b</span><span class="c">&gt;</span><span class="c">short-name</span><span class="c">&lt;/</span><span class="c">b</span><span class="c">&gt;</span><span class="c">: a short reference name under</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">code</span><span class="c">&gt;</span><span class="c">refs/heads</span><span class="c">&lt;/</span><span class="c">code</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> ,</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">code</span><span class="c">&gt;</span><span class="c">refs/tags</span><span class="c">&lt;/</span><span class="c">code</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> , or</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">code</span><span class="c">&gt;</span><span class="c">refs/remotes</span><span class="c">&lt;/</span><span class="c">code</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> namespace</span><span class="c">&lt;/</span><span class="c">li</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">li</span><span class="c">&gt;</span><span class="c">&lt;</span><span class="c">b</span><span class="c">&gt;</span><span class="c">tag-NN-gABBREV</span><span class="c">&lt;/</span><span class="c">b</span><span class="c">&gt;</span><span class="c">: output from describe, parsed by treating</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">code</span><span class="c">&gt;</span><span class="c">ABBREV</span><span class="c">&lt;/</span><span class="c">code</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> as an abbreviated SHA-1.</span><span class="c">&lt;/</span><span class="c">li</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">li</span><span class="c">&gt;</span><span class="c">&lt;</span><span class="c">i</span><span class="c">&gt;</span><span class="c">id</span><span class="c">&lt;/</span><span class="c">i</span><span class="c">&gt;</span><span class="c">&lt;</span><span class="c">b</span><span class="c">&gt;</span><span class="c">^</span><span class="c">&lt;/</span><span class="c">b</span><span class="c">&gt;</span><span class="c">: first parent of commit </span><span class="c">&lt;</span><span class="c">i</span><span class="c">&gt;</span><span class="c">id</span><span class="c">&lt;/</span><span class="c">i</span><span class="c">&gt;</span><span class="c">, this is the same</span>
		<span class="c">///</span><span class="c"> as</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">code</span><span class="c">&gt;</span><span class="c">id^1</span><span class="c">&lt;/</span><span class="c">code</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">li</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">li</span><span class="c">&gt;</span><span class="c">&lt;</span><span class="c">i</span><span class="c">&gt;</span><span class="c">id</span><span class="c">&lt;/</span><span class="c">i</span><span class="c">&gt;</span><span class="c">&lt;</span><span class="c">b</span><span class="c">&gt;</span><span class="c">^0</span><span class="c">&lt;/</span><span class="c">b</span><span class="c">&gt;</span><span class="c">: ensure </span><span class="c">&lt;</span><span class="c">i</span><span class="c">&gt;</span><span class="c">id</span><span class="c">&lt;/</span><span class="c">i</span><span class="c">&gt;</span><span class="c"> is a commit</span><span class="c">&lt;/</span><span class="c">li</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">li</span><span class="c">&gt;</span><span class="c">&lt;</span><span class="c">i</span><span class="c">&gt;</span><span class="c">id</span><span class="c">&lt;/</span><span class="c">i</span><span class="c">&gt;</span><span class="c">&lt;</span><span class="c">b</span><span class="c">&gt;</span><span class="c">^n</span><span class="c">&lt;/</span><span class="c">b</span><span class="c">&gt;</span><span class="c">: n-th parent of commit </span><span class="c">&lt;</span><span class="c">i</span><span class="c">&gt;</span><span class="c">id</span><span class="c">&lt;/</span><span class="c">i</span><span class="c">&gt;</span><span class="c">&lt;/</span><span class="c">li</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">li</span><span class="c">&gt;</span><span class="c">&lt;</span><span class="c">i</span><span class="c">&gt;</span><span class="c">id</span><span class="c">&lt;/</span><span class="c">i</span><span class="c">&gt;</span><span class="c">&lt;</span><span class="c">b</span><span class="c">&gt;</span><span class="c">~n</span><span class="c">&lt;/</span><span class="c">b</span><span class="c">&gt;</span><span class="c">: n-th historical ancestor of </span><span class="c">&lt;</span><span class="c">i</span><span class="c">&gt;</span><span class="c">id</span><span class="c">&lt;/</span><span class="c">i</span><span class="c">&gt;</span><span class="c">, by first</span>
		<span class="c">///</span><span class="c"> parent.</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">code</span><span class="c">&gt;</span><span class="c">id~3</span><span class="c">&lt;/</span><span class="c">code</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> is equivalent to</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">code</span><span class="c">&gt;</span><span class="c">id^1^1^1</span><span class="c">&lt;/</span><span class="c">code</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> or</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">code</span><span class="c">&gt;</span><span class="c">id^^^</span><span class="c">&lt;/</span><span class="c">code</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> .</span><span class="c">&lt;/</span><span class="c">li</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">li</span><span class="c">&gt;</span><span class="c">&lt;</span><span class="c">i</span><span class="c">&gt;</span><span class="c">id</span><span class="c">&lt;/</span><span class="c">i</span><span class="c">&gt;</span><span class="c">&lt;</span><span class="c">b</span><span class="c">&gt;</span><span class="c">:path</span><span class="c">&lt;/</span><span class="c">b</span><span class="c">&gt;</span><span class="c">: Lookup path under tree named by </span><span class="c">&lt;</span><span class="c">i</span><span class="c">&gt;</span><span class="c">id</span><span class="c">&lt;/</span><span class="c">i</span><span class="c">&gt;</span><span class="c">&lt;/</span><span class="c">li</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">li</span><span class="c">&gt;</span><span class="c">&lt;</span><span class="c">i</span><span class="c">&gt;</span><span class="c">id</span><span class="c">&lt;/</span><span class="c">i</span><span class="c">&gt;</span><span class="c">&lt;</span><span class="c">b</span><span class="c">&gt;</span><span class="c">^{commit}</span><span class="c">&lt;/</span><span class="c">b</span><span class="c">&gt;</span><span class="c">: ensure </span><span class="c">&lt;</span><span class="c">i</span><span class="c">&gt;</span><span class="c">id</span><span class="c">&lt;/</span><span class="c">i</span><span class="c">&gt;</span><span class="c"> is a commit</span><span class="c">&lt;/</span><span class="c">li</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">li</span><span class="c">&gt;</span><span class="c">&lt;</span><span class="c">i</span><span class="c">&gt;</span><span class="c">id</span><span class="c">&lt;/</span><span class="c">i</span><span class="c">&gt;</span><span class="c">&lt;</span><span class="c">b</span><span class="c">&gt;</span><span class="c">^{tree}</span><span class="c">&lt;/</span><span class="c">b</span><span class="c">&gt;</span><span class="c">: ensure </span><span class="c">&lt;</span><span class="c">i</span><span class="c">&gt;</span><span class="c">id</span><span class="c">&lt;/</span><span class="c">i</span><span class="c">&gt;</span><span class="c"> is a tree</span><span class="c">&lt;/</span><span class="c">li</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">li</span><span class="c">&gt;</span><span class="c">&lt;</span><span class="c">i</span><span class="c">&gt;</span><span class="c">id</span><span class="c">&lt;/</span><span class="c">i</span><span class="c">&gt;</span><span class="c">&lt;</span><span class="c">b</span><span class="c">&gt;</span><span class="c">^{tag}</span><span class="c">&lt;/</span><span class="c">b</span><span class="c">&gt;</span><span class="c">: ensure </span><span class="c">&lt;</span><span class="c">i</span><span class="c">&gt;</span><span class="c">id</span><span class="c">&lt;/</span><span class="c">i</span><span class="c">&gt;</span><span class="c"> is a tag</span><span class="c">&lt;/</span><span class="c">li</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">li</span><span class="c">&gt;</span><span class="c">&lt;</span><span class="c">i</span><span class="c">&gt;</span><span class="c">id</span><span class="c">&lt;/</span><span class="c">i</span><span class="c">&gt;</span><span class="c">&lt;</span><span class="c">b</span><span class="c">&gt;</span><span class="c">^{blob}</span><span class="c">&lt;/</span><span class="c">b</span><span class="c">&gt;</span><span class="c">: ensure </span><span class="c">&lt;</span><span class="c">i</span><span class="c">&gt;</span><span class="c">id</span><span class="c">&lt;/</span><span class="c">i</span><span class="c">&gt;</span><span class="c"> is a blob</span><span class="c">&lt;/</span><span class="c">li</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">ul</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">p</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> The following operators are specified by Git conventions, but are not</span>
		<span class="c">///</span><span class="c"> supported by this method:</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">ul</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">li</span><span class="c">&gt;</span><span class="c">&lt;</span><span class="c">b</span><span class="c">&gt;</span><span class="c">ref@{n}</span><span class="c">&lt;/</span><span class="c">b</span><span class="c">&gt;</span><span class="c">: n-th version of ref as given by its reflog</span><span class="c">&lt;/</span><span class="c">li</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">li</span><span class="c">&gt;</span><span class="c">&lt;</span><span class="c">b</span><span class="c">&gt;</span><span class="c">ref@{time}</span><span class="c">&lt;/</span><span class="c">b</span><span class="c">&gt;</span><span class="c">: value of ref at the designated time</span><span class="c">&lt;/</span><span class="c">li</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">ul</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">remarks</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span><span class="c"> </span><span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r13 r">revstr</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">A git object references expression</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">returns</span><span class="c">&gt;</span><span class="c">an ObjectId or null if revstr can&#39;t be resolved to any ObjectId</span><span class="c">&lt;/</span><span class="c">returns</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">exception</span><span class="c"> </span><span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><span class="i n">NGit</span>.<span class="i n">Errors</span>.<a href="../NGit.Errors/AmbiguousObjectException.cs.html#3dec36ac85c47aad" class="t t">AmbiguousObjectException</a><span class="c">&quot;</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">code</span><span class="c">&gt;</span><span class="c">revstr</span><span class="c">&lt;/</span><span class="c">code</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> contains an abbreviated ObjectId and this</span>
		<span class="c">///</span><span class="c"> repository contains more than one object which match to the</span>
		<span class="c">///</span><span class="c"> input abbreviation.</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">exception</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">exception</span><span class="c"> </span><span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><span class="i n">NGit</span>.<span class="i n">Errors</span>.<a href="../NGit.Errors/IncorrectObjectTypeException.cs.html#7a5fb726328ac329" class="t t">IncorrectObjectTypeException</a><span class="c">&quot;</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> the id parsed does not meet the type required to finish</span>
		<span class="c">///</span><span class="c"> applying the operators in the expression.</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">exception</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">exception</span><span class="c"> </span><span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><span class="i n">NGit</span>.<span class="i n">Errors</span>.<a href="../NGit.Errors/RevisionSyntaxException.cs.html#1da80f12c97c80db" class="t t">RevisionSyntaxException</a><span class="c">&quot;</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> the expression is not supported by this implementation, or</span>
		<span class="c">///</span><span class="c"> does not meet the standard syntax.</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">exception</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">exception</span><span class="c"> </span><span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><span class="i n">System</span>.<span class="i n">IO</span>.<a href="@0@mscorlib/A.html#bf546e435199e83c" class="t t">IOException</a><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">on serious errors</span><span class="c">&lt;/</span><span class="c">exception</span><span class="c">&gt;</span>
		<b>public virtual</b> <a href="ObjectId.cs.html#96e3af3718f0610d" class="t t">ObjectId</a> <a id="84eaed22f4fbf444" href="../R/84eaed22f4fbf444.html" target="n" data-glyph="72,1" class="i method">Resolve</a>(<b>string</b> <span id="r13 rd" class="r13 r">revstr</span>)
		{
			<a href="../NGit.Revwalk/RevWalk.cs.html#730aa25095d36889" class="t t">RevWalk</a> <span id="r14 rd" class="r14 r">rw</span> = <b>new</b> <a href="../NGit.Revwalk/RevWalk.cs.html#fb1794e6d30392bc" class="t constructor">RevWalk</a>(<a href="#1e2067e7babb66d2" class="k">this</a>);
			<b>try</b>
			{
				<b>return</b> <a href="#14257c34e702b262" class="i method">Resolve</a>(<span class="r14 r">rw</span>, <span class="r13 r">revstr</span>);
			}
			<b>finally</b>
			{
				<span class="r14 r">rw</span>.<a href="../NGit.Revwalk/RevWalk.cs.html#dd5a1455686b5e60" class="i method">Release</a>();
			}
		}

		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">exception</span><span class="c"> </span><span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><span class="i n">System</span>.<span class="i n">IO</span>.<a href="@0@mscorlib/A.html#bf546e435199e83c" class="t t">IOException</a><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">&lt;/</span><span class="c">exception</span><span class="c">&gt;</span>
		<b>private</b> <a href="ObjectId.cs.html#96e3af3718f0610d" class="t t">ObjectId</a> <a id="14257c34e702b262" href="../R/14257c34e702b262.html" target="n" data-glyph="76,1" class="i method">Resolve</a>(<a href="../NGit.Revwalk/RevWalk.cs.html#730aa25095d36889" class="t t">RevWalk</a> <span id="r15 rd" class="r15 r">rw</span>, <b>string</b> <span id="r16 rd" class="r16 r">revstr</span>)
		{
			<b>char</b>[] <span id="r17 rd" class="r17 r">rev</span> = <span class="r16 r">revstr</span>.<a href="@0@mscorlib/A.html#81c2d980f5d0ee35" class="i method">ToCharArray</a>();
			<a href="../NGit.Revwalk/RevObject.cs.html#94cf9632ceeaac28" class="t t">RevObject</a> <span id="r18 rd" class="r18 r">@ref</span> = <b>null</b>;
			<b>for</b> (<b>int</b> <span id="r19 rd" class="r19 r">i</span> = 0; <span class="r19 r">i</span> &lt; <span class="r17 r">rev</span>.<a href="@0@mscorlib/A.html#42e9b7616956cf94" class="i property">Length</a>; ++<span class="r19 r">i</span>)
			{
				<b>switch</b> (<span class="r17 r">rev</span>[<span class="r19 r">i</span>])
				{
					<b>case</b> <span class="s">&#39;^&#39;</span>:
					{
						<b>if</b> (<span class="r18 r">@ref</span> == <b>null</b>)
						{
							<span class="r18 r">@ref</span> = <a href="#12da88139d0d6623" class="i method">ParseSimple</a>(<span class="r15 r">rw</span>, <b>new</b> <b>string</b>(<span class="r17 r">rev</span>, 0, <span class="r19 r">i</span>));
							<b>if</b> (<span class="r18 r">@ref</span> == <b>null</b>)
							{
								<b>return null</b>;
							}
						}
						<b>if</b> (<span class="r19 r">i</span> + 1 &lt; <span class="r17 r">rev</span>.<a href="@0@mscorlib/A.html#42e9b7616956cf94" class="i property">Length</a>)
						{
							<b>switch</b> (<span class="r17 r">rev</span>[<span class="r19 r">i</span> + 1])
							{
								<b>case</b> <span class="s">&#39;0&#39;</span>:
								<b>case</b> <span class="s">&#39;1&#39;</span>:
								<b>case</b> <span class="s">&#39;2&#39;</span>:
								<b>case</b> <span class="s">&#39;3&#39;</span>:
								<b>case</b> <span class="s">&#39;4&#39;</span>:
								<b>case</b> <span class="s">&#39;5&#39;</span>:
								<b>case</b> <span class="s">&#39;6&#39;</span>:
								<b>case</b> <span class="s">&#39;7&#39;</span>:
								<b>case</b> <span class="s">&#39;8&#39;</span>:
								<b>case</b> <span class="s">&#39;9&#39;</span>:
								{
									<b>int</b> <span id="r20 rd" class="r20 r">j</span>;
									<span class="r18 r">@ref</span> = <span class="r15 r">rw</span>.<a href="../NGit.Revwalk/RevWalk.cs.html#de2857440defb57c" class="i method">ParseCommit</a>(<span class="r18 r">@ref</span>);
									<b>for</b> (<span class="r20 r">j</span> = <span class="r19 r">i</span> + 1; <span class="r20 r">j</span> &lt; <span class="r17 r">rev</span>.<a href="@0@mscorlib/A.html#42e9b7616956cf94" class="i property">Length</a>; ++<span class="r20 r">j</span>)
									{
										<b>if</b> (!<b>char</b>.<a href="@0@mscorlib/A.html#041e77a953545d16" class="i method">IsDigit</a>(<span class="r17 r">rev</span>[<span class="r20 r">j</span>]))
										{
											<b>break</b>;
										}
									}
									<b>string</b> <span id="r21 rd" class="r21 r">parentnum</span> = <b>new</b> <b>string</b>(<span class="r17 r">rev</span>, <span class="r19 r">i</span> + 1, <span class="r20 r">j</span> - <span class="r19 r">i</span> - 1);
									<b>int</b> <span id="r22 rd" class="r22 r">pnum</span>;
									<b>try</b>
									{
										<span class="r22 r">pnum</span> = <span class="i n">System</span>.<a href="@0@mscorlib/A.html#fc990bd1275d43d6" class="t t">Convert</a>.<a href="@0@mscorlib/A.html#069d595792a157df" class="i method">ToInt32</a>(<span class="r21 r">parentnum</span>);
									}
									<b>catch</b> (<a href="@0@mscorlib/A.html#80a470d64a9b80ef" class="t t">FormatException</a>)
									{
										<b>throw</b> <b>new</b> <a href="../NGit.Errors/RevisionSyntaxException.cs.html#69996bbe3644f9cc" class="t constructor">RevisionSyntaxException</a>(<a href="../NGit.Internal/JGitText.cs.html#fefe8ca61d5ca061" class="t t">JGitText</a>.<a href="../NGit.Internal/JGitText.cs.html#bebeb4d881f868d0" class="i method">Get</a>().<a href="../NGit.Internal/JGitText.cs.html#23b4dc15552b568b" class="i field">invalidCommitParentNumber</a>, <span class="r16 r">revstr</span>
											);
									}
									<b>if</b> (<span class="r22 r">pnum</span> != 0)
									{
										<a href="../NGit.Revwalk/RevCommit.cs.html#80679b42f6e6a34f" class="t t">RevCommit</a> <span id="r23 rd" class="r23 r">commit</span> = (<a href="../NGit.Revwalk/RevCommit.cs.html#80679b42f6e6a34f" class="t t">RevCommit</a>)<span class="r18 r">@ref</span>;
										<b>if</b> (<span class="r22 r">pnum</span> &gt; <span class="r23 r">commit</span>.<a href="../NGit.Revwalk/RevCommit.cs.html#6804a6589a038c04" class="i property">ParentCount</a>)
										{
											<span class="r18 r">@ref</span> = <b>null</b>;
										}
										<b>else</b>
										{
											<span class="r18 r">@ref</span> = <span class="r23 r">commit</span>.<a href="../NGit.Revwalk/RevCommit.cs.html#f8123aa92e7623eb" class="i method">GetParent</a>(<span class="r22 r">pnum</span> - 1);
										}
									}
									<span class="r19 r">i</span> = <span class="r20 r">j</span> - 1;
									<b>break</b>;
								}

								<b>case</b> <span class="s">&#39;{&#39;</span>:
								{
									<b>int</b> <span id="r24 rd" class="r24 r">k</span>;
									<b>string</b> <span id="r25 rd" class="r25 r">item</span> = <b>null</b>;
									<b>for</b> (<span class="r24 r">k</span> = <span class="r19 r">i</span> + 2; <span class="r24 r">k</span> &lt; <span class="r17 r">rev</span>.<a href="@0@mscorlib/A.html#42e9b7616956cf94" class="i property">Length</a>; ++<span class="r24 r">k</span>)
									{
										<b>if</b> (<span class="r17 r">rev</span>[<span class="r24 r">k</span>] == <span class="s">&#39;}&#39;</span>)
										{
											<span class="r25 r">item</span> = <b>new</b> <b>string</b>(<span class="r17 r">rev</span>, <span class="r19 r">i</span> + 2, <span class="r24 r">k</span> - <span class="r19 r">i</span> - 2);
											<b>break</b>;
										}
									}
									<span class="r19 r">i</span> = <span class="r24 r">k</span>;
									<b>if</b> (<span class="r25 r">item</span> != <b>null</b>)
									{
										<b>if</b> (<span class="r25 r">item</span>.<a href="@0@mscorlib/A.html#31b307b02a3bd6b9" class="i method">Equals</a>(<span class="s">&quot;tree&quot;</span>))
										{
											<span class="r18 r">@ref</span> = <span class="r15 r">rw</span>.<a href="../NGit.Revwalk/RevWalk.cs.html#8e6c53ca5bb2bfc4" class="i method">ParseTree</a>(<span class="r18 r">@ref</span>);
										}
										<b>else</b>
										{
											<b>if</b> (<span class="r25 r">item</span>.<a href="@0@mscorlib/A.html#31b307b02a3bd6b9" class="i method">Equals</a>(<span class="s">&quot;commit&quot;</span>))
											{
												<span class="r18 r">@ref</span> = <span class="r15 r">rw</span>.<a href="../NGit.Revwalk/RevWalk.cs.html#de2857440defb57c" class="i method">ParseCommit</a>(<span class="r18 r">@ref</span>);
											}
											<b>else</b>
											{
												<b>if</b> (<span class="r25 r">item</span>.<a href="@0@mscorlib/A.html#31b307b02a3bd6b9" class="i method">Equals</a>(<span class="s">&quot;blob&quot;</span>))
												{
													<span class="r18 r">@ref</span> = <span class="r15 r">rw</span>.<a href="../NGit.Revwalk/RevWalk.cs.html#864ac86674dd11b4" class="i method">Peel</a>(<span class="r18 r">@ref</span>);
													<b>if</b> (!(<span class="r18 r">@ref</span> <b>is</b> <a href="../NGit.Revwalk/RevBlob.cs.html#e4cee64dd6309c41" class="t t">RevBlob</a>))
													{
														<b>throw</b> <b>new</b> <a href="../NGit.Errors/IncorrectObjectTypeException.cs.html#0f28e3ae6442d71d" class="t constructor">IncorrectObjectTypeException</a>(<span class="r18 r">@ref</span>, <a href="Constants.cs.html#71c965f28a6bcd51" class="t t">Constants</a>.<a href="Constants.cs.html#044e026e5029c06d" class="i field">TYPE_BLOB</a>);
													}
												}
												<b>else</b>
												{
													<b>if</b> (<span class="r25 r">item</span>.<a href="@0@mscorlib/A.html#31b307b02a3bd6b9" class="i method">Equals</a>(<b>string</b>.<a href="@0@mscorlib/A.html#c9f70a27facb27cf" class="i field">Empty</a>))
													{
														<span class="r18 r">@ref</span> = <span class="r15 r">rw</span>.<a href="../NGit.Revwalk/RevWalk.cs.html#864ac86674dd11b4" class="i method">Peel</a>(<span class="r18 r">@ref</span>);
													}
													<b>else</b>
													{
														<b>throw</b> <b>new</b> <a href="../NGit.Errors/RevisionSyntaxException.cs.html#e59cdfc6723911f8" class="t constructor">RevisionSyntaxException</a>(<span class="r16 r">revstr</span>);
													}
												}
											}
										}
									}
									<b>else</b>
									{
										<b>throw</b> <b>new</b> <a href="../NGit.Errors/RevisionSyntaxException.cs.html#e59cdfc6723911f8" class="t constructor">RevisionSyntaxException</a>(<span class="r16 r">revstr</span>);
									}
									<b>break</b>;
								}

								<b>default</b>:
								{
									<span class="r18 r">@ref</span> = <span class="r15 r">rw</span>.<a href="../NGit.Revwalk/RevWalk.cs.html#a166ea601908d640" class="i method">ParseAny</a>(<span class="r18 r">@ref</span>);
									<b>if</b> (<span class="r18 r">@ref</span> <b>is</b> <a href="../NGit.Revwalk/RevCommit.cs.html#80679b42f6e6a34f" class="t t">RevCommit</a>)
									{
										<a href="../NGit.Revwalk/RevCommit.cs.html#80679b42f6e6a34f" class="t t">RevCommit</a> <span id="r26 rd" class="r26 r">commit</span> = ((<a href="../NGit.Revwalk/RevCommit.cs.html#80679b42f6e6a34f" class="t t">RevCommit</a>)<span class="r18 r">@ref</span>);
										<b>if</b> (<span class="r26 r">commit</span>.<a href="../NGit.Revwalk/RevCommit.cs.html#6804a6589a038c04" class="i property">ParentCount</a> == 0)
										{
											<span class="r18 r">@ref</span> = <b>null</b>;
										}
										<b>else</b>
										{
											<span class="r18 r">@ref</span> = <span class="r26 r">commit</span>.<a href="../NGit.Revwalk/RevCommit.cs.html#f8123aa92e7623eb" class="i method">GetParent</a>(0);
										}
									}
									<b>else</b>
									{
										<b>throw</b> <b>new</b> <a href="../NGit.Errors/IncorrectObjectTypeException.cs.html#0f28e3ae6442d71d" class="t constructor">IncorrectObjectTypeException</a>(<span class="r18 r">@ref</span>, <a href="Constants.cs.html#71c965f28a6bcd51" class="t t">Constants</a>.<a href="Constants.cs.html#4908e37b977d9459" class="i field">TYPE_COMMIT</a>);
									}
									<b>break</b>;
								}
							}
						}
						<b>else</b>
						{
							<span class="r18 r">@ref</span> = <span class="r15 r">rw</span>.<a href="../NGit.Revwalk/RevWalk.cs.html#864ac86674dd11b4" class="i method">Peel</a>(<span class="r18 r">@ref</span>);
							<b>if</b> (<span class="r18 r">@ref</span> <b>is</b> <a href="../NGit.Revwalk/RevCommit.cs.html#80679b42f6e6a34f" class="t t">RevCommit</a>)
							{
								<a href="../NGit.Revwalk/RevCommit.cs.html#80679b42f6e6a34f" class="t t">RevCommit</a> <span id="r27 rd" class="r27 r">commit</span> = ((<a href="../NGit.Revwalk/RevCommit.cs.html#80679b42f6e6a34f" class="t t">RevCommit</a>)<span class="r18 r">@ref</span>);
								<b>if</b> (<span class="r27 r">commit</span>.<a href="../NGit.Revwalk/RevCommit.cs.html#6804a6589a038c04" class="i property">ParentCount</a> == 0)
								{
									<span class="r18 r">@ref</span> = <b>null</b>;
								}
								<b>else</b>
								{
									<span class="r18 r">@ref</span> = <span class="r27 r">commit</span>.<a href="../NGit.Revwalk/RevCommit.cs.html#f8123aa92e7623eb" class="i method">GetParent</a>(0);
								}
							}
							<b>else</b>
							{
								<b>throw</b> <b>new</b> <a href="../NGit.Errors/IncorrectObjectTypeException.cs.html#0f28e3ae6442d71d" class="t constructor">IncorrectObjectTypeException</a>(<span class="r18 r">@ref</span>, <a href="Constants.cs.html#71c965f28a6bcd51" class="t t">Constants</a>.<a href="Constants.cs.html#4908e37b977d9459" class="i field">TYPE_COMMIT</a>);
							}
						}
						<b>break</b>;
					}

					<b>case</b> <span class="s">&#39;~&#39;</span>:
					{
						<b>if</b> (<span class="r18 r">@ref</span> == <b>null</b>)
						{
							<span class="r18 r">@ref</span> = <a href="#12da88139d0d6623" class="i method">ParseSimple</a>(<span class="r15 r">rw</span>, <b>new</b> <b>string</b>(<span class="r17 r">rev</span>, 0, <span class="r19 r">i</span>));
							<b>if</b> (<span class="r18 r">@ref</span> == <b>null</b>)
							{
								<b>return null</b>;
							}
						}
						<span class="r18 r">@ref</span> = <span class="r15 r">rw</span>.<a href="../NGit.Revwalk/RevWalk.cs.html#864ac86674dd11b4" class="i method">Peel</a>(<span class="r18 r">@ref</span>);
						<b>if</b> (!(<span class="r18 r">@ref</span> <b>is</b> <a href="../NGit.Revwalk/RevCommit.cs.html#80679b42f6e6a34f" class="t t">RevCommit</a>))
						{
							<b>throw</b> <b>new</b> <a href="../NGit.Errors/IncorrectObjectTypeException.cs.html#0f28e3ae6442d71d" class="t constructor">IncorrectObjectTypeException</a>(<span class="r18 r">@ref</span>, <a href="Constants.cs.html#71c965f28a6bcd51" class="t t">Constants</a>.<a href="Constants.cs.html#4908e37b977d9459" class="i field">TYPE_COMMIT</a>);
						}
						<b>int</b> <span id="r28 rd" class="r28 r">l</span>;
						<b>for</b> (<span class="r28 r">l</span> = <span class="r19 r">i</span> + 1; <span class="r28 r">l</span> &lt; <span class="r17 r">rev</span>.<a href="@0@mscorlib/A.html#42e9b7616956cf94" class="i property">Length</a>; ++<span class="r28 r">l</span>)
						{
							<b>if</b> (!<b>char</b>.<a href="@0@mscorlib/A.html#041e77a953545d16" class="i method">IsDigit</a>(<span class="r17 r">rev</span>[<span class="r28 r">l</span>]))
							{
								<b>break</b>;
							}
						}
						<b>int</b> <span id="r29 rd" class="r29 r">dist</span>;
						<b>if</b> (<span class="r28 r">l</span> - <span class="r19 r">i</span> &gt; 1)
						{
							<b>string</b> <span id="r30 rd" class="r30 r">distnum</span> = <b>new</b> <b>string</b>(<span class="r17 r">rev</span>, <span class="r19 r">i</span> + 1, <span class="r28 r">l</span> - <span class="r19 r">i</span> - 1);
							<b>try</b>
							{
								<span class="r29 r">dist</span> = <span class="i n">System</span>.<a href="@0@mscorlib/A.html#fc990bd1275d43d6" class="t t">Convert</a>.<a href="@0@mscorlib/A.html#069d595792a157df" class="i method">ToInt32</a>(<span class="r30 r">distnum</span>);
							}
							<b>catch</b> (<a href="@0@mscorlib/A.html#80a470d64a9b80ef" class="t t">FormatException</a>)
							{
								<b>throw</b> <b>new</b> <a href="../NGit.Errors/RevisionSyntaxException.cs.html#69996bbe3644f9cc" class="t constructor">RevisionSyntaxException</a>(<a href="../NGit.Internal/JGitText.cs.html#fefe8ca61d5ca061" class="t t">JGitText</a>.<a href="../NGit.Internal/JGitText.cs.html#bebeb4d881f868d0" class="i method">Get</a>().<a href="../NGit.Internal/JGitText.cs.html#82c17c77508802f0" class="i field">invalidAncestryLength</a>, <span class="r16 r">revstr</span>);
							}
						}
						<b>else</b>
						{
							<span class="r29 r">dist</span> = 1;
						}
						<b>while</b> (<span class="r29 r">dist</span> &gt; 0)
						{
							<a href="../NGit.Revwalk/RevCommit.cs.html#80679b42f6e6a34f" class="t t">RevCommit</a> <span id="r31 rd" class="r31 r">commit</span> = (<a href="../NGit.Revwalk/RevCommit.cs.html#80679b42f6e6a34f" class="t t">RevCommit</a>)<span class="r18 r">@ref</span>;
							<b>if</b> (<span class="r31 r">commit</span>.<a href="../NGit.Revwalk/RevCommit.cs.html#6804a6589a038c04" class="i property">ParentCount</a> == 0)
							{
								<span class="r18 r">@ref</span> = <b>null</b>;
								<b>break</b>;
							}
							<span class="r31 r">commit</span> = <span class="r31 r">commit</span>.<a href="../NGit.Revwalk/RevCommit.cs.html#f8123aa92e7623eb" class="i method">GetParent</a>(0);
							<span class="r15 r">rw</span>.<a href="../NGit.Revwalk/RevWalk.cs.html#4ab02db9afbfe5a4" class="i method">ParseHeaders</a>(<span class="r31 r">commit</span>);
							<span class="r18 r">@ref</span> = <span class="r31 r">commit</span>;
							--<span class="r29 r">dist</span>;
						}
						<span class="r19 r">i</span> = <span class="r28 r">l</span> - 1;
						<b>break</b>;
					}

					<b>case</b> <span class="s">&#39;@&#39;</span>:
					{
						<b>int</b> <span id="r32 rd" class="r32 r">m</span>;
						<b>string</b> <span id="r33 rd" class="r33 r">time</span> = <b>null</b>;
						<b>for</b> (<span class="r32 r">m</span> = <span class="r19 r">i</span> + 2; <span class="r32 r">m</span> &lt; <span class="r17 r">rev</span>.<a href="@0@mscorlib/A.html#42e9b7616956cf94" class="i property">Length</a>; ++<span class="r32 r">m</span>)
						{
							<b>if</b> (<span class="r17 r">rev</span>[<span class="r32 r">m</span>] == <span class="s">&#39;}&#39;</span>)
							{
								<span class="r33 r">time</span> = <b>new</b> <b>string</b>(<span class="r17 r">rev</span>, <span class="r19 r">i</span> + 2, <span class="r32 r">m</span> - <span class="r19 r">i</span> - 2);
								<b>break</b>;
							}
						}
						<b>if</b> (<span class="r33 r">time</span> != <b>null</b>)
						{
							<b>string</b> <span id="r34 rd" class="r34 r">refName</span> = <b>new</b> <b>string</b>(<span class="r17 r">rev</span>, 0, <span class="r19 r">i</span>);
							<a href="Ref.cs.html#65afb4684ade4a12" class="t t">Ref</a> <span id="r35 rd" class="r35 r">resolved</span> = <a href="#17810c303938d892" class="i property">RefDatabase</a>.<a href="RefDatabase.cs.html#a56789de2fa35e9c" class="i method">GetRef</a>(<span class="r34 r">refName</span>);
							<b>if</b> (<span class="r35 r">resolved</span> == <b>null</b>)
							{
								<b>return null</b>;
							}
							<span class="r18 r">@ref</span> = <a href="#a78a919c9f22ef9a" class="i method">ResolveReflog</a>(<span class="r15 r">rw</span>, <span class="r35 r">resolved</span>, <span class="r33 r">time</span>);
							<span class="r19 r">i</span> = <span class="r32 r">m</span>;
						}
						<b>else</b>
						{
							<span class="r19 r">i</span> = <span class="r32 r">m</span> - 1;
						}
						<b>break</b>;
					}

					<b>case</b> <span class="s">&#39;:&#39;</span>:
					{
						<a href="../NGit.Revwalk/RevTree.cs.html#22230f5a84c040ab" class="t t">RevTree</a> <span id="r36 rd" class="r36 r">tree</span>;
						<b>if</b> (<span class="r18 r">@ref</span> == <b>null</b>)
						{
							<span class="c">// We might not yet have parsed the left hand side.</span>
							<a href="ObjectId.cs.html#96e3af3718f0610d" class="t t">ObjectId</a> <span id="r37 rd" class="r37 r">id</span>;
							<b>try</b>
							{
								<b>if</b> (<span class="r19 r">i</span> == 0)
								{
									<span class="r37 r">id</span> = <a href="#14257c34e702b262" class="i method">Resolve</a>(<span class="r15 r">rw</span>, <a href="Constants.cs.html#71c965f28a6bcd51" class="t t">Constants</a>.<a href="Constants.cs.html#1111259dc0d2e59f" class="i field">HEAD</a>);
								}
								<b>else</b>
								{
									<span class="r37 r">id</span> = <a href="#14257c34e702b262" class="i method">Resolve</a>(<span class="r15 r">rw</span>, <b>new</b> <b>string</b>(<span class="r17 r">rev</span>, 0, <span class="r19 r">i</span>));
								}
							}
							<b>catch</b> (<a href="../NGit.Errors/RevisionSyntaxException.cs.html#1da80f12c97c80db" class="t t">RevisionSyntaxException</a>)
							{
								<b>throw</b> <b>new</b> <a href="../NGit.Errors/RevisionSyntaxException.cs.html#e59cdfc6723911f8" class="t constructor">RevisionSyntaxException</a>(<span class="r16 r">revstr</span>);
							}
							<b>if</b> (<span class="r37 r">id</span> == <b>null</b>)
							{
								<b>return null</b>;
							}
							<span class="r36 r">tree</span> = <span class="r15 r">rw</span>.<a href="../NGit.Revwalk/RevWalk.cs.html#8e6c53ca5bb2bfc4" class="i method">ParseTree</a>(<span class="r37 r">id</span>);
						}
						<b>else</b>
						{
							<span class="r36 r">tree</span> = <span class="r15 r">rw</span>.<a href="../NGit.Revwalk/RevWalk.cs.html#8e6c53ca5bb2bfc4" class="i method">ParseTree</a>(<span class="r18 r">@ref</span>);
						}
						<b>if</b> (<span class="r19 r">i</span> == <span class="r17 r">rev</span>.<a href="@0@mscorlib/A.html#42e9b7616956cf94" class="i property">Length</a> - 1)
						{
							<b>return</b> <span class="r36 r">tree</span>.<a href="AnyObjectId.cs.html#82a834fd5f79e3ca" class="i method">Copy</a>();
						}
						<a href="../NGit.Treewalk/TreeWalk.cs.html#f75117730acb69f2" class="t t">TreeWalk</a> <span id="r38 rd" class="r38 r">tw</span> = <a href="../NGit.Treewalk/TreeWalk.cs.html#f75117730acb69f2" class="t t">TreeWalk</a>.<a href="../NGit.Treewalk/TreeWalk.cs.html#abc5365e1f03f9bd" class="i method">ForPath</a>(<span class="r15 r">rw</span>.<a href="../NGit.Revwalk/RevWalk.cs.html#67c5e603844b304a" class="i method">GetObjectReader</a>(), <b>new</b> <b>string</b>(<span class="r17 r">rev</span>, <span class="r19 r">i</span> + 1, <span class="r17 r">rev</span>.<a href="@0@mscorlib/A.html#42e9b7616956cf94" class="i property">Length</a>
							 - <span class="r19 r">i</span> - 1), <span class="r36 r">tree</span>);
						<b>return</b> <span class="r38 r">tw</span> != <b>null</b> ? <span class="r38 r">tw</span>.<a href="../NGit.Treewalk/TreeWalk.cs.html#45a8b24f2a66a666" class="i method">GetObjectId</a>(0) : <b>null</b>;
					}

					<b>default</b>:
					{
						<b>if</b> (<span class="r18 r">@ref</span> != <b>null</b>)
						{
							<b>throw</b> <b>new</b> <a href="../NGit.Errors/RevisionSyntaxException.cs.html#e59cdfc6723911f8" class="t constructor">RevisionSyntaxException</a>(<span class="r16 r">revstr</span>);
						}
						<b>break</b>;
					}
				}
			}
			<b>return</b> <span class="r18 r">@ref</span> != <b>null</b> ? <span class="r18 r">@ref</span>.<a href="AnyObjectId.cs.html#82a834fd5f79e3ca" class="i method">Copy</a>() : <a href="#b569f7b0fd5a7370" class="i method">ResolveSimple</a>(<span class="r16 r">revstr</span>);
		}

		<b>private static bool</b> <a id="97c6c2bd90658c00" href="../R/97c6c2bd90658c00.html" target="n" data-glyph="76,1" class="i method">IsHex</a>(<b>char</b> <span id="r39 rd" class="r39 r">c</span>)
		{
			<b>return</b> (<span class="s">&#39;0&#39;</span> &lt;= <span class="r39 r">c</span> &amp;&amp; <span class="r39 r">c</span> &lt;= <span class="s">&#39;9&#39;</span>) || (<span class="s">&#39;a&#39;</span> &lt;= <span class="r39 r">c</span> &amp;&amp; <span class="r39 r">c</span> &lt;= <span class="s">&#39;f&#39;</span>) || (<span class="s">&#39;A&#39;</span> &lt;= <span class="r39 r">c</span> &amp;&amp; <span class="r39 r">c</span> &lt;= <span class="s">&#39;F&#39;</span>);
		}

		<span class="c">//</span>
		<span class="c">//</span>
		<b>private static bool</b> <a id="e118ee9a9503be5a" href="../R/e118ee9a9503be5a.html" target="n" data-glyph="76,1" class="i method">IsAllHex</a>(<b>string</b> <span id="r40 rd" class="r40 r">str</span>, <b>int</b> <span id="r41 rd" class="r41 r">ptr</span>)
		{
			<b>while</b> (<span class="r41 r">ptr</span> &lt; <span class="r40 r">str</span>.<a href="@0@mscorlib/A.html#e13f5829ef28aa07" class="i property">Length</a>)
			{
				<b>if</b> (!<a href="#97c6c2bd90658c00" class="i method">IsHex</a>(<span class="r40 r">str</span><a href="@0@mscorlib/A.html#8307d03426b56fe1">[</a><span class="r41 r">ptr</span>++]))
				{
					<b>return false</b>;
				}
			}
			<b>return true</b>;
		}

		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">exception</span><span class="c"> </span><span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><span class="i n">System</span>.<span class="i n">IO</span>.<a href="@0@mscorlib/A.html#bf546e435199e83c" class="t t">IOException</a><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">&lt;/</span><span class="c">exception</span><span class="c">&gt;</span>
		<b>private</b> <a href="../NGit.Revwalk/RevObject.cs.html#94cf9632ceeaac28" class="t t">RevObject</a> <a id="12da88139d0d6623" href="../R/12da88139d0d6623.html" target="n" data-glyph="76,1" class="i method">ParseSimple</a>(<a href="../NGit.Revwalk/RevWalk.cs.html#730aa25095d36889" class="t t">RevWalk</a> <span id="r42 rd" class="r42 r">rw</span>, <b>string</b> <span id="r43 rd" class="r43 r">revstr</span>)
		{
			<a href="ObjectId.cs.html#96e3af3718f0610d" class="t t">ObjectId</a> <span id="r44 rd" class="r44 r">id</span> = <a href="#b569f7b0fd5a7370" class="i method">ResolveSimple</a>(<span class="r43 r">revstr</span>);
			<b>return</b> <span class="r44 r">id</span> != <b>null</b> ? <span class="r42 r">rw</span>.<a href="../NGit.Revwalk/RevWalk.cs.html#a166ea601908d640" class="i method">ParseAny</a>(<span class="r44 r">id</span>) : <b>null</b>;
		}

		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">exception</span><span class="c"> </span><span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><span class="i n">System</span>.<span class="i n">IO</span>.<a href="@0@mscorlib/A.html#bf546e435199e83c" class="t t">IOException</a><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">&lt;/</span><span class="c">exception</span><span class="c">&gt;</span>
		<b>private</b> <a href="ObjectId.cs.html#96e3af3718f0610d" class="t t">ObjectId</a> <a id="b569f7b0fd5a7370" href="../R/b569f7b0fd5a7370.html" target="n" data-glyph="76,1" class="i method">ResolveSimple</a>(<b>string</b> <span id="r45 rd" class="r45 r">revstr</span>)
		{
			<b>if</b> (<a href="ObjectId.cs.html#96e3af3718f0610d" class="t t">ObjectId</a>.<a href="ObjectId.cs.html#1fc2e11d56f5b570" class="i method">IsId</a>(<span class="r45 r">revstr</span>))
			{
				<b>return</b> <a href="ObjectId.cs.html#96e3af3718f0610d" class="t t">ObjectId</a>.<a href="ObjectId.cs.html#ebe832a03e142947" class="i method">FromString</a>(<span class="r45 r">revstr</span>);
			}
			<a href="Ref.cs.html#65afb4684ade4a12" class="t t">Ref</a> <span id="r46 rd" class="r46 r">r</span> = <a href="#17810c303938d892" class="i property">RefDatabase</a>.<a href="RefDatabase.cs.html#a56789de2fa35e9c" class="i method">GetRef</a>(<span class="r45 r">revstr</span>);
			<b>if</b> (<span class="r46 r">r</span> != <b>null</b>)
			{
				<b>return</b> <span class="r46 r">r</span>.<a href="Ref.cs.html#d8840e26ab016eb0" class="i method">GetObjectId</a>();
			}
			<b>if</b> (<a href="AbbreviatedObjectId.cs.html#02b1ab7cb2ff27f8" class="t t">AbbreviatedObjectId</a>.<a href="AbbreviatedObjectId.cs.html#ce758868b69cf1d2" class="i method">IsId</a>(<span class="r45 r">revstr</span>))
			{
				<b>return</b> <a href="#40638cdc92158aab" class="i method">ResolveAbbreviation</a>(<span class="r45 r">revstr</span>);
			}
			<b>int</b> <span id="r47 rd" class="r47 r">dashg</span> = <span class="r45 r">revstr</span>.<a href="@0@mscorlib/A.html#cf9e6bfe83442551" class="i method">IndexOf</a>(<span class="s">&quot;-g&quot;</span>);
			<b>if</b> ((<span class="r47 r">dashg</span> + 5) &lt; <span class="r45 r">revstr</span>.<a href="@0@mscorlib/A.html#e13f5829ef28aa07" class="i property">Length</a> &amp;&amp; 0 &lt;= <span class="r47 r">dashg</span> &amp;&amp; <a href="#97c6c2bd90658c00" class="i method">IsHex</a>(<span class="r45 r">revstr</span><a href="@0@mscorlib/A.html#8307d03426b56fe1">[</a><span class="r47 r">dashg</span> + 2]) &amp;&amp; <a href="#97c6c2bd90658c00" class="i method">IsHex</a>
				(<span class="r45 r">revstr</span><a href="@0@mscorlib/A.html#8307d03426b56fe1">[</a><span class="r47 r">dashg</span> + 3]) &amp;&amp; <a href="#e118ee9a9503be5a" class="i method">IsAllHex</a>(<span class="r45 r">revstr</span>, <span class="r47 r">dashg</span> + 4))
			{
				<span class="c">// Possibly output from git describe?</span>
				<b>string</b> <span id="r48 rd" class="r48 r">s</span> = <span class="i n">Sharpen</span>.<a href="/Sharpen/A.html#e8e79b34b4baa5b2" class="t t">Runtime</a>.<a href="/Sharpen/A.html#b77d80ab77ebce19" class="i method">Substring</a>(<span class="r45 r">revstr</span>, <span class="r47 r">dashg</span> + 2);
				<b>if</b> (<a href="AbbreviatedObjectId.cs.html#02b1ab7cb2ff27f8" class="t t">AbbreviatedObjectId</a>.<a href="AbbreviatedObjectId.cs.html#ce758868b69cf1d2" class="i method">IsId</a>(<span class="r48 r">s</span>))
				{
					<b>return</b> <a href="#40638cdc92158aab" class="i method">ResolveAbbreviation</a>(<span class="r48 r">s</span>);
				}
			}
			<b>return null</b>;
		}

		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">exception</span><span class="c"> </span><span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><span class="i n">System</span>.<span class="i n">IO</span>.<a href="@0@mscorlib/A.html#bf546e435199e83c" class="t t">IOException</a><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">&lt;/</span><span class="c">exception</span><span class="c">&gt;</span>
		<b>private</b> <a href="../NGit.Revwalk/RevCommit.cs.html#80679b42f6e6a34f" class="t t">RevCommit</a> <a id="a78a919c9f22ef9a" href="../R/a78a919c9f22ef9a.html" target="n" data-glyph="76,1" class="i method">ResolveReflog</a>(<a href="../NGit.Revwalk/RevWalk.cs.html#730aa25095d36889" class="t t">RevWalk</a> <span id="r49 rd" class="r49 r">rw</span>, <a href="Ref.cs.html#65afb4684ade4a12" class="t t">Ref</a> <span id="r50 rd" class="r50 r">@ref</span>, <b>string</b> <span id="r51 rd" class="r51 r">time</span>)
		{
			<b>int</b> <span id="r52 rd" class="r52 r">number</span>;
			<b>try</b>
			{
				<span class="r52 r">number</span> = <span class="i n">System</span>.<a href="@0@mscorlib/A.html#fc990bd1275d43d6" class="t t">Convert</a>.<a href="@0@mscorlib/A.html#069d595792a157df" class="i method">ToInt32</a>(<span class="r51 r">time</span>);
			}
			<b>catch</b> (<a href="@0@mscorlib/A.html#80a470d64a9b80ef" class="t t">FormatException</a>)
			{
				<b>throw</b> <b>new</b> <a href="../NGit.Errors/RevisionSyntaxException.cs.html#e59cdfc6723911f8" class="t constructor">RevisionSyntaxException</a>(<a href="/Sharpen/A.html#3e0180daae7cce22" class="t t">MessageFormat</a>.<a href="/Sharpen/A.html#098513126779efa0" class="i method">Format</a>(<a href="../NGit.Internal/JGitText.cs.html#fefe8ca61d5ca061" class="t t">JGitText</a>.<a href="../NGit.Internal/JGitText.cs.html#bebeb4d881f868d0" class="i method">Get</a>().<a href="../NGit.Internal/JGitText.cs.html#5632a0759dd6e2e7" class="i field">invalidReflogRevision</a>
					, <span class="r51 r">time</span>));
			}
			<b>if</b> (<span class="r52 r">number</span> &lt; 0)
			{
				<b>throw</b> <b>new</b> <a href="../NGit.Errors/RevisionSyntaxException.cs.html#e59cdfc6723911f8" class="t constructor">RevisionSyntaxException</a>(<a href="/Sharpen/A.html#3e0180daae7cce22" class="t t">MessageFormat</a>.<a href="/Sharpen/A.html#098513126779efa0" class="i method">Format</a>(<a href="../NGit.Internal/JGitText.cs.html#fefe8ca61d5ca061" class="t t">JGitText</a>.<a href="../NGit.Internal/JGitText.cs.html#bebeb4d881f868d0" class="i method">Get</a>().<a href="../NGit.Internal/JGitText.cs.html#5632a0759dd6e2e7" class="i field">invalidReflogRevision</a>
					, <span class="r51 r">time</span>));
			}
			<a href="../NGit.Storage.File/ReflogReader.cs.html#a293bdf2b117a387" class="t t">ReflogReader</a> <span id="r53 rd" class="r53 r">reader</span> = <b>new</b> <a href="../NGit.Storage.File/ReflogReader.cs.html#c693e9f960f32e6c" class="t constructor">ReflogReader</a>(<a href="#1e2067e7babb66d2" class="k">this</a>, <span class="r50 r">@ref</span>.<a href="Ref.cs.html#c7c271ec3d94ae5e" class="i method">GetName</a>());
			<a href="../NGit.Storage.File/ReflogEntry.cs.html#4e121177b83eaec7" class="t t">ReflogEntry</a> <span id="r54 rd" class="r54 r">entry</span> = <span class="r53 r">reader</span>.<a href="../NGit.Storage.File/ReflogReader.cs.html#e1e02ca02dba3889" class="i method">GetReverseEntry</a>(<span class="r52 r">number</span>);
			<b>if</b> (<span class="r54 r">entry</span> == <b>null</b>)
			{
				<b>throw</b> <b>new</b> <a href="../NGit.Errors/RevisionSyntaxException.cs.html#e59cdfc6723911f8" class="t constructor">RevisionSyntaxException</a>(<a href="/Sharpen/A.html#3e0180daae7cce22" class="t t">MessageFormat</a>.<a href="/Sharpen/A.html#098513126779efa0" class="i method">Format</a>(<a href="../NGit.Internal/JGitText.cs.html#fefe8ca61d5ca061" class="t t">JGitText</a>.<a href="../NGit.Internal/JGitText.cs.html#bebeb4d881f868d0" class="i method">Get</a>().<a href="../NGit.Internal/JGitText.cs.html#6c967c90a025d592" class="i field">reflogEntryNotFound</a>
					, <span class="i n">Sharpen</span>.<a href="/Sharpen/A.html#229d48bbca3d4b45" class="t t">Extensions</a>.<a href="/Sharpen/A.html#5690e9d8ca4114df" class="i method">ValueOf</a>(<span class="r52 r">number</span>), <span class="r50 r">@ref</span>.<a href="Ref.cs.html#c7c271ec3d94ae5e" class="i method">GetName</a>()));
			}
			<b>return</b> <span class="r49 r">rw</span>.<a href="../NGit.Revwalk/RevWalk.cs.html#de2857440defb57c" class="i method">ParseCommit</a>(<span class="r54 r">entry</span>.<a href="../NGit.Storage.File/ReflogEntry.cs.html#8dc77bd51e8fb5f2" class="i method">GetNewId</a>());
		}

		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">exception</span><span class="c"> </span><span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><span class="i n">System</span>.<span class="i n">IO</span>.<a href="@0@mscorlib/A.html#bf546e435199e83c" class="t t">IOException</a><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">&lt;/</span><span class="c">exception</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">exception</span><span class="c"> </span><span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><span class="i n">NGit</span>.<span class="i n">Errors</span>.<a href="../NGit.Errors/AmbiguousObjectException.cs.html#3dec36ac85c47aad" class="t t">AmbiguousObjectException</a><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">&lt;/</span><span class="c">exception</span><span class="c">&gt;</span>
		<b>private</b> <a href="ObjectId.cs.html#96e3af3718f0610d" class="t t">ObjectId</a> <a id="40638cdc92158aab" href="../R/40638cdc92158aab.html" target="n" data-glyph="76,1" class="i method">ResolveAbbreviation</a>(<b>string</b> <span id="r55 rd" class="r55 r">revstr</span>)
		{
			<a href="AbbreviatedObjectId.cs.html#02b1ab7cb2ff27f8" class="t t">AbbreviatedObjectId</a> <span id="r56 rd" class="r56 r">id</span> = <a href="AbbreviatedObjectId.cs.html#02b1ab7cb2ff27f8" class="t t">AbbreviatedObjectId</a>.<a href="AbbreviatedObjectId.cs.html#8f8eb3215216f0f3" class="i method">FromString</a>(<span class="r55 r">revstr</span>);
			<a href="ObjectReader.cs.html#c7891701ba17c6fc" class="t t">ObjectReader</a> <span id="r57 rd" class="r57 r">reader</span> = <a href="#3a94c2b862584307" class="i method">NewObjectReader</a>();
			<b>try</b>
			{
				<a href="@0@mscorlib/A.html#a9bf1395d3addc77" class="t t">ICollection</a>&lt;<a href="ObjectId.cs.html#96e3af3718f0610d" class="t t">ObjectId</a>&gt; <span id="r58 rd" class="r58 r">matches</span> = <span class="r57 r">reader</span>.<a href="ObjectReader.cs.html#6eb31bdf0fbc8145" class="i method">Resolve</a>(<span class="r56 r">id</span>);
				<b>if</b> (<span class="r58 r">matches</span>.<a href="@0@mscorlib/A.html#3d6c21c4e9bd5f63" class="i property">Count</a> == 0)
				{
					<b>return null</b>;
				}
				<b>else</b>
				{
					<b>if</b> (<span class="r58 r">matches</span>.<a href="@0@mscorlib/A.html#3d6c21c4e9bd5f63" class="i property">Count</a> == 1)
					{
						<b>return</b> <span class="r58 r">matches</span>.<a href="/Sharpen/A.html#9e9a9722119e4290" class="i method">Iterator</a>().<a href="/Sharpen/A.html#6360c9000cc5a921" class="i method">Next</a>();
					}
					<b>else</b>
					{
						<b>throw</b> <b>new</b> <a href="../NGit.Errors/AmbiguousObjectException.cs.html#e9f46d44be7144d9" class="t constructor">AmbiguousObjectException</a>(<span class="r56 r">id</span>, <span class="r58 r">matches</span>);
					}
				}
			}
			<b>finally</b>
			{
				<span class="r57 r">reader</span>.<a href="ObjectReader.cs.html#9b75a15983357803" class="i method">Release</a>();
			}
		}

		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> Increment the use counter by one, requiring a matched</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">see</span><span class="c"> </span><span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="#cbb627f4d19510ea" class="i method">Close</a>()<span class="c">&quot;</span><span class="c">&gt;</span><span class="c">Close()</span><span class="c">&lt;/</span><span class="c">see</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> .</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
		<b>public virtual void</b> <a id="b03629e20822cca7" href="../R/b03629e20822cca7.html" target="n" data-glyph="72,1" class="i method">IncrementOpen</a>()
		{
			<a href="#bc1c24570ce41c4e" class="i field">useCnt</a>.<a href="/Sharpen/A.html#1b47417d5ef199d6" class="i method">IncrementAndGet</a>();
		}

		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span><span class="c">Decrement the use count, and maybe close resources.</span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">remarks</span><span class="c">&gt;</span><span class="c">Decrement the use count, and maybe close resources.</span><span class="c">&lt;/</span><span class="c">remarks</span><span class="c">&gt;</span>
		<b>public virtual void</b> <a id="cbb627f4d19510ea" href="../R/cbb627f4d19510ea.html" target="n" data-glyph="72,1" class="i method">Close</a>()
		{
			<b>if</b> (<a href="#bc1c24570ce41c4e" class="i field">useCnt</a>.<a href="/Sharpen/A.html#da21d23e10f19f42" class="i method">DecrementAndGet</a>() == 0)
			{
				<a href="#ded4b0daeac31fce" class="i method">DoClose</a>();
			}
		}

		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> Invoked when the use count drops to zero during</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">see</span><span class="c"> </span><span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="#cbb627f4d19510ea" class="i method">Close</a>()<span class="c">&quot;</span><span class="c">&gt;</span><span class="c">Close()</span><span class="c">&lt;/</span><span class="c">see</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> .</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">p</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> The default implementation closes the object and ref databases.</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
		<b>protected internal virtual void</b> <a id="ded4b0daeac31fce" href="../R/ded4b0daeac31fce.html" target="n" data-glyph="75,1" class="i method">DoClose</a>()
		{
			<a href="#82d582041e6a7be3" class="i property">ObjectDatabase</a>.<a href="ObjectDatabase.cs.html#d62a39e24288094d" class="i method">Close</a>();
			<a href="#17810c303938d892" class="i property">RefDatabase</a>.<a href="RefDatabase.cs.html#645a923326a5023b" class="i method">Close</a>();
		}

		<b>public override string</b> <a id="5c775a3bdd580c5d" href="../R/5c775a3bdd580c5d.html" target="n" data-glyph="72,1" class="i method">ToString</a>()
		{
			<b>string</b> <span id="r59 rd" class="r59 r">desc</span>;
			<b>if</b> (<a href="#1cdf65c5d26abd34" class="i property">Directory</a> != <b>null</b>)
			{
				<span class="r59 r">desc</span> = <a href="#1cdf65c5d26abd34" class="i property">Directory</a>.<a href="/Sharpen/A.html#34a1b9d01f02d480" class="i method">GetPath</a>();
			}
			<b>else</b>
			{
				<span class="r59 r">desc</span> = <a href="@0@mscorlib/A.html#4d73eb225aef8a61" class="i method">GetType</a>().<a href="@0@mscorlib/A.html#aa4f112f79364b6e" class="i property">Name</a> + <span class="s">&quot;-&quot;</span> + <a href="/Sharpen/A.html#e8e79b34b4baa5b2" class="t t">Runtime</a>.<a href="/Sharpen/A.html#802f069aa3c32b1e" class="i method">IdentityHashCode</a>(<a href="#1e2067e7babb66d2" class="k">this</a>);
			}
			<b>return</b> <span class="s">&quot;Repository[&quot;</span> + <span class="r59 r">desc</span> + <span class="s">&quot;]&quot;</span>;
		}

		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> Get the name of the reference that</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">code</span><span class="c">&gt;</span><span class="c">HEAD</span><span class="c">&lt;/</span><span class="c">code</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> points to.</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">p</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> This is essentially the same as doing:</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">pre</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> return getRef(Constants.HEAD).getTarget().getName()</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">pre</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> Except when HEAD is detached, in which case this method returns the</span>
		<span class="c">///</span><span class="c"> current ObjectId in hexadecimal string format.</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">returns</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> name of current branch (for example</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">code</span><span class="c">&gt;</span><span class="c">refs/heads/master</span><span class="c">&lt;/</span><span class="c">code</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> ) or</span>
		<span class="c">///</span><span class="c"> an ObjectId in hex format if the current branch is detached.</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">returns</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">exception</span><span class="c"> </span><span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><span class="i n">System</span>.<span class="i n">IO</span>.<a href="@0@mscorlib/A.html#bf546e435199e83c" class="t t">IOException</a><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">System.IO.IOException</span><span class="c">&lt;/</span><span class="c">exception</span><span class="c">&gt;</span>
		<b>public virtual string</b> <a id="9619c32c64b05a24" href="../R/9619c32c64b05a24.html" target="n" data-glyph="72,1" class="i method">GetFullBranch</a>()
		{
			<a href="Ref.cs.html#65afb4684ade4a12" class="t t">Ref</a> <span id="r60 rd" class="r60 r">head</span> = <a href="#eb30d1211e94288f" class="i method">GetRef</a>(<a href="Constants.cs.html#71c965f28a6bcd51" class="t t">Constants</a>.<a href="Constants.cs.html#1111259dc0d2e59f" class="i field">HEAD</a>);
			<b>if</b> (<span class="r60 r">head</span> == <b>null</b>)
			{
				<b>return null</b>;
			}
			<b>if</b> (<span class="r60 r">head</span>.<a href="Ref.cs.html#298ee9c00de1f373" class="i method">IsSymbolic</a>())
			{
				<b>return</b> <span class="r60 r">head</span>.<a href="Ref.cs.html#6e756851f02b626d" class="i method">GetTarget</a>().<a href="Ref.cs.html#c7c271ec3d94ae5e" class="i method">GetName</a>();
			}
			<b>if</b> (<span class="r60 r">head</span>.<a href="Ref.cs.html#d8840e26ab016eb0" class="i method">GetObjectId</a>() != <b>null</b>)
			{
				<b>return</b> <span class="r60 r">head</span>.<a href="Ref.cs.html#d8840e26ab016eb0" class="i method">GetObjectId</a>().<a href="AnyObjectId.cs.html#140e21733375121a" class="i property">Name</a>;
			}
			<b>return null</b>;
		}

		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> Get the short name of the current branch that</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">code</span><span class="c">&gt;</span><span class="c">HEAD</span><span class="c">&lt;/</span><span class="c">code</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> points to.</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">p</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> This is essentially the same as</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">see</span><span class="c"> </span><span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="#9619c32c64b05a24" class="i method">GetFullBranch</a>()<span class="c">&quot;</span><span class="c">&gt;</span><span class="c">GetFullBranch()</span><span class="c">&lt;/</span><span class="c">see</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> , except the</span>
		<span class="c">///</span><span class="c"> leading prefix</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">code</span><span class="c">&gt;</span><span class="c">refs/heads/</span><span class="c">&lt;/</span><span class="c">code</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> is removed from the reference before</span>
		<span class="c">///</span><span class="c"> it is returned to the caller.</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">returns</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> name of current branch (for example</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">code</span><span class="c">&gt;</span><span class="c">master</span><span class="c">&lt;/</span><span class="c">code</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> ), or an</span>
		<span class="c">///</span><span class="c"> ObjectId in hex format if the current branch is detached.</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">returns</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">exception</span><span class="c"> </span><span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><span class="i n">System</span>.<span class="i n">IO</span>.<a href="@0@mscorlib/A.html#bf546e435199e83c" class="t t">IOException</a><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">System.IO.IOException</span><span class="c">&lt;/</span><span class="c">exception</span><span class="c">&gt;</span>
		<b>public virtual string</b> <a id="7326139ed73ee212" href="../R/7326139ed73ee212.html" target="n" data-glyph="72,1" class="i method">GetBranch</a>()
		{
			<b>string</b> <span id="r61 rd" class="r61 r">name</span> = <a href="#9619c32c64b05a24" class="i method">GetFullBranch</a>();
			<b>if</b> (<span class="r61 r">name</span> != <b>null</b>)
			{
				<b>return</b> <a href="#a6bd9d9bb860e572" class="i method">ShortenRefName</a>(<span class="r61 r">name</span>);
			}
			<b>return</b> <span class="r61 r">name</span>;
		}

		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> Objects known to exist but not expressed by</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">see</span><span class="c"> </span><span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="#7daab26a9a915d3c" class="i method">GetAllRefs</a>()<span class="c">&quot;</span><span class="c">&gt;</span><span class="c">GetAllRefs()</span><span class="c">&lt;/</span><span class="c">see</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> .</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">p</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> When a repository borrows objects from another repository, it can</span>
		<span class="c">///</span><span class="c"> advertise that it safely has that other repository&#39;s references, without</span>
		<span class="c">///</span><span class="c"> exposing any other details about the other repository.  This may help</span>
		<span class="c">///</span><span class="c"> a client trying to push changes avoid pushing more than it needs to.</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">returns</span><span class="c">&gt;</span><span class="c">unmodifiable collection of other known objects.</span><span class="c">&lt;/</span><span class="c">returns</span><span class="c">&gt;</span>
		<b>public virtual</b> <a href="@0@mscorlib/A.html#a9bf1395d3addc77" class="t t">ICollection</a>&lt;<a href="ObjectId.cs.html#96e3af3718f0610d" class="t t">ObjectId</a>&gt; <a id="e76bf0cbd1091a15" href="../R/e76bf0cbd1091a15.html" target="n" data-glyph="72,1" class="i method">GetAdditionalHaves</a>()
		{
			<b>return</b> <span class="i n">Sharpen</span>.<a href="/Sharpen/A.html#108f8e45f204ed4e" class="t t">Collections</a>.<a href="/Sharpen/A.html#3522ac1ac3e78996" class="i method">EmptySet</a>&lt;<a href="ObjectId.cs.html#96e3af3718f0610d" class="t t">ObjectId</a>&gt;();
		}

		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span><span class="c">Get a ref by name.</span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">remarks</span><span class="c">&gt;</span><span class="c">Get a ref by name.</span><span class="c">&lt;/</span><span class="c">remarks</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span><span class="c"> </span><span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r62 r">name</span><span class="c">&quot;</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> the name of the ref to lookup. May be a short-hand form, e.g.</span>
		<span class="c">///</span><span class="c"> &quot;master&quot; which is is automatically expanded to</span>
		<span class="c">///</span><span class="c"> &quot;refs/heads/master&quot; if &quot;refs/heads/master&quot; already exists.</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">returns</span><span class="c">&gt;</span><span class="c">the Ref with the given name, or null if it does not exist</span><span class="c">&lt;/</span><span class="c">returns</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">exception</span><span class="c"> </span><span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><span class="i n">System</span>.<span class="i n">IO</span>.<a href="@0@mscorlib/A.html#bf546e435199e83c" class="t t">IOException</a><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">System.IO.IOException</span><span class="c">&lt;/</span><span class="c">exception</span><span class="c">&gt;</span>
		<b>public virtual</b> <a href="Ref.cs.html#65afb4684ade4a12" class="t t">Ref</a> <a id="eb30d1211e94288f" href="../R/eb30d1211e94288f.html" target="n" data-glyph="72,1" class="i method">GetRef</a>(<b>string</b> <span id="r62 rd" class="r62 r">name</span>)
		{
			<b>return</b> <a href="#17810c303938d892" class="i property">RefDatabase</a>.<a href="RefDatabase.cs.html#a56789de2fa35e9c" class="i method">GetRef</a>(<span class="r62 r">name</span>);
		}

		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">returns</span><span class="c">&gt;</span><span class="c">mutable map of all known refs (heads, tags, remotes).</span><span class="c">&lt;/</span><span class="c">returns</span><span class="c">&gt;</span>
		<b>public virtual</b> <a href="@0@mscorlib/A.html#20343df0c96b629b" class="t t">IDictionary</a>&lt;<b>string</b>, <a href="Ref.cs.html#65afb4684ade4a12" class="t t">Ref</a>&gt; <a id="7daab26a9a915d3c" href="../R/7daab26a9a915d3c.html" target="n" data-glyph="72,1" class="i method">GetAllRefs</a>()
		{
			<b>try</b>
			{
				<b>return</b> <a href="#17810c303938d892" class="i property">RefDatabase</a>.<a href="RefDatabase.cs.html#34001e3f9d275898" class="i method">GetRefs</a>(<span class="i n">NGit</span>.<a href="RefDatabase.cs.html#a8335c0f37d2d313" class="t t">RefDatabase</a>.<a href="RefDatabase.cs.html#f249efac1df21bfb" class="i field">ALL</a>);
			}
			<b>catch</b> (<a href="@0@mscorlib/A.html#bf546e435199e83c" class="t t">IOException</a>)
			{
				<b>return</b> <b>new</b> <a href="@0@mscorlib/A.html#bf6849e410b43c4c" class="t constructor">Dictionary</a>&lt;<b>string</b>, <a href="Ref.cs.html#65afb4684ade4a12" class="t t">Ref</a>&gt;();
			}
		}

		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">returns</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> mutable map of all tags; key is short tag name (&quot;v1.0&quot;) and value</span>
		<span class="c">///</span><span class="c"> of the entry contains the ref with the full tag name</span>
		<span class="c">///</span><span class="c"> (&quot;refs/tags/v1.0&quot;).</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">returns</span><span class="c">&gt;</span>
		<b>public virtual</b> <a href="@0@mscorlib/A.html#20343df0c96b629b" class="t t">IDictionary</a>&lt;<b>string</b>, <a href="Ref.cs.html#65afb4684ade4a12" class="t t">Ref</a>&gt; <a id="69e12c81c3303eba" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">GetTags</a>()
		{
			<b>try</b>
			{
				<b>return</b> <a href="#17810c303938d892" class="i property">RefDatabase</a>.<a href="RefDatabase.cs.html#34001e3f9d275898" class="i method">GetRefs</a>(<a href="Constants.cs.html#71c965f28a6bcd51" class="t t">Constants</a>.<a href="Constants.cs.html#19dbc2a563e6b1ae" class="i field">R_TAGS</a>);
			}
			<b>catch</b> (<a href="@0@mscorlib/A.html#bf546e435199e83c" class="t t">IOException</a>)
			{
				<b>return</b> <b>new</b> <a href="@0@mscorlib/A.html#bf6849e410b43c4c" class="t constructor">Dictionary</a>&lt;<b>string</b>, <a href="Ref.cs.html#65afb4684ade4a12" class="t t">Ref</a>&gt;();
			}
		}

		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span><span class="c">Peel a possibly unpeeled reference to an annotated tag.</span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">remarks</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> Peel a possibly unpeeled reference to an annotated tag.</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">p</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> If the ref cannot be peeled (as it does not refer to an annotated tag)</span>
		<span class="c">///</span><span class="c"> the peeled id stays null, but</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">see</span><span class="c"> </span><span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="Ref.cs.html#65afb4684ade4a12" class="t t">Ref</a>.<a href="Ref.cs.html#126b3ed3add7a0cd" class="i method">IsPeeled</a>()<span class="c">&quot;</span><span class="c">&gt;</span><span class="c">Ref.IsPeeled()</span><span class="c">&lt;/</span><span class="c">see</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> will be true.</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">remarks</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span><span class="c"> </span><span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r63 r">ref</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">The ref to peel</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">returns</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">code</span><span class="c">&gt;</span><span class="c">ref</span><span class="c">&lt;/</span><span class="c">code</span><span class="c">&gt;</span><span class="c"> if </span><span class="c">&lt;</span><span class="c">code</span><span class="c">&gt;</span><span class="c">ref.isPeeled()</span><span class="c">&lt;/</span><span class="c">code</span><span class="c">&gt;</span><span class="c"> is true; else a</span>
		<span class="c">///</span><span class="c"> new Ref object representing the same data as Ref, but isPeeled()</span>
		<span class="c">///</span><span class="c"> will be true and getPeeledObjectId will contain the peeled object</span>
		<span class="c">///</span><span class="c"> (or null).</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">returns</span><span class="c">&gt;</span>
		<b>public virtual</b> <a href="Ref.cs.html#65afb4684ade4a12" class="t t">Ref</a> <a id="043d7edd795ce97e" href="../R/043d7edd795ce97e.html" target="n" data-glyph="72,1" class="i method">Peel</a>(<a href="Ref.cs.html#65afb4684ade4a12" class="t t">Ref</a> <span id="r63 rd" class="r63 r">@ref</span>)
		{
			<b>try</b>
			{
				<b>return</b> <a href="#17810c303938d892" class="i property">RefDatabase</a>.<a href="RefDatabase.cs.html#783cf4594a00d843" class="i method">Peel</a>(<span class="r63 r">@ref</span>);
			}
			<b>catch</b> (<a href="@0@mscorlib/A.html#bf546e435199e83c" class="t t">IOException</a>)
			{
				<span class="c">// Historical accident; if the reference cannot be peeled due</span>
				<span class="c">// to some sort of repository access problem we claim that the</span>
				<span class="c">// same as if the reference was not an annotated tag.</span>
				<b>return</b> <span class="r63 r">@ref</span>;
			}
		}

		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">returns</span><span class="c">&gt;</span><span class="c">a map with all objects referenced by a peeled ref.</span><span class="c">&lt;/</span><span class="c">returns</span><span class="c">&gt;</span>
		<b>public virtual</b> <a href="@0@mscorlib/A.html#20343df0c96b629b" class="t t">IDictionary</a>&lt;<a href="AnyObjectId.cs.html#648f486449087471" class="t t">AnyObjectId</a>, <a href="@0@mscorlib/A.html#a9bf1395d3addc77" class="t t">ICollection</a>&lt;<a href="Ref.cs.html#65afb4684ade4a12" class="t t">Ref</a>&gt;&gt; <a id="3de63f11ff9e2476" href="../R/3de63f11ff9e2476.html" target="n" data-glyph="72,1" class="i method">GetAllRefsByPeeledObjectId</a>
			()
		{
			<a href="@0@mscorlib/A.html#20343df0c96b629b" class="t t">IDictionary</a>&lt;<b>string</b>, <a href="Ref.cs.html#65afb4684ade4a12" class="t t">Ref</a>&gt; <span id="r64 rd" class="r64 r">allRefs</span> = <a href="#7daab26a9a915d3c" class="i method">GetAllRefs</a>();
			<a href="@0@mscorlib/A.html#20343df0c96b629b" class="t t">IDictionary</a>&lt;<a href="AnyObjectId.cs.html#648f486449087471" class="t t">AnyObjectId</a>, <a href="@0@mscorlib/A.html#a9bf1395d3addc77" class="t t">ICollection</a>&lt;<a href="Ref.cs.html#65afb4684ade4a12" class="t t">Ref</a>&gt;&gt; <span id="r65 rd" class="r65 r">ret</span> = <b>new</b> <a href="@0@mscorlib/A.html#6a2b29a26fb6e208" class="t constructor">Dictionary</a>&lt;<a href="AnyObjectId.cs.html#648f486449087471" class="t t">AnyObjectId</a>, <a href="@0@mscorlib/A.html#a9bf1395d3addc77" class="t t">ICollection</a>
				&lt;<a href="Ref.cs.html#65afb4684ade4a12" class="t t">Ref</a>&gt;&gt;(<span class="r64 r">allRefs</span>.<a href="@0@mscorlib/A.html#3d6c21c4e9bd5f63" class="i property">Count</a>);
			<b>foreach</b> (<a href="Ref.cs.html#65afb4684ade4a12" class="t t">Ref</a> <span id="r66 rd" class="r66 r">iref</span> <b>in</b> <span class="r64 r">allRefs</span>.<a href="@0@mscorlib/A.html#81fedd966b885f90" class="i property">Values</a>)
			{
				<a href="Ref.cs.html#65afb4684ade4a12" class="t t">Ref</a> <span id="r67 rd" class="r67 r">@ref</span> = <a href="#043d7edd795ce97e" class="i method">Peel</a>(<span class="r66 r">iref</span>);
				<a href="AnyObjectId.cs.html#648f486449087471" class="t t">AnyObjectId</a> <span id="r68 rd" class="r68 r">target</span> = <span class="r67 r">@ref</span>.<a href="Ref.cs.html#f9c6216152c573d8" class="i method">GetPeeledObjectId</a>();
				<b>if</b> (<span class="r68 r">target</span> == <b>null</b>)
				{
					<span class="r68 r">target</span> = <span class="r67 r">@ref</span>.<a href="Ref.cs.html#d8840e26ab016eb0" class="i method">GetObjectId</a>();
				}
				<span class="c">// We assume most Sets here are singletons</span>
				<a href="@0@mscorlib/A.html#a9bf1395d3addc77" class="t t">ICollection</a>&lt;<a href="Ref.cs.html#65afb4684ade4a12" class="t t">Ref</a>&gt; <span id="r69 rd" class="r69 r">oset</span> = <span class="r65 r">ret</span>.<a href="/Sharpen/A.html#a7c201171ab1d7de" class="i method">Put</a>(<span class="r68 r">target</span>, <span class="i n">Sharpen</span>.<a href="/Sharpen/A.html#108f8e45f204ed4e" class="t t">Collections</a>.<a href="/Sharpen/A.html#2e53778226e87389" class="i method">Singleton</a>(<span class="r67 r">@ref</span>));
				<b>if</b> (<span class="r69 r">oset</span> != <b>null</b>)
				{
					<span class="c">// that was not the case (rare)</span>
					<b>if</b> (<span class="r69 r">oset</span>.<a href="@0@mscorlib/A.html#3d6c21c4e9bd5f63" class="i property">Count</a> == 1)
					{
						<span class="c">// Was a read-only singleton, we must copy to a new Set</span>
						<span class="r69 r">oset</span> = <b>new</b> <a href="@0@System.Core/A.html#e068afbcd77375f8" class="t constructor">HashSet</a>&lt;<a href="Ref.cs.html#65afb4684ade4a12" class="t t">Ref</a>&gt;(<span class="r69 r">oset</span>);
					}
					<span class="r65 r">ret</span>.<a href="/Sharpen/A.html#a7c201171ab1d7de" class="i method">Put</a>(<span class="r68 r">target</span>, <span class="r69 r">oset</span>);
					<span class="r69 r">oset</span>.<a href="/Sharpen/A.html#ba3669f35f216440" class="i method">AddItem</a>(<span class="r67 r">@ref</span>);
				}
			}
			<b>return</b> <span class="r65 r">ret</span>;
		}

		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">returns</span><span class="c">&gt;</span><span class="c">the index file location</span><span class="c">&lt;/</span><span class="c">returns</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">exception</span><span class="c"> </span><span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><span class="i n">NGit</span>.<span class="i n">Errors</span>.<a href="../NGit.Errors/NoWorkTreeException.cs.html#3bc6bff8f196a931" class="t t">NoWorkTreeException</a><span class="c">&quot;</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> if this is bare, which implies it has no working directory.</span>
		<span class="c">///</span><span class="c"> See</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">see</span><span class="c"> </span><span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="#43a291a7908a4137" class="i property">IsBare</a>()<span class="c">&quot;</span><span class="c">&gt;</span><span class="c">IsBare()</span><span class="c">&lt;/</span><span class="c">see</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> .</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">exception</span><span class="c">&gt;</span>
		<b>public virtual</b> <a href="/Sharpen/A.html#576a1e6f183e15dd" class="t t">FilePath</a> <a id="d9351402e54c05bf" href="../R/d9351402e54c05bf.html" target="n" data-glyph="72,1" class="i method">GetIndexFile</a>()
		{
			<b>if</b> (<a href="#43a291a7908a4137" class="i property">IsBare</a>)
			{
				<b>throw</b> <b>new</b> <a href="../NGit.Errors/NoWorkTreeException.cs.html#115762717cb93feb" class="t constructor">NoWorkTreeException</a>();
			}
			<b>return</b> <a href="#67628f56eb2139e9" class="i field">indexFile</a>;
		}

		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span><span class="c">Create a new in-core index representation and read an index from disk.</span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">remarks</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> Create a new in-core index representation and read an index from disk.</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">p</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> The new index will be read before it is returned to the caller. Read</span>
		<span class="c">///</span><span class="c"> failures are reported as exceptions and therefore prevent the method from</span>
		<span class="c">///</span><span class="c"> returning a partially populated index.</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">remarks</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">returns</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> a cache representing the contents of the specified index file (if</span>
		<span class="c">///</span><span class="c"> it exists) or an empty cache if the file does not exist.</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">returns</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">exception</span><span class="c"> </span><span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><span class="i n">NGit</span>.<span class="i n">Errors</span>.<a href="../NGit.Errors/NoWorkTreeException.cs.html#3bc6bff8f196a931" class="t t">NoWorkTreeException</a><span class="c">&quot;</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> if this is bare, which implies it has no working directory.</span>
		<span class="c">///</span><span class="c"> See</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">see</span><span class="c"> </span><span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="#43a291a7908a4137" class="i property">IsBare</a>()<span class="c">&quot;</span><span class="c">&gt;</span><span class="c">IsBare()</span><span class="c">&lt;/</span><span class="c">see</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> .</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">exception</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">exception</span><span class="c"> </span><span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><span class="i n">System</span>.<span class="i n">IO</span>.<a href="@0@mscorlib/A.html#bf546e435199e83c" class="t t">IOException</a><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">the index file is present but could not be read.</span>
		<span class="c">///</span><span class="c"> 	</span><span class="c">&lt;/</span><span class="c">exception</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">exception</span><span class="c"> </span><span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><span class="i n">NGit</span>.<span class="i n">Errors</span>.<a href="../NGit.Errors/CorruptObjectException.cs.html#cc0fe9dcd5bb1542" class="t t">CorruptObjectException</a><span class="c">&quot;</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> the index file is using a format or extension that this</span>
		<span class="c">///</span><span class="c"> library does not support.</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">exception</span><span class="c">&gt;</span>
		<b>public virtual</b> <a href="../NGit.Dircache/DirCache.cs.html#3a36100e2d4fa295" class="t t">DirCache</a> <a id="f2ac93d271828141" href="../R/f2ac93d271828141.html" target="n" data-glyph="72,1" class="i method">ReadDirCache</a>()
		{
			<b>return</b> <a href="../NGit.Dircache/DirCache.cs.html#3a36100e2d4fa295" class="t t">DirCache</a>.<a href="../NGit.Dircache/DirCache.cs.html#12a8d8121d26b918" class="i method">Read</a>(<a href="#1e2067e7babb66d2" class="k">this</a>);
		}

		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span><span class="c">Create a new in-core index representation, lock it, and read from disk.</span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">remarks</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> Create a new in-core index representation, lock it, and read from disk.</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">p</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> The new index will be locked and then read before it is returned to the</span>
		<span class="c">///</span><span class="c"> caller. Read failures are reported as exceptions and therefore prevent</span>
		<span class="c">///</span><span class="c"> the method from returning a partially populated index.</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">remarks</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">returns</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> a cache representing the contents of the specified index file (if</span>
		<span class="c">///</span><span class="c"> it exists) or an empty cache if the file does not exist.</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">returns</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">exception</span><span class="c"> </span><span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><span class="i n">NGit</span>.<span class="i n">Errors</span>.<a href="../NGit.Errors/NoWorkTreeException.cs.html#3bc6bff8f196a931" class="t t">NoWorkTreeException</a><span class="c">&quot;</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> if this is bare, which implies it has no working directory.</span>
		<span class="c">///</span><span class="c"> See</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">see</span><span class="c"> </span><span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="#43a291a7908a4137" class="i property">IsBare</a>()<span class="c">&quot;</span><span class="c">&gt;</span><span class="c">IsBare()</span><span class="c">&lt;/</span><span class="c">see</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> .</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">exception</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">exception</span><span class="c"> </span><span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><span class="i n">System</span>.<span class="i n">IO</span>.<a href="@0@mscorlib/A.html#bf546e435199e83c" class="t t">IOException</a><span class="c">&quot;</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> the index file is present but could not be read, or the lock</span>
		<span class="c">///</span><span class="c"> could not be obtained.</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">exception</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">exception</span><span class="c"> </span><span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><span class="i n">NGit</span>.<span class="i n">Errors</span>.<a href="../NGit.Errors/CorruptObjectException.cs.html#cc0fe9dcd5bb1542" class="t t">CorruptObjectException</a><span class="c">&quot;</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> the index file is using a format or extension that this</span>
		<span class="c">///</span><span class="c"> library does not support.</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">exception</span><span class="c">&gt;</span>
		<b>public virtual</b> <a href="../NGit.Dircache/DirCache.cs.html#3a36100e2d4fa295" class="t t">DirCache</a> <a id="fe8d0ec652d4de06" href="../R/fe8d0ec652d4de06.html" target="n" data-glyph="72,1" class="i method">LockDirCache</a>()
		{
			<span class="c">// we want DirCache to inform us so that we can inform registered</span>
			<span class="c">// listeners about index changes</span>
			<a href="../NGit.Events/IndexChangedListener.cs.html#6ad313666e5dea8d" class="t t">IndexChangedListener</a> <span id="r70 rd" class="r70 r">l</span> = <b>new</b> <a href="#cf253cf7a3ec2833" class="t constructor">_IndexChangedListener_900</a>(<a href="#1e2067e7babb66d2" class="k">this</a>);
			<b>return</b> <a href="../NGit.Dircache/DirCache.cs.html#3a36100e2d4fa295" class="t t">DirCache</a>.<a href="../NGit.Dircache/DirCache.cs.html#eaebbf45d6d1c076" class="i method">Lock</a>(<a href="#1e2067e7babb66d2" class="k">this</a>, <span class="r70 r">l</span>);
		}

		<b>private sealed class</b> <a id="2bbadf6e59dd4fef" href="../R/2bbadf6e59dd4fef.html" target="n" data-glyph="4,1" class="t t">_IndexChangedListener_900</a> : <a href="../NGit.Events/IndexChangedListener.cs.html#6ad313666e5dea8d" class="t t">IndexChangedListener</a>
		{
			<b>public</b> <a id="cf253cf7a3ec2833" href="../R/cf253cf7a3ec2833.html" target="n" data-glyph="72,2" class="i constructor">_IndexChangedListener_900</a>(<a href="#1e2067e7babb66d2" class="t t">Repository</a> <span id="r71 rd" class="r71 r">_enclosing</span>)
			{
				<a href="#2bbadf6e59dd4fef" class="k">this</a>.<a href="#7cbf06d0dabf77ab" class="i field">_enclosing</a> = <span class="r71 r">_enclosing</span>;
			}

			<b>public void</b> <a id="ab0e1708cbde95b2" href="../R/ab0e1708cbde95b2.html" target="n" data-glyph="72,2" class="i method">OnIndexChanged</a>(<a href="../NGit.Events/IndexChangedEvent.cs.html#db711c5cee6ff394" class="t t">IndexChangedEvent</a> <span id="r72 rd" class="r72 r">@event</span>)
			{
				<a href="#2bbadf6e59dd4fef" class="k">this</a>.<a href="#7cbf06d0dabf77ab" class="i field">_enclosing</a>.<a href="#bb3c57aabd190289" class="i method">NotifyIndexChanged</a>();
			}

			<b>private readonly</b> <a href="#1e2067e7babb66d2" class="t t">Repository</a> <a id="7cbf06d0dabf77ab" href="../R/7cbf06d0dabf77ab.html" target="n" data-glyph="46,2" class="i field">_enclosing</a>;
		}

		<b>internal static byte</b>[] <a id="2dc344d93eb1ad3b" href="../R/2dc344d93eb1ad3b.html" target="n" data-glyph="74,1" class="i method">GitInternalSlash</a>(<b>byte</b>[] <span id="r73 rd" class="r73 r">bytes</span>)
		{
			<b>if</b> (<a href="/Sharpen/A.html#576a1e6f183e15dd" class="t t">FilePath</a>.<a href="/Sharpen/A.html#504877c3fc29fd55" class="i property">separatorChar</a> == <span class="s">&#39;/&#39;</span>)
			{
				<b>return</b> <span class="r73 r">bytes</span>;
			}
			<b>for</b> (<b>int</b> <span id="r74 rd" class="r74 r">i</span> = 0; <span class="r74 r">i</span> &lt; <span class="r73 r">bytes</span>.<a href="@0@mscorlib/A.html#42e9b7616956cf94" class="i property">Length</a>; ++<span class="r74 r">i</span>)
			{
				<b>if</b> (<span class="r73 r">bytes</span>[<span class="r74 r">i</span>] == <a href="/Sharpen/A.html#576a1e6f183e15dd" class="t t">FilePath</a>.<a href="/Sharpen/A.html#504877c3fc29fd55" class="i property">separatorChar</a>)
				{
					<span class="r73 r">bytes</span>[<span class="r74 r">i</span>] = (<b>byte</b>)(<span class="s">&#39;/&#39;</span>);
				}
			}
			<b>return</b> <span class="r73 r">bytes</span>;
		}

		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">returns</span><span class="c">&gt;</span><span class="c">an important state</span><span class="c">&lt;/</span><span class="c">returns</span><span class="c">&gt;</span>
		<b>public virtual</b> <a href="RepositoryState.cs.html#8eee3b93eb691602" class="t t">RepositoryState</a> <a id="3882aa7bec7ac110" href="../R/3882aa7bec7ac110.html" target="n" data-glyph="72,1" class="i method">GetRepositoryState</a>()
		{
			<b>if</b> (<a href="#43a291a7908a4137" class="i property">IsBare</a> || <a href="#1cdf65c5d26abd34" class="i property">Directory</a> == <b>null</b>)
			{
				<b>return</b> <a href="RepositoryState.cs.html#8eee3b93eb691602" class="t t">RepositoryState</a>.<a href="RepositoryState.cs.html#a142173edb819149" class="i field">BARE</a>;
			}
			<span class="c">// Pre Git-1.6 logic</span>
			<b>if</b> (<b>new</b> <a href="/Sharpen/A.html#47b5b21ff9287dc0" class="t constructor">FilePath</a>(<a href="#b56e483731170f49" class="i property">WorkTree</a>, <span class="s">&quot;.dotest&quot;</span>).<a href="/Sharpen/A.html#7ae60f912b76f65a" class="i method">Exists</a>())
			{
				<b>return</b> <a href="RepositoryState.cs.html#8eee3b93eb691602" class="t t">RepositoryState</a>.<a href="RepositoryState.cs.html#2d93af7a33666420" class="i field">REBASING</a>;
			}
			<b>if</b> (<b>new</b> <a href="/Sharpen/A.html#47b5b21ff9287dc0" class="t constructor">FilePath</a>(<a href="#1cdf65c5d26abd34" class="i property">Directory</a>, <span class="s">&quot;.dotest-merge&quot;</span>).<a href="/Sharpen/A.html#7ae60f912b76f65a" class="i method">Exists</a>())
			{
				<b>return</b> <a href="RepositoryState.cs.html#8eee3b93eb691602" class="t t">RepositoryState</a>.<a href="RepositoryState.cs.html#e97eb76417ac0512" class="i field">REBASING_INTERACTIVE</a>;
			}
			<span class="c">// From 1.6 onwards</span>
			<b>if</b> (<b>new</b> <a href="/Sharpen/A.html#47b5b21ff9287dc0" class="t constructor">FilePath</a>(<a href="#1cdf65c5d26abd34" class="i property">Directory</a>, <span class="s">&quot;rebase-apply/rebasing&quot;</span>).<a href="/Sharpen/A.html#7ae60f912b76f65a" class="i method">Exists</a>())
			{
				<b>return</b> <a href="RepositoryState.cs.html#8eee3b93eb691602" class="t t">RepositoryState</a>.<a href="RepositoryState.cs.html#76825cb9a16c82f7" class="i field">REBASING_REBASING</a>;
			}
			<b>if</b> (<b>new</b> <a href="/Sharpen/A.html#47b5b21ff9287dc0" class="t constructor">FilePath</a>(<a href="#1cdf65c5d26abd34" class="i property">Directory</a>, <span class="s">&quot;rebase-apply/applying&quot;</span>).<a href="/Sharpen/A.html#7ae60f912b76f65a" class="i method">Exists</a>())
			{
				<b>return</b> <a href="RepositoryState.cs.html#8eee3b93eb691602" class="t t">RepositoryState</a>.<a href="RepositoryState.cs.html#cb5e6ba834dda9f5" class="i field">APPLY</a>;
			}
			<b>if</b> (<b>new</b> <a href="/Sharpen/A.html#47b5b21ff9287dc0" class="t constructor">FilePath</a>(<a href="#1cdf65c5d26abd34" class="i property">Directory</a>, <span class="s">&quot;rebase-apply&quot;</span>).<a href="/Sharpen/A.html#7ae60f912b76f65a" class="i method">Exists</a>())
			{
				<b>return</b> <a href="RepositoryState.cs.html#8eee3b93eb691602" class="t t">RepositoryState</a>.<a href="RepositoryState.cs.html#2d93af7a33666420" class="i field">REBASING</a>;
			}
			<b>if</b> (<b>new</b> <a href="/Sharpen/A.html#47b5b21ff9287dc0" class="t constructor">FilePath</a>(<a href="#1cdf65c5d26abd34" class="i property">Directory</a>, <span class="s">&quot;rebase-merge/interactive&quot;</span>).<a href="/Sharpen/A.html#7ae60f912b76f65a" class="i method">Exists</a>())
			{
				<b>return</b> <a href="RepositoryState.cs.html#8eee3b93eb691602" class="t t">RepositoryState</a>.<a href="RepositoryState.cs.html#e97eb76417ac0512" class="i field">REBASING_INTERACTIVE</a>;
			}
			<b>if</b> (<b>new</b> <a href="/Sharpen/A.html#47b5b21ff9287dc0" class="t constructor">FilePath</a>(<a href="#1cdf65c5d26abd34" class="i property">Directory</a>, <span class="s">&quot;rebase-merge&quot;</span>).<a href="/Sharpen/A.html#7ae60f912b76f65a" class="i method">Exists</a>())
			{
				<b>return</b> <a href="RepositoryState.cs.html#8eee3b93eb691602" class="t t">RepositoryState</a>.<a href="RepositoryState.cs.html#ba602de4784e6395" class="i field">REBASING_MERGE</a>;
			}
			<span class="c">// Both versions</span>
			<b>if</b> (<b>new</b> <a href="/Sharpen/A.html#47b5b21ff9287dc0" class="t constructor">FilePath</a>(<a href="#1cdf65c5d26abd34" class="i property">Directory</a>, <a href="Constants.cs.html#71c965f28a6bcd51" class="t t">Constants</a>.<a href="Constants.cs.html#f407d948c31d785b" class="i field">MERGE_HEAD</a>).<a href="/Sharpen/A.html#7ae60f912b76f65a" class="i method">Exists</a>())
			{
				<span class="c">// we are merging - now check whether we have unmerged paths</span>
				<b>try</b>
				{
					<b>if</b> (!<a href="#f2ac93d271828141" class="i method">ReadDirCache</a>().<a href="../NGit.Dircache/DirCache.cs.html#b653aa2bc09285cc" class="i method">HasUnmergedPaths</a>())
					{
						<span class="c">// no unmerged paths -&gt; return the MERGING_RESOLVED state</span>
						<b>return</b> <a href="RepositoryState.cs.html#8eee3b93eb691602" class="t t">RepositoryState</a>.<a href="RepositoryState.cs.html#494bc0b57cfa5bc6" class="i field">MERGING_RESOLVED</a>;
					}
				}
				<b>catch</b> (<a href="@0@mscorlib/A.html#bf546e435199e83c" class="t t">IOException</a>)
				{
				}
				<span class="c">// Can&#39;t decide whether unmerged paths exists. Return</span>
				<span class="c">// MERGING state to be on the safe side (in state MERGING</span>
				<span class="c">// you are not allow to do anything)</span>
				<b>return</b> <a href="RepositoryState.cs.html#8eee3b93eb691602" class="t t">RepositoryState</a>.<a href="RepositoryState.cs.html#26cdb00b73854b8a" class="i field">MERGING</a>;
			}
			<b>if</b> (<b>new</b> <a href="/Sharpen/A.html#47b5b21ff9287dc0" class="t constructor">FilePath</a>(<a href="#1cdf65c5d26abd34" class="i property">Directory</a>, <span class="s">&quot;BISECT_LOG&quot;</span>).<a href="/Sharpen/A.html#7ae60f912b76f65a" class="i method">Exists</a>())
			{
				<b>return</b> <a href="RepositoryState.cs.html#8eee3b93eb691602" class="t t">RepositoryState</a>.<a href="RepositoryState.cs.html#63511f48e91c613b" class="i field">BISECTING</a>;
			}
			<b>if</b> (<b>new</b> <a href="/Sharpen/A.html#47b5b21ff9287dc0" class="t constructor">FilePath</a>(<a href="#1cdf65c5d26abd34" class="i property">Directory</a>, <a href="Constants.cs.html#71c965f28a6bcd51" class="t t">Constants</a>.<a href="Constants.cs.html#6d038f3ab3f29793" class="i field">CHERRY_PICK_HEAD</a>).<a href="/Sharpen/A.html#7ae60f912b76f65a" class="i method">Exists</a>())
			{
				<b>try</b>
				{
					<b>if</b> (!<a href="#f2ac93d271828141" class="i method">ReadDirCache</a>().<a href="../NGit.Dircache/DirCache.cs.html#b653aa2bc09285cc" class="i method">HasUnmergedPaths</a>())
					{
						<span class="c">// no unmerged paths</span>
						<b>return</b> <a href="RepositoryState.cs.html#8eee3b93eb691602" class="t t">RepositoryState</a>.<a href="RepositoryState.cs.html#ef0c3e7e491712d7" class="i field">CHERRY_PICKING_RESOLVED</a>;
					}
				}
				<b>catch</b> (<a href="@0@mscorlib/A.html#bf546e435199e83c" class="t t">IOException</a>)
				{
				}
				<span class="c">// fall through to CHERRY_PICKING</span>
				<b>return</b> <a href="RepositoryState.cs.html#8eee3b93eb691602" class="t t">RepositoryState</a>.<a href="RepositoryState.cs.html#2320d2ed1a4500d4" class="i field">CHERRY_PICKING</a>;
			}
			<b>return</b> <a href="RepositoryState.cs.html#8eee3b93eb691602" class="t t">RepositoryState</a>.<a href="RepositoryState.cs.html#d964a81e36d8cb7a" class="i field">SAFE</a>;
		}

		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span><span class="c">Check validity of a ref name.</span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">remarks</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> Check validity of a ref name. It must not contain character that has</span>
		<span class="c">///</span><span class="c"> a special meaning in a Git object reference expression. Some other</span>
		<span class="c">///</span><span class="c"> dangerous characters are also excluded.</span>
		<span class="c">///</span><span class="c"> For portability reasons &#39;\&#39; is excluded</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">remarks</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span><span class="c"> </span><span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r75 r">refName</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">returns</span><span class="c">&gt;</span><span class="c">true if refName is a valid ref name</span><span class="c">&lt;/</span><span class="c">returns</span><span class="c">&gt;</span>
		<b>public static bool</b> <a id="b80237c82a008bf2" href="../R/b80237c82a008bf2.html" target="n" data-glyph="72,1" class="i method">IsValidRefName</a>(<b>string</b> <span id="r75 rd" class="r75 r">refName</span>)
		{
			<b>int</b> <span id="r76 rd" class="r76 r">len</span> = <span class="r75 r">refName</span>.<a href="@0@mscorlib/A.html#e13f5829ef28aa07" class="i property">Length</a>;
			<b>if</b> (<span class="r76 r">len</span> == 0)
			{
				<b>return false</b>;
			}
			<b>if</b> (<span class="r75 r">refName</span>.<a href="@0@mscorlib/A.html#cb74053b3f2d03f4" class="i method">EndsWith</a>(<span class="s">&quot;.lock&quot;</span>))
			{
				<b>return false</b>;
			}
			<b>int</b> <span id="r77 rd" class="r77 r">components</span> = 1;
			<b>char</b> <span id="r78 rd" class="r78 r">p</span> = <span class="s">&#39;\0&#39;</span>;
			<b>for</b> (<b>int</b> <span id="r79 rd" class="r79 r">i</span> = 0; <span class="r79 r">i</span> &lt; <span class="r76 r">len</span>; <span class="r79 r">i</span>++)
			{
				<b>char</b> <span id="r80 rd" class="r80 r">c</span> = <span class="r75 r">refName</span><a href="@0@mscorlib/A.html#8307d03426b56fe1">[</a><span class="r79 r">i</span>];
				<b>if</b> (<span class="r80 r">c</span> &lt;= <span class="s">&#39; &#39;</span>)
				{
					<b>return false</b>;
				}
				<b>switch</b> (<span class="r80 r">c</span>)
				{
					<b>case</b> <span class="s">&#39;.&#39;</span>:
					{
						<b>switch</b> (<span class="r78 r">p</span>)
						{
							<b>case</b> <span class="s">&#39;\0&#39;</span>:
							<b>case</b> <span class="s">&#39;/&#39;</span>:
							<b>case</b> <span class="s">&#39;.&#39;</span>:
							{
								<b>return false</b>;
							}
						}
						<b>if</b> (<span class="r79 r">i</span> == <span class="r76 r">len</span> - 1)
						{
							<b>return false</b>;
						}
						<b>break</b>;
					}

					<b>case</b> <span class="s">&#39;/&#39;</span>:
					{
						<b>if</b> (<span class="r79 r">i</span> == 0 || <span class="r79 r">i</span> == <span class="r76 r">len</span> - 1)
						{
							<b>return false</b>;
						}
						<span class="r77 r">components</span>++;
						<b>break</b>;
					}

					<b>case</b> <span class="s">&#39;{&#39;</span>:
					{
						<b>if</b> (<span class="r78 r">p</span> == <span class="s">&#39;@&#39;</span>)
						{
							<b>return false</b>;
						}
						<b>break</b>;
					}

					<b>case</b> <span class="s">&#39;~&#39;</span>:
					<b>case</b> <span class="s">&#39;^&#39;</span>:
					<b>case</b> <span class="s">&#39;:&#39;</span>:
					<b>case</b> <span class="s">&#39;?&#39;</span>:
					<b>case</b> <span class="s">&#39;[&#39;</span>:
					<b>case</b> <span class="s">&#39;*&#39;</span>:
					<b>case</b> <span class="s">&#39;\\&#39;</span>:
					{
						<b>return false</b>;
					}
				}
				<span class="r78 r">p</span> = <span class="r80 r">c</span>;
			}
			<b>return</b> <span class="r77 r">components</span> &gt; 1;
		}

		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span><span class="c">Strip work dir and return normalized repository path.</span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">remarks</span><span class="c">&gt;</span><span class="c">Strip work dir and return normalized repository path.</span><span class="c">&lt;/</span><span class="c">remarks</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span><span class="c"> </span><span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r81 r">workDir</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">Work dir</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span><span class="c"> </span><span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r82 r">file</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">File whose path shall be stripped of its workdir</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">returns</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> normalized repository relative path or the empty</span>
		<span class="c">///</span><span class="c"> string if the file is not relative to the work directory.</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">returns</span><span class="c">&gt;</span>
		<b>public static string</b> <a id="89e05fb538c8fb1a" href="../R/89e05fb538c8fb1a.html" target="n" data-glyph="72,1" class="i method">StripWorkDir</a>(<a href="/Sharpen/A.html#576a1e6f183e15dd" class="t t">FilePath</a> <span id="r81 rd" class="r81 r">workDir</span>, <a href="/Sharpen/A.html#576a1e6f183e15dd" class="t t">FilePath</a> <span id="r82 rd" class="r82 r">file</span>)
		{
			<b>string</b> <span id="r83 rd" class="r83 r">filePath</span> = <span class="r82 r">file</span>.<a href="/Sharpen/A.html#34a1b9d01f02d480" class="i method">GetPath</a>();
			<b>string</b> <span id="r84 rd" class="r84 r">workDirPath</span> = <span class="r81 r">workDir</span>.<a href="/Sharpen/A.html#34a1b9d01f02d480" class="i method">GetPath</a>();
			<b>if</b> (<span class="r83 r">filePath</span>.<a href="@0@mscorlib/A.html#e13f5829ef28aa07" class="i property">Length</a> &lt;= <span class="r84 r">workDirPath</span>.<a href="@0@mscorlib/A.html#e13f5829ef28aa07" class="i property">Length</a> || <span class="r83 r">filePath</span><a href="@0@mscorlib/A.html#8307d03426b56fe1">[</a><span class="r84 r">workDirPath</span>.<a href="@0@mscorlib/A.html#e13f5829ef28aa07" class="i property">Length</a>] != <a href="/Sharpen/A.html#576a1e6f183e15dd" class="t t">FilePath</a>
				.<a href="/Sharpen/A.html#504877c3fc29fd55" class="i property">separatorChar</a> || !<span class="r83 r">filePath</span>.<a href="@0@mscorlib/A.html#23804789ea4c9c0e" class="i method">StartsWith</a>(<span class="r84 r">workDirPath</span>))
			{
				<a href="/Sharpen/A.html#576a1e6f183e15dd" class="t t">FilePath</a> <span id="r85 rd" class="r85 r">absWd</span> = <span class="r81 r">workDir</span>.<a href="/Sharpen/A.html#b54faa94ce03b975" class="i method">IsAbsolute</a>() ? <span class="r81 r">workDir</span> : <span class="r81 r">workDir</span>.<a href="/Sharpen/A.html#3f118afc82cb62ec" class="i method">GetAbsoluteFile</a>();
				<a href="/Sharpen/A.html#576a1e6f183e15dd" class="t t">FilePath</a> <span id="r86 rd" class="r86 r">absFile</span> = <span class="r82 r">file</span>.<a href="/Sharpen/A.html#b54faa94ce03b975" class="i method">IsAbsolute</a>() ? <span class="r82 r">file</span> : <span class="r82 r">file</span>.<a href="/Sharpen/A.html#3f118afc82cb62ec" class="i method">GetAbsoluteFile</a>();
				<b>if</b> (<span class="r85 r">absWd</span> == <span class="r81 r">workDir</span> &amp;&amp; <span class="r86 r">absFile</span> == <span class="r82 r">file</span>)
				{
					<b>return string</b>.<a href="@0@mscorlib/A.html#c9f70a27facb27cf" class="i field">Empty</a>;
				}
				<b>return</b> <a href="#89e05fb538c8fb1a" class="i method">StripWorkDir</a>(<span class="r85 r">absWd</span>, <span class="r86 r">absFile</span>);
			}
			<b>string</b> <span id="r87 rd" class="r87 r">relName</span> = <span class="i n">Sharpen</span>.<a href="/Sharpen/A.html#e8e79b34b4baa5b2" class="t t">Runtime</a>.<a href="/Sharpen/A.html#b77d80ab77ebce19" class="i method">Substring</a>(<span class="r83 r">filePath</span>, <span class="r84 r">workDirPath</span>.<a href="@0@mscorlib/A.html#e13f5829ef28aa07" class="i property">Length</a> + 1);
			<b>if</b> (<a href="/Sharpen/A.html#576a1e6f183e15dd" class="t t">FilePath</a>.<a href="/Sharpen/A.html#504877c3fc29fd55" class="i property">separatorChar</a> != <span class="s">&#39;/&#39;</span>)
			{
				<span class="r87 r">relName</span> = <span class="r87 r">relName</span>.<a href="@0@mscorlib/A.html#987da5dfb39f1927" class="i method">Replace</a>(<a href="/Sharpen/A.html#576a1e6f183e15dd" class="t t">FilePath</a>.<a href="/Sharpen/A.html#504877c3fc29fd55" class="i property">separatorChar</a>, <span class="s">&#39;/&#39;</span>);
			}
			<b>return</b> <span class="r87 r">relName</span>;
		}

		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">returns</span><span class="c">&gt;</span><span class="c">true if this is bare, which implies it has no working directory.</span><span class="c">&lt;/</span><span class="c">returns</span><span class="c">&gt;</span>
		<b>public virtual bool</b> <a id="43a291a7908a4137" href="../R/43a291a7908a4137.html" target="n" data-glyph="102,1" class="i property">IsBare</a>
		{
			<b>get</b>
			{
				<b>return</b> <a href="#1c5ae0b8e2291faa" class="i field">workTree</a> == <b>null</b>;
			}
		}

		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">returns</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> the root directory of the working tree, where files are checked</span>
		<span class="c">///</span><span class="c"> out for viewing and editing.</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">returns</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">exception</span><span class="c"> </span><span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><span class="i n">NGit</span>.<span class="i n">Errors</span>.<a href="../NGit.Errors/NoWorkTreeException.cs.html#3bc6bff8f196a931" class="t t">NoWorkTreeException</a><span class="c">&quot;</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> if this is bare, which implies it has no working directory.</span>
		<span class="c">///</span><span class="c"> See</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">see</span><span class="c"> </span><span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="#43a291a7908a4137" class="i property">IsBare</a>()<span class="c">&quot;</span><span class="c">&gt;</span><span class="c">IsBare()</span><span class="c">&lt;/</span><span class="c">see</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> .</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">exception</span><span class="c">&gt;</span>
		<b>public virtual</b> <a href="/Sharpen/A.html#576a1e6f183e15dd" class="t t">FilePath</a> <a id="b56e483731170f49" href="../R/b56e483731170f49.html" target="n" data-glyph="102,1" class="i property">WorkTree</a>
		{
			<b>get</b>
			{
				<b>if</b> (<a href="#43a291a7908a4137" class="i property">IsBare</a>)
				{
					<b>throw</b> <b>new</b> <a href="../NGit.Errors/NoWorkTreeException.cs.html#115762717cb93feb" class="t constructor">NoWorkTreeException</a>();
				}
				<b>return</b> <a href="#1c5ae0b8e2291faa" class="i field">workTree</a>;
			}
		}

		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span><span class="c">Force a scan for changed refs.</span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">remarks</span><span class="c">&gt;</span><span class="c">Force a scan for changed refs.</span><span class="c">&lt;/</span><span class="c">remarks</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">exception</span><span class="c"> </span><span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><span class="i n">System</span>.<span class="i n">IO</span>.<a href="@0@mscorlib/A.html#bf546e435199e83c" class="t t">IOException</a><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">System.IO.IOException</span><span class="c">&lt;/</span><span class="c">exception</span><span class="c">&gt;</span>
		<b>public abstract void</b> <a id="9f49142f8e0c4d81" href="../R/9f49142f8e0c4d81.html" target="n" data-glyph="72,1" class="i method">ScanForRepoChanges</a>();

		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span><span class="c">Notify that the index changed</span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
		<b>public abstract void</b> <a id="bb3c57aabd190289" href="../R/bb3c57aabd190289.html" target="n" data-glyph="72,1" class="i method">NotifyIndexChanged</a>();

		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span><span class="c"> </span><span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r88 r">refName</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">returns</span><span class="c">&gt;</span><span class="c">a more user friendly ref name</span><span class="c">&lt;/</span><span class="c">returns</span><span class="c">&gt;</span>
		<b>public static string</b> <a id="a6bd9d9bb860e572" href="../R/a6bd9d9bb860e572.html" target="n" data-glyph="72,1" class="i method">ShortenRefName</a>(<b>string</b> <span id="r88 rd" class="r88 r">refName</span>)
		{
			<b>if</b> (<span class="r88 r">refName</span>.<a href="@0@mscorlib/A.html#23804789ea4c9c0e" class="i method">StartsWith</a>(<a href="Constants.cs.html#71c965f28a6bcd51" class="t t">Constants</a>.<a href="Constants.cs.html#51f9cfd1933180d7" class="i field">R_HEADS</a>))
			{
				<b>return</b> <span class="i n">Sharpen</span>.<a href="/Sharpen/A.html#e8e79b34b4baa5b2" class="t t">Runtime</a>.<a href="/Sharpen/A.html#b77d80ab77ebce19" class="i method">Substring</a>(<span class="r88 r">refName</span>, <a href="Constants.cs.html#71c965f28a6bcd51" class="t t">Constants</a>.<a href="Constants.cs.html#51f9cfd1933180d7" class="i field">R_HEADS</a>.<a href="@0@mscorlib/A.html#e13f5829ef28aa07" class="i property">Length</a>);
			}
			<b>if</b> (<span class="r88 r">refName</span>.<a href="@0@mscorlib/A.html#23804789ea4c9c0e" class="i method">StartsWith</a>(<a href="Constants.cs.html#71c965f28a6bcd51" class="t t">Constants</a>.<a href="Constants.cs.html#19dbc2a563e6b1ae" class="i field">R_TAGS</a>))
			{
				<b>return</b> <span class="i n">Sharpen</span>.<a href="/Sharpen/A.html#e8e79b34b4baa5b2" class="t t">Runtime</a>.<a href="/Sharpen/A.html#b77d80ab77ebce19" class="i method">Substring</a>(<span class="r88 r">refName</span>, <a href="Constants.cs.html#71c965f28a6bcd51" class="t t">Constants</a>.<a href="Constants.cs.html#19dbc2a563e6b1ae" class="i field">R_TAGS</a>.<a href="@0@mscorlib/A.html#e13f5829ef28aa07" class="i property">Length</a>);
			}
			<b>if</b> (<span class="r88 r">refName</span>.<a href="@0@mscorlib/A.html#23804789ea4c9c0e" class="i method">StartsWith</a>(<a href="Constants.cs.html#71c965f28a6bcd51" class="t t">Constants</a>.<a href="Constants.cs.html#93389d0e98853ba6" class="i field">R_REMOTES</a>))
			{
				<b>return</b> <span class="i n">Sharpen</span>.<a href="/Sharpen/A.html#e8e79b34b4baa5b2" class="t t">Runtime</a>.<a href="/Sharpen/A.html#b77d80ab77ebce19" class="i method">Substring</a>(<span class="r88 r">refName</span>, <a href="Constants.cs.html#71c965f28a6bcd51" class="t t">Constants</a>.<a href="Constants.cs.html#93389d0e98853ba6" class="i field">R_REMOTES</a>.<a href="@0@mscorlib/A.html#e13f5829ef28aa07" class="i property">Length</a>);
			}
			<b>return</b> <span class="r88 r">refName</span>;
		}

		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span><span class="c"> </span><span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r89 r">refName</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">returns</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> a</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">see</span><span class="c"> </span><span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><span class="i n">NGit</span>.<span class="i n">Storage</span>.<span class="i n">File</span>.<a href="../NGit.Storage.File/ReflogReader.cs.html#a293bdf2b117a387" class="t t">ReflogReader</a><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">NGit.Storage.File.ReflogReader</span><span class="c">&lt;/</span><span class="c">see</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> for the supplied refname, or null if the</span>
		<span class="c">///</span><span class="c"> named ref does not exist.</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">returns</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">exception</span><span class="c"> </span><span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><span class="i n">System</span>.<span class="i n">IO</span>.<a href="@0@mscorlib/A.html#bf546e435199e83c" class="t t">IOException</a><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">the ref could not be accessed.</span><span class="c">&lt;/</span><span class="c">exception</span><span class="c">&gt;</span>
		<b>public abstract</b> <a href="../NGit.Storage.File/ReflogReader.cs.html#a293bdf2b117a387" class="t t">ReflogReader</a> <a id="bcd10ad2fda31931" href="../R/bcd10ad2fda31931.html" target="n" data-glyph="72,1" class="i method">GetReflogReader</a>(<b>string</b> <span id="r89 rd" class="r89 r">refName</span>);

		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span><span class="c">Return the information stored in the file $GIT_DIR/MERGE_MSG.</span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">remarks</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> Return the information stored in the file $GIT_DIR/MERGE_MSG. In this</span>
		<span class="c">///</span><span class="c"> file operations triggering a merge will store a template for the commit</span>
		<span class="c">///</span><span class="c"> message of the merge commit.</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">remarks</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">returns</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> a String containing the content of the MERGE_MSG file or</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">code</span><span class="c">&gt;</span><span class="c">null</span><span class="c">&lt;/</span><span class="c">code</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> if this file doesn&#39;t exist</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">returns</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">exception</span><span class="c"> </span><span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><span class="i n">System</span>.<span class="i n">IO</span>.<a href="@0@mscorlib/A.html#bf546e435199e83c" class="t t">IOException</a><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">System.IO.IOException</span><span class="c">&lt;/</span><span class="c">exception</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">exception</span><span class="c"> </span><span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><span class="i n">NGit</span>.<span class="i n">Errors</span>.<a href="../NGit.Errors/NoWorkTreeException.cs.html#3bc6bff8f196a931" class="t t">NoWorkTreeException</a><span class="c">&quot;</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> if this is bare, which implies it has no working directory.</span>
		<span class="c">///</span><span class="c"> See</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">see</span><span class="c"> </span><span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="#43a291a7908a4137" class="i property">IsBare</a>()<span class="c">&quot;</span><span class="c">&gt;</span><span class="c">IsBare()</span><span class="c">&lt;/</span><span class="c">see</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> .</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">exception</span><span class="c">&gt;</span>
		<b>public virtual string</b> <a id="c8350a3ef16a0b9a" href="../R/c8350a3ef16a0b9a.html" target="n" data-glyph="72,1" class="i method">ReadMergeCommitMsg</a>()
		{
			<b>return</b> <a href="#f619e2135a768c85" class="i method">ReadCommitMsgFile</a>(<a href="Constants.cs.html#71c965f28a6bcd51" class="t t">Constants</a>.<a href="Constants.cs.html#394b1cc198c7de64" class="i field">MERGE_MSG</a>);
		}

		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span><span class="c">Write new content to the file $GIT_DIR/MERGE_MSG.</span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">remarks</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> Write new content to the file $GIT_DIR/MERGE_MSG. In this file operations</span>
		<span class="c">///</span><span class="c"> triggering a merge will store a template for the commit message of the</span>
		<span class="c">///</span><span class="c"> merge commit. If </span><span class="c">&lt;</span><span class="c">code</span><span class="c">&gt;</span><span class="c">null</span><span class="c">&lt;/</span><span class="c">code</span><span class="c">&gt;</span><span class="c"> is specified as message the file will</span>
		<span class="c">///</span><span class="c"> be deleted.</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">remarks</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span><span class="c"> </span><span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r90 r">msg</span><span class="c">&quot;</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> the message which should be written or </span><span class="c">&lt;</span><span class="c">code</span><span class="c">&gt;</span><span class="c">null</span><span class="c">&lt;/</span><span class="c">code</span><span class="c">&gt;</span><span class="c"> to</span>
		<span class="c">///</span><span class="c"> delete the file</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">exception</span><span class="c"> </span><span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><span class="i n">System</span>.<span class="i n">IO</span>.<a href="@0@mscorlib/A.html#bf546e435199e83c" class="t t">IOException</a><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">System.IO.IOException</span><span class="c">&lt;/</span><span class="c">exception</span><span class="c">&gt;</span>
		<b>public virtual void</b> <a id="a69a7bc695e98273" href="../R/a69a7bc695e98273.html" target="n" data-glyph="72,1" class="i method">WriteMergeCommitMsg</a>(<b>string</b> <span id="r90 rd" class="r90 r">msg</span>)
		{
			<a href="/Sharpen/A.html#576a1e6f183e15dd" class="t t">FilePath</a> <span id="r91 rd" class="r91 r">mergeMsgFile</span> = <b>new</b> <a href="/Sharpen/A.html#47b5b21ff9287dc0" class="t constructor">FilePath</a>(<a href="#ffdf2541a537da50" class="i field">gitDir</a>, <a href="Constants.cs.html#71c965f28a6bcd51" class="t t">Constants</a>.<a href="Constants.cs.html#394b1cc198c7de64" class="i field">MERGE_MSG</a>);
			<a href="#3275d15087ed4abb" class="i method">WriteCommitMsg</a>(<span class="r91 r">mergeMsgFile</span>, <span class="r90 r">msg</span>);
		}

		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span><span class="c">Return the information stored in the file $GIT_DIR/MERGE_HEAD.</span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">remarks</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> Return the information stored in the file $GIT_DIR/MERGE_HEAD. In this</span>
		<span class="c">///</span><span class="c"> file operations triggering a merge will store the IDs of all heads which</span>
		<span class="c">///</span><span class="c"> should be merged together with HEAD.</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">remarks</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">returns</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> a list of commits which IDs are listed in the MERGE_HEAD file or</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">code</span><span class="c">&gt;</span><span class="c">null</span><span class="c">&lt;/</span><span class="c">code</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> if this file doesn&#39;t exist. Also if the file exists</span>
		<span class="c">///</span><span class="c"> but is empty</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">code</span><span class="c">&gt;</span><span class="c">null</span><span class="c">&lt;/</span><span class="c">code</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> will be returned</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">returns</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">exception</span><span class="c"> </span><span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><span class="i n">System</span>.<span class="i n">IO</span>.<a href="@0@mscorlib/A.html#bf546e435199e83c" class="t t">IOException</a><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">System.IO.IOException</span><span class="c">&lt;/</span><span class="c">exception</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">exception</span><span class="c"> </span><span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><span class="i n">NGit</span>.<span class="i n">Errors</span>.<a href="../NGit.Errors/NoWorkTreeException.cs.html#3bc6bff8f196a931" class="t t">NoWorkTreeException</a><span class="c">&quot;</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> if this is bare, which implies it has no working directory.</span>
		<span class="c">///</span><span class="c"> See</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">see</span><span class="c"> </span><span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="#43a291a7908a4137" class="i property">IsBare</a>()<span class="c">&quot;</span><span class="c">&gt;</span><span class="c">IsBare()</span><span class="c">&lt;/</span><span class="c">see</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> .</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">exception</span><span class="c">&gt;</span>
		<b>public virtual</b> <a href="@0@mscorlib/A.html#b19f71a84062554b" class="t t">IList</a>&lt;<a href="ObjectId.cs.html#96e3af3718f0610d" class="t t">ObjectId</a>&gt; <a id="d91746a915aec38f" href="../R/d91746a915aec38f.html" target="n" data-glyph="72,1" class="i method">ReadMergeHeads</a>()
		{
			<b>if</b> (<a href="#43a291a7908a4137" class="i property">IsBare</a> || <a href="#1cdf65c5d26abd34" class="i property">Directory</a> == <b>null</b>)
			{
				<b>throw</b> <b>new</b> <a href="../NGit.Errors/NoWorkTreeException.cs.html#115762717cb93feb" class="t constructor">NoWorkTreeException</a>();
			}
			<b>byte</b>[] <span id="r92 rd" class="r92 r">raw</span> = <a href="#c1c211a787e0d8f6" class="i method">ReadGitDirectoryFile</a>(<a href="Constants.cs.html#71c965f28a6bcd51" class="t t">Constants</a>.<a href="Constants.cs.html#f407d948c31d785b" class="i field">MERGE_HEAD</a>);
			<b>if</b> (<span class="r92 r">raw</span> == <b>null</b>)
			{
				<b>return null</b>;
			}
			<a href="@0@mscorlib/A.html#cf7f4095e4de7646" class="t t">List</a>&lt;<a href="ObjectId.cs.html#96e3af3718f0610d" class="t t">ObjectId</a>&gt; <span id="r93 rd" class="r93 r">heads</span> = <b>new</b> <a href="@0@mscorlib/A.html#9e5352b2b304ceba" class="t constructor">List</a>&lt;<a href="ObjectId.cs.html#96e3af3718f0610d" class="t t">ObjectId</a>&gt;();
			<b>for</b> (<b>int</b> <span id="r94 rd" class="r94 r">p</span> = 0; <span class="r94 r">p</span> &lt; <span class="r92 r">raw</span>.<a href="@0@mscorlib/A.html#42e9b7616956cf94" class="i property">Length</a>; )
			{
				<span class="r93 r">heads</span>.<a href="/Sharpen/A.html#4124f80bc8b559d6" class="i method">AddItem</a>(<a href="ObjectId.cs.html#96e3af3718f0610d" class="t t">ObjectId</a>.<a href="ObjectId.cs.html#be7789cafeca305a" class="i method">FromString</a>(<span class="r92 r">raw</span>, <span class="r94 r">p</span>));
				<span class="r94 r">p</span> = <a href="../NGit.Util/RawParseUtils.cs.html#f87abe4d24b03b12" class="t t">RawParseUtils</a>.<a href="../NGit.Util/RawParseUtils.cs.html#162ee2e46b60d416" class="i method">NextLF</a>(<span class="r92 r">raw</span>, <span class="r94 r">p</span> + <a href="Constants.cs.html#71c965f28a6bcd51" class="t t">Constants</a>.<a href="Constants.cs.html#e25ec0ff53bdee32" class="i field">OBJECT_ID_STRING_LENGTH</a>);
			}
			<b>return</b> <span class="r93 r">heads</span>;
		}

		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span><span class="c">Write new merge-heads into $GIT_DIR/MERGE_HEAD.</span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">remarks</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> Write new merge-heads into $GIT_DIR/MERGE_HEAD. In this file operations</span>
		<span class="c">///</span><span class="c"> triggering a merge will store the IDs of all heads which should be merged</span>
		<span class="c">///</span><span class="c"> together with HEAD. If </span><span class="c">&lt;</span><span class="c">code</span><span class="c">&gt;</span><span class="c">null</span><span class="c">&lt;/</span><span class="c">code</span><span class="c">&gt;</span><span class="c"> is specified as list of commits</span>
		<span class="c">///</span><span class="c"> the file will be deleted</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">remarks</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span><span class="c"> </span><span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r95 r">heads</span><span class="c">&quot;</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> a list of commits which IDs should be written to</span>
		<span class="c">///</span><span class="c"> $GIT_DIR/MERGE_HEAD or </span><span class="c">&lt;</span><span class="c">code</span><span class="c">&gt;</span><span class="c">null</span><span class="c">&lt;/</span><span class="c">code</span><span class="c">&gt;</span><span class="c"> to delete the file</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">exception</span><span class="c"> </span><span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><span class="i n">System</span>.<span class="i n">IO</span>.<a href="@0@mscorlib/A.html#bf546e435199e83c" class="t t">IOException</a><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">System.IO.IOException</span><span class="c">&lt;/</span><span class="c">exception</span><span class="c">&gt;</span>
		<b>public virtual void</b> <a id="921c890dc2e1265d" href="../R/921c890dc2e1265d.html" target="n" data-glyph="72,1" class="i method">WriteMergeHeads</a>(<a href="@0@mscorlib/A.html#b19f71a84062554b" class="t t">IList</a>&lt;<a href="ObjectId.cs.html#96e3af3718f0610d" class="t t">ObjectId</a>&gt; <span id="r95 rd" class="r95 r">heads</span>)
		{
			<a href="#e7cf16e15bc31351" class="i method">WriteHeadsFile</a>(<span class="r95 r">heads</span>, <a href="Constants.cs.html#71c965f28a6bcd51" class="t t">Constants</a>.<a href="Constants.cs.html#f407d948c31d785b" class="i field">MERGE_HEAD</a>);
		}

		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span><span class="c">Return the information stored in the file $GIT_DIR/CHERRY_PICK_HEAD.</span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">remarks</span><span class="c">&gt;</span><span class="c">Return the information stored in the file $GIT_DIR/CHERRY_PICK_HEAD.</span><span class="c">&lt;/</span><span class="c">remarks</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">returns</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> object id from CHERRY_PICK_HEAD file or</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">code</span><span class="c">&gt;</span><span class="c">null</span><span class="c">&lt;/</span><span class="c">code</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> if this file</span>
		<span class="c">///</span><span class="c"> doesn&#39;t exist. Also if the file exists but is empty</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">code</span><span class="c">&gt;</span><span class="c">null</span><span class="c">&lt;/</span><span class="c">code</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> will be returned</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">returns</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">exception</span><span class="c"> </span><span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><span class="i n">System</span>.<span class="i n">IO</span>.<a href="@0@mscorlib/A.html#bf546e435199e83c" class="t t">IOException</a><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">System.IO.IOException</span><span class="c">&lt;/</span><span class="c">exception</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">exception</span><span class="c"> </span><span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><span class="i n">NGit</span>.<span class="i n">Errors</span>.<a href="../NGit.Errors/NoWorkTreeException.cs.html#3bc6bff8f196a931" class="t t">NoWorkTreeException</a><span class="c">&quot;</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> if this is bare, which implies it has no working directory.</span>
		<span class="c">///</span><span class="c"> See</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">see</span><span class="c"> </span><span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="#43a291a7908a4137" class="i property">IsBare</a>()<span class="c">&quot;</span><span class="c">&gt;</span><span class="c">IsBare()</span><span class="c">&lt;/</span><span class="c">see</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> .</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">exception</span><span class="c">&gt;</span>
		<b>public virtual</b> <a href="ObjectId.cs.html#96e3af3718f0610d" class="t t">ObjectId</a> <a id="e157190955bb3bc8" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">ReadCherryPickHead</a>()
		{
			<b>if</b> (<a href="#43a291a7908a4137" class="i property">IsBare</a> || <a href="#1cdf65c5d26abd34" class="i property">Directory</a> == <b>null</b>)
			{
				<b>throw</b> <b>new</b> <a href="../NGit.Errors/NoWorkTreeException.cs.html#115762717cb93feb" class="t constructor">NoWorkTreeException</a>();
			}
			<b>byte</b>[] <span id="r96 rd" class="r96 r">raw</span> = <a href="#c1c211a787e0d8f6" class="i method">ReadGitDirectoryFile</a>(<a href="Constants.cs.html#71c965f28a6bcd51" class="t t">Constants</a>.<a href="Constants.cs.html#6d038f3ab3f29793" class="i field">CHERRY_PICK_HEAD</a>);
			<b>if</b> (<span class="r96 r">raw</span> == <b>null</b>)
			{
				<b>return null</b>;
			}
			<b>return</b> <a href="ObjectId.cs.html#96e3af3718f0610d" class="t t">ObjectId</a>.<a href="ObjectId.cs.html#be7789cafeca305a" class="i method">FromString</a>(<span class="r96 r">raw</span>, 0);
		}

		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span><span class="c">Write cherry pick commit into $GIT_DIR/CHERRY_PICK_HEAD.</span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">remarks</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> Write cherry pick commit into $GIT_DIR/CHERRY_PICK_HEAD. This is used in</span>
		<span class="c">///</span><span class="c"> case of conflicts to store the cherry which was tried to be picked.</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">remarks</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span><span class="c"> </span><span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r97 r">head</span><span class="c">&quot;</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> an object id of the cherry commit or </span><span class="c">&lt;</span><span class="c">code</span><span class="c">&gt;</span><span class="c">null</span><span class="c">&lt;/</span><span class="c">code</span><span class="c">&gt;</span><span class="c"> to</span>
		<span class="c">///</span><span class="c"> delete the file</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">exception</span><span class="c"> </span><span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><span class="i n">System</span>.<span class="i n">IO</span>.<a href="@0@mscorlib/A.html#bf546e435199e83c" class="t t">IOException</a><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">System.IO.IOException</span><span class="c">&lt;/</span><span class="c">exception</span><span class="c">&gt;</span>
		<b>public virtual void</b> <a id="c1f9cc2d1e3d64cb" href="../R/c1f9cc2d1e3d64cb.html" target="n" data-glyph="72,1" class="i method">WriteCherryPickHead</a>(<a href="ObjectId.cs.html#96e3af3718f0610d" class="t t">ObjectId</a> <span id="r97 rd" class="r97 r">head</span>)
		{
			<a href="@0@mscorlib/A.html#b19f71a84062554b" class="t t">IList</a>&lt;<a href="ObjectId.cs.html#96e3af3718f0610d" class="t t">ObjectId</a>&gt; <span id="r98 rd" class="r98 r">heads</span> = (<span class="r97 r">head</span> != <b>null</b>) ? <span class="i n">Sharpen</span>.<a href="/Sharpen/A.html#108f8e45f204ed4e" class="t t">Collections</a>.<a href="/Sharpen/A.html#55e6f3a228854b03" class="i method">SingletonList</a>(<span class="r97 r">head</span>) : 
				<b>null</b>;
			<a href="#e7cf16e15bc31351" class="i method">WriteHeadsFile</a>(<span class="r98 r">heads</span>, <a href="Constants.cs.html#71c965f28a6bcd51" class="t t">Constants</a>.<a href="Constants.cs.html#6d038f3ab3f29793" class="i field">CHERRY_PICK_HEAD</a>);
		}

		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span><span class="c">Write original HEAD commit into $GIT_DIR/ORIG_HEAD.</span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">remarks</span><span class="c">&gt;</span><span class="c">Write original HEAD commit into $GIT_DIR/ORIG_HEAD.</span><span class="c">&lt;/</span><span class="c">remarks</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span><span class="c"> </span><span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r99 r">head</span><span class="c">&quot;</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> an object id of the original HEAD commit or </span><span class="c">&lt;</span><span class="c">code</span><span class="c">&gt;</span><span class="c">null</span><span class="c">&lt;/</span><span class="c">code</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> to delete the file</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">exception</span><span class="c"> </span><span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><span class="i n">System</span>.<span class="i n">IO</span>.<a href="@0@mscorlib/A.html#bf546e435199e83c" class="t t">IOException</a><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">System.IO.IOException</span><span class="c">&lt;/</span><span class="c">exception</span><span class="c">&gt;</span>
		<b>public virtual void</b> <a id="ac3ac339bd902498" href="../R/ac3ac339bd902498.html" target="n" data-glyph="72,1" class="i method">WriteOrigHead</a>(<a href="ObjectId.cs.html#96e3af3718f0610d" class="t t">ObjectId</a> <span id="r99 rd" class="r99 r">head</span>)
		{
			<a href="@0@mscorlib/A.html#b19f71a84062554b" class="t t">IList</a>&lt;<a href="ObjectId.cs.html#96e3af3718f0610d" class="t t">ObjectId</a>&gt; <span id="r100 rd" class="r100 r">heads</span> = <span class="r99 r">head</span> != <b>null</b> ? <span class="i n">Sharpen</span>.<a href="/Sharpen/A.html#108f8e45f204ed4e" class="t t">Collections</a>.<a href="/Sharpen/A.html#55e6f3a228854b03" class="i method">SingletonList</a>(<span class="r99 r">head</span>) : 
				<b>null</b>;
			<a href="#e7cf16e15bc31351" class="i method">WriteHeadsFile</a>(<span class="r100 r">heads</span>, <a href="Constants.cs.html#71c965f28a6bcd51" class="t t">Constants</a>.<a href="Constants.cs.html#9145fcd735b81f8f" class="i field">ORIG_HEAD</a>);
		}

		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span><span class="c">Return the information stored in the file $GIT_DIR/ORIG_HEAD.</span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">remarks</span><span class="c">&gt;</span><span class="c">Return the information stored in the file $GIT_DIR/ORIG_HEAD.</span><span class="c">&lt;/</span><span class="c">remarks</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">returns</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> object id from ORIG_HEAD file or</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">code</span><span class="c">&gt;</span><span class="c">null</span><span class="c">&lt;/</span><span class="c">code</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> if this file</span>
		<span class="c">///</span><span class="c"> doesn&#39;t exist. Also if the file exists but is empty</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">code</span><span class="c">&gt;</span><span class="c">null</span><span class="c">&lt;/</span><span class="c">code</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> will be returned</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">returns</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">exception</span><span class="c"> </span><span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><span class="i n">System</span>.<span class="i n">IO</span>.<a href="@0@mscorlib/A.html#bf546e435199e83c" class="t t">IOException</a><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">System.IO.IOException</span><span class="c">&lt;/</span><span class="c">exception</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">exception</span><span class="c"> </span><span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><span class="i n">NGit</span>.<span class="i n">Errors</span>.<a href="../NGit.Errors/NoWorkTreeException.cs.html#3bc6bff8f196a931" class="t t">NoWorkTreeException</a><span class="c">&quot;</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> if this is bare, which implies it has no working directory.</span>
		<span class="c">///</span><span class="c"> See</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">see</span><span class="c"> </span><span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="#43a291a7908a4137" class="i property">IsBare</a>()<span class="c">&quot;</span><span class="c">&gt;</span><span class="c">IsBare()</span><span class="c">&lt;/</span><span class="c">see</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> .</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">exception</span><span class="c">&gt;</span>
		<b>public virtual</b> <a href="ObjectId.cs.html#96e3af3718f0610d" class="t t">ObjectId</a> <a id="77ce524b8943bc52" href="../R/77ce524b8943bc52.html" target="n" data-glyph="72,1" class="i method">ReadOrigHead</a>()
		{
			<b>if</b> (<a href="#43a291a7908a4137" class="i property">IsBare</a> || <a href="#1cdf65c5d26abd34" class="i property">Directory</a> == <b>null</b>)
			{
				<b>throw</b> <b>new</b> <a href="../NGit.Errors/NoWorkTreeException.cs.html#115762717cb93feb" class="t constructor">NoWorkTreeException</a>();
			}
			<b>byte</b>[] <span id="r101 rd" class="r101 r">raw</span> = <a href="#c1c211a787e0d8f6" class="i method">ReadGitDirectoryFile</a>(<a href="Constants.cs.html#71c965f28a6bcd51" class="t t">Constants</a>.<a href="Constants.cs.html#9145fcd735b81f8f" class="i field">ORIG_HEAD</a>);
			<b>return</b> <span class="r101 r">raw</span> != <b>null</b> ? <a href="ObjectId.cs.html#96e3af3718f0610d" class="t t">ObjectId</a>.<a href="ObjectId.cs.html#be7789cafeca305a" class="i method">FromString</a>(<span class="r101 r">raw</span>, 0) : <b>null</b>;
		}

		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span><span class="c">Return the information stored in the file $GIT_DIR/SQUASH_MSG.</span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">remarks</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> Return the information stored in the file $GIT_DIR/SQUASH_MSG. In this</span>
		<span class="c">///</span><span class="c"> file operations triggering a squashed merge will store a template for the</span>
		<span class="c">///</span><span class="c"> commit message of the squash commit.</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">remarks</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">returns</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> a String containing the content of the SQUASH_MSG file or</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">code</span><span class="c">&gt;</span><span class="c">null</span><span class="c">&lt;/</span><span class="c">code</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> if this file doesn&#39;t exist</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">returns</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">exception</span><span class="c"> </span><span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><span class="i n">System</span>.<span class="i n">IO</span>.<a href="@0@mscorlib/A.html#bf546e435199e83c" class="t t">IOException</a><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">System.IO.IOException</span><span class="c">&lt;/</span><span class="c">exception</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">exception</span><span class="c"> </span><span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><span class="i n">NGit</span>.<span class="i n">Errors</span>.<a href="../NGit.Errors/NoWorkTreeException.cs.html#3bc6bff8f196a931" class="t t">NoWorkTreeException</a><span class="c">&quot;</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> if this is bare, which implies it has no working directory.</span>
		<span class="c">///</span><span class="c"> See</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">see</span><span class="c"> </span><span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="#43a291a7908a4137" class="i property">IsBare</a>()<span class="c">&quot;</span><span class="c">&gt;</span><span class="c">IsBare()</span><span class="c">&lt;/</span><span class="c">see</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> .</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">exception</span><span class="c">&gt;</span>
		<b>public virtual string</b> <a id="73817c2a24f782cf" href="../R/73817c2a24f782cf.html" target="n" data-glyph="72,1" class="i method">ReadSquashCommitMsg</a>()
		{
			<b>return</b> <a href="#f619e2135a768c85" class="i method">ReadCommitMsgFile</a>(<a href="Constants.cs.html#71c965f28a6bcd51" class="t t">Constants</a>.<a href="Constants.cs.html#8553004f7cf16ebc" class="i field">SQUASH_MSG</a>);
		}

		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span><span class="c">Write new content to the file $GIT_DIR/SQUASH_MSG.</span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">remarks</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> Write new content to the file $GIT_DIR/SQUASH_MSG. In this file</span>
		<span class="c">///</span><span class="c"> operations triggering a squashed merge will store a template for the</span>
		<span class="c">///</span><span class="c"> commit message of the squash commit. If </span><span class="c">&lt;</span><span class="c">code</span><span class="c">&gt;</span><span class="c">null</span><span class="c">&lt;/</span><span class="c">code</span><span class="c">&gt;</span><span class="c"> is specified as</span>
		<span class="c">///</span><span class="c"> message the file will be deleted.</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">remarks</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span><span class="c"> </span><span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r102 r">msg</span><span class="c">&quot;</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> the message which should be written or </span><span class="c">&lt;</span><span class="c">code</span><span class="c">&gt;</span><span class="c">null</span><span class="c">&lt;/</span><span class="c">code</span><span class="c">&gt;</span><span class="c"> to</span>
		<span class="c">///</span><span class="c"> delete the file</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">exception</span><span class="c"> </span><span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><span class="i n">System</span>.<span class="i n">IO</span>.<a href="@0@mscorlib/A.html#bf546e435199e83c" class="t t">IOException</a><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">System.IO.IOException</span><span class="c">&lt;/</span><span class="c">exception</span><span class="c">&gt;</span>
		<b>public virtual void</b> <a id="f15bdebce3a25520" href="../R/f15bdebce3a25520.html" target="n" data-glyph="72,1" class="i method">WriteSquashCommitMsg</a>(<b>string</b> <span id="r102 rd" class="r102 r">msg</span>)
		{
			<a href="/Sharpen/A.html#576a1e6f183e15dd" class="t t">FilePath</a> <span id="r103 rd" class="r103 r">squashMsgFile</span> = <b>new</b> <a href="/Sharpen/A.html#47b5b21ff9287dc0" class="t constructor">FilePath</a>(<a href="#ffdf2541a537da50" class="i field">gitDir</a>, <a href="Constants.cs.html#71c965f28a6bcd51" class="t t">Constants</a>.<a href="Constants.cs.html#8553004f7cf16ebc" class="i field">SQUASH_MSG</a>);
			<a href="#3275d15087ed4abb" class="i method">WriteCommitMsg</a>(<span class="r103 r">squashMsgFile</span>, <span class="r102 r">msg</span>);
		}

		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">exception</span><span class="c"> </span><span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><span class="i n">System</span>.<span class="i n">IO</span>.<a href="@0@mscorlib/A.html#bf546e435199e83c" class="t t">IOException</a><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">&lt;/</span><span class="c">exception</span><span class="c">&gt;</span>
		<b>private string</b> <a id="f619e2135a768c85" href="../R/f619e2135a768c85.html" target="n" data-glyph="76,1" class="i method">ReadCommitMsgFile</a>(<b>string</b> <span id="r104 rd" class="r104 r">msgFilename</span>)
		{
			<b>if</b> (<a href="#43a291a7908a4137" class="i property">IsBare</a> || <a href="#1cdf65c5d26abd34" class="i property">Directory</a> == <b>null</b>)
			{
				<b>throw</b> <b>new</b> <a href="../NGit.Errors/NoWorkTreeException.cs.html#115762717cb93feb" class="t constructor">NoWorkTreeException</a>();
			}
			<a href="/Sharpen/A.html#576a1e6f183e15dd" class="t t">FilePath</a> <span id="r105 rd" class="r105 r">mergeMsgFile</span> = <b>new</b> <a href="/Sharpen/A.html#47b5b21ff9287dc0" class="t constructor">FilePath</a>(<a href="#1cdf65c5d26abd34" class="i property">Directory</a>, <span class="r104 r">msgFilename</span>);
			<b>try</b>
			{
				<b>return</b> <a href="../NGit.Util/RawParseUtils.cs.html#f87abe4d24b03b12" class="t t">RawParseUtils</a>.<a href="../NGit.Util/RawParseUtils.cs.html#8bffa26c659156c0" class="i method">Decode</a>(<a href="../NGit.Util/IOUtil.cs.html#d5aa4ac4db64211b" class="t t">IOUtil</a>.<a href="../NGit.Util/IOUtil.cs.html#cc1b739e85e7e2a4" class="i method">ReadFully</a>(<span class="r105 r">mergeMsgFile</span>));
			}
			<b>catch</b> (<a href="@0@mscorlib/A.html#fd582974d1f75ac7" class="t t">FileNotFoundException</a>)
			{
				<span class="c">// the file has disappeared in the meantime ignore it</span>
				<b>return null</b>;
			}
		}

		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">exception</span><span class="c"> </span><span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><span class="i n">System</span>.<span class="i n">IO</span>.<a href="@0@mscorlib/A.html#bf546e435199e83c" class="t t">IOException</a><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">&lt;/</span><span class="c">exception</span><span class="c">&gt;</span>
		<b>private void</b> <a id="3275d15087ed4abb" href="../R/3275d15087ed4abb.html" target="n" data-glyph="76,1" class="i method">WriteCommitMsg</a>(<a href="/Sharpen/A.html#576a1e6f183e15dd" class="t t">FilePath</a> <span id="r106 rd" class="r106 r">msgFile</span>, <b>string</b> <span id="r107 rd" class="r107 r">msg</span>)
		{
			<b>if</b> (<span class="r107 r">msg</span> != <b>null</b>)
			{
				<a href="/Sharpen/A.html#593039b4e998beb4" class="t t">FileOutputStream</a> <span id="r108 rd" class="r108 r">fos</span> = <b>new</b> <a href="/Sharpen/A.html#60d0d5bbf527518d" class="t constructor">FileOutputStream</a>(<span class="r106 r">msgFile</span>);
				<b>try</b>
				{
					<span class="r108 r">fos</span>.<a href="/Sharpen/A.html#ec32e8d9b5054188" class="i method">Write</a>(<span class="i n">Sharpen</span>.<a href="/Sharpen/A.html#e8e79b34b4baa5b2" class="t t">Runtime</a>.<a href="/Sharpen/A.html#6b7bb2933a237699" class="i method">GetBytesForString</a>(<span class="r107 r">msg</span>, <a href="Constants.cs.html#71c965f28a6bcd51" class="t t">Constants</a>.<a href="Constants.cs.html#b225eb73030e13b2" class="i field">CHARACTER_ENCODING</a>));
				}
				<b>finally</b>
				{
					<span class="r108 r">fos</span>.<a href="/Sharpen/A.html#6788f268a20b51ce" class="i method">Close</a>();
				}
			}
			<b>else</b>
			{
				<a href="../NGit.Util/FileUtils.cs.html#3295d5351faf7c6b" class="t t">FileUtils</a>.<a href="../NGit.Util/FileUtils.cs.html#5d45cc3b4ddbc04e" class="i method">Delete</a>(<span class="r106 r">msgFile</span>, <a href="../NGit.Util/FileUtils.cs.html#3295d5351faf7c6b" class="t t">FileUtils</a>.<a href="../NGit.Util/FileUtils.cs.html#d12c4c41c685be7b" class="i field">SKIP_MISSING</a>);
			}
		}

		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span><span class="c">Read a file from the git directory.</span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">remarks</span><span class="c">&gt;</span><span class="c">Read a file from the git directory.</span><span class="c">&lt;/</span><span class="c">remarks</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span><span class="c"> </span><span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r109 r">filename</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">returns</span><span class="c">&gt;</span><span class="c">the raw contents or null if the file doesn&#39;t exist or is empty</span><span class="c">&lt;/</span><span class="c">returns</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">exception</span><span class="c"> </span><span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><span class="i n">System</span>.<span class="i n">IO</span>.<a href="@0@mscorlib/A.html#bf546e435199e83c" class="t t">IOException</a><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">System.IO.IOException</span><span class="c">&lt;/</span><span class="c">exception</span><span class="c">&gt;</span>
		<b>private byte</b>[] <a id="c1c211a787e0d8f6" href="../R/c1c211a787e0d8f6.html" target="n" data-glyph="76,1" class="i method">ReadGitDirectoryFile</a>(<b>string</b> <span id="r109 rd" class="r109 r">filename</span>)
		{
			<a href="/Sharpen/A.html#576a1e6f183e15dd" class="t t">FilePath</a> <span id="r110 rd" class="r110 r">file</span> = <b>new</b> <a href="/Sharpen/A.html#47b5b21ff9287dc0" class="t constructor">FilePath</a>(<a href="#1cdf65c5d26abd34" class="i property">Directory</a>, <span class="r109 r">filename</span>);
			<b>try</b>
			{
				<b>byte</b>[] <span id="r111 rd" class="r111 r">raw</span> = <a href="../NGit.Util/IOUtil.cs.html#d5aa4ac4db64211b" class="t t">IOUtil</a>.<a href="../NGit.Util/IOUtil.cs.html#cc1b739e85e7e2a4" class="i method">ReadFully</a>(<span class="r110 r">file</span>);
				<b>return</b> <span class="r111 r">raw</span>.<a href="@0@mscorlib/A.html#42e9b7616956cf94" class="i property">Length</a> &gt; 0 ? <span class="r111 r">raw</span> : <b>null</b>;
			}
			<b>catch</b> (<a href="@0@mscorlib/A.html#fd582974d1f75ac7" class="t t">FileNotFoundException</a>)
			{
				<b>return null</b>;
			}
		}

		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span><span class="c">Write the given heads to a file in the git directory.</span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">remarks</span><span class="c">&gt;</span><span class="c">Write the given heads to a file in the git directory.</span><span class="c">&lt;/</span><span class="c">remarks</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span><span class="c"> </span><span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r112 r">heads</span><span class="c">&quot;</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> a list of object ids to write or null if the file should be</span>
		<span class="c">///</span><span class="c"> deleted.</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span><span class="c"> </span><span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r113 r">filename</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">exception</span><span class="c"> </span><span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><span class="i n">System</span>.<span class="i n">IO</span>.<a href="@0@mscorlib/A.html#fd582974d1f75ac7" class="t t">FileNotFoundException</a><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">System.IO.FileNotFoundException</span>
		<span class="c">///</span><span class="c"> 	</span><span class="c">&lt;/</span><span class="c">exception</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">exception</span><span class="c"> </span><span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><span class="i n">System</span>.<span class="i n">IO</span>.<a href="@0@mscorlib/A.html#bf546e435199e83c" class="t t">IOException</a><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">System.IO.IOException</span><span class="c">&lt;/</span><span class="c">exception</span><span class="c">&gt;</span>
		<b>private void</b> <a id="e7cf16e15bc31351" href="../R/e7cf16e15bc31351.html" target="n" data-glyph="76,1" class="i method">WriteHeadsFile</a>(<a href="@0@mscorlib/A.html#b19f71a84062554b" class="t t">IList</a>&lt;<a href="ObjectId.cs.html#96e3af3718f0610d" class="t t">ObjectId</a>&gt; <span id="r112 rd" class="r112 r">heads</span>, <b>string</b> <span id="r113 rd" class="r113 r">filename</span>)
		{
			<a href="/Sharpen/A.html#576a1e6f183e15dd" class="t t">FilePath</a> <span id="r114 rd" class="r114 r">headsFile</span> = <b>new</b> <a href="/Sharpen/A.html#47b5b21ff9287dc0" class="t constructor">FilePath</a>(<a href="#1cdf65c5d26abd34" class="i property">Directory</a>, <span class="r113 r">filename</span>);
			<b>if</b> (<span class="r112 r">heads</span> != <b>null</b>)
			{
				<a href="/Sharpen/A.html#07909ae79cfffde2" class="t t">BufferedOutputStream</a> <span id="r115 rd" class="r115 r">bos</span> = <b>new</b> <a href="../NGit.Util.IO/SafeBufferedOutputStream.cs.html#6543b49a9c6341bc" class="t constructor">SafeBufferedOutputStream</a>(<b>new</b> <a href="/Sharpen/A.html#60d0d5bbf527518d" class="t constructor">FileOutputStream</a>(<span class="r114 r">headsFile</span>
					));
				<b>try</b>
				{
					<b>foreach</b> (<a href="ObjectId.cs.html#96e3af3718f0610d" class="t t">ObjectId</a> <span id="r116 rd" class="r116 r">id</span> <b>in</b> <span class="r112 r">heads</span>)
					{
						<span class="r116 r">id</span>.<a href="AnyObjectId.cs.html#358b1dc4120b37be" class="i method">CopyTo</a>(<span class="r115 r">bos</span>);
						<span class="r115 r">bos</span>.<a href="/Sharpen/A.html#acd4639498b60294" class="i method">Write</a>(<span class="s">&#39;\n&#39;</span>);
					}
				}
				<b>finally</b>
				{
					<span class="r115 r">bos</span>.<a href="/Sharpen/A.html#6788f268a20b51ce" class="i method">Close</a>();
				}
			}
			<b>else</b>
			{
				<a href="../NGit.Util/FileUtils.cs.html#3295d5351faf7c6b" class="t t">FileUtils</a>.<a href="../NGit.Util/FileUtils.cs.html#5d45cc3b4ddbc04e" class="i method">Delete</a>(<span class="r114 r">headsFile</span>, <a href="../NGit.Util/FileUtils.cs.html#3295d5351faf7c6b" class="t t">FileUtils</a>.<a href="../NGit.Util/FileUtils.cs.html#d12c4c41c685be7b" class="i field">SKIP_MISSING</a>);
			}
		}
	}
}
</pre></td></tr></table></div></body></html>
