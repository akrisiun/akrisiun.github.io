<!DOCTYPE html>
<html><head><title>UserConfig.cs</title><link rel="stylesheet" href="../styles.css"><script src="../scripts.js"></script></head>
<body class="cB" onload="i(137);"><div class="dH">
<table style="width: 100%">
<tr><td>File: <a id="filePath" class="blueLink" href="/#GitSharp.Core/UserConfig.cs" target="_top">UserConfig.cs</a><br/></td><td></td></tr>
<tr><td>Project: <a id="projectPath" class="blueLink" href="/#GitSharp.Core" target="_top">lib\GitSharp\GitSharp.Core\GitSharp.Core.csproj</a> (GitSharp.Core)</td><td></td></tr>
</table>
</div>
<div class="cz"><table class="tb" cellpadding="0" cellspacing="0"><tr><td valign="top" align="right"><pre id="ln"></pre></td><td valign="top" align="left"><pre id="code">
<span class="c">/*
 * Copyright (C) 2009, Yann Simon &lt;yann.simon.fr@gmail.com&gt;
 * Copyright (C) 2009, Google Inc.
 *
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or
 * without modification, are permitted provided that the following
 * conditions are met:
 *
 * - Redistributions of source code must retain the above copyright
 *   notice, this list of conditions and the following disclaimer.
 *
 * - Redistributions in binary form must reproduce the above
 *   copyright notice, this list of conditions and the following
 *   disclaimer in the documentation and/or other materials provided
 *   with the distribution.
 *
 * - Neither the name of the Git Development Community nor the
 *   names of its contributors may be used to endorse or promote
 *   products derived from this software without specific prior
 *   written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND
 * CONTRIBUTORS &quot;AS IS&quot; AND ANY EXPRESS OR IMPLIED WARRANTIES,
 * INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
 * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
 * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR
 * CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT
 * NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
 * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER
 * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT,
 * STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
 * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF
 * ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */</span>

<b>using</b> <span class="i n">GitSharp</span>.<span class="i n">Core</span>.<span class="i n">Util</span>;

<b>namespace</b> <span class="i n">GitSharp</span>.<span class="i n">Core</span>
{

    <b>public class</b> <a id="0981a55d28946536" href="R/0981a55d28946536.html" target="n" data-glyph="0,0" class="t t">UserConfig</a>
    {
        <b>private class</b> <a id="5c642ef660c4c0ae" href="R/5c642ef660c4c0ae.html" target="n" data-glyph="4,1" class="t t"><span id="2aa5c633667e1d47">SectionParser</span></a> : <a href="Config.cs.html#14d5730154bea165" class="t t">Config</a>.<a href="Config.cs.html#c759ea511b958d64" class="t t">SectionParser</a>&lt;<a href="#0981a55d28946536" class="t t">UserConfig</a>&gt;
        {
            <b>public</b> <a href="#0981a55d28946536" class="t t">UserConfig</a> <a id="996e2b84e75072ad" href="R/996e2b84e75072ad.html" target="n" data-glyph="72,2" class="i method">parse</a>(<a href="Config.cs.html#14d5730154bea165" class="t t">Config</a> <span id="r0 rd" class="r0 r">cfg</span>)
            {
                <b>return</b> <b>new</b> <a href="#b251c2fa637aecae" class="t constructor">UserConfig</a>(<span class="r0 r">cfg</span>);
            }
        }

        <b>public static</b> <a href="Config.cs.html#14d5730154bea165" class="t t">Config</a>.<a href="Config.cs.html#c759ea511b958d64" class="t t">SectionParser</a>&lt;<a href="#0981a55d28946536" class="t t">UserConfig</a>&gt; <a id="4f3b6ff093ce989a" href="R/4f3b6ff093ce989a.html" target="n" data-glyph="42,1" class="i field">KEY</a> = <b>new</b> <a href="#5c642ef660c4c0ae" class="t constructor">SectionParser</a>();

        <b>private readonly string</b> <a id="b76efb559c9a640d" href="R/b76efb559c9a640d.html" target="n" data-glyph="46,1" class="i field">authorName</a>;
        <b>private readonly string</b> <a id="c251d391d98db27b" href="R/c251d391d98db27b.html" target="n" data-glyph="46,1" class="i field">authorEmail</a>;
        <b>private readonly string</b> <a id="d6f17842f523d1e7" href="R/d6f17842f523d1e7.html" target="n" data-glyph="46,1" class="i field">committerName</a>;
        <b>private readonly string</b> <a id="e626bf2a974f48bf" href="R/e626bf2a974f48bf.html" target="n" data-glyph="46,1" class="i field">committerEmail</a>;

        <b>public</b> <a id="b251c2fa637aecae" href="R/b251c2fa637aecae.html" target="n" data-glyph="72,1" class="i constructor">UserConfig</a>(<a href="Config.cs.html#14d5730154bea165" class="t t">Config</a> <span id="r1 rd" class="r1 r">rc</span>)
        {
            <a href="#b76efb559c9a640d" class="i field">authorName</a> = <a href="#5895553e74114ff7" class="i method">getNameInternal</a>(<span class="r1 r">rc</span>, <a href="Constants.cs.html#4c9cf80bf668e5fb" class="t t">Constants</a>.<a href="Constants.cs.html#253cba43d597e984" class="i field">GIT_AUTHOR_NAME_KEY</a>);
            <a href="#c251d391d98db27b" class="i field">authorEmail</a> = <a href="#89bae67cdbab866e" class="i method">getEmailInternal</a>(<span class="r1 r">rc</span>, <a href="Constants.cs.html#4c9cf80bf668e5fb" class="t t">Constants</a>.<a href="Constants.cs.html#1068aba5b0dd4eba" class="i field">GIT_AUTHOR_EMAIL_KEY</a>);

            <a href="#d6f17842f523d1e7" class="i field">committerName</a> = <a href="#5895553e74114ff7" class="i method">getNameInternal</a>(<span class="r1 r">rc</span>, <a href="Constants.cs.html#4c9cf80bf668e5fb" class="t t">Constants</a>.<a href="Constants.cs.html#c9eecc7ae729fad5" class="i field">GIT_COMMITTER_NAME_KEY</a>);
            <a href="#e626bf2a974f48bf" class="i field">committerEmail</a> = <a href="#89bae67cdbab866e" class="i method">getEmailInternal</a>(<span class="r1 r">rc</span>, <a href="Constants.cs.html#4c9cf80bf668e5fb" class="t t">Constants</a>.<a href="Constants.cs.html#fee8f64784d02d9f" class="i field">GIT_COMMITTER_EMAIL_KEY</a>);
        }

        <b>public string</b> <a id="1f5ba8325711e4b2" href="R/1f5ba8325711e4b2.html" target="n" data-glyph="72,1" class="i method">getAuthorName</a>()
        {
            <b>return</b> <a href="#b76efb559c9a640d" class="i field">authorName</a>;
        }

        <b>public string</b> <a id="5dde2892a4e4586b" href="R/5dde2892a4e4586b.html" target="n" data-glyph="72,1" class="i method">getCommitterName</a>()
        {
            <b>return</b> <a href="#d6f17842f523d1e7" class="i field">committerName</a>;
        }

        <b>public string</b> <a id="14b6bcabf3ee40d9" href="R/14b6bcabf3ee40d9.html" target="n" data-glyph="72,1" class="i method">getAuthorEmail</a>()
        {
            <b>return</b> <a href="#c251d391d98db27b" class="i field">authorEmail</a>;
        }
        
        <b>public string</b> <a id="b40e81d62b0a9550" href="R/b40e81d62b0a9550.html" target="n" data-glyph="72,1" class="i method">getCommitterEmail</a>()
        {
            <b>return</b> <a href="#e626bf2a974f48bf" class="i field">committerEmail</a>;
        }

        <b>private string</b> <a id="5895553e74114ff7" href="R/5895553e74114ff7.html" target="n" data-glyph="76,1" class="i method">getNameInternal</a>(<a href="Config.cs.html#14d5730154bea165" class="t t">Config</a> <span id="r2 rd" class="r2 r">rc</span>, <b>string</b> <span id="r3 rd" class="r3 r">envKey</span>)
        {
            <b>string</b> <span id="r4 rd" class="r4 r">username</span> = <span class="r2 r">rc</span>.<a href="Config.cs.html#d215890433ed9633" class="i method">getString</a>(<span class="s">&quot;user&quot;</span>, <b>null</b>, <span class="s">&quot;name&quot;</span>);

            <b>if</b> (<span class="r4 r">username</span> == <b>null</b>)
            {
                <span class="r4 r">username</span> = <a href="#22877ffea0bd6112" class="i method">system</a>().<a href="SystemReader.cs.html#f1975f641fd5081d" class="i method">getenv</a>(<span class="r3 r">envKey</span>);
            }
            <b>if</b> (<span class="r4 r">username</span> == <b>null</b>)
            {
                <span class="r4 r">username</span> = <a href="#22877ffea0bd6112" class="i method">system</a>().<a href="SystemReader.cs.html#1653d5d1b573edba" class="i method">getProperty</a>(<a href="Constants.cs.html#4c9cf80bf668e5fb" class="t t">Constants</a>.<a href="Constants.cs.html#ccbbd6940dc64197" class="i field">OS_USER_NAME_KEY</a>);
            }
            <b>if</b> (<span class="r4 r">username</span> == <b>null</b>)
            {
                <span class="r4 r">username</span> = <a href="Constants.cs.html#4c9cf80bf668e5fb" class="t t">Constants</a>.<a href="Constants.cs.html#176537f021d934ae" class="i field">UNKNOWN_USER_DEFAULT</a>;
            }

            <b>return</b> <span class="r4 r">username</span>;
        }

        <b>private string</b> <a id="89bae67cdbab866e" href="R/89bae67cdbab866e.html" target="n" data-glyph="76,1" class="i method">getEmailInternal</a>(<a href="Config.cs.html#14d5730154bea165" class="t t">Config</a> <span id="r5 rd" class="r5 r">rc</span>, <b>string</b> <span id="r6 rd" class="r6 r">envKey</span>)
        {
            <b>string</b> <span id="r7 rd" class="r7 r">email</span> = <span class="r5 r">rc</span>.<a href="Config.cs.html#d215890433ed9633" class="i method">getString</a>(<span class="s">&quot;user&quot;</span>, <b>null</b>, <span class="s">&quot;email&quot;</span>);

            <b>if</b> (<span class="r7 r">email</span> == <b>null</b>)
            {
                <span class="r7 r">email</span> = <a href="#22877ffea0bd6112" class="i method">system</a>().<a href="SystemReader.cs.html#f1975f641fd5081d" class="i method">getenv</a>(<span class="r6 r">envKey</span>);
            }
            <b>if</b> (<span class="r7 r">email</span> == <b>null</b>)
            {
                <b>string</b> <span id="r8 rd" class="r8 r">username</span> = <a href="#22877ffea0bd6112" class="i method">system</a>().<a href="SystemReader.cs.html#1653d5d1b573edba" class="i method">getProperty</a>(<a href="Constants.cs.html#4c9cf80bf668e5fb" class="t t">Constants</a>.<a href="Constants.cs.html#ccbbd6940dc64197" class="i field">OS_USER_NAME_KEY</a>);
                <b>if</b> (<span class="r8 r">username</span> == <b>null</b>)
                {
                    <span class="r8 r">username</span> = <a href="Constants.cs.html#4c9cf80bf668e5fb" class="t t">Constants</a>.<a href="Constants.cs.html#176537f021d934ae" class="i field">UNKNOWN_USER_DEFAULT</a>;
                }
                <span class="r7 r">email</span> = <span class="r8 r">username</span> + <span class="s">&quot;@&quot;</span> + <a href="#22877ffea0bd6112" class="i method">system</a>().<a href="SystemReader.cs.html#ccd2c514fa428505" class="i method">getHostname</a>();
            }

            <b>return</b> <span class="r7 r">email</span>;
        }

        <b>private</b> <a href="SystemReader.cs.html#36b2c00b32768833" class="t t">SystemReader</a> <a id="22877ffea0bd6112" href="R/22877ffea0bd6112.html" target="n" data-glyph="76,1" class="i method">system</a>()
        {
            <b>return</b> <a href="SystemReader.cs.html#36b2c00b32768833" class="t t">SystemReader</a>.<a href="SystemReader.cs.html#8313facd37fc98f9" class="i method">getInstance</a>();
        }
    }

}</pre></td></tr></table></div></body></html>
