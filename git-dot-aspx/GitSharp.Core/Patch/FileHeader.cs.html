<!DOCTYPE html>
<html><head><title>FileHeader.cs</title><link rel="stylesheet" href="../../styles.css"><script src="../../scripts.js"></script></head>
<body class="cB" onload="i(867);"><div class="dH">
<table style="width: 100%">
<tr><td>File: <a id="filePath" class="blueLink" href="/#GitSharp.Core/Patch/FileHeader.cs" target="_top">Patch\FileHeader.cs</a><br/></td><td></td></tr>
<tr><td>Project: <a id="projectPath" class="blueLink" href="/#GitSharp.Core" target="_top">lib\GitSharp\GitSharp.Core\GitSharp.Core.csproj</a> (GitSharp.Core)</td><td></td></tr>
</table>
</div>
<div class="cz"><table class="tb" cellpadding="0" cellspacing="0"><tr><td valign="top" align="right"><pre id="ln"></pre></td><td valign="top" align="left"><pre id="code">
<span class="c">/*
 * Copyright (C) 2008, Google Inc.
 * Copyright (C) 2009, Gil Ran &lt;gilrun@gmail.com&gt;
 *
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or
 * without modification, are permitted provided that the following
 * conditions are met:
 *
 * - Redistributions of source code must retain the above copyright
 *   notice, this list of conditions and the following disclaimer.
 *
 * - Redistributions in binary form must reproduce the above
 *   copyright notice, this list of conditions and the following
 *   disclaimer in the documentation and/or other materials provided
 *   with the distribution.
 *
 * - Neither the name of the Git Development Community nor the
 *   names of its contributors may be used to endorse or promote
 *   products derived from this software without specific prior
 *   written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND
 * CONTRIBUTORS &quot;AS IS&quot; AND ANY EXPRESS OR IMPLIED WARRANTIES,
 * INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
 * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
 * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR
 * CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT
 * NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
 * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER
 * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT,
 * STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
 * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF
 * ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */</span>

<b>using</b> <span class="i n">System</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Collections</span>.<span class="i n">Generic</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">IO</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Text</span>;
<b>using</b> <span class="i n">GitSharp</span>.<span class="i n">Core</span>.<span class="i n">Diff</span>;
<b>using</b> <span class="i n">GitSharp</span>.<span class="i n">Core</span>.<span class="i n">Util</span>;

<b>namespace</b> <span class="i n">GitSharp</span>.<span class="i n">Core</span>.<span class="i n">Patch</span>
{
	<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
	<span class="c">///</span><span class="c"> Patch header describing an action for a single file path.</span>
	<span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
	[<a href="@0@mscorlib/A.html#e971d5381ca60183" class="t constructor">Serializable</a>]
	<b>public class</b> <a id="94dd558d804785e0" href="../R/94dd558d804785e0.html" target="n" data-glyph="0,0" class="t t">FileHeader</a>
	{
		<span class="c">// Magical file name used for file adds or deletes.</span>
		<b>public const string</b> <a id="4cfdd6ddbffb851d" href="../R/4cfdd6ddbffb851d.html" target="n" data-glyph="6,1" class="i field">DEV_NULL</a> = <span class="s">&quot;/dev/null&quot;</span>;

		<b>private static readonly byte</b>[] <a id="1bf1dbb3564c1fcf" href="../R/1bf1dbb3564c1fcf.html" target="n" data-glyph="46,1" class="i field">OldModeString</a> = <a href="../Constants.cs.html#4c9cf80bf668e5fb" class="t t">Constants</a>.<a href="../Constants.cs.html#af14cec28cefe1b4" class="i method">encodeASCII</a>(<span class="s">&quot;old mode &quot;</span>);

		<b>private static readonly byte</b>[] <a id="dbadb4eec45d010d" href="../R/dbadb4eec45d010d.html" target="n" data-glyph="46,1" class="i field">NewModeString</a> = <a href="../Constants.cs.html#4c9cf80bf668e5fb" class="t t">Constants</a>.<a href="../Constants.cs.html#af14cec28cefe1b4" class="i method">encodeASCII</a>(<span class="s">&quot;new mode &quot;</span>);

		<b>protected static readonly byte</b>[] <a id="10e185d989c8d641" href="../R/10e185d989c8d641.html" target="n" data-glyph="45,1" class="i field">DeletedFileMode</a> = <a href="../Constants.cs.html#4c9cf80bf668e5fb" class="t t">Constants</a>.<a href="../Constants.cs.html#af14cec28cefe1b4" class="i method">encodeASCII</a>(<span class="s">&quot;deleted file mode &quot;</span>);

		<b>protected static readonly byte</b>[] <a id="54b1ea5520a8911a" href="../R/54b1ea5520a8911a.html" target="n" data-glyph="45,1" class="i field">NewFileMode</a> = <a href="../Constants.cs.html#4c9cf80bf668e5fb" class="t t">Constants</a>.<a href="../Constants.cs.html#af14cec28cefe1b4" class="i method">encodeASCII</a>(<span class="s">&quot;new file mode &quot;</span>);

		<b>private static readonly byte</b>[] <a id="b998e189fc8125f8" href="../R/b998e189fc8125f8.html" target="n" data-glyph="46,1" class="i field">CopyFrom</a> = <a href="../Constants.cs.html#4c9cf80bf668e5fb" class="t t">Constants</a>.<a href="../Constants.cs.html#af14cec28cefe1b4" class="i method">encodeASCII</a>(<span class="s">&quot;copy from &quot;</span>);

		<b>private static readonly byte</b>[] <a id="bbbbd4b645f957c0" href="../R/bbbbd4b645f957c0.html" target="n" data-glyph="46,1" class="i field">CopyTo</a> = <a href="../Constants.cs.html#4c9cf80bf668e5fb" class="t t">Constants</a>.<a href="../Constants.cs.html#af14cec28cefe1b4" class="i method">encodeASCII</a>(<span class="s">&quot;copy to &quot;</span>);

		<b>private static readonly byte</b>[] <a id="1735c5a71b6825fc" href="../R/1735c5a71b6825fc.html" target="n" data-glyph="46,1" class="i field">RenameOld</a> = <a href="../Constants.cs.html#4c9cf80bf668e5fb" class="t t">Constants</a>.<a href="../Constants.cs.html#af14cec28cefe1b4" class="i method">encodeASCII</a>(<span class="s">&quot;rename old &quot;</span>);

		<b>private static readonly byte</b>[] <a id="ae9696695f3e3574" href="../R/ae9696695f3e3574.html" target="n" data-glyph="46,1" class="i field">RenameNew</a> = <a href="../Constants.cs.html#4c9cf80bf668e5fb" class="t t">Constants</a>.<a href="../Constants.cs.html#af14cec28cefe1b4" class="i method">encodeASCII</a>(<span class="s">&quot;rename new &quot;</span>);

		<b>private static readonly byte</b>[] <a id="8f883679fad61310" href="../R/8f883679fad61310.html" target="n" data-glyph="46,1" class="i field">RenameFrom</a> = <a href="../Constants.cs.html#4c9cf80bf668e5fb" class="t t">Constants</a>.<a href="../Constants.cs.html#af14cec28cefe1b4" class="i method">encodeASCII</a>(<span class="s">&quot;rename from &quot;</span>);

		<b>private static readonly byte</b>[] <a id="4afae670bff6414f" href="../R/4afae670bff6414f.html" target="n" data-glyph="46,1" class="i field">RenameTo</a> = <a href="../Constants.cs.html#4c9cf80bf668e5fb" class="t t">Constants</a>.<a href="../Constants.cs.html#af14cec28cefe1b4" class="i method">encodeASCII</a>(<span class="s">&quot;rename to &quot;</span>);

		<b>private static readonly byte</b>[] <a id="4315e1d6ba6336e9" href="../R/4315e1d6ba6336e9.html" target="n" data-glyph="46,1" class="i field">SimilarityIndex</a> = <a href="../Constants.cs.html#4c9cf80bf668e5fb" class="t t">Constants</a>.<a href="../Constants.cs.html#af14cec28cefe1b4" class="i method">encodeASCII</a>(<span class="s">&quot;similarity index &quot;</span>);

		<b>private static readonly byte</b>[] <a id="f28ce1c255cded9c" href="../R/f28ce1c255cded9c.html" target="n" data-glyph="46,1" class="i field">DissimilarityIndex</a> = <a href="../Constants.cs.html#4c9cf80bf668e5fb" class="t t">Constants</a>.<a href="../Constants.cs.html#af14cec28cefe1b4" class="i method">encodeASCII</a>(<span class="s">&quot;dissimilarity index &quot;</span>);

		<b>protected static readonly byte</b>[] <a id="c399b532449f536e" href="../R/c399b532449f536e.html" target="n" data-glyph="45,1" class="i field">Index</a> = <a href="../Constants.cs.html#4c9cf80bf668e5fb" class="t t">Constants</a>.<a href="../Constants.cs.html#af14cec28cefe1b4" class="i method">encodeASCII</a>(<span class="s">&quot;index &quot;</span>);

		<b>public static readonly byte</b>[] <a id="c28ae1eeaf01e369" href="../R/c28ae1eeaf01e369.html" target="n" data-glyph="42,1" class="i field">OLD_NAME</a> = <a href="../Constants.cs.html#4c9cf80bf668e5fb" class="t t">Constants</a>.<a href="../Constants.cs.html#af14cec28cefe1b4" class="i method">encodeASCII</a>(<span class="s">&quot;--- &quot;</span>);

		<b>public static readonly byte</b>[] <a id="c908d4c2ae66b7ca" href="../R/c908d4c2ae66b7ca.html" target="n" data-glyph="42,1" class="i field">NEW_NAME</a> = <a href="../Constants.cs.html#4c9cf80bf668e5fb" class="t t">Constants</a>.<a href="../Constants.cs.html#af14cec28cefe1b4" class="i method">encodeASCII</a>(<span class="s">&quot;+++ &quot;</span>);

		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> General type of change a single file-level patch describes.</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
		[<a href="@0@mscorlib/A.html#e971d5381ca60183" class="t constructor">Serializable</a>]
		<b>public enum</b> <a id="afc6a2168d35464b" href="../R/afc6a2168d35464b.html" target="n" data-glyph="18,1" class="t t"><span id="da5f7cb22a84be39">ChangeTypeEnum</span></a>
		{
			<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
			<span class="c">///</span><span class="c"> Add a new file to the project</span>
			<span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
			<a id="54e75bb8c41189c2" href="../R/54e75bb8c41189c2.html" target="n" data-glyph="24,2" class="i field">ADD</a>,

			<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
			<span class="c">///</span><span class="c"> Modify an existing file in the project (content and/or mode)</span>
			<span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
			<a id="f84547d19b1feba8" href="../R/f84547d19b1feba8.html" target="n" data-glyph="24,2" class="i field">MODIFY</a>,

			<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
			<span class="c">///</span><span class="c"> Delete an existing file from the project</span>
			<span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
			<a id="8dfb08bcb2671fb2" href="../R/8dfb08bcb2671fb2.html" target="n" data-glyph="24,2" class="i field">DELETE</a>,

			<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
			<span class="c">///</span><span class="c"> Rename an existing file to a new location</span>
			<span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
			<a id="b66bad3a6afb98fc" href="../R/b66bad3a6afb98fc.html" target="n" data-glyph="24,2" class="i field">RENAME</a>,

			<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
			<span class="c">///</span><span class="c"> Copy an existing file to a new location, keeping the original</span>
			<span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
			<a id="6a2827954f0248f4" href="../R/6a2827954f0248f4.html" target="n" data-glyph="24,2" class="i field">COPY</a>
		}

		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> Type of patch used by this file.</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
		[<a href="@0@mscorlib/A.html#e971d5381ca60183" class="t constructor">Serializable</a>]
		<b>public enum</b> <a id="0ac606b35f6e6063" href="../R/0ac606b35f6e6063.html" target="n" data-glyph="18,1" class="t t"><span id="8d158f6b83771c8a">PatchTypeEnum</span></a>
		{
			<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
			<span class="c">///</span><span class="c"> A traditional unified diff style patch of a text file.</span>
			<span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
			<a id="81170846404eaa33" href="../R/81170846404eaa33.html" target="n" data-glyph="24,2" class="i field">UNIFIED</a>,

			<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
			<span class="c">///</span><span class="c"> An empty patch with a message &quot;Binary files ... differ&quot;</span>
			<span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
			<a id="f0ff432b6f5c0353" href="../R/f0ff432b6f5c0353.html" target="n" data-glyph="24,2" class="i field">BINARY</a>,

			<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
			<span class="c">///</span><span class="c"> A Git binary patch, holding pre and post image deltas</span>
			<span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
			<a id="c100325aefcba500" href="../R/c100325aefcba500.html" target="n" data-glyph="24,2" class="i field">GIT_BINARY</a>
		}

		<span class="c">// File name of the old (pre-image).</span>
		<b>private string</b> <a id="03b625120aaf82ac" href="../R/03b625120aaf82ac.html" target="n" data-glyph="46,1" class="i field">oldName</a>;

		<span class="c">// File name of the new (post-image).</span>
		<b>private string</b> <a id="df5ffc8c5ad4b8f3" href="../R/df5ffc8c5ad4b8f3.html" target="n" data-glyph="46,1" class="i field">newName</a>;

		<span class="c">// Old mode of the file, if described by the patch, else null.</span>
		<b>private</b> <a href="../FileMode.cs.html#2686d9196f6bc5fe" class="t t">FileMode</a> <a id="1bcbbd7c24634cb0" href="../R/1bcbbd7c24634cb0.html" target="n" data-glyph="46,1" class="i field">_oldMode</a>;

		<span class="c">// New mode of the file, if described by the patch, else null.</span>
		<b>private</b> <a href="../FileMode.cs.html#2686d9196f6bc5fe" class="t t">FileMode</a> <a id="a30c2e13da94e755" href="../R/a30c2e13da94e755.html" target="n" data-glyph="46,1" class="i field">_newMode</a>;

		<span class="c">// Similarity score if ChangeType is a copy or rename.</span>
		<b>private int</b> <a id="4cececf095593109" href="../R/4cececf095593109.html" target="n" data-glyph="46,1" class="i field">_score</a>;

		<span class="c">// ObjectId listed on the index line for the old (pre-image)</span>
		<b>private</b> <a href="../AbbreviatedObjectId.cs.html#f643b6637511da45" class="t t">AbbreviatedObjectId</a> <a id="0ede46752192441d" href="../R/0ede46752192441d.html" target="n" data-glyph="46,1" class="i field">oldId</a>;

		<span class="c">// The hunks of this file</span>
		<b>private</b> <a href="@0@mscorlib/A.html#cf7f4095e4de7646" class="t t">List</a>&lt;<a href="HunkHeader.cs.html#b93819dcfb6af782" class="t t">HunkHeader</a>&gt; <a id="b267a3692172fa14" href="../R/b267a3692172fa14.html" target="n" data-glyph="46,1" class="i field">_hunks</a>;

		<b>public</b> <a id="b43f3ae677e99220" href="../R/b43f3ae677e99220.html" target="n" data-glyph="72,1" class="i constructor">FileHeader</a>(<b>byte</b>[] <span id="r0 rd" class="r0 r">b</span>, <b>int</b> <span id="r1 rd" class="r1 r">offset</span>)
		{
			<a href="#fc52a48e75a69e9b" class="i property">Buffer</a> = <span class="r0 r">b</span>;
			<a href="#585f273387218a8a" class="i property">StartOffset</a> = <span class="r1 r">offset</span>;
			<a href="#c98b68d0f4ba506c" class="i property">ChangeType</a> = <a href="#afc6a2168d35464b" class="t t">ChangeTypeEnum</a>.<a href="#f84547d19b1feba8" class="i field">MODIFY</a>; <span class="c">// unless otherwise designated</span>
			<a href="#a643f74d3d93f5f8" class="i property">PatchType</a> = <a href="#0ac606b35f6e6063" class="t t">PatchTypeEnum</a>.<a href="#81170846404eaa33" class="i field">UNIFIED</a>;
		}

		<b>public virtual int</b> <a id="93752739944b0499" href="../R/93752739944b0499.html" target="n" data-glyph="102,1" class="i property">ParentCount</a>
		{
			<b>get</b> { <b>return</b> 1; }
		}

		<b>protected</b> <a href="../AbbreviatedObjectId.cs.html#f643b6637511da45" class="t t">AbbreviatedObjectId</a> <a id="aa48f20388879a87" href="../R/aa48f20388879a87.html" target="n" data-glyph="105,1" class="i property">NewId</a> { <b>private get</b>; <b>set</b>; }

		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> The byte array holding this file&#39;s patch script.</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">returns</span><span class="c">&gt;</span><span class="c">&lt;/</span><span class="c">returns</span><span class="c">&gt;</span>
		<b>public byte</b>[] <a id="fc52a48e75a69e9b" href="../R/fc52a48e75a69e9b.html" target="n" data-glyph="102,1" class="i property">Buffer</a> { <b>get</b>; <b>private set</b>; }

		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> Offset the start of this file&#39;s script in </span><span class="c">&lt;</span><span class="c">see</span><span class="c"> </span><span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="#fc52a48e75a69e9b" class="i property">Buffer</a><span class="c">&quot;</span><span class="c">/&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
		<b>public int</b> <a id="585f273387218a8a" href="../R/585f273387218a8a.html" target="n" data-glyph="102,1" class="i property">StartOffset</a> { <b>get</b>; <b>private set</b>; }

		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> Offset one past the end of the file script.</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">returns</span><span class="c">&gt;</span><span class="c">&lt;/</span><span class="c">returns</span><span class="c">&gt;</span>
		<b>public int</b> <a id="6bc694e41e813370" href="../R/6bc694e41e813370.html" target="n" data-glyph="102,1" class="i property">EndOffset</a> { <b>get</b>; <b>set</b>; }

		<b>public</b> <a href="BinaryHunk.cs.html#49a8be315be41caa" class="t t">BinaryHunk</a> <a id="b88b0afd7aae1e33" href="../R/b88b0afd7aae1e33.html" target="n" data-glyph="102,1" class="i property">ForwardBinaryHunk</a> { <b>get</b>; <b>set</b>; }

		<b>public</b> <a href="BinaryHunk.cs.html#49a8be315be41caa" class="t t">BinaryHunk</a> <a id="cf458d486e878351" href="../R/cf458d486e878351.html" target="n" data-glyph="102,1" class="i property">ReverseBinaryHunk</a> { <b>get</b>; <b>set</b>; }

		<b>public</b> <a href="#afc6a2168d35464b" class="t t">ChangeTypeEnum</a> <a id="c98b68d0f4ba506c" href="../R/c98b68d0f4ba506c.html" target="n" data-glyph="102,1" class="i property">ChangeType</a> { <b>get</b>; <b>set</b>; }

		<b>public</b> <a href="#0ac606b35f6e6063" class="t t">PatchTypeEnum</a> <a id="a643f74d3d93f5f8" href="../R/a643f74d3d93f5f8.html" target="n" data-glyph="102,1" class="i property">PatchType</a> { <b>get</b>; <b>set</b>; }

		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> Convert the patch script for this file into a string.</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">para</span><span class="c"> </span><span class="c">/&gt;</span>
		<span class="c">///</span><span class="c"> The default character encoding </span><span class="c">&lt;</span><span class="c">see</span><span class="c"> </span><span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="../Constants.cs.html#4c9cf80bf668e5fb" class="t t">Constants</a>.<a href="../Constants.cs.html#b2fcdc67ec48e578" class="i field">CHARSET</a><span class="c">&quot;</span><span class="c">/&gt;</span><span class="c"> is assumed for</span>
		<span class="c">///</span><span class="c"> both the old and new files.</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">returns</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> The patch script, as a Unicode string.</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">returns</span><span class="c">&gt;</span>
		<b>public string</b> <a id="60e6febca5ac6049" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">getScriptText</a>()
		{
			<b>return</b> <a href="#542ce9c6461c6aeb" class="i method">getScriptText</a>(<b>null</b>, <b>null</b>);
		}

		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c">Convert the patch script for this file into a string.</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span><span class="c"> </span><span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r2 r">oldCharset</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">hint character set to decode the old lines with.</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span><span class="c"> </span><span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r3 r">newCharset</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">hint character set to decode the new lines with.</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">returns</span><span class="c">&gt;</span><span class="c">the patch script, as a Unicode string.</span><span class="c">&lt;/</span><span class="c">returns</span><span class="c">&gt;</span>
		<b>public virtual string</b> <a id="542ce9c6461c6aeb" href="../R/542ce9c6461c6aeb.html" target="n" data-glyph="72,1" class="i method">getScriptText</a>(<a href="@0@mscorlib/A.html#3b6090c501893c25" class="t t">Encoding</a> <span id="r2 rd" class="r2 r">oldCharset</span>, <a href="@0@mscorlib/A.html#3b6090c501893c25" class="t t">Encoding</a> <span id="r3 rd" class="r3 r">newCharset</span>)
		{
			<b>return</b> <a href="#b58f427376a2ee00" class="i method">getScriptText</a>(<b>new</b>[] { <span class="r2 r">oldCharset</span>, <span class="r3 r">newCharset</span> });
		}

		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> Convert the patch script for this file into a string.</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span><span class="c"> </span><span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r4 r">charsetGuess</span><span class="c">&quot;</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> optional array to suggest the character set to use when</span>
		<span class="c">///</span><span class="c"> decoding each file&#39;s line. If supplied the array must have a</span>
		<span class="c">///</span><span class="c"> length of </span><span class="c">&lt;</span><span class="c">code</span><span class="c">&gt;</span><span class="c">&lt;</span><span class="c">see</span><span class="c"> </span><span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="#93752739944b0499" class="i property">ParentCount</a><span class="c">&quot;</span><span class="c">/&gt;</span><span class="c"> + 1</span><span class="c">&lt;/</span><span class="c">code</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> representing the old revision character sets and the new</span>
		<span class="c">///</span><span class="c"> revision character set.</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">returns</span><span class="c">&gt;</span><span class="c">the patch script, as a Unicode string.</span><span class="c">&lt;/</span><span class="c">returns</span><span class="c">&gt;</span>
		<b>public string</b> <a id="b58f427376a2ee00" href="../R/b58f427376a2ee00.html" target="n" data-glyph="72,1" class="i method">getScriptText</a>(<a href="@0@mscorlib/A.html#3b6090c501893c25" class="t t">Encoding</a>[] <span id="r4 rd" class="r4 r">charsetGuess</span>)
		{
			<b>if</b> (<a href="#2197149c7f023462" class="i property">Hunks</a>.<a href="@0@mscorlib/A.html#78a69d857716bc68" class="i property">Count</a> == 0)
			{
				<span class="c">// If we have no hunks then we can safely assume the entire</span>
				<span class="c">// patch is a binary style patch, or a meta-data only style</span>
				<span class="c">// patch. Either way the encoding of the headers should be</span>
				<span class="c">// strictly 7-bit US-ASCII and the body is either 7-bit ASCII</span>
				<span class="c">// (due to the base 85 encoding used for a BinaryHunk) or is</span>
				<span class="c">// arbitrary noise we have chosen to ignore and not understand</span>
				<span class="c">// (e.g. the message &quot;Binary files ... differ&quot;).</span>
				<span class="c">//</span>
				<b>return</b> <a href="../Util/RawParseUtils.cs.html#9c316fb813def011" class="t t">RawParseUtils</a>.<a href="../Util/RawParseUtils.cs.html#fa380493c1cdf53a" class="i method">extractBinaryString</a>(<a href="#fc52a48e75a69e9b" class="i property">Buffer</a>, <a href="#585f273387218a8a" class="i property">StartOffset</a>, <a href="#6bc694e41e813370" class="i property">EndOffset</a>);
			}

			<b>if</b> (<span class="r4 r">charsetGuess</span> != <b>null</b> &amp;&amp; <span class="r4 r">charsetGuess</span>.<a href="@0@mscorlib/A.html#42e9b7616956cf94" class="i property">Length</a> != <a href="#93752739944b0499" class="i property">ParentCount</a> + 1)
				<b>throw</b> <b>new</b> <a href="@0@mscorlib/A.html#eb98012a74461437" class="t constructor">ArgumentException</a>(<span class="s">&quot;Expected &quot;</span>
						+ (<a href="#93752739944b0499" class="i property">ParentCount</a> + 1) + <span class="s">&quot; character encoding guesses&quot;</span>);

			<b>if</b> (<a href="#34084c863eed2d6d" class="i method">TrySimpleConversion</a>(<span class="r4 r">charsetGuess</span>))
			{
				<a href="@0@mscorlib/A.html#3b6090c501893c25" class="t t">Encoding</a> <span id="r5 rd" class="r5 r">cs</span> = (<span class="r4 r">charsetGuess</span> != <b>null</b> ? <span class="r4 r">charsetGuess</span>[0] : <b>null</b>) ?? <a href="../Constants.cs.html#4c9cf80bf668e5fb" class="t t">Constants</a>.<a href="../Constants.cs.html#b2fcdc67ec48e578" class="i field">CHARSET</a>;

				<b>try</b>
				{
					<b>return</b> <a href="../Util/RawParseUtils.cs.html#9c316fb813def011" class="t t">RawParseUtils</a>.<a href="../Util/RawParseUtils.cs.html#0c7b4f3a022915f3" class="i method">decodeNoFallback</a>(<span class="r5 r">cs</span>, <a href="#fc52a48e75a69e9b" class="i property">Buffer</a>, <a href="#585f273387218a8a" class="i property">StartOffset</a>, <a href="#6bc694e41e813370" class="i property">EndOffset</a>);
				}
				<b>catch</b> (<a href="@0@mscorlib/A.html#06808559d4af982b" class="t t">EncoderFallbackException</a>)
				{
					<span class="c">// Try the much slower, more-memory intensive version which</span>
					<span class="c">// can handle a character set conversion patch.</span>
				}
			}

			<a href="@0@mscorlib/A.html#adf60ee46ebd299f" class="k">var</a> <span id="r6 rd" class="r6 r">r</span> = <b>new</b> <a href="@0@mscorlib/A.html#ec674e2123a44860" class="t constructor">StringBuilder</a>(<a href="#6bc694e41e813370" class="i property">EndOffset</a> - <a href="#585f273387218a8a" class="i property">StartOffset</a>);

			<span class="c">// Always treat the headers as US-ASCII; Git file names are encoded</span>
			<span class="c">// in a C style escape if any character has the high-bit set.</span>
			<span class="c">//</span>
			<b>int</b> <span id="r7 rd" class="r7 r">hdrEnd</span> = <a href="#2197149c7f023462" class="i property">Hunks</a>[0].<a href="HunkHeader.cs.html#9c55951485d783b1" class="i property">StartOffset</a>;
			<b>for</b> (<b>int</b> <span id="r8 rd" class="r8 r">ptr</span> = <a href="#585f273387218a8a" class="i property">StartOffset</a>; <span class="r8 r">ptr</span> &lt; <span class="r7 r">hdrEnd</span>; )
			{
				<b>int</b> <span id="r9 rd" class="r9 r">eol</span> = <a href="@0@mscorlib/A.html#a4407e67b9a5afad" class="t t">Math</a>.<a href="@0@mscorlib/A.html#f441d55c88d635ad" class="i method">Min</a>(<span class="r7 r">hdrEnd</span>, <a href="../Util/RawParseUtils.cs.html#9c316fb813def011" class="t t">RawParseUtils</a>.<a href="../Util/RawParseUtils.cs.html#0989702123852d37" class="i method">nextLF</a>(<a href="#fc52a48e75a69e9b" class="i property">Buffer</a>, <span class="r8 r">ptr</span>));
				<span class="r6 r">r</span>.<a href="@0@mscorlib/A.html#e8eaef3c361184bc" class="i method">Append</a>(<a href="../Util/RawParseUtils.cs.html#9c316fb813def011" class="t t">RawParseUtils</a>.<a href="../Util/RawParseUtils.cs.html#fa380493c1cdf53a" class="i method">extractBinaryString</a>(<a href="#fc52a48e75a69e9b" class="i property">Buffer</a>, <span class="r8 r">ptr</span>, <span class="r9 r">eol</span>));
				<span class="r8 r">ptr</span> = <span class="r9 r">eol</span>;
			}

			<b>string</b>[] <span id="r10 rd" class="r10 r">files</span> = <a href="#dcb394070556590d" class="i method">ExtractFileLines</a>(<span class="r4 r">charsetGuess</span>);
			<b>var</b> <span id="r11 rd" class="r11 r">offsets</span> = <b>new</b> <b>int</b>[<span class="r10 r">files</span>.<a href="@0@mscorlib/A.html#42e9b7616956cf94" class="i property">Length</a>];
			<b>foreach</b> (<a href="HunkHeader.cs.html#b93819dcfb6af782" class="t t">HunkHeader</a> <span id="r12 rd" class="r12 r">h</span> <b>in</b> <a href="#2197149c7f023462" class="i property">Hunks</a>)
			{
				<span class="r12 r">h</span>.<a href="HunkHeader.cs.html#293dd0ede11a7122" class="i method">extractFileLines</a>(<span class="r6 r">r</span>, <span class="r10 r">files</span>, <span class="r11 r">offsets</span>);
			}

			<b>return</b> <span class="r6 r">r</span>.<a href="@0@mscorlib/A.html#5a97da49a158a3c9" class="i method">ToString</a>();
		}

		<b>private static bool</b> <a id="34084c863eed2d6d" href="../R/34084c863eed2d6d.html" target="n" data-glyph="76,1" class="i method">TrySimpleConversion</a>(<a href="@0@mscorlib/A.html#3b6090c501893c25" class="t t">Encoding</a>[] <span id="r13 rd" class="r13 r">charsetGuess</span>)
		{
			<b>if</b> (<span class="r13 r">charsetGuess</span> == <b>null</b>) <b>return true</b>;

			<b>for</b> (<b>int</b> <span id="r14 rd" class="r14 r">i</span> = 1; <span class="r14 r">i</span> &lt; <span class="r13 r">charsetGuess</span>.<a href="@0@mscorlib/A.html#42e9b7616956cf94" class="i property">Length</a>; <span class="r14 r">i</span>++)
			{
				<b>if</b> (<span class="r13 r">charsetGuess</span>[<span class="r14 r">i</span>] != <span class="r13 r">charsetGuess</span>[0]) <b>return false</b>;
			}
			<b>return true</b>;
		}

		<b>private string</b>[] <a id="dcb394070556590d" href="../R/dcb394070556590d.html" target="n" data-glyph="76,1" class="i method">ExtractFileLines</a>(<a href="@0@mscorlib/A.html#3b6090c501893c25" class="t t">Encoding</a>[] <span id="r15 rd" class="r15 r">csGuess</span>)
		{
			<b>var</b> <span id="r16 rd" class="r16 r">tmp</span> = <b>new</b> <a href="../Util/TemporaryBuffer.cs.html#657dbd7b9cab3ad5" class="t t">TemporaryBuffer</a>[<a href="#93752739944b0499" class="i property">ParentCount</a> + 1];
			<b>try</b>
			{
				<b>for</b> (<b>int</b> <span id="r17 rd" class="r17 r">i</span> = 0; <span class="r17 r">i</span> &lt; <span class="r16 r">tmp</span>.<a href="@0@mscorlib/A.html#42e9b7616956cf94" class="i property">Length</a>; <span class="r17 r">i</span>++)
				{
					<span class="r16 r">tmp</span>[<span class="r17 r">i</span>] = <b>new</b> <a href="../Util/TemporaryBuffer.cs.html#aefbe444c2eb9e5e" class="t constructor">LocalFileBuffer</a>();
				}

				<b>foreach</b> (<a href="HunkHeader.cs.html#b93819dcfb6af782" class="t t">HunkHeader</a> <span id="r18 rd" class="r18 r">h</span> <b>in</b> <a href="#2197149c7f023462" class="i property">Hunks</a>)
				{
					<span class="r18 r">h</span>.<a href="HunkHeader.cs.html#4ae8a4e8603b25b1" class="i method">extractFileLines</a>(<span class="r16 r">tmp</span>);
				}

				<b>var</b> <span id="r19 rd" class="r19 r">r</span> = <b>new</b> <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="t t">String</a>[<span class="r16 r">tmp</span>.<a href="@0@mscorlib/A.html#42e9b7616956cf94" class="i property">Length</a>];
				<b>for</b> (<b>int</b> <span id="r20 rd" class="r20 r">i</span> = 0; <span class="r20 r">i</span> &lt; <span class="r16 r">tmp</span>.<a href="@0@mscorlib/A.html#42e9b7616956cf94" class="i property">Length</a>; <span class="r20 r">i</span>++)
				{
					<a href="@0@mscorlib/A.html#3b6090c501893c25" class="t t">Encoding</a> <span id="r21 rd" class="r21 r">cs</span> = (<span class="r15 r">csGuess</span> != <b>null</b> ? <span class="r15 r">csGuess</span>[<span class="r20 r">i</span>] : <b>null</b>) ?? <a href="../Constants.cs.html#4c9cf80bf668e5fb" class="t t">Constants</a>.<a href="../Constants.cs.html#b2fcdc67ec48e578" class="i field">CHARSET</a>;
					<span class="r19 r">r</span>[<span class="r20 r">i</span>] = <a href="../Util/RawParseUtils.cs.html#9c316fb813def011" class="t t">RawParseUtils</a>.<a href="../Util/RawParseUtils.cs.html#e4aa041c71df1ed5" class="i method">decode</a>(<span class="r21 r">cs</span>, <span class="r16 r">tmp</span>[<span class="r20 r">i</span>].<a href="../Util/TemporaryBuffer.cs.html#5d8b8c3946dcb5b3" class="i method">ToArray</a>());
				}

				<b>return</b> <span class="r19 r">r</span>;
			}
			<b>catch</b> (<a href="@0@mscorlib/A.html#bf546e435199e83c" class="t t">IOException</a> <span id="r22 rd" class="r22 r">ioe</span>)
			{
				<b>throw</b> <b>new</b> <a href="@0@mscorlib/A.html#266f59a804f72937" class="t constructor">Exception</a>(<span class="s">&quot;Cannot convert script to text&quot;</span>, <span class="r22 r">ioe</span>);
			}
			<b>finally</b>
			{
				<b>foreach</b> (<a href="../Util/TemporaryBuffer.cs.html#657dbd7b9cab3ad5" class="t t">TemporaryBuffer</a> <span id="r23 rd" class="r23 r">b</span> <b>in</b> <span class="r16 r">tmp</span>)
				{
					<b>if</b> (<span class="r23 r">b</span> != <b>null</b>)
						<span class="r23 r">b</span>.<a href="../Util/TemporaryBuffer.cs.html#5e99b3bd61013d03" class="i method">destroy</a>();
				}
			}
		}

		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> Get the old name associated with this file.</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">para</span><span class="c"> </span><span class="c">/&gt;</span>
		<span class="c">///</span><span class="c"> The meaning of the old name can differ depending on the semantic meaning</span>
		<span class="c">///</span><span class="c"> of this patch:</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">ul</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">li</span><span class="c">&gt;</span><span class="c">&lt;</span><span class="c">i</span><span class="c">&gt;</span><span class="c">file add</span><span class="c">&lt;/</span><span class="c">i</span><span class="c">&gt;</span><span class="c">: always </span><span class="c">&lt;</span><span class="c">code</span><span class="c">&gt;</span><span class="c">/dev/null</span><span class="c">&lt;/</span><span class="c">code</span><span class="c">&gt;</span><span class="c">&lt;/</span><span class="c">li</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">li</span><span class="c">&gt;</span><span class="c">&lt;</span><span class="c">i</span><span class="c">&gt;</span><span class="c">file modify</span><span class="c">&lt;/</span><span class="c">i</span><span class="c">&gt;</span><span class="c">: always </span><span class="c">&lt;</span><span class="c">see</span><span class="c"> </span><span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="#9fc1277151df187f" class="i property">NewName</a><span class="c">&quot;</span><span class="c">/&gt;</span><span class="c">&lt;/</span><span class="c">li</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">li</span><span class="c">&gt;</span><span class="c">&lt;</span><span class="c">i</span><span class="c">&gt;</span><span class="c">file delete</span><span class="c">&lt;/</span><span class="c">i</span><span class="c">&gt;</span><span class="c">: always the file being deleted</span><span class="c">&lt;/</span><span class="c">li</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">li</span><span class="c">&gt;</span><span class="c">&lt;</span><span class="c">i</span><span class="c">&gt;</span><span class="c">file copy</span><span class="c">&lt;/</span><span class="c">i</span><span class="c">&gt;</span><span class="c">: source file the copy originates from</span><span class="c">&lt;/</span><span class="c">li</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">li</span><span class="c">&gt;</span><span class="c">&lt;</span><span class="c">i</span><span class="c">&gt;</span><span class="c">file rename</span><span class="c">&lt;/</span><span class="c">i</span><span class="c">&gt;</span><span class="c">: source file the rename originates from</span><span class="c">&lt;/</span><span class="c">li</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">ul</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">returns</span><span class="c">&gt;</span><span class="c">Old name for this file.</span><span class="c">&lt;/</span><span class="c">returns</span><span class="c">&gt;</span>
		<b>public string</b> <a id="f0846d9ca3ae06f0" href="../R/f0846d9ca3ae06f0.html" target="n" data-glyph="102,1" class="i property">OldName</a>
		{
			<b>get</b> { <b>return</b> <a href="#03b625120aaf82ac" class="i field">oldName</a>; }
		}

		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> Get the new name associated with this file.</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">para</span><span class="c"> </span><span class="c">/&gt;</span>
		<span class="c">///</span><span class="c"> The meaning of the new name can differ depending on the semantic meaning</span>
		<span class="c">///</span><span class="c"> of this patch:</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">ul</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">li</span><span class="c">&gt;</span><span class="c">&lt;</span><span class="c">i</span><span class="c">&gt;</span><span class="c">file add</span><span class="c">&lt;/</span><span class="c">i</span><span class="c">&gt;</span><span class="c">: always the file being created</span><span class="c">&lt;/</span><span class="c">li</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">li</span><span class="c">&gt;</span><span class="c">&lt;</span><span class="c">i</span><span class="c">&gt;</span><span class="c">file modify</span><span class="c">&lt;/</span><span class="c">i</span><span class="c">&gt;</span><span class="c">: always </span><span class="c">&lt;</span><span class="c">see</span><span class="c"> </span><span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="#f0846d9ca3ae06f0" class="i property">OldName</a><span class="c">&quot;</span><span class="c">/&gt;</span><span class="c">&lt;/</span><span class="c">li</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">li</span><span class="c">&gt;</span><span class="c">&lt;</span><span class="c">i</span><span class="c">&gt;</span><span class="c">file delete</span><span class="c">&lt;/</span><span class="c">i</span><span class="c">&gt;</span><span class="c">: always </span><span class="c">&lt;</span><span class="c">code</span><span class="c">&gt;</span><span class="c">/dev/null</span><span class="c">&lt;/</span><span class="c">code</span><span class="c">&gt;</span><span class="c">&lt;/</span><span class="c">li</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">li</span><span class="c">&gt;</span><span class="c">&lt;</span><span class="c">i</span><span class="c">&gt;</span><span class="c">file copy</span><span class="c">&lt;/</span><span class="c">i</span><span class="c">&gt;</span><span class="c">: destination file the copy ends up at</span><span class="c">&lt;/</span><span class="c">li</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">li</span><span class="c">&gt;</span><span class="c">&lt;</span><span class="c">i</span><span class="c">&gt;</span><span class="c">file rename</span><span class="c">&lt;/</span><span class="c">i</span><span class="c">&gt;</span><span class="c">: destination file the rename ends up at</span><span class="c">&lt;/</span><span class="c">li</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">ul</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">returns</span><span class="c">&gt;</span><span class="c">&lt;/</span><span class="c">returns</span><span class="c">&gt;</span>
		<b>public string</b> <a id="9fc1277151df187f" href="../R/9fc1277151df187f.html" target="n" data-glyph="102,1" class="i property">NewName</a>
		{
			<b>get</b> { <b>return</b> <a href="#df5ffc8c5ad4b8f3" class="i field">newName</a>; }
		}

		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> The old file mode, if described in the patch</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
		<b>public virtual</b> <a href="../FileMode.cs.html#2686d9196f6bc5fe" class="t t">FileMode</a> <a id="a4cb9481f24c655b" href="../R/a4cb9481f24c655b.html" target="n" data-glyph="72,1" class="i method">GetOldMode</a>()
		{
			<b>return</b> <a href="#1bcbbd7c24634cb0" class="i field">_oldMode</a>;
		}

		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> The new file mode, if described in the patch</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
		<b>public</b> <a href="../FileMode.cs.html#2686d9196f6bc5fe" class="t t">FileMode</a> <a id="33e8b5a044101189" href="../R/33e8b5a044101189.html" target="n" data-glyph="102,1" class="i property">NewMode</a>
		{
			<b>get</b> { <b>return</b> <a href="#a30c2e13da94e755" class="i field">_newMode</a>; }
			<b>protected set</b> { <a href="#a30c2e13da94e755" class="i field">_newMode</a> = <b>value</b>; }
		}

		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> The type of change this patch makes on </span><span class="c">&lt;</span><span class="c">see</span><span class="c"> </span><span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="#9fc1277151df187f" class="i property">NewName</a><span class="c">&quot;</span><span class="c">/&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
		<b>public</b> <a href="#afc6a2168d35464b" class="t t">ChangeTypeEnum</a> <a id="efc47b076b6d84ee" href="../R/efc47b076b6d84ee.html" target="n" data-glyph="72,1" class="i method">getChangeType</a>()
		{
			<b>return</b> <a href="#c98b68d0f4ba506c" class="i property">ChangeType</a>;
		}

		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> Returns similarity score between </span><span class="c">&lt;</span><span class="c">see</span><span class="c"> </span><span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="#f0846d9ca3ae06f0" class="i property">OldName</a><span class="c">&quot;</span><span class="c">/&gt;</span><span class="c"> and</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">see</span><span class="c"> </span><span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="#9fc1277151df187f" class="i property">NewName</a><span class="c">&quot;</span><span class="c">/&gt;</span><span class="c"> if </span><span class="c">&lt;</span><span class="c">see</span><span class="c"> </span><span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="#efc47b076b6d84ee" class="i method">getChangeType</a>()<span class="c">&quot;</span><span class="c">/&gt;</span><span class="c"> is</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">see</span><span class="c"> </span><span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="#afc6a2168d35464b" class="t t">ChangeTypeEnum</a>.<a href="#6a2827954f0248f4" class="i field">COPY</a><span class="c">&quot;</span><span class="c">/&gt;</span><span class="c"> or </span><span class="c">&lt;</span><span class="c">see</span><span class="c"> </span><span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="#afc6a2168d35464b" class="t t">ChangeTypeEnum</a>.<a href="#b66bad3a6afb98fc" class="i field">RENAME</a><span class="c">&quot;</span><span class="c">/&gt;</span><span class="c">.</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">returns</span><span class="c">&gt;</span><span class="c">&lt;/</span><span class="c">returns</span><span class="c">&gt;</span>
		<b>public int</b> <a id="82f6cca22e22308d" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">getScore</a>()
		{
			<b>return</b> <a href="#4cececf095593109" class="i field">_score</a>;
		}

		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> Get the old object id from the </span><span class="c">&lt;</span><span class="c">code</span><span class="c">&gt;</span><span class="c">index</span><span class="c">&lt;/</span><span class="c">code</span><span class="c">&gt;</span><span class="c">.</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">returns</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> The object id; null if there is no index line</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">returns</span><span class="c">&gt;</span>
		<b>public virtual</b> <a href="../AbbreviatedObjectId.cs.html#f643b6637511da45" class="t t">AbbreviatedObjectId</a> <a id="8340156d7ad8e606" href="../R/8340156d7ad8e606.html" target="n" data-glyph="72,1" class="i method">getOldId</a>()
		{
			<b>return</b> <a href="#0ede46752192441d" class="i field">oldId</a>;
		}

		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> Get the new object id from the </span><span class="c">&lt;</span><span class="c">code</span><span class="c">&gt;</span><span class="c">index</span><span class="c">&lt;/</span><span class="c">code</span><span class="c">&gt;</span><span class="c">.</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">returns</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> The object id; null if there is no index line</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">returns</span><span class="c">&gt;</span>
		<b>public</b> <a href="../AbbreviatedObjectId.cs.html#f643b6637511da45" class="t t">AbbreviatedObjectId</a> <a id="ec4430299e71d1f2" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">getNewId</a>()
		{
			<b>return</b> <a href="#aa48f20388879a87" class="i property">NewId</a>;
		}

		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> Style of patch used to modify this file</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">returns</span><span class="c">&gt;</span><span class="c">&lt;/</span><span class="c">returns</span><span class="c">&gt;</span>
		<b>public</b> <a href="#0ac606b35f6e6063" class="t t">PatchTypeEnum</a> <a id="c2c1b94f3847ad54" href="../R/c2c1b94f3847ad54.html" target="n" data-glyph="72,1" class="i method">getPatchType</a>()
		{
			<b>return</b> <a href="#a643f74d3d93f5f8" class="i property">PatchType</a>;
		}

		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> True if this patch modifies metadata about a file</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">returns</span><span class="c">&gt;</span><span class="c">&lt;/</span><span class="c">returns</span><span class="c">&gt;</span>
		<b>public bool</b> <a id="85b378e00f7e92b2" href="../R/85b378e00f7e92b2.html" target="n" data-glyph="72,1" class="i method">hasMetaDataChanges</a>()
		{
			<b>return</b> <a href="#c98b68d0f4ba506c" class="i property">ChangeType</a> != <a href="#afc6a2168d35464b" class="t t">ChangeTypeEnum</a>.<a href="#f84547d19b1feba8" class="i field">MODIFY</a> || <a href="#a30c2e13da94e755" class="i field">_newMode</a> != <a href="#1bcbbd7c24634cb0" class="i field">_oldMode</a>;
		}

		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> Gets the hunks altering this file; in order of appearance in patch</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">returns</span><span class="c">&gt;</span><span class="c">&lt;/</span><span class="c">returns</span><span class="c">&gt;</span>
		<b>public</b> <a href="@0@mscorlib/A.html#cf7f4095e4de7646" class="t t">List</a>&lt;<a href="HunkHeader.cs.html#b93819dcfb6af782" class="t t">HunkHeader</a>&gt; <a id="2197149c7f023462" href="../R/2197149c7f023462.html" target="n" data-glyph="102,1" class="i property">Hunks</a>
		{
			<b>get</b> { <b>return</b> <a href="#b267a3692172fa14" class="i field">_hunks</a> ?? (<a href="#b267a3692172fa14" class="i field">_hunks</a> = <b>new</b> <a href="@0@mscorlib/A.html#9e5352b2b304ceba" class="t constructor">List</a>&lt;<a href="HunkHeader.cs.html#b93819dcfb6af782" class="t t">HunkHeader</a>&gt;()); }
		}

		<b>public void</b> <a id="05c98240913ecee6" href="../R/05c98240913ecee6.html" target="n" data-glyph="72,1" class="i method">addHunk</a>(<a href="HunkHeader.cs.html#b93819dcfb6af782" class="t t">HunkHeader</a> <span id="r24 rd" class="r24 r">h</span>)
		{
			<b>if</b> (<span class="r24 r">h</span>.<a href="HunkHeader.cs.html#400af25670f23494" class="i property">File</a> != <a href="#94dd558d804785e0" class="k">this</a>)
			{
				<b>throw</b> <b>new</b> <a href="@0@mscorlib/A.html#eb98012a74461437" class="t constructor">ArgumentException</a>(<span class="s">&quot;Hunk belongs to another file&quot;</span>);
			}

			<a href="#2197149c7f023462" class="i property">Hunks</a>.<a href="@0@mscorlib/A.html#9cc11588bffd57c1" class="i method">Add</a>(<span class="r24 r">h</span>);
		}

		<b>public virtual</b> <a href="HunkHeader.cs.html#b93819dcfb6af782" class="t t">HunkHeader</a> <a id="5ee7686823de62c4" href="../R/5ee7686823de62c4.html" target="n" data-glyph="72,1" class="i method">newHunkHeader</a>(<b>int</b> <span id="r25 rd" class="r25 r">offset</span>)
		{
			<b>return</b> <b>new</b> <a href="HunkHeader.cs.html#94aad8b820fc6d49" class="t constructor">HunkHeader</a>(<a href="#94dd558d804785e0" class="k">this</a>, <span class="r25 r">offset</span>);
		}

		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> If a </span><span class="c">&lt;</span><span class="c">see</span><span class="c"> </span><span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="#0ac606b35f6e6063" class="t t">PatchTypeEnum</a>.<a href="#c100325aefcba500" class="i field">GIT_BINARY</a><span class="c">&quot;</span><span class="c">/&gt;</span><span class="c">, the new-image delta/literal</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">returns</span><span class="c">&gt;</span><span class="c">&lt;/</span><span class="c">returns</span><span class="c">&gt;</span>
		<b>public</b> <a href="BinaryHunk.cs.html#49a8be315be41caa" class="t t">BinaryHunk</a> <a id="d9fabf1f19b3ef2f" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">getForwardBinaryHunk</a>()
		{
			<b>return</b> <a href="#b88b0afd7aae1e33" class="i property">ForwardBinaryHunk</a>;
		}

		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> If a </span><span class="c">&lt;</span><span class="c">see</span><span class="c"> </span><span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="#0ac606b35f6e6063" class="t t">PatchTypeEnum</a>.<a href="#c100325aefcba500" class="i field">GIT_BINARY</a><span class="c">&quot;</span><span class="c">/&gt;</span><span class="c">, the old-image delta/literal</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">returns</span><span class="c">&gt;</span><span class="c">&lt;/</span><span class="c">returns</span><span class="c">&gt;</span>
		<b>public</b> <a href="BinaryHunk.cs.html#49a8be315be41caa" class="t t">BinaryHunk</a> <a id="9ee291f93ba5b09c" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">getReverseBinaryHunk</a>()
		{
			<b>return</b> <a href="#cf458d486e878351" class="i property">ReverseBinaryHunk</a>;
		}

		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> Returns a list describing the content edits performed on this file.</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">returns</span><span class="c">&gt;</span><span class="c">&lt;/</span><span class="c">returns</span><span class="c">&gt;</span>
		<b>public</b> <a href="../Diff/EditList.cs.html#bfb6d4fd7ba30b6b" class="t t">EditList</a> <a id="d2331452896ac3b5" href="../R/d2331452896ac3b5.html" target="n" data-glyph="72,1" class="i method">ToEditList</a>()
		{
			<a href="../Diff/EditList.cs.html#bfb6d4fd7ba30b6b" class="k">var</a> <span id="r26 rd" class="r26 r">r</span> = <b>new</b> <a href="../Diff/EditList.cs.html#bfb6d4fd7ba30b6b" class="t constructor">EditList</a>();
			<a href="#b267a3692172fa14" class="i field">_hunks</a>.<a href="@0@mscorlib/A.html#0e5a9cf0a310b9e5" class="i method">ForEach</a>(<span id="r27 rd" class="r27 r">hunk</span> =&gt; <span class="r26 r">r</span>.<a href="@0@mscorlib/A.html#e569d850a66a1771" class="i method">AddRange</a>(<span class="r27 r">hunk</span>.<a href="HunkHeader.cs.html#c4f1143f91a4f17e" class="i method">ToEditList</a>()));
			<b>return</b> <span class="r26 r">r</span>;
		}

		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> Parse a &quot;diff --git&quot; or &quot;diff --cc&quot; line.</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span><span class="c"> </span><span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r28 r">ptr</span><span class="c">&quot;</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> first character After the &quot;diff --git &quot; or &quot;diff --cc &quot; part.</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span><span class="c"> </span><span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r29 r">end</span><span class="c">&quot;</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> one past the last position to parse.</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">returns</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> first character After the LF at the end of the line; -1 on error.</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">returns</span><span class="c">&gt;</span>
		<b>public int</b> <a id="98d047d23f6d5302" href="../R/98d047d23f6d5302.html" target="n" data-glyph="72,1" class="i method">parseGitFileName</a>(<b>int</b> <span id="r28 rd" class="r28 r">ptr</span>, <b>int</b> <span id="r29 rd" class="r29 r">end</span>)
		{
			<b>int</b> <span id="r30 rd" class="r30 r">eol</span> = <a href="../Util/RawParseUtils.cs.html#9c316fb813def011" class="t t">RawParseUtils</a>.<a href="../Util/RawParseUtils.cs.html#0989702123852d37" class="i method">nextLF</a>(<a href="#fc52a48e75a69e9b" class="i property">Buffer</a>, <span class="r28 r">ptr</span>);
			<b>int</b> <span id="r31 rd" class="r31 r">bol</span> = <span class="r28 r">ptr</span>;
			<b>if</b> (<span class="r30 r">eol</span> &gt;= <span class="r29 r">end</span>)
			{
				<b>return</b> -1;
			}

			<span class="c">// buffer[ptr..eol] looks like &quot;a/foo b/foo\n&quot;. After the first</span>
			<span class="c">// A regex to match this is &quot;^[^/]+/(.*?) [^/+]+/\1\n$&quot;. There</span>
			<span class="c">// is only one way to split the line such that text to the left</span>
			<span class="c">// of the space matches the text to the right, excluding the part</span>
			<span class="c">// before the first slash.</span>
			<span class="c">//</span>
			<b>int</b> <span id="r32 rd" class="r32 r">aStart</span> = <a href="../Util/RawParseUtils.cs.html#9c316fb813def011" class="t t">RawParseUtils</a>.<a href="../Util/RawParseUtils.cs.html#bfac7916e9a2bc6d" class="i method">nextLF</a>(<a href="#fc52a48e75a69e9b" class="i property">Buffer</a>, <span class="r28 r">ptr</span>, (<b>byte</b>)<span class="s">&#39;/&#39;</span>);
			<b>if</b> (<span class="r32 r">aStart</span> &gt;= <span class="r30 r">eol</span>)
				<b>return</b> <span class="r30 r">eol</span>;

			<b>while</b> (<span class="r28 r">ptr</span> &lt; <span class="r30 r">eol</span>)
			{
				<b>int</b> <span id="r33 rd" class="r33 r">sp</span> = <a href="../Util/RawParseUtils.cs.html#9c316fb813def011" class="t t">RawParseUtils</a>.<a href="../Util/RawParseUtils.cs.html#bfac7916e9a2bc6d" class="i method">nextLF</a>(<a href="#fc52a48e75a69e9b" class="i property">Buffer</a>, <span class="r28 r">ptr</span>, (<b>byte</b>)<span class="s">&#39; &#39;</span>);
				<b>if</b> (<span class="r33 r">sp</span> &gt;= <span class="r30 r">eol</span>)
				{
					<span class="c">// We can&#39;t split the header, it isn&#39;t valid.</span>
					<span class="c">// This may be OK if this is a rename patch.</span>
					<span class="c">//</span>
					<b>return</b> <span class="r30 r">eol</span>;
				}
				<b>int</b> <span id="r34 rd" class="r34 r">bStart</span> = <a href="../Util/RawParseUtils.cs.html#9c316fb813def011" class="t t">RawParseUtils</a>.<a href="../Util/RawParseUtils.cs.html#bfac7916e9a2bc6d" class="i method">nextLF</a>(<a href="#fc52a48e75a69e9b" class="i property">Buffer</a>, <span class="r33 r">sp</span>, (<b>byte</b>)<span class="s">&#39;/&#39;</span>);
				<b>if</b> (<span class="r34 r">bStart</span> &gt;= <span class="r30 r">eol</span>)
					<b>return</b> <span class="r30 r">eol</span>;

				<span class="c">// If buffer[aStart..sp - 1] = buffer[bStart..eol - 1]</span>
				<span class="c">// we have a valid split.</span>
				<span class="c">//</span>
				<b>if</b> (<a href="#a1b2e6832659e392" class="i method">Eq</a>(<span class="r32 r">aStart</span>, <span class="r33 r">sp</span> - 1, <span class="r34 r">bStart</span>, <span class="r30 r">eol</span> - 1))
				{
					<b>if</b> (<a href="#fc52a48e75a69e9b" class="i property">Buffer</a>[<span class="r31 r">bol</span>] == <span class="s">&#39;&quot;&#39;</span>)
					{
						<span class="c">// We&#39;re a double quoted name. The region better end</span>
						<span class="c">// in a double quote too, and we need to decode the</span>
						<span class="c">// characters before reading the name.</span>
						<span class="c">//</span>
						<b>if</b> (<a href="#fc52a48e75a69e9b" class="i property">Buffer</a>[<span class="r33 r">sp</span> - 2] != <span class="s">&#39;&quot;&#39;</span>)
						{
							<b>return</b> <span class="r30 r">eol</span>;
						}
						<a href="#03b625120aaf82ac" class="i field">oldName</a> = <a href="../Util/QuotedString.cs.html#91f0bc07cec563f9" class="t t">QuotedString</a>.<a href="../Util/QuotedString.cs.html#99e800e085f005e7" class="t t">GitPathStyle</a>.<a href="../Util/QuotedString.cs.html#f79df8a26ed11203" class="i field">GIT_PATH</a>.<a href="../Util/QuotedString.cs.html#fc8db47e91a7a606" class="i method">dequote</a>(<a href="#fc52a48e75a69e9b" class="i property">Buffer</a>, <span class="r31 r">bol</span>, <span class="r33 r">sp</span> - 1);
						<a href="#03b625120aaf82ac" class="i field">oldName</a> = <a href="#876099f0cbd10905" class="i method">P1</a>(<a href="#03b625120aaf82ac" class="i field">oldName</a>);
					}
					<b>else</b>
					{
						<a href="#03b625120aaf82ac" class="i field">oldName</a> = <a href="../Util/RawParseUtils.cs.html#9c316fb813def011" class="t t">RawParseUtils</a>.<a href="../Util/RawParseUtils.cs.html#ceca22962c12c579" class="i method">decode</a>(<a href="../Constants.cs.html#4c9cf80bf668e5fb" class="t t">Constants</a>.<a href="../Constants.cs.html#b2fcdc67ec48e578" class="i field">CHARSET</a>, <a href="#fc52a48e75a69e9b" class="i property">Buffer</a>, <span class="r32 r">aStart</span>, <span class="r33 r">sp</span> - 1);
					}
					<a href="#df5ffc8c5ad4b8f3" class="i field">newName</a> = <a href="#03b625120aaf82ac" class="i field">oldName</a>;
					<b>return</b> <span class="r30 r">eol</span>;
				}

				<span class="c">// This split wasn&#39;t correct. Move past the space and try</span>
				<span class="c">// another split as the space must be part of the file name.</span>
				<span class="c">//</span>
				<span class="r28 r">ptr</span> = <span class="r33 r">sp</span>;
			}

			<b>return</b> <span class="r30 r">eol</span>;
		}

		<b>public virtual int</b> <a id="1261529ddfebf6eb" href="../R/1261529ddfebf6eb.html" target="n" data-glyph="72,1" class="i method">parseGitHeaders</a>(<b>int</b> <span id="r35 rd" class="r35 r">ptr</span>, <b>int</b> <span id="r36 rd" class="r36 r">end</span>)
		{
			<b>while</b> (<span class="r35 r">ptr</span> &lt; <span class="r36 r">end</span>)
			{
				<b>int</b> <span id="r37 rd" class="r37 r">eol</span> = <a href="../Util/RawParseUtils.cs.html#9c316fb813def011" class="t t">RawParseUtils</a>.<a href="../Util/RawParseUtils.cs.html#0989702123852d37" class="i method">nextLF</a>(<a href="#fc52a48e75a69e9b" class="i property">Buffer</a>, <span class="r35 r">ptr</span>);
				<b>if</b> (<a href="#e870c1373bd74319" class="i method">isHunkHdr</a>(<a href="#fc52a48e75a69e9b" class="i property">Buffer</a>, <span class="r35 r">ptr</span>, <span class="r37 r">eol</span>) &gt;= 1)
				{
					<span class="c">// First hunk header; break out and parse them later.</span>
					<b>break</b>;
				}

				<b>if</b> (<a href="../Util/RawParseUtils.cs.html#9c316fb813def011" class="t t">RawParseUtils</a>.<a href="../Util/RawParseUtils.cs.html#8d5e78f7413720c3" class="i method">match</a>(<a href="#fc52a48e75a69e9b" class="i property">Buffer</a>, <span class="r35 r">ptr</span>, <a href="#c28ae1eeaf01e369" class="i field">OLD_NAME</a>) &gt;= 0)
				{
					<a href="#c229b85610df1a1a" class="i method">ParseOldName</a>(<span class="r35 r">ptr</span>, <span class="r37 r">eol</span>);
				}
				<b>else if</b> (<a href="../Util/RawParseUtils.cs.html#9c316fb813def011" class="t t">RawParseUtils</a>.<a href="../Util/RawParseUtils.cs.html#8d5e78f7413720c3" class="i method">match</a>(<a href="#fc52a48e75a69e9b" class="i property">Buffer</a>, <span class="r35 r">ptr</span>, <a href="#c908d4c2ae66b7ca" class="i field">NEW_NAME</a>) &gt;= 0)
				{
					<a href="#e32ef2681b200974" class="i method">ParseNewName</a>(<span class="r35 r">ptr</span>, <span class="r37 r">eol</span>);
				}
				<b>else if</b> (<a href="../Util/RawParseUtils.cs.html#9c316fb813def011" class="t t">RawParseUtils</a>.<a href="../Util/RawParseUtils.cs.html#8d5e78f7413720c3" class="i method">match</a>(<a href="#fc52a48e75a69e9b" class="i property">Buffer</a>, <span class="r35 r">ptr</span>, <a href="#1bf1dbb3564c1fcf" class="i field">OldModeString</a>) &gt;= 0)
				{
					<a href="#1bcbbd7c24634cb0" class="i field">_oldMode</a> = <a href="#14c1d41f4cb918bd" class="i method">ParseFileMode</a>(<span class="r35 r">ptr</span> + <a href="#1bf1dbb3564c1fcf" class="i field">OldModeString</a>.<a href="@0@mscorlib/A.html#42e9b7616956cf94" class="i property">Length</a>, <span class="r37 r">eol</span>);
				}
				<b>else if</b> (<a href="../Util/RawParseUtils.cs.html#9c316fb813def011" class="t t">RawParseUtils</a>.<a href="../Util/RawParseUtils.cs.html#8d5e78f7413720c3" class="i method">match</a>(<a href="#fc52a48e75a69e9b" class="i property">Buffer</a>, <span class="r35 r">ptr</span>, <a href="#dbadb4eec45d010d" class="i field">NewModeString</a>) &gt;= 0)
				{
					<a href="#a30c2e13da94e755" class="i field">_newMode</a> = <a href="#14c1d41f4cb918bd" class="i method">ParseFileMode</a>(<span class="r35 r">ptr</span> + <a href="#dbadb4eec45d010d" class="i field">NewModeString</a>.<a href="@0@mscorlib/A.html#42e9b7616956cf94" class="i property">Length</a>, <span class="r37 r">eol</span>);
				}
				<b>else if</b> (<a href="../Util/RawParseUtils.cs.html#9c316fb813def011" class="t t">RawParseUtils</a>.<a href="../Util/RawParseUtils.cs.html#8d5e78f7413720c3" class="i method">match</a>(<a href="#fc52a48e75a69e9b" class="i property">Buffer</a>, <span class="r35 r">ptr</span>, <a href="#10e185d989c8d641" class="i field">DeletedFileMode</a>) &gt;= 0)
				{
					<a href="#1bcbbd7c24634cb0" class="i field">_oldMode</a> = <a href="#14c1d41f4cb918bd" class="i method">ParseFileMode</a>(<span class="r35 r">ptr</span> + <a href="#10e185d989c8d641" class="i field">DeletedFileMode</a>.<a href="@0@mscorlib/A.html#42e9b7616956cf94" class="i property">Length</a>, <span class="r37 r">eol</span>);
					<a href="#a30c2e13da94e755" class="i field">_newMode</a> = <a href="../FileMode.cs.html#2686d9196f6bc5fe" class="t t">FileMode</a>.<a href="../FileMode.cs.html#34486fa4db457c7c" class="i field">Missing</a>;
					<a href="#c98b68d0f4ba506c" class="i property">ChangeType</a> = <a href="#afc6a2168d35464b" class="t t">ChangeTypeEnum</a>.<a href="#8dfb08bcb2671fb2" class="i field">DELETE</a>;
				}
				<b>else if</b> (<a href="../Util/RawParseUtils.cs.html#9c316fb813def011" class="t t">RawParseUtils</a>.<a href="../Util/RawParseUtils.cs.html#8d5e78f7413720c3" class="i method">match</a>(<a href="#fc52a48e75a69e9b" class="i property">Buffer</a>, <span class="r35 r">ptr</span>, <a href="#54b1ea5520a8911a" class="i field">NewFileMode</a>) &gt;= 0)
				{
					<a href="#b5318558fb1b90c5" class="i method">ParseNewFileMode</a>(<span class="r35 r">ptr</span>, <span class="r37 r">eol</span>);
				}
				<b>else if</b> (<a href="../Util/RawParseUtils.cs.html#9c316fb813def011" class="t t">RawParseUtils</a>.<a href="../Util/RawParseUtils.cs.html#8d5e78f7413720c3" class="i method">match</a>(<a href="#fc52a48e75a69e9b" class="i property">Buffer</a>, <span class="r35 r">ptr</span>, <a href="#b998e189fc8125f8" class="i field">CopyFrom</a>) &gt;= 0)
				{
					<a href="#03b625120aaf82ac" class="i field">oldName</a> = <a href="#d5fd5388486f9d7c" class="i method">ParseName</a>(<a href="#03b625120aaf82ac" class="i field">oldName</a>, <span class="r35 r">ptr</span> + <a href="#b998e189fc8125f8" class="i field">CopyFrom</a>.<a href="@0@mscorlib/A.html#42e9b7616956cf94" class="i property">Length</a>, <span class="r37 r">eol</span>);
					<a href="#c98b68d0f4ba506c" class="i property">ChangeType</a> = <a href="#afc6a2168d35464b" class="t t">ChangeTypeEnum</a>.<a href="#6a2827954f0248f4" class="i field">COPY</a>;

				}
				<b>else if</b> (<a href="../Util/RawParseUtils.cs.html#9c316fb813def011" class="t t">RawParseUtils</a>.<a href="../Util/RawParseUtils.cs.html#8d5e78f7413720c3" class="i method">match</a>(<a href="#fc52a48e75a69e9b" class="i property">Buffer</a>, <span class="r35 r">ptr</span>, <a href="#bbbbd4b645f957c0" class="i field">CopyTo</a>) &gt;= 0)
				{
					<a href="#df5ffc8c5ad4b8f3" class="i field">newName</a> = <a href="#d5fd5388486f9d7c" class="i method">ParseName</a>(<a href="#df5ffc8c5ad4b8f3" class="i field">newName</a>, <span class="r35 r">ptr</span> + <a href="#bbbbd4b645f957c0" class="i field">CopyTo</a>.<a href="@0@mscorlib/A.html#42e9b7616956cf94" class="i property">Length</a>, <span class="r37 r">eol</span>);
					<a href="#c98b68d0f4ba506c" class="i property">ChangeType</a> = <a href="#afc6a2168d35464b" class="t t">ChangeTypeEnum</a>.<a href="#6a2827954f0248f4" class="i field">COPY</a>;
				}
				<b>else if</b> (<a href="../Util/RawParseUtils.cs.html#9c316fb813def011" class="t t">RawParseUtils</a>.<a href="../Util/RawParseUtils.cs.html#8d5e78f7413720c3" class="i method">match</a>(<a href="#fc52a48e75a69e9b" class="i property">Buffer</a>, <span class="r35 r">ptr</span>, <a href="#1735c5a71b6825fc" class="i field">RenameOld</a>) &gt;= 0)
				{
					<a href="#03b625120aaf82ac" class="i field">oldName</a> = <a href="#d5fd5388486f9d7c" class="i method">ParseName</a>(<a href="#03b625120aaf82ac" class="i field">oldName</a>, <span class="r35 r">ptr</span> + <a href="#1735c5a71b6825fc" class="i field">RenameOld</a>.<a href="@0@mscorlib/A.html#42e9b7616956cf94" class="i property">Length</a>, <span class="r37 r">eol</span>);
					<a href="#c98b68d0f4ba506c" class="i property">ChangeType</a> = <a href="#afc6a2168d35464b" class="t t">ChangeTypeEnum</a>.<a href="#b66bad3a6afb98fc" class="i field">RENAME</a>;
				}
				<b>else if</b> (<a href="../Util/RawParseUtils.cs.html#9c316fb813def011" class="t t">RawParseUtils</a>.<a href="../Util/RawParseUtils.cs.html#8d5e78f7413720c3" class="i method">match</a>(<a href="#fc52a48e75a69e9b" class="i property">Buffer</a>, <span class="r35 r">ptr</span>, <a href="#ae9696695f3e3574" class="i field">RenameNew</a>) &gt;= 0)
				{
					<a href="#df5ffc8c5ad4b8f3" class="i field">newName</a> = <a href="#d5fd5388486f9d7c" class="i method">ParseName</a>(<a href="#df5ffc8c5ad4b8f3" class="i field">newName</a>, <span class="r35 r">ptr</span> + <a href="#ae9696695f3e3574" class="i field">RenameNew</a>.<a href="@0@mscorlib/A.html#42e9b7616956cf94" class="i property">Length</a>, <span class="r37 r">eol</span>);
					<a href="#c98b68d0f4ba506c" class="i property">ChangeType</a> = <a href="#afc6a2168d35464b" class="t t">ChangeTypeEnum</a>.<a href="#b66bad3a6afb98fc" class="i field">RENAME</a>;
				}
				<b>else if</b> (<a href="../Util/RawParseUtils.cs.html#9c316fb813def011" class="t t">RawParseUtils</a>.<a href="../Util/RawParseUtils.cs.html#8d5e78f7413720c3" class="i method">match</a>(<a href="#fc52a48e75a69e9b" class="i property">Buffer</a>, <span class="r35 r">ptr</span>, <a href="#8f883679fad61310" class="i field">RenameFrom</a>) &gt;= 0)
				{
					<a href="#03b625120aaf82ac" class="i field">oldName</a> = <a href="#d5fd5388486f9d7c" class="i method">ParseName</a>(<a href="#03b625120aaf82ac" class="i field">oldName</a>, <span class="r35 r">ptr</span> + <a href="#8f883679fad61310" class="i field">RenameFrom</a>.<a href="@0@mscorlib/A.html#42e9b7616956cf94" class="i property">Length</a>, <span class="r37 r">eol</span>);
					<a href="#c98b68d0f4ba506c" class="i property">ChangeType</a> = <a href="#afc6a2168d35464b" class="t t">ChangeTypeEnum</a>.<a href="#b66bad3a6afb98fc" class="i field">RENAME</a>;
				}
				<b>else if</b> (<a href="../Util/RawParseUtils.cs.html#9c316fb813def011" class="t t">RawParseUtils</a>.<a href="../Util/RawParseUtils.cs.html#8d5e78f7413720c3" class="i method">match</a>(<a href="#fc52a48e75a69e9b" class="i property">Buffer</a>, <span class="r35 r">ptr</span>, <a href="#4afae670bff6414f" class="i field">RenameTo</a>) &gt;= 0)
				{
					<a href="#df5ffc8c5ad4b8f3" class="i field">newName</a> = <a href="#d5fd5388486f9d7c" class="i method">ParseName</a>(<a href="#df5ffc8c5ad4b8f3" class="i field">newName</a>, <span class="r35 r">ptr</span> + <a href="#4afae670bff6414f" class="i field">RenameTo</a>.<a href="@0@mscorlib/A.html#42e9b7616956cf94" class="i property">Length</a>, <span class="r37 r">eol</span>);
					<a href="#c98b68d0f4ba506c" class="i property">ChangeType</a> = <a href="#afc6a2168d35464b" class="t t">ChangeTypeEnum</a>.<a href="#b66bad3a6afb98fc" class="i field">RENAME</a>;
				}
				<b>else if</b> (<a href="../Util/RawParseUtils.cs.html#9c316fb813def011" class="t t">RawParseUtils</a>.<a href="../Util/RawParseUtils.cs.html#8d5e78f7413720c3" class="i method">match</a>(<a href="#fc52a48e75a69e9b" class="i property">Buffer</a>, <span class="r35 r">ptr</span>, <a href="#4315e1d6ba6336e9" class="i field">SimilarityIndex</a>) &gt;= 0)
				{
					<a href="#4cececf095593109" class="i field">_score</a> = <a href="../Util/RawParseUtils.cs.html#9c316fb813def011" class="t t">RawParseUtils</a>.<a href="../Util/RawParseUtils.cs.html#52168a0231cef30b" class="i method">parseBase10</a>(<a href="#fc52a48e75a69e9b" class="i property">Buffer</a>, <span class="r35 r">ptr</span> + <a href="#4315e1d6ba6336e9" class="i field">SimilarityIndex</a>.<a href="@0@mscorlib/A.html#42e9b7616956cf94" class="i property">Length</a>, <b>null</b>);
				}
				<b>else if</b> (<a href="../Util/RawParseUtils.cs.html#9c316fb813def011" class="t t">RawParseUtils</a>.<a href="../Util/RawParseUtils.cs.html#8d5e78f7413720c3" class="i method">match</a>(<a href="#fc52a48e75a69e9b" class="i property">Buffer</a>, <span class="r35 r">ptr</span>, <a href="#f28ce1c255cded9c" class="i field">DissimilarityIndex</a>) &gt;= 0)
				{
					<a href="#4cececf095593109" class="i field">_score</a> = <a href="../Util/RawParseUtils.cs.html#9c316fb813def011" class="t t">RawParseUtils</a>.<a href="../Util/RawParseUtils.cs.html#52168a0231cef30b" class="i method">parseBase10</a>(<a href="#fc52a48e75a69e9b" class="i property">Buffer</a>, <span class="r35 r">ptr</span> + <a href="#f28ce1c255cded9c" class="i field">DissimilarityIndex</a>.<a href="@0@mscorlib/A.html#42e9b7616956cf94" class="i property">Length</a>, <b>null</b>);
				}
				<b>else if</b> (<a href="../Util/RawParseUtils.cs.html#9c316fb813def011" class="t t">RawParseUtils</a>.<a href="../Util/RawParseUtils.cs.html#8d5e78f7413720c3" class="i method">match</a>(<a href="#fc52a48e75a69e9b" class="i property">Buffer</a>, <span class="r35 r">ptr</span>, <a href="#c399b532449f536e" class="i field">Index</a>) &gt;= 0)
				{
					<a href="#17271db901359703" class="i method">ParseIndexLine</a>(<span class="r35 r">ptr</span> + <a href="#c399b532449f536e" class="i field">Index</a>.<a href="@0@mscorlib/A.html#42e9b7616956cf94" class="i property">Length</a>, <span class="r37 r">eol</span>);
				}
				<b>else</b>
				{
					<span class="c">// Probably an empty patch (stat dirty).</span>
					<b>break</b>;
				}

				<span class="r35 r">ptr</span> = <span class="r37 r">eol</span>;
			}

			<b>return</b> <span class="r35 r">ptr</span>;
		}

		<b>protected void</b> <a id="c229b85610df1a1a" href="../R/c229b85610df1a1a.html" target="n" data-glyph="75,1" class="i method">ParseOldName</a>(<b>int</b> <span id="r38 rd" class="r38 r">ptr</span>, <b>int</b> <span id="r39 rd" class="r39 r">eol</span>)
		{
			<a href="#03b625120aaf82ac" class="i field">oldName</a> = <a href="#876099f0cbd10905" class="i method">P1</a>(<a href="#d5fd5388486f9d7c" class="i method">ParseName</a>(<a href="#03b625120aaf82ac" class="i field">oldName</a>, <span class="r38 r">ptr</span> + <a href="#c28ae1eeaf01e369" class="i field">OLD_NAME</a>.<a href="@0@mscorlib/A.html#42e9b7616956cf94" class="i property">Length</a>, <span class="r39 r">eol</span>));
			<b>if</b> (<a href="#03b625120aaf82ac" class="i field">oldName</a> == <a href="#4cfdd6ddbffb851d" class="i field">DEV_NULL</a>)
			{
				<a href="#c98b68d0f4ba506c" class="i property">ChangeType</a> = <a href="#afc6a2168d35464b" class="t t">ChangeTypeEnum</a>.<a href="#54e75bb8c41189c2" class="i field">ADD</a>;
			}
		}

		<b>protected void</b> <a id="e32ef2681b200974" href="../R/e32ef2681b200974.html" target="n" data-glyph="75,1" class="i method">ParseNewName</a>(<b>int</b> <span id="r40 rd" class="r40 r">ptr</span>, <b>int</b> <span id="r41 rd" class="r41 r">eol</span>)
		{
			<a href="#df5ffc8c5ad4b8f3" class="i field">newName</a> = <a href="#876099f0cbd10905" class="i method">P1</a>(<a href="#d5fd5388486f9d7c" class="i method">ParseName</a>(<a href="#df5ffc8c5ad4b8f3" class="i field">newName</a>, <span class="r40 r">ptr</span> + <a href="#c908d4c2ae66b7ca" class="i field">NEW_NAME</a>.<a href="@0@mscorlib/A.html#42e9b7616956cf94" class="i property">Length</a>, <span class="r41 r">eol</span>));
			<b>if</b> (<a href="#df5ffc8c5ad4b8f3" class="i field">newName</a> == <a href="#4cfdd6ddbffb851d" class="i field">DEV_NULL</a>)
			{
				<a href="#c98b68d0f4ba506c" class="i property">ChangeType</a> = <a href="#afc6a2168d35464b" class="t t">ChangeTypeEnum</a>.<a href="#8dfb08bcb2671fb2" class="i field">DELETE</a>;
			}
		}

		<b>protected virtual void</b> <a id="b5318558fb1b90c5" href="../R/b5318558fb1b90c5.html" target="n" data-glyph="75,1" class="i method">ParseNewFileMode</a>(<b>int</b> <span id="r42 rd" class="r42 r">ptr</span>, <b>int</b> <span id="r43 rd" class="r43 r">eol</span>)
		{
			<a href="#1bcbbd7c24634cb0" class="i field">_oldMode</a> = <a href="../FileMode.cs.html#2686d9196f6bc5fe" class="t t">FileMode</a>.<a href="../FileMode.cs.html#34486fa4db457c7c" class="i field">Missing</a>;
			<a href="#a30c2e13da94e755" class="i field">_newMode</a> = <a href="#14c1d41f4cb918bd" class="i method">ParseFileMode</a>(<span class="r42 r">ptr</span> + <a href="#54b1ea5520a8911a" class="i field">NewFileMode</a>.<a href="@0@mscorlib/A.html#42e9b7616956cf94" class="i property">Length</a>, <span class="r43 r">eol</span>);
			<a href="#c98b68d0f4ba506c" class="i property">ChangeType</a> = <a href="#afc6a2168d35464b" class="t t">ChangeTypeEnum</a>.<a href="#54e75bb8c41189c2" class="i field">ADD</a>;
		}

		<b>public int</b> <a id="b32b40338ee8d18c" href="../R/b32b40338ee8d18c.html" target="n" data-glyph="72,1" class="i method">parseTraditionalHeaders</a>(<b>int</b> <span id="r44 rd" class="r44 r">ptr</span>, <b>int</b> <span id="r45 rd" class="r45 r">end</span>)
		{
			<b>while</b> (<span class="r44 r">ptr</span> &lt; <span class="r45 r">end</span>)
			{
				<b>int</b> <span id="r46 rd" class="r46 r">eol</span> = <a href="../Util/RawParseUtils.cs.html#9c316fb813def011" class="t t">RawParseUtils</a>.<a href="../Util/RawParseUtils.cs.html#0989702123852d37" class="i method">nextLF</a>(<a href="#fc52a48e75a69e9b" class="i property">Buffer</a>, <span class="r44 r">ptr</span>);
				<b>if</b> (<a href="#e870c1373bd74319" class="i method">isHunkHdr</a>(<a href="#fc52a48e75a69e9b" class="i property">Buffer</a>, <span class="r44 r">ptr</span>, <span class="r46 r">eol</span>) &gt;= 1)
				{
					<span class="c">// First hunk header; break out and parse them later.</span>
					<b>break</b>;
				}

				<b>if</b> (<a href="../Util/RawParseUtils.cs.html#9c316fb813def011" class="t t">RawParseUtils</a>.<a href="../Util/RawParseUtils.cs.html#8d5e78f7413720c3" class="i method">match</a>(<a href="#fc52a48e75a69e9b" class="i property">Buffer</a>, <span class="r44 r">ptr</span>, <a href="#c28ae1eeaf01e369" class="i field">OLD_NAME</a>) &gt;= 0)
				{
					<a href="#c229b85610df1a1a" class="i method">ParseOldName</a>(<span class="r44 r">ptr</span>, <span class="r46 r">eol</span>);
				}
				<b>else if</b> (<a href="../Util/RawParseUtils.cs.html#9c316fb813def011" class="t t">RawParseUtils</a>.<a href="../Util/RawParseUtils.cs.html#8d5e78f7413720c3" class="i method">match</a>(<a href="#fc52a48e75a69e9b" class="i property">Buffer</a>, <span class="r44 r">ptr</span>, <a href="#c908d4c2ae66b7ca" class="i field">NEW_NAME</a>) &gt;= 0)
				{
					<a href="#e32ef2681b200974" class="i method">ParseNewName</a>(<span class="r44 r">ptr</span>, <span class="r46 r">eol</span>);
				}
				<b>else</b>
				{
					<span class="c">// Possibly an empty patch.</span>
					<b>break</b>;
				}

				<span class="r44 r">ptr</span> = <span class="r46 r">eol</span>;
			}

			<b>return</b> <span class="r44 r">ptr</span>;
		}

		<b>private string</b> <a id="d5fd5388486f9d7c" href="../R/d5fd5388486f9d7c.html" target="n" data-glyph="76,1" class="i method">ParseName</a>(<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="t t">String</a> <span id="r47 rd" class="r47 r">expect</span>, <b>int</b> <span id="r48 rd" class="r48 r">ptr</span>, <b>int</b> <span id="r49 rd" class="r49 r">end</span>)
		{
			<b>if</b> (<span class="r48 r">ptr</span> == <span class="r49 r">end</span>)
			{
				<b>return</b> <span class="r47 r">expect</span>;
			}

			<b>string</b> <span id="r50 rd" class="r50 r">r</span>;
			<b>if</b> (<a href="#fc52a48e75a69e9b" class="i property">Buffer</a>[<span class="r48 r">ptr</span>] == <span class="s">&#39;&quot;&#39;</span>)
			{
				<span class="c">// New style GNU diff format</span>
				<span class="c">//</span>
				<span class="r50 r">r</span> = <a href="../Util/QuotedString.cs.html#91f0bc07cec563f9" class="t t">QuotedString</a>.<a href="../Util/QuotedString.cs.html#99e800e085f005e7" class="t t">GitPathStyle</a>.<a href="../Util/QuotedString.cs.html#f79df8a26ed11203" class="i field">GIT_PATH</a>.<a href="../Util/QuotedString.cs.html#fc8db47e91a7a606" class="i method">dequote</a>(<a href="#fc52a48e75a69e9b" class="i property">Buffer</a>, <span class="r48 r">ptr</span>, <span class="r49 r">end</span> - 1);
			}
			<b>else</b>
			{
				<span class="c">// Older style GNU diff format, an optional tab ends the name.</span>
				<span class="c">//</span>
				<b>int</b> <span id="r51 rd" class="r51 r">tab</span> = <span class="r49 r">end</span>;
				<b>while</b> (<span class="r48 r">ptr</span> &lt; <span class="r51 r">tab</span> &amp;&amp; <a href="#fc52a48e75a69e9b" class="i property">Buffer</a>[<span class="r51 r">tab</span> - 1] != <span class="s">&#39;\t&#39;</span>)
				{
					<span class="r51 r">tab</span>--;
				}

				<b>if</b> (<span class="r48 r">ptr</span> == <span class="r51 r">tab</span>)
				{
					<span class="r51 r">tab</span> = <span class="r49 r">end</span>;
				}

				<span class="r50 r">r</span> = <a href="../Util/RawParseUtils.cs.html#9c316fb813def011" class="t t">RawParseUtils</a>.<a href="../Util/RawParseUtils.cs.html#ceca22962c12c579" class="i method">decode</a>(<a href="../Constants.cs.html#4c9cf80bf668e5fb" class="t t">Constants</a>.<a href="../Constants.cs.html#b2fcdc67ec48e578" class="i field">CHARSET</a>, <a href="#fc52a48e75a69e9b" class="i property">Buffer</a>, <span class="r48 r">ptr</span>, <span class="r51 r">tab</span> - 1);
			}

			<b>if</b> (<span class="r50 r">r</span>.<a href="@0@mscorlib/A.html#31b307b02a3bd6b9" class="i method">Equals</a>(<a href="#4cfdd6ddbffb851d" class="i field">DEV_NULL</a>))
			{
				<span class="r50 r">r</span> = <a href="#4cfdd6ddbffb851d" class="i field">DEV_NULL</a>;
			}

			<b>return</b> <span class="r50 r">r</span>;
		}

		<b>private static string</b> <a id="876099f0cbd10905" href="../R/876099f0cbd10905.html" target="n" data-glyph="76,1" class="i method">P1</a>(<b>string</b> <span id="r52 rd" class="r52 r">r</span>)
		{
			<b>int</b> <span id="r53 rd" class="r53 r">s</span> = <span class="r52 r">r</span>.<a href="@0@mscorlib/A.html#eb06d6d166f6a3d9" class="i method">IndexOf</a>(<span class="s">&#39;/&#39;</span>);
			<b>return</b> <span class="r53 r">s</span> &gt; 0 ? <span class="r52 r">r</span>.<a href="@0@mscorlib/A.html#882fa7998d6ca35a" class="i method">Substring</a>(<span class="r53 r">s</span> + 1) : <span class="r52 r">r</span>;
		}

		<b>protected</b> <a href="../FileMode.cs.html#2686d9196f6bc5fe" class="t t">FileMode</a> <a id="14c1d41f4cb918bd" href="../R/14c1d41f4cb918bd.html" target="n" data-glyph="75,1" class="i method">ParseFileMode</a>(<b>int</b> <span id="r54 rd" class="r54 r">ptr</span>, <b>int</b> <span id="r55 rd" class="r55 r">end</span>)
		{
			<b>int</b> <span id="r56 rd" class="r56 r">tmp</span> = 0;
			<b>while</b> (<span class="r54 r">ptr</span> &lt; <span class="r55 r">end</span> - 1)
			{
				<span class="r56 r">tmp</span> &lt;&lt;= 3;
				<span class="r56 r">tmp</span> += <a href="#fc52a48e75a69e9b" class="i property">Buffer</a>[<span class="r54 r">ptr</span>++] - <span class="s">&#39;0&#39;</span>;
			}
			<b>return</b> <a href="../FileMode.cs.html#2686d9196f6bc5fe" class="t t">FileMode</a>.<a href="../FileMode.cs.html#1103a407cfbbb194" class="i method">FromBits</a>(<span class="r56 r">tmp</span>);
		}

		<b>protected virtual void</b> <a id="17271db901359703" href="../R/17271db901359703.html" target="n" data-glyph="75,1" class="i method">ParseIndexLine</a>(<b>int</b> <span id="r57 rd" class="r57 r">ptr</span>, <b>int</b> <span id="r58 rd" class="r58 r">end</span>)
		{
			<span class="c">// &quot;index $asha1..$bsha1[ $mode]&quot; where $asha1 and $bsha1</span>
			<span class="c">// can be unique abbreviations</span>
			<span class="c">//</span>
			<b>int</b> <span id="r59 rd" class="r59 r">dot2</span> = <a href="../Util/RawParseUtils.cs.html#9c316fb813def011" class="t t">RawParseUtils</a>.<a href="../Util/RawParseUtils.cs.html#bfac7916e9a2bc6d" class="i method">nextLF</a>(<a href="#fc52a48e75a69e9b" class="i property">Buffer</a>, <span class="r57 r">ptr</span>, (<b>byte</b>)<span class="s">&#39;.&#39;</span>);
			<b>int</b> <span id="r60 rd" class="r60 r">mode</span> = <a href="../Util/RawParseUtils.cs.html#9c316fb813def011" class="t t">RawParseUtils</a>.<a href="../Util/RawParseUtils.cs.html#bfac7916e9a2bc6d" class="i method">nextLF</a>(<a href="#fc52a48e75a69e9b" class="i property">Buffer</a>, <span class="r59 r">dot2</span>, (<b>byte</b>)<span class="s">&#39; &#39;</span>);

			<a href="#0ede46752192441d" class="i field">oldId</a> = <a href="../AbbreviatedObjectId.cs.html#f643b6637511da45" class="t t">AbbreviatedObjectId</a>.<a href="../AbbreviatedObjectId.cs.html#6efe6ce1723d9c32" class="i method">FromString</a>(<a href="#fc52a48e75a69e9b" class="i property">Buffer</a>, <span class="r57 r">ptr</span>, <span class="r59 r">dot2</span> - 1);
			<a href="#aa48f20388879a87" class="i property">NewId</a> = <a href="../AbbreviatedObjectId.cs.html#f643b6637511da45" class="t t">AbbreviatedObjectId</a>.<a href="../AbbreviatedObjectId.cs.html#6efe6ce1723d9c32" class="i method">FromString</a>(<a href="#fc52a48e75a69e9b" class="i property">Buffer</a>, <span class="r59 r">dot2</span> + 1, <span class="r60 r">mode</span> - 1);

			<b>if</b> (<span class="r60 r">mode</span> &lt; <span class="r58 r">end</span>)
			{
				<a href="#a30c2e13da94e755" class="i field">_newMode</a> = <a href="#1bcbbd7c24634cb0" class="i field">_oldMode</a> = <a href="#14c1d41f4cb918bd" class="i method">ParseFileMode</a>(<span class="r60 r">mode</span>, <span class="r58 r">end</span>);
			}
		}

		<b>private bool</b> <a id="a1b2e6832659e392" href="../R/a1b2e6832659e392.html" target="n" data-glyph="76,1" class="i method">Eq</a>(<b>int</b> <span id="r61 rd" class="r61 r">aPtr</span>, <b>int</b> <span id="r62 rd" class="r62 r">aEnd</span>, <b>int</b> <span id="r63 rd" class="r63 r">bPtr</span>, <b>int</b> <span id="r64 rd" class="r64 r">bEnd</span>)
		{
			<b>if</b> (<span class="r62 r">aEnd</span> - <span class="r61 r">aPtr</span> != <span class="r64 r">bEnd</span> - <span class="r63 r">bPtr</span>)
			{
				<b>return false</b>;
			}
			<b>while</b> (<span class="r61 r">aPtr</span> &lt; <span class="r62 r">aEnd</span>)
			{
				<b>if</b> (<a href="#fc52a48e75a69e9b" class="i property">Buffer</a>[<span class="r61 r">aPtr</span>++] != <a href="#fc52a48e75a69e9b" class="i property">Buffer</a>[<span class="r63 r">bPtr</span>++])
				{
					<b>return false</b>;
				}
			}

			<b>return true</b>;
		}

		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> Determine if this is a patch hunk header.</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span><span class="c"> </span><span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r65 r">buf</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">the buffer to scan</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span><span class="c"> </span><span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r66 r">start</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">first position in the buffer to evaluate</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span><span class="c"> </span><span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r67 r">end</span><span class="c">&quot;</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> last position to consider; usually the end of the buffer </span>
		<span class="c">///</span><span class="c"> (</span><span class="c">&lt;</span><span class="c">code</span><span class="c">&gt;</span><span class="c">buf.length</span><span class="c">&lt;/</span><span class="c">code</span><span class="c">&gt;</span><span class="c">) or the first position on the next</span>
		<span class="c">///</span><span class="c"> line. This is only used to avoid very long runs of &#39;@&#39; from</span>
		<span class="c">///</span><span class="c"> killing the scan loop.</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">returns</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> the number of &quot;ancestor revisions&quot; in the hunk header. A</span>
		<span class="c">///</span><span class="c"> traditional two-way diff (&quot;@@ -...&quot;) returns 1; a combined diff</span>
		<span class="c">///</span><span class="c"> for a 3 way-merge returns 3. If this is not a hunk header, 0 is</span>
		<span class="c">///</span><span class="c"> returned instead.</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">returns</span><span class="c">&gt;</span>
		<b>public static int</b> <a id="e870c1373bd74319" href="../R/e870c1373bd74319.html" target="n" data-glyph="72,1" class="i method">isHunkHdr</a>(<b>byte</b>[] <span id="r65 rd" class="r65 r">buf</span>, <b>int</b> <span id="r66 rd" class="r66 r">start</span>, <b>int</b> <span id="r67 rd" class="r67 r">end</span>)
		{
			<b>int</b> <span id="r68 rd" class="r68 r">ptr</span> = <span class="r66 r">start</span>;
			<b>while</b> ((<span class="r68 r">ptr</span> &lt; <span class="r67 r">end</span>) &amp;&amp; (<span class="r65 r">buf</span>[<span class="r68 r">ptr</span>] == <span class="s">&#39;@&#39;</span>))
			{
				<span class="r68 r">ptr</span>++;
			}

			<b>if</b> ((<span class="r68 r">ptr</span> - <span class="r66 r">start</span>) &lt; 2)
				<b>return</b> 0;
			
			<b>if</b> ((<span class="r68 r">ptr</span> == <span class="r67 r">end</span>) || (<span class="r65 r">buf</span>[<span class="r68 r">ptr</span>++] != <span class="s">&#39; &#39;</span>))
				<b>return</b> 0;
			
			<b>if</b> ((<span class="r68 r">ptr</span> == <span class="r67 r">end</span>) || (<span class="r65 r">buf</span>[<span class="r68 r">ptr</span>++] != <span class="s">&#39;-&#39;</span>))
				<b>return</b> 0;
			
			<b>return</b> (<span class="r68 r">ptr</span> - 3) - <span class="r66 r">start</span>;
		}
	}
}</pre></td></tr></table></div></body></html>
