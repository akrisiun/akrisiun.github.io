<!DOCTYPE html>
<html><head><title>InfCodes.cs</title><link rel="stylesheet" href="../../styles.css"><script src="../../scripts.js"></script></head>
<body class="cB" onload="i(873);"><div class="dH">
<table style="width: 100%">
<tr><td>File: <a id="filePath" class="blueLink" href="/#NSch/NSch.ZLib/InfCodes.cs" target="_top">NSch.ZLib\InfCodes.cs</a><br/></td><td></td></tr>
<tr><td>Project: <a id="projectPath" class="blueLink" href="/#NSch" target="_top">lib\NGit\NSch\NSch.csproj</a> (NSch)</td><td></td></tr>
</table>
</div>
<div class="cz"><table class="tb" cellpadding="0" cellspacing="0"><tr><td valign="top" align="right"><pre id="ln"></pre></td><td valign="top" align="left"><pre id="code">
<span class="c">/*
Copyright (c) 2000,2001,2002,2003 ymnk, JCraft,Inc. All rights reserved.

Redistribution and use in source and binary forms, with or without
modification, are permitted provided that the following conditions are met:

  1. Redistributions of source code must retain the above copyright notice,
     this list of conditions and the following disclaimer.

  2. Redistributions in binary form must reproduce the above copyright 
     notice, this list of conditions and the following disclaimer in 
     the documentation and/or other materials provided with the distribution.

  3. The names of the authors may not be used to endorse or promote products
     derived from this software without specific prior written permission.

THIS SOFTWARE IS PROVIDED ``AS IS&#39;&#39; AND ANY EXPRESSED OR IMPLIED WARRANTIES,
INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND
FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL JCRAFT,
INC. OR ANY CONTRIBUTORS TO THIS SOFTWARE BE LIABLE FOR ANY DIRECT, INDIRECT,
INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA,
OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.

This program is based on zlib-1.1.3, so all credit should go authors
Jean-loup Gailly(jloup@gzip.org) and Mark Adler(madler@alumni.caltech.edu)
and contributors of zlib.
*/</span>

<b>using</b> <span class="i n">NSch</span>.<span class="i n">ZLib</span>;
<b>using</b> <span class="i n">Sharpen</span>;

<b>namespace</b> <span class="i n">NSch</span>.<span class="i n">ZLib</span>
{
	<b>internal sealed class</b> <a id="c3213fd1413c543a" href="../R/c3213fd1413c543a.html" target="n" data-glyph="2,0" class="t t">InfCodes</a>
	{
		<b>private static readonly int</b>[] <a id="4cc5273d0c5e87c4" href="../R/4cc5273d0c5e87c4.html" target="n" data-glyph="46,1" class="i field">inflate_mask</a> = <b>new</b> <b>int</b>[] { <b>unchecked</b>((<b>int</b>)(0x00000000
			)), <b>unchecked</b>((<b>int</b>)(0x00000001)), <b>unchecked</b>((<b>int</b>)(0x00000003)), <b>unchecked</b>((<b>int</b>)(
			0x00000007)), <b>unchecked</b>((<b>int</b>)(0x0000000f)), <b>unchecked</b>((<b>int</b>)(0x0000001f)), <b>unchecked</b>(
			(<b>int</b>)(0x0000003f)), <b>unchecked</b>((<b>int</b>)(0x0000007f)), <b>unchecked</b>((<b>int</b>)(0x000000ff)), 
			<b>unchecked</b>((<b>int</b>)(0x000001ff)), <b>unchecked</b>((<b>int</b>)(0x000003ff)), <b>unchecked</b>((<b>int</b>)(0x000007ff
			)), <b>unchecked</b>((<b>int</b>)(0x00000fff)), <b>unchecked</b>((<b>int</b>)(0x00001fff)), <b>unchecked</b>((<b>int</b>)(
			0x00003fff)), <b>unchecked</b>((<b>int</b>)(0x00007fff)), <b>unchecked</b>((<b>int</b>)(0x0000ffff)) };

		<b>private const int</b> <a id="cea2b52eeec209aa" href="../R/cea2b52eeec209aa.html" target="n" data-glyph="10,1" class="i field">Z_OK</a> = 0;

		<b>private const int</b> <a id="de0ab417a74dc586" href="../R/de0ab417a74dc586.html" target="n" data-glyph="10,1" class="i field">Z_STREAM_END</a> = 1;

		<b>private const int</b> <a id="fa646b5aff593010" href="../R/../../0000000000.html" target="n" data-glyph="10,1" class="i field">Z_NEED_DICT</a> = 2;

		<b>private const int</b> <a id="79eaed3a8c51cfbc" href="../R/../../0000000000.html" target="n" data-glyph="10,1" class="i field">Z_ERRNO</a> = -1;

		<b>private const int</b> <a id="5d5e48eaefa719bc" href="../R/5d5e48eaefa719bc.html" target="n" data-glyph="10,1" class="i field">Z_STREAM_ERROR</a> = -2;

		<b>private const int</b> <a id="6f88a127c39875a1" href="../R/6f88a127c39875a1.html" target="n" data-glyph="10,1" class="i field">Z_DATA_ERROR</a> = -3;

		<b>private const int</b> <a id="4adc2e357130f049" href="../R/../../0000000000.html" target="n" data-glyph="10,1" class="i field">Z_MEM_ERROR</a> = -4;

		<b>private const int</b> <a id="ffe3c72daf5f4d1b" href="../R/../../0000000000.html" target="n" data-glyph="10,1" class="i field">Z_BUF_ERROR</a> = -5;

		<b>private const int</b> <a id="83f97008b2fb2576" href="../R/../../0000000000.html" target="n" data-glyph="10,1" class="i field">Z_VERSION_ERROR</a> = -6;

		<b>private const int</b> <a id="20bbabc55458a4f4" href="../R/20bbabc55458a4f4.html" target="n" data-glyph="10,1" class="i field">START</a> = 0;

		<b>private const int</b> <a id="b685075054b72f44" href="../R/b685075054b72f44.html" target="n" data-glyph="10,1" class="i field">LEN</a> = 1;

		<b>private const int</b> <a id="e3b8ac714e773f66" href="../R/e3b8ac714e773f66.html" target="n" data-glyph="10,1" class="i field">LENEXT</a> = 2;

		<b>private const int</b> <a id="fe3f1221c0dcd5e3" href="../R/fe3f1221c0dcd5e3.html" target="n" data-glyph="10,1" class="i field">DIST</a> = 3;

		<b>private const int</b> <a id="a69d3a42a1d7ecf4" href="../R/a69d3a42a1d7ecf4.html" target="n" data-glyph="10,1" class="i field">DISTEXT</a> = 4;

		<b>private const int</b> <a id="26c07f9a942ba538" href="../R/26c07f9a942ba538.html" target="n" data-glyph="10,1" class="i field">COPY</a> = 5;

		<b>private const int</b> <a id="1536d44150946385" href="../R/1536d44150946385.html" target="n" data-glyph="10,1" class="i field">LIT</a> = 6;

		<b>private const int</b> <a id="3a22833f909338d3" href="../R/3a22833f909338d3.html" target="n" data-glyph="10,1" class="i field">WASH</a> = 7;

		<b>private const int</b> <a id="159d07c2c956a2b5" href="../R/159d07c2c956a2b5.html" target="n" data-glyph="10,1" class="i field">END</a> = 8;

		<b>private const int</b> <a id="dbdcdfe53b8a7a8e" href="../R/dbdcdfe53b8a7a8e.html" target="n" data-glyph="10,1" class="i field">BADCODE</a> = 9;

		<b>internal int</b> <a id="14b6b423cb5f55ef" href="../R/14b6b423cb5f55ef.html" target="n" data-glyph="44,1" class="i field">mode</a>;

		<b>internal int</b> <a id="e13e18387f20935b" href="../R/e13e18387f20935b.html" target="n" data-glyph="44,1" class="i field">len</a>;

		<b>internal int</b>[] <a id="778992927dbc2df7" href="../R/778992927dbc2df7.html" target="n" data-glyph="44,1" class="i field">tree</a>;

		<b>internal int</b> <a id="d6a112b7f010ddad" href="../R/d6a112b7f010ddad.html" target="n" data-glyph="44,1" class="i field">tree_index</a> = 0;

		<b>internal int</b> <a id="a1542ae856cb2823" href="../R/a1542ae856cb2823.html" target="n" data-glyph="44,1" class="i field">need</a>;

		<b>internal int</b> <a id="fbe3f912a461bff0" href="../R/fbe3f912a461bff0.html" target="n" data-glyph="44,1" class="i field">lit</a>;

		<b>internal int</b> <a id="1d29a626b8fff2bc" href="../R/1d29a626b8fff2bc.html" target="n" data-glyph="44,1" class="i field">get</a>;

		<b>internal int</b> <a id="aba0f501fdf11660" href="../R/aba0f501fdf11660.html" target="n" data-glyph="44,1" class="i field">dist</a>;

		<b>internal byte</b> <a id="64b70d153c884ce5" href="../R/64b70d153c884ce5.html" target="n" data-glyph="44,1" class="i field">lbits</a>;

		<b>internal byte</b> <a id="b15af46fcb25cd60" href="../R/b15af46fcb25cd60.html" target="n" data-glyph="44,1" class="i field">dbits</a>;

		<b>internal int</b>[] <a id="a6f96846addef9e7" href="../R/a6f96846addef9e7.html" target="n" data-glyph="44,1" class="i field">ltree</a>;

		<b>internal int</b> <a id="d1588c5dc356a96a" href="../R/d1588c5dc356a96a.html" target="n" data-glyph="44,1" class="i field">ltree_index</a>;

		<b>internal int</b>[] <a id="7cfccbba88eabdc4" href="../R/7cfccbba88eabdc4.html" target="n" data-glyph="44,1" class="i field">dtree</a>;

		<b>internal int</b> <a id="82c9c37ef19cadef" href="../R/82c9c37ef19cadef.html" target="n" data-glyph="44,1" class="i field">dtree_index</a>;

		<b>public</b> <a id="98612812c22d9f39" href="../R/98612812c22d9f39.html" target="n" data-glyph="72,1" class="i constructor">InfCodes</a>()
		{
		}

		<span class="c">// waiting for &quot;i:&quot;=input,</span>
		<span class="c">//             &quot;o:&quot;=output,</span>
		<span class="c">//             &quot;x:&quot;=nothing</span>
		<span class="c">// x: set up for LEN</span>
		<span class="c">// i: get length/literal/eob next</span>
		<span class="c">// i: getting length extra (have base)</span>
		<span class="c">// i: get distance next</span>
		<span class="c">// i: getting distance extra</span>
		<span class="c">// o: copying bytes in window, waiting for space</span>
		<span class="c">// o: got literal, waiting for output space</span>
		<span class="c">// o: got eob, possibly still output waiting</span>
		<span class="c">// x: got eob and all data flushed</span>
		<span class="c">// x: got error</span>
		<span class="c">// current inflate_codes mode</span>
		<span class="c">// mode dependent information</span>
		<span class="c">// pointer into tree</span>
		<span class="c">// bits needed</span>
		<span class="c">// if EXT or COPY, where and how much</span>
		<span class="c">// bits to get for extra</span>
		<span class="c">// distance back to copy from</span>
		<span class="c">// ltree bits decoded per branch</span>
		<span class="c">// dtree bits decoder per branch</span>
		<span class="c">// literal/length/eob tree</span>
		<span class="c">// literal/length/eob tree</span>
		<span class="c">// distance tree</span>
		<span class="c">// distance tree</span>
		<b>internal void</b> <a id="badaffde1c4d1e5d" href="../R/badaffde1c4d1e5d.html" target="n" data-glyph="74,1" class="i method">Init</a>(<b>int</b> <span id="r0 rd" class="r0 r">bl</span>, <b>int</b> <span id="r1 rd" class="r1 r">bd</span>, <b>int</b>[] <span id="r2 rd" class="r2 r">tl</span>, <b>int</b> <span id="r3 rd" class="r3 r">tl_index</span>, <b>int</b>[] <span id="r4 rd" class="r4 r">td</span>, <b>int</b> <span id="r5 rd" class="r5 r">td_index</span>
			, <a href="ZStream.cs.html#d2b19bd05b9e75af" class="t t">ZStream</a> <span id="r6 rd" class="r6 r">z</span>)
		{
			<a href="#14b6b423cb5f55ef" class="i field">mode</a> = <a href="#20bbabc55458a4f4" class="i field">START</a>;
			<a href="#64b70d153c884ce5" class="i field">lbits</a> = <b>unchecked</b>((<b>byte</b>)<span class="r0 r">bl</span>);
			<a href="#b15af46fcb25cd60" class="i field">dbits</a> = <b>unchecked</b>((<b>byte</b>)<span class="r1 r">bd</span>);
			<a href="#a6f96846addef9e7" class="i field">ltree</a> = <span class="r2 r">tl</span>;
			<a href="#d1588c5dc356a96a" class="i field">ltree_index</a> = <span class="r3 r">tl_index</span>;
			<a href="#7cfccbba88eabdc4" class="i field">dtree</a> = <span class="r4 r">td</span>;
			<a href="#82c9c37ef19cadef" class="i field">dtree_index</a> = <span class="r5 r">td_index</span>;
			<a href="#778992927dbc2df7" class="i field">tree</a> = <b>null</b>;
		}

		<b>internal int</b> <a id="f8980d369a818eda" href="../R/f8980d369a818eda.html" target="n" data-glyph="74,1" class="i method">Proc</a>(<a href="InfBlocks.cs.html#e7130a772740f028" class="t t">InfBlocks</a> <span id="r7 rd" class="r7 r">s</span>, <a href="ZStream.cs.html#d2b19bd05b9e75af" class="t t">ZStream</a> <span id="r8 rd" class="r8 r">z</span>, <b>int</b> <span id="r9 rd" class="r9 r">r</span>)
		{
			<b>int</b> <span id="r10 rd" class="r10 r">j</span>;
			<span class="c">// temporary storage</span>
			<b>int</b>[] <span id="r11 rd" class="r11 r">t</span>;
			<span class="c">// temporary pointer</span>
			<b>int</b> <span id="r12 rd" class="r12 r">tindex</span>;
			<span class="c">// temporary pointer</span>
			<b>int</b> <span id="r13 rd" class="r13 r">e</span>;
			<span class="c">// extra bits or operation</span>
			<b>int</b> <span id="r14 rd" class="r14 r">b</span> = 0;
			<span class="c">// bit buffer</span>
			<b>int</b> <span id="r15 rd" class="r15 r">k</span> = 0;
			<span class="c">// bits in bit buffer</span>
			<b>int</b> <span id="r16 rd" class="r16 r">p</span> = 0;
			<span class="c">// input data pointer</span>
			<b>int</b> <span id="r17 rd" class="r17 r">n</span>;
			<span class="c">// bytes available there</span>
			<b>int</b> <span id="r18 rd" class="r18 r">q</span>;
			<span class="c">// output window write pointer</span>
			<b>int</b> <span id="r19 rd" class="r19 r">m</span>;
			<span class="c">// bytes to end of window or read pointer</span>
			<b>int</b> <span id="r20 rd" class="r20 r">f</span>;
			<span class="c">// pointer to copy strings from</span>
			<span class="c">// copy input/output information to locals (UPDATE macro restores)</span>
			<span class="r16 r">p</span> = <span class="r8 r">z</span>.<a href="ZStream.cs.html#b33f6c3d5ac8bf3e" class="i field">next_in_index</a>;
			<span class="r17 r">n</span> = <span class="r8 r">z</span>.<a href="ZStream.cs.html#4dde63befa366043" class="i field">avail_in</a>;
			<span class="r14 r">b</span> = <span class="r7 r">s</span>.<a href="InfBlocks.cs.html#4552ac0052c4e46f" class="i field">bitb</a>;
			<span class="r15 r">k</span> = <span class="r7 r">s</span>.<a href="InfBlocks.cs.html#9b8ddfdbaa9d93af" class="i field">bitk</a>;
			<span class="r18 r">q</span> = <span class="r7 r">s</span>.<a href="InfBlocks.cs.html#5bce480d14e3afaa" class="i field">write</a>;
			<span class="r19 r">m</span> = <span class="r18 r">q</span> &lt; <span class="r7 r">s</span>.<a href="InfBlocks.cs.html#4951f0b9caa3dde3" class="i field">read</a> ? <span class="r7 r">s</span>.<a href="InfBlocks.cs.html#4951f0b9caa3dde3" class="i field">read</a> - <span class="r18 r">q</span> - 1 : <span class="r7 r">s</span>.<a href="InfBlocks.cs.html#644e6059ae8f39cb" class="i field">end</a> - <span class="r18 r">q</span>;
			<span class="c">// process input and output based on current state</span>
			<b>while</b> (<b>true</b>)
			{
				<b>switch</b> (<a href="#14b6b423cb5f55ef" class="i field">mode</a>)
				{
					<b>case</b> <a href="#20bbabc55458a4f4" class="i field">START</a>:
					{
						<span class="c">// waiting for &quot;i:&quot;=input, &quot;o:&quot;=output, &quot;x:&quot;=nothing</span>
						<span class="c">// x: set up for LEN</span>
						<b>if</b> (<span class="r19 r">m</span> &gt;= 258 &amp;&amp; <span class="r17 r">n</span> &gt;= 10)
						{
							<span class="r7 r">s</span>.<a href="InfBlocks.cs.html#4552ac0052c4e46f" class="i field">bitb</a> = <span class="r14 r">b</span>;
							<span class="r7 r">s</span>.<a href="InfBlocks.cs.html#9b8ddfdbaa9d93af" class="i field">bitk</a> = <span class="r15 r">k</span>;
							<span class="r8 r">z</span>.<a href="ZStream.cs.html#4dde63befa366043" class="i field">avail_in</a> = <span class="r17 r">n</span>;
							<span class="r8 r">z</span>.<a href="ZStream.cs.html#948985959b111adc" class="i field">total_in</a> += <span class="r16 r">p</span> - <span class="r8 r">z</span>.<a href="ZStream.cs.html#b33f6c3d5ac8bf3e" class="i field">next_in_index</a>;
							<span class="r8 r">z</span>.<a href="ZStream.cs.html#b33f6c3d5ac8bf3e" class="i field">next_in_index</a> = <span class="r16 r">p</span>;
							<span class="r7 r">s</span>.<a href="InfBlocks.cs.html#5bce480d14e3afaa" class="i field">write</a> = <span class="r18 r">q</span>;
							<span class="r9 r">r</span> = <a href="#424fcd22f2132048" class="i method">Inflate_fast</a>(<a href="#64b70d153c884ce5" class="i field">lbits</a>, <a href="#b15af46fcb25cd60" class="i field">dbits</a>, <a href="#a6f96846addef9e7" class="i field">ltree</a>, <a href="#d1588c5dc356a96a" class="i field">ltree_index</a>, <a href="#7cfccbba88eabdc4" class="i field">dtree</a>, <a href="#82c9c37ef19cadef" class="i field">dtree_index</a>, <span class="r7 r">s</span>, <span class="r8 r">z</span>);
							<span class="r16 r">p</span> = <span class="r8 r">z</span>.<a href="ZStream.cs.html#b33f6c3d5ac8bf3e" class="i field">next_in_index</a>;
							<span class="r17 r">n</span> = <span class="r8 r">z</span>.<a href="ZStream.cs.html#4dde63befa366043" class="i field">avail_in</a>;
							<span class="r14 r">b</span> = <span class="r7 r">s</span>.<a href="InfBlocks.cs.html#4552ac0052c4e46f" class="i field">bitb</a>;
							<span class="r15 r">k</span> = <span class="r7 r">s</span>.<a href="InfBlocks.cs.html#9b8ddfdbaa9d93af" class="i field">bitk</a>;
							<span class="r18 r">q</span> = <span class="r7 r">s</span>.<a href="InfBlocks.cs.html#5bce480d14e3afaa" class="i field">write</a>;
							<span class="r19 r">m</span> = <span class="r18 r">q</span> &lt; <span class="r7 r">s</span>.<a href="InfBlocks.cs.html#4951f0b9caa3dde3" class="i field">read</a> ? <span class="r7 r">s</span>.<a href="InfBlocks.cs.html#4951f0b9caa3dde3" class="i field">read</a> - <span class="r18 r">q</span> - 1 : <span class="r7 r">s</span>.<a href="InfBlocks.cs.html#644e6059ae8f39cb" class="i field">end</a> - <span class="r18 r">q</span>;
							<b>if</b> (<span class="r9 r">r</span> != <a href="#cea2b52eeec209aa" class="i field">Z_OK</a>)
							{
								<a href="#14b6b423cb5f55ef" class="i field">mode</a> = <span class="r9 r">r</span> == <a href="#de0ab417a74dc586" class="i field">Z_STREAM_END</a> ? <a href="#3a22833f909338d3" class="i field">WASH</a> : <a href="#dbdcdfe53b8a7a8e" class="i field">BADCODE</a>;
								<b>break</b>;
							}
						}
						<a href="#a1542ae856cb2823" class="i field">need</a> = <a href="#64b70d153c884ce5" class="i field">lbits</a>;
						<a href="#778992927dbc2df7" class="i field">tree</a> = <a href="#a6f96846addef9e7" class="i field">ltree</a>;
						<a href="#d6a112b7f010ddad" class="i field">tree_index</a> = <a href="#d1588c5dc356a96a" class="i field">ltree_index</a>;
						<a href="#14b6b423cb5f55ef" class="i field">mode</a> = <a href="#b685075054b72f44" class="i field">LEN</a>;
						<b>goto case</b> <a href="#b685075054b72f44" class="i field">LEN</a>;
					}

					<b>case</b> <a href="#b685075054b72f44" class="i field">LEN</a>:
					{
						<span class="c">// i: get length/literal/eob next</span>
						<span class="r10 r">j</span> = <a href="#a1542ae856cb2823" class="i field">need</a>;
						<b>while</b> (<span class="r15 r">k</span> &lt; (<span class="r10 r">j</span>))
						{
							<b>if</b> (<span class="r17 r">n</span> != 0)
							{
								<span class="r9 r">r</span> = <a href="#cea2b52eeec209aa" class="i field">Z_OK</a>;
							}
							<b>else</b>
							{
								<span class="r7 r">s</span>.<a href="InfBlocks.cs.html#4552ac0052c4e46f" class="i field">bitb</a> = <span class="r14 r">b</span>;
								<span class="r7 r">s</span>.<a href="InfBlocks.cs.html#9b8ddfdbaa9d93af" class="i field">bitk</a> = <span class="r15 r">k</span>;
								<span class="r8 r">z</span>.<a href="ZStream.cs.html#4dde63befa366043" class="i field">avail_in</a> = <span class="r17 r">n</span>;
								<span class="r8 r">z</span>.<a href="ZStream.cs.html#948985959b111adc" class="i field">total_in</a> += <span class="r16 r">p</span> - <span class="r8 r">z</span>.<a href="ZStream.cs.html#b33f6c3d5ac8bf3e" class="i field">next_in_index</a>;
								<span class="r8 r">z</span>.<a href="ZStream.cs.html#b33f6c3d5ac8bf3e" class="i field">next_in_index</a> = <span class="r16 r">p</span>;
								<span class="r7 r">s</span>.<a href="InfBlocks.cs.html#5bce480d14e3afaa" class="i field">write</a> = <span class="r18 r">q</span>;
								<b>return</b> <span class="r7 r">s</span>.<a href="InfBlocks.cs.html#935bf1338a2e6d6f" class="i method">Inflate_flush</a>(<span class="r8 r">z</span>, <span class="r9 r">r</span>);
							}
							<span class="r17 r">n</span>--;
							<span class="r14 r">b</span> |= (<span class="r8 r">z</span>.<a href="ZStream.cs.html#4369f207df005701" class="i field">next_in</a>[<span class="r16 r">p</span>++] &amp; <b>unchecked</b>((<b>int</b>)(0xff))) &lt;&lt; <span class="r15 r">k</span>;
							<span class="r15 r">k</span> += 8;
						}
						<span class="r12 r">tindex</span> = (<a href="#d6a112b7f010ddad" class="i field">tree_index</a> + (<span class="r14 r">b</span> &amp; <a href="#4cc5273d0c5e87c4" class="i field">inflate_mask</a>[<span class="r10 r">j</span>])) * 3;
						<span class="r14 r">b</span> = (<b>int</b>)(((<b>uint</b>)<span class="r14 r">b</span>) &gt;&gt; (<a href="#778992927dbc2df7" class="i field">tree</a>[<span class="r12 r">tindex</span> + 1]));
						<span class="r15 r">k</span> -= (<a href="#778992927dbc2df7" class="i field">tree</a>[<span class="r12 r">tindex</span> + 1]);
						<span class="r13 r">e</span> = <a href="#778992927dbc2df7" class="i field">tree</a>[<span class="r12 r">tindex</span>];
						<b>if</b> (<span class="r13 r">e</span> == 0)
						{
							<span class="c">// literal</span>
							<a href="#fbe3f912a461bff0" class="i field">lit</a> = <a href="#778992927dbc2df7" class="i field">tree</a>[<span class="r12 r">tindex</span> + 2];
							<a href="#14b6b423cb5f55ef" class="i field">mode</a> = <a href="#1536d44150946385" class="i field">LIT</a>;
							<b>break</b>;
						}
						<b>if</b> ((<span class="r13 r">e</span> &amp; 16) != 0)
						{
							<span class="c">// length</span>
							<a href="#1d29a626b8fff2bc" class="i field">get</a> = <span class="r13 r">e</span> &amp; 15;
							<a href="#e13e18387f20935b" class="i field">len</a> = <a href="#778992927dbc2df7" class="i field">tree</a>[<span class="r12 r">tindex</span> + 2];
							<a href="#14b6b423cb5f55ef" class="i field">mode</a> = <a href="#e3b8ac714e773f66" class="i field">LENEXT</a>;
							<b>break</b>;
						}
						<b>if</b> ((<span class="r13 r">e</span> &amp; 64) == 0)
						{
							<span class="c">// next table</span>
							<a href="#a1542ae856cb2823" class="i field">need</a> = <span class="r13 r">e</span>;
							<a href="#d6a112b7f010ddad" class="i field">tree_index</a> = <span class="r12 r">tindex</span> / 3 + <a href="#778992927dbc2df7" class="i field">tree</a>[<span class="r12 r">tindex</span> + 2];
							<b>break</b>;
						}
						<b>if</b> ((<span class="r13 r">e</span> &amp; 32) != 0)
						{
							<span class="c">// end of block</span>
							<a href="#14b6b423cb5f55ef" class="i field">mode</a> = <a href="#3a22833f909338d3" class="i field">WASH</a>;
							<b>break</b>;
						}
						<a href="#14b6b423cb5f55ef" class="i field">mode</a> = <a href="#dbdcdfe53b8a7a8e" class="i field">BADCODE</a>;
						<span class="c">// invalid code</span>
						<span class="r8 r">z</span>.<a href="ZStream.cs.html#1375722af7f7b471" class="i field">msg</a> = <span class="s">&quot;invalid literal/length code&quot;</span>;
						<span class="r9 r">r</span> = <a href="#6f88a127c39875a1" class="i field">Z_DATA_ERROR</a>;
						<span class="r7 r">s</span>.<a href="InfBlocks.cs.html#4552ac0052c4e46f" class="i field">bitb</a> = <span class="r14 r">b</span>;
						<span class="r7 r">s</span>.<a href="InfBlocks.cs.html#9b8ddfdbaa9d93af" class="i field">bitk</a> = <span class="r15 r">k</span>;
						<span class="r8 r">z</span>.<a href="ZStream.cs.html#4dde63befa366043" class="i field">avail_in</a> = <span class="r17 r">n</span>;
						<span class="r8 r">z</span>.<a href="ZStream.cs.html#948985959b111adc" class="i field">total_in</a> += <span class="r16 r">p</span> - <span class="r8 r">z</span>.<a href="ZStream.cs.html#b33f6c3d5ac8bf3e" class="i field">next_in_index</a>;
						<span class="r8 r">z</span>.<a href="ZStream.cs.html#b33f6c3d5ac8bf3e" class="i field">next_in_index</a> = <span class="r16 r">p</span>;
						<span class="r7 r">s</span>.<a href="InfBlocks.cs.html#5bce480d14e3afaa" class="i field">write</a> = <span class="r18 r">q</span>;
						<b>return</b> <span class="r7 r">s</span>.<a href="InfBlocks.cs.html#935bf1338a2e6d6f" class="i method">Inflate_flush</a>(<span class="r8 r">z</span>, <span class="r9 r">r</span>);
					}

					<b>case</b> <a href="#e3b8ac714e773f66" class="i field">LENEXT</a>:
					{
						<span class="c">// i: getting length extra (have base)</span>
						<span class="r10 r">j</span> = <a href="#1d29a626b8fff2bc" class="i field">get</a>;
						<b>while</b> (<span class="r15 r">k</span> &lt; (<span class="r10 r">j</span>))
						{
							<b>if</b> (<span class="r17 r">n</span> != 0)
							{
								<span class="r9 r">r</span> = <a href="#cea2b52eeec209aa" class="i field">Z_OK</a>;
							}
							<b>else</b>
							{
								<span class="r7 r">s</span>.<a href="InfBlocks.cs.html#4552ac0052c4e46f" class="i field">bitb</a> = <span class="r14 r">b</span>;
								<span class="r7 r">s</span>.<a href="InfBlocks.cs.html#9b8ddfdbaa9d93af" class="i field">bitk</a> = <span class="r15 r">k</span>;
								<span class="r8 r">z</span>.<a href="ZStream.cs.html#4dde63befa366043" class="i field">avail_in</a> = <span class="r17 r">n</span>;
								<span class="r8 r">z</span>.<a href="ZStream.cs.html#948985959b111adc" class="i field">total_in</a> += <span class="r16 r">p</span> - <span class="r8 r">z</span>.<a href="ZStream.cs.html#b33f6c3d5ac8bf3e" class="i field">next_in_index</a>;
								<span class="r8 r">z</span>.<a href="ZStream.cs.html#b33f6c3d5ac8bf3e" class="i field">next_in_index</a> = <span class="r16 r">p</span>;
								<span class="r7 r">s</span>.<a href="InfBlocks.cs.html#5bce480d14e3afaa" class="i field">write</a> = <span class="r18 r">q</span>;
								<b>return</b> <span class="r7 r">s</span>.<a href="InfBlocks.cs.html#935bf1338a2e6d6f" class="i method">Inflate_flush</a>(<span class="r8 r">z</span>, <span class="r9 r">r</span>);
							}
							<span class="r17 r">n</span>--;
							<span class="r14 r">b</span> |= (<span class="r8 r">z</span>.<a href="ZStream.cs.html#4369f207df005701" class="i field">next_in</a>[<span class="r16 r">p</span>++] &amp; <b>unchecked</b>((<b>int</b>)(0xff))) &lt;&lt; <span class="r15 r">k</span>;
							<span class="r15 r">k</span> += 8;
						}
						<a href="#e13e18387f20935b" class="i field">len</a> += (<span class="r14 r">b</span> &amp; <a href="#4cc5273d0c5e87c4" class="i field">inflate_mask</a>[<span class="r10 r">j</span>]);
						<span class="r14 r">b</span> &gt;&gt;= <span class="r10 r">j</span>;
						<span class="r15 r">k</span> -= <span class="r10 r">j</span>;
						<a href="#a1542ae856cb2823" class="i field">need</a> = <a href="#b15af46fcb25cd60" class="i field">dbits</a>;
						<a href="#778992927dbc2df7" class="i field">tree</a> = <a href="#7cfccbba88eabdc4" class="i field">dtree</a>;
						<a href="#d6a112b7f010ddad" class="i field">tree_index</a> = <a href="#82c9c37ef19cadef" class="i field">dtree_index</a>;
						<a href="#14b6b423cb5f55ef" class="i field">mode</a> = <a href="#fe3f1221c0dcd5e3" class="i field">DIST</a>;
						<b>goto case</b> <a href="#fe3f1221c0dcd5e3" class="i field">DIST</a>;
					}

					<b>case</b> <a href="#fe3f1221c0dcd5e3" class="i field">DIST</a>:
					{
						<span class="c">// i: get distance next</span>
						<span class="r10 r">j</span> = <a href="#a1542ae856cb2823" class="i field">need</a>;
						<b>while</b> (<span class="r15 r">k</span> &lt; (<span class="r10 r">j</span>))
						{
							<b>if</b> (<span class="r17 r">n</span> != 0)
							{
								<span class="r9 r">r</span> = <a href="#cea2b52eeec209aa" class="i field">Z_OK</a>;
							}
							<b>else</b>
							{
								<span class="r7 r">s</span>.<a href="InfBlocks.cs.html#4552ac0052c4e46f" class="i field">bitb</a> = <span class="r14 r">b</span>;
								<span class="r7 r">s</span>.<a href="InfBlocks.cs.html#9b8ddfdbaa9d93af" class="i field">bitk</a> = <span class="r15 r">k</span>;
								<span class="r8 r">z</span>.<a href="ZStream.cs.html#4dde63befa366043" class="i field">avail_in</a> = <span class="r17 r">n</span>;
								<span class="r8 r">z</span>.<a href="ZStream.cs.html#948985959b111adc" class="i field">total_in</a> += <span class="r16 r">p</span> - <span class="r8 r">z</span>.<a href="ZStream.cs.html#b33f6c3d5ac8bf3e" class="i field">next_in_index</a>;
								<span class="r8 r">z</span>.<a href="ZStream.cs.html#b33f6c3d5ac8bf3e" class="i field">next_in_index</a> = <span class="r16 r">p</span>;
								<span class="r7 r">s</span>.<a href="InfBlocks.cs.html#5bce480d14e3afaa" class="i field">write</a> = <span class="r18 r">q</span>;
								<b>return</b> <span class="r7 r">s</span>.<a href="InfBlocks.cs.html#935bf1338a2e6d6f" class="i method">Inflate_flush</a>(<span class="r8 r">z</span>, <span class="r9 r">r</span>);
							}
							<span class="r17 r">n</span>--;
							<span class="r14 r">b</span> |= (<span class="r8 r">z</span>.<a href="ZStream.cs.html#4369f207df005701" class="i field">next_in</a>[<span class="r16 r">p</span>++] &amp; <b>unchecked</b>((<b>int</b>)(0xff))) &lt;&lt; <span class="r15 r">k</span>;
							<span class="r15 r">k</span> += 8;
						}
						<span class="r12 r">tindex</span> = (<a href="#d6a112b7f010ddad" class="i field">tree_index</a> + (<span class="r14 r">b</span> &amp; <a href="#4cc5273d0c5e87c4" class="i field">inflate_mask</a>[<span class="r10 r">j</span>])) * 3;
						<span class="r14 r">b</span> &gt;&gt;= <a href="#778992927dbc2df7" class="i field">tree</a>[<span class="r12 r">tindex</span> + 1];
						<span class="r15 r">k</span> -= <a href="#778992927dbc2df7" class="i field">tree</a>[<span class="r12 r">tindex</span> + 1];
						<span class="r13 r">e</span> = (<a href="#778992927dbc2df7" class="i field">tree</a>[<span class="r12 r">tindex</span>]);
						<b>if</b> ((<span class="r13 r">e</span> &amp; 16) != 0)
						{
							<span class="c">// distance</span>
							<a href="#1d29a626b8fff2bc" class="i field">get</a> = <span class="r13 r">e</span> &amp; 15;
							<a href="#aba0f501fdf11660" class="i field">dist</a> = <a href="#778992927dbc2df7" class="i field">tree</a>[<span class="r12 r">tindex</span> + 2];
							<a href="#14b6b423cb5f55ef" class="i field">mode</a> = <a href="#a69d3a42a1d7ecf4" class="i field">DISTEXT</a>;
							<b>break</b>;
						}
						<b>if</b> ((<span class="r13 r">e</span> &amp; 64) == 0)
						{
							<span class="c">// next table</span>
							<a href="#a1542ae856cb2823" class="i field">need</a> = <span class="r13 r">e</span>;
							<a href="#d6a112b7f010ddad" class="i field">tree_index</a> = <span class="r12 r">tindex</span> / 3 + <a href="#778992927dbc2df7" class="i field">tree</a>[<span class="r12 r">tindex</span> + 2];
							<b>break</b>;
						}
						<a href="#14b6b423cb5f55ef" class="i field">mode</a> = <a href="#dbdcdfe53b8a7a8e" class="i field">BADCODE</a>;
						<span class="c">// invalid code</span>
						<span class="r8 r">z</span>.<a href="ZStream.cs.html#1375722af7f7b471" class="i field">msg</a> = <span class="s">&quot;invalid distance code&quot;</span>;
						<span class="r9 r">r</span> = <a href="#6f88a127c39875a1" class="i field">Z_DATA_ERROR</a>;
						<span class="r7 r">s</span>.<a href="InfBlocks.cs.html#4552ac0052c4e46f" class="i field">bitb</a> = <span class="r14 r">b</span>;
						<span class="r7 r">s</span>.<a href="InfBlocks.cs.html#9b8ddfdbaa9d93af" class="i field">bitk</a> = <span class="r15 r">k</span>;
						<span class="r8 r">z</span>.<a href="ZStream.cs.html#4dde63befa366043" class="i field">avail_in</a> = <span class="r17 r">n</span>;
						<span class="r8 r">z</span>.<a href="ZStream.cs.html#948985959b111adc" class="i field">total_in</a> += <span class="r16 r">p</span> - <span class="r8 r">z</span>.<a href="ZStream.cs.html#b33f6c3d5ac8bf3e" class="i field">next_in_index</a>;
						<span class="r8 r">z</span>.<a href="ZStream.cs.html#b33f6c3d5ac8bf3e" class="i field">next_in_index</a> = <span class="r16 r">p</span>;
						<span class="r7 r">s</span>.<a href="InfBlocks.cs.html#5bce480d14e3afaa" class="i field">write</a> = <span class="r18 r">q</span>;
						<b>return</b> <span class="r7 r">s</span>.<a href="InfBlocks.cs.html#935bf1338a2e6d6f" class="i method">Inflate_flush</a>(<span class="r8 r">z</span>, <span class="r9 r">r</span>);
					}

					<b>case</b> <a href="#a69d3a42a1d7ecf4" class="i field">DISTEXT</a>:
					{
						<span class="c">// i: getting distance extra</span>
						<span class="r10 r">j</span> = <a href="#1d29a626b8fff2bc" class="i field">get</a>;
						<b>while</b> (<span class="r15 r">k</span> &lt; (<span class="r10 r">j</span>))
						{
							<b>if</b> (<span class="r17 r">n</span> != 0)
							{
								<span class="r9 r">r</span> = <a href="#cea2b52eeec209aa" class="i field">Z_OK</a>;
							}
							<b>else</b>
							{
								<span class="r7 r">s</span>.<a href="InfBlocks.cs.html#4552ac0052c4e46f" class="i field">bitb</a> = <span class="r14 r">b</span>;
								<span class="r7 r">s</span>.<a href="InfBlocks.cs.html#9b8ddfdbaa9d93af" class="i field">bitk</a> = <span class="r15 r">k</span>;
								<span class="r8 r">z</span>.<a href="ZStream.cs.html#4dde63befa366043" class="i field">avail_in</a> = <span class="r17 r">n</span>;
								<span class="r8 r">z</span>.<a href="ZStream.cs.html#948985959b111adc" class="i field">total_in</a> += <span class="r16 r">p</span> - <span class="r8 r">z</span>.<a href="ZStream.cs.html#b33f6c3d5ac8bf3e" class="i field">next_in_index</a>;
								<span class="r8 r">z</span>.<a href="ZStream.cs.html#b33f6c3d5ac8bf3e" class="i field">next_in_index</a> = <span class="r16 r">p</span>;
								<span class="r7 r">s</span>.<a href="InfBlocks.cs.html#5bce480d14e3afaa" class="i field">write</a> = <span class="r18 r">q</span>;
								<b>return</b> <span class="r7 r">s</span>.<a href="InfBlocks.cs.html#935bf1338a2e6d6f" class="i method">Inflate_flush</a>(<span class="r8 r">z</span>, <span class="r9 r">r</span>);
							}
							<span class="r17 r">n</span>--;
							<span class="r14 r">b</span> |= (<span class="r8 r">z</span>.<a href="ZStream.cs.html#4369f207df005701" class="i field">next_in</a>[<span class="r16 r">p</span>++] &amp; <b>unchecked</b>((<b>int</b>)(0xff))) &lt;&lt; <span class="r15 r">k</span>;
							<span class="r15 r">k</span> += 8;
						}
						<a href="#aba0f501fdf11660" class="i field">dist</a> += (<span class="r14 r">b</span> &amp; <a href="#4cc5273d0c5e87c4" class="i field">inflate_mask</a>[<span class="r10 r">j</span>]);
						<span class="r14 r">b</span> &gt;&gt;= <span class="r10 r">j</span>;
						<span class="r15 r">k</span> -= <span class="r10 r">j</span>;
						<a href="#14b6b423cb5f55ef" class="i field">mode</a> = <a href="#26c07f9a942ba538" class="i field">COPY</a>;
						<b>goto case</b> <a href="#26c07f9a942ba538" class="i field">COPY</a>;
					}

					<b>case</b> <a href="#26c07f9a942ba538" class="i field">COPY</a>:
					{
						<span class="c">// o: copying bytes in window, waiting for space</span>
						<span class="r20 r">f</span> = <span class="r18 r">q</span> - <a href="#aba0f501fdf11660" class="i field">dist</a>;
						<b>while</b> (<span class="r20 r">f</span> &lt; 0)
						{
							<span class="c">// modulo window size-&quot;while&quot; instead</span>
							<span class="r20 r">f</span> += <span class="r7 r">s</span>.<a href="InfBlocks.cs.html#644e6059ae8f39cb" class="i field">end</a>;
						}
						<span class="c">// of &quot;if&quot; handles invalid distances</span>
						<b>while</b> (<a href="#e13e18387f20935b" class="i field">len</a> != 0)
						{
							<b>if</b> (<span class="r19 r">m</span> == 0)
							{
								<b>if</b> (<span class="r18 r">q</span> == <span class="r7 r">s</span>.<a href="InfBlocks.cs.html#644e6059ae8f39cb" class="i field">end</a> &amp;&amp; <span class="r7 r">s</span>.<a href="InfBlocks.cs.html#4951f0b9caa3dde3" class="i field">read</a> != 0)
								{
									<span class="r18 r">q</span> = 0;
									<span class="r19 r">m</span> = <span class="r18 r">q</span> &lt; <span class="r7 r">s</span>.<a href="InfBlocks.cs.html#4951f0b9caa3dde3" class="i field">read</a> ? <span class="r7 r">s</span>.<a href="InfBlocks.cs.html#4951f0b9caa3dde3" class="i field">read</a> - <span class="r18 r">q</span> - 1 : <span class="r7 r">s</span>.<a href="InfBlocks.cs.html#644e6059ae8f39cb" class="i field">end</a> - <span class="r18 r">q</span>;
								}
								<b>if</b> (<span class="r19 r">m</span> == 0)
								{
									<span class="r7 r">s</span>.<a href="InfBlocks.cs.html#5bce480d14e3afaa" class="i field">write</a> = <span class="r18 r">q</span>;
									<span class="r9 r">r</span> = <span class="r7 r">s</span>.<a href="InfBlocks.cs.html#935bf1338a2e6d6f" class="i method">Inflate_flush</a>(<span class="r8 r">z</span>, <span class="r9 r">r</span>);
									<span class="r18 r">q</span> = <span class="r7 r">s</span>.<a href="InfBlocks.cs.html#5bce480d14e3afaa" class="i field">write</a>;
									<span class="r19 r">m</span> = <span class="r18 r">q</span> &lt; <span class="r7 r">s</span>.<a href="InfBlocks.cs.html#4951f0b9caa3dde3" class="i field">read</a> ? <span class="r7 r">s</span>.<a href="InfBlocks.cs.html#4951f0b9caa3dde3" class="i field">read</a> - <span class="r18 r">q</span> - 1 : <span class="r7 r">s</span>.<a href="InfBlocks.cs.html#644e6059ae8f39cb" class="i field">end</a> - <span class="r18 r">q</span>;
									<b>if</b> (<span class="r18 r">q</span> == <span class="r7 r">s</span>.<a href="InfBlocks.cs.html#644e6059ae8f39cb" class="i field">end</a> &amp;&amp; <span class="r7 r">s</span>.<a href="InfBlocks.cs.html#4951f0b9caa3dde3" class="i field">read</a> != 0)
									{
										<span class="r18 r">q</span> = 0;
										<span class="r19 r">m</span> = <span class="r18 r">q</span> &lt; <span class="r7 r">s</span>.<a href="InfBlocks.cs.html#4951f0b9caa3dde3" class="i field">read</a> ? <span class="r7 r">s</span>.<a href="InfBlocks.cs.html#4951f0b9caa3dde3" class="i field">read</a> - <span class="r18 r">q</span> - 1 : <span class="r7 r">s</span>.<a href="InfBlocks.cs.html#644e6059ae8f39cb" class="i field">end</a> - <span class="r18 r">q</span>;
									}
									<b>if</b> (<span class="r19 r">m</span> == 0)
									{
										<span class="r7 r">s</span>.<a href="InfBlocks.cs.html#4552ac0052c4e46f" class="i field">bitb</a> = <span class="r14 r">b</span>;
										<span class="r7 r">s</span>.<a href="InfBlocks.cs.html#9b8ddfdbaa9d93af" class="i field">bitk</a> = <span class="r15 r">k</span>;
										<span class="r8 r">z</span>.<a href="ZStream.cs.html#4dde63befa366043" class="i field">avail_in</a> = <span class="r17 r">n</span>;
										<span class="r8 r">z</span>.<a href="ZStream.cs.html#948985959b111adc" class="i field">total_in</a> += <span class="r16 r">p</span> - <span class="r8 r">z</span>.<a href="ZStream.cs.html#b33f6c3d5ac8bf3e" class="i field">next_in_index</a>;
										<span class="r8 r">z</span>.<a href="ZStream.cs.html#b33f6c3d5ac8bf3e" class="i field">next_in_index</a> = <span class="r16 r">p</span>;
										<span class="r7 r">s</span>.<a href="InfBlocks.cs.html#5bce480d14e3afaa" class="i field">write</a> = <span class="r18 r">q</span>;
										<b>return</b> <span class="r7 r">s</span>.<a href="InfBlocks.cs.html#935bf1338a2e6d6f" class="i method">Inflate_flush</a>(<span class="r8 r">z</span>, <span class="r9 r">r</span>);
									}
								}
							}
							<span class="r7 r">s</span>.<a href="InfBlocks.cs.html#c430e1cb7f680c8d" class="i field">window</a>[<span class="r18 r">q</span>++] = <span class="r7 r">s</span>.<a href="InfBlocks.cs.html#c430e1cb7f680c8d" class="i field">window</a>[<span class="r20 r">f</span>++];
							<span class="r19 r">m</span>--;
							<b>if</b> (<span class="r20 r">f</span> == <span class="r7 r">s</span>.<a href="InfBlocks.cs.html#644e6059ae8f39cb" class="i field">end</a>)
							{
								<span class="r20 r">f</span> = 0;
							}
							<a href="#e13e18387f20935b" class="i field">len</a>--;
						}
						<a href="#14b6b423cb5f55ef" class="i field">mode</a> = <a href="#20bbabc55458a4f4" class="i field">START</a>;
						<b>break</b>;
					}

					<b>case</b> <a href="#1536d44150946385" class="i field">LIT</a>:
					{
						<span class="c">// o: got literal, waiting for output space</span>
						<b>if</b> (<span class="r19 r">m</span> == 0)
						{
							<b>if</b> (<span class="r18 r">q</span> == <span class="r7 r">s</span>.<a href="InfBlocks.cs.html#644e6059ae8f39cb" class="i field">end</a> &amp;&amp; <span class="r7 r">s</span>.<a href="InfBlocks.cs.html#4951f0b9caa3dde3" class="i field">read</a> != 0)
							{
								<span class="r18 r">q</span> = 0;
								<span class="r19 r">m</span> = <span class="r18 r">q</span> &lt; <span class="r7 r">s</span>.<a href="InfBlocks.cs.html#4951f0b9caa3dde3" class="i field">read</a> ? <span class="r7 r">s</span>.<a href="InfBlocks.cs.html#4951f0b9caa3dde3" class="i field">read</a> - <span class="r18 r">q</span> - 1 : <span class="r7 r">s</span>.<a href="InfBlocks.cs.html#644e6059ae8f39cb" class="i field">end</a> - <span class="r18 r">q</span>;
							}
							<b>if</b> (<span class="r19 r">m</span> == 0)
							{
								<span class="r7 r">s</span>.<a href="InfBlocks.cs.html#5bce480d14e3afaa" class="i field">write</a> = <span class="r18 r">q</span>;
								<span class="r9 r">r</span> = <span class="r7 r">s</span>.<a href="InfBlocks.cs.html#935bf1338a2e6d6f" class="i method">Inflate_flush</a>(<span class="r8 r">z</span>, <span class="r9 r">r</span>);
								<span class="r18 r">q</span> = <span class="r7 r">s</span>.<a href="InfBlocks.cs.html#5bce480d14e3afaa" class="i field">write</a>;
								<span class="r19 r">m</span> = <span class="r18 r">q</span> &lt; <span class="r7 r">s</span>.<a href="InfBlocks.cs.html#4951f0b9caa3dde3" class="i field">read</a> ? <span class="r7 r">s</span>.<a href="InfBlocks.cs.html#4951f0b9caa3dde3" class="i field">read</a> - <span class="r18 r">q</span> - 1 : <span class="r7 r">s</span>.<a href="InfBlocks.cs.html#644e6059ae8f39cb" class="i field">end</a> - <span class="r18 r">q</span>;
								<b>if</b> (<span class="r18 r">q</span> == <span class="r7 r">s</span>.<a href="InfBlocks.cs.html#644e6059ae8f39cb" class="i field">end</a> &amp;&amp; <span class="r7 r">s</span>.<a href="InfBlocks.cs.html#4951f0b9caa3dde3" class="i field">read</a> != 0)
								{
									<span class="r18 r">q</span> = 0;
									<span class="r19 r">m</span> = <span class="r18 r">q</span> &lt; <span class="r7 r">s</span>.<a href="InfBlocks.cs.html#4951f0b9caa3dde3" class="i field">read</a> ? <span class="r7 r">s</span>.<a href="InfBlocks.cs.html#4951f0b9caa3dde3" class="i field">read</a> - <span class="r18 r">q</span> - 1 : <span class="r7 r">s</span>.<a href="InfBlocks.cs.html#644e6059ae8f39cb" class="i field">end</a> - <span class="r18 r">q</span>;
								}
								<b>if</b> (<span class="r19 r">m</span> == 0)
								{
									<span class="r7 r">s</span>.<a href="InfBlocks.cs.html#4552ac0052c4e46f" class="i field">bitb</a> = <span class="r14 r">b</span>;
									<span class="r7 r">s</span>.<a href="InfBlocks.cs.html#9b8ddfdbaa9d93af" class="i field">bitk</a> = <span class="r15 r">k</span>;
									<span class="r8 r">z</span>.<a href="ZStream.cs.html#4dde63befa366043" class="i field">avail_in</a> = <span class="r17 r">n</span>;
									<span class="r8 r">z</span>.<a href="ZStream.cs.html#948985959b111adc" class="i field">total_in</a> += <span class="r16 r">p</span> - <span class="r8 r">z</span>.<a href="ZStream.cs.html#b33f6c3d5ac8bf3e" class="i field">next_in_index</a>;
									<span class="r8 r">z</span>.<a href="ZStream.cs.html#b33f6c3d5ac8bf3e" class="i field">next_in_index</a> = <span class="r16 r">p</span>;
									<span class="r7 r">s</span>.<a href="InfBlocks.cs.html#5bce480d14e3afaa" class="i field">write</a> = <span class="r18 r">q</span>;
									<b>return</b> <span class="r7 r">s</span>.<a href="InfBlocks.cs.html#935bf1338a2e6d6f" class="i method">Inflate_flush</a>(<span class="r8 r">z</span>, <span class="r9 r">r</span>);
								}
							}
						}
						<span class="r9 r">r</span> = <a href="#cea2b52eeec209aa" class="i field">Z_OK</a>;
						<span class="r7 r">s</span>.<a href="InfBlocks.cs.html#c430e1cb7f680c8d" class="i field">window</a>[<span class="r18 r">q</span>++] = <b>unchecked</b>((<b>byte</b>)<a href="#fbe3f912a461bff0" class="i field">lit</a>);
						<span class="r19 r">m</span>--;
						<a href="#14b6b423cb5f55ef" class="i field">mode</a> = <a href="#20bbabc55458a4f4" class="i field">START</a>;
						<b>break</b>;
					}

					<b>case</b> <a href="#3a22833f909338d3" class="i field">WASH</a>:
					{
						<span class="c">// o: got eob, possibly more output</span>
						<b>if</b> (<span class="r15 r">k</span> &gt; 7)
						{
							<span class="c">// return unused byte, if any</span>
							<span class="r15 r">k</span> -= 8;
							<span class="r17 r">n</span>++;
							<span class="r16 r">p</span>--;
						}
						<span class="c">// can always return one</span>
						<span class="r7 r">s</span>.<a href="InfBlocks.cs.html#5bce480d14e3afaa" class="i field">write</a> = <span class="r18 r">q</span>;
						<span class="r9 r">r</span> = <span class="r7 r">s</span>.<a href="InfBlocks.cs.html#935bf1338a2e6d6f" class="i method">Inflate_flush</a>(<span class="r8 r">z</span>, <span class="r9 r">r</span>);
						<span class="r18 r">q</span> = <span class="r7 r">s</span>.<a href="InfBlocks.cs.html#5bce480d14e3afaa" class="i field">write</a>;
						<span class="r19 r">m</span> = <span class="r18 r">q</span> &lt; <span class="r7 r">s</span>.<a href="InfBlocks.cs.html#4951f0b9caa3dde3" class="i field">read</a> ? <span class="r7 r">s</span>.<a href="InfBlocks.cs.html#4951f0b9caa3dde3" class="i field">read</a> - <span class="r18 r">q</span> - 1 : <span class="r7 r">s</span>.<a href="InfBlocks.cs.html#644e6059ae8f39cb" class="i field">end</a> - <span class="r18 r">q</span>;
						<b>if</b> (<span class="r7 r">s</span>.<a href="InfBlocks.cs.html#4951f0b9caa3dde3" class="i field">read</a> != <span class="r7 r">s</span>.<a href="InfBlocks.cs.html#5bce480d14e3afaa" class="i field">write</a>)
						{
							<span class="r7 r">s</span>.<a href="InfBlocks.cs.html#4552ac0052c4e46f" class="i field">bitb</a> = <span class="r14 r">b</span>;
							<span class="r7 r">s</span>.<a href="InfBlocks.cs.html#9b8ddfdbaa9d93af" class="i field">bitk</a> = <span class="r15 r">k</span>;
							<span class="r8 r">z</span>.<a href="ZStream.cs.html#4dde63befa366043" class="i field">avail_in</a> = <span class="r17 r">n</span>;
							<span class="r8 r">z</span>.<a href="ZStream.cs.html#948985959b111adc" class="i field">total_in</a> += <span class="r16 r">p</span> - <span class="r8 r">z</span>.<a href="ZStream.cs.html#b33f6c3d5ac8bf3e" class="i field">next_in_index</a>;
							<span class="r8 r">z</span>.<a href="ZStream.cs.html#b33f6c3d5ac8bf3e" class="i field">next_in_index</a> = <span class="r16 r">p</span>;
							<span class="r7 r">s</span>.<a href="InfBlocks.cs.html#5bce480d14e3afaa" class="i field">write</a> = <span class="r18 r">q</span>;
							<b>return</b> <span class="r7 r">s</span>.<a href="InfBlocks.cs.html#935bf1338a2e6d6f" class="i method">Inflate_flush</a>(<span class="r8 r">z</span>, <span class="r9 r">r</span>);
						}
						<a href="#14b6b423cb5f55ef" class="i field">mode</a> = <a href="#159d07c2c956a2b5" class="i field">END</a>;
						<b>goto case</b> <a href="#159d07c2c956a2b5" class="i field">END</a>;
					}

					<b>case</b> <a href="#159d07c2c956a2b5" class="i field">END</a>:
					{
						<span class="r9 r">r</span> = <a href="#de0ab417a74dc586" class="i field">Z_STREAM_END</a>;
						<span class="r7 r">s</span>.<a href="InfBlocks.cs.html#4552ac0052c4e46f" class="i field">bitb</a> = <span class="r14 r">b</span>;
						<span class="r7 r">s</span>.<a href="InfBlocks.cs.html#9b8ddfdbaa9d93af" class="i field">bitk</a> = <span class="r15 r">k</span>;
						<span class="r8 r">z</span>.<a href="ZStream.cs.html#4dde63befa366043" class="i field">avail_in</a> = <span class="r17 r">n</span>;
						<span class="r8 r">z</span>.<a href="ZStream.cs.html#948985959b111adc" class="i field">total_in</a> += <span class="r16 r">p</span> - <span class="r8 r">z</span>.<a href="ZStream.cs.html#b33f6c3d5ac8bf3e" class="i field">next_in_index</a>;
						<span class="r8 r">z</span>.<a href="ZStream.cs.html#b33f6c3d5ac8bf3e" class="i field">next_in_index</a> = <span class="r16 r">p</span>;
						<span class="r7 r">s</span>.<a href="InfBlocks.cs.html#5bce480d14e3afaa" class="i field">write</a> = <span class="r18 r">q</span>;
						<b>return</b> <span class="r7 r">s</span>.<a href="InfBlocks.cs.html#935bf1338a2e6d6f" class="i method">Inflate_flush</a>(<span class="r8 r">z</span>, <span class="r9 r">r</span>);
					}

					<b>case</b> <a href="#dbdcdfe53b8a7a8e" class="i field">BADCODE</a>:
					{
						<span class="c">// x: got error</span>
						<span class="r9 r">r</span> = <a href="#6f88a127c39875a1" class="i field">Z_DATA_ERROR</a>;
						<span class="r7 r">s</span>.<a href="InfBlocks.cs.html#4552ac0052c4e46f" class="i field">bitb</a> = <span class="r14 r">b</span>;
						<span class="r7 r">s</span>.<a href="InfBlocks.cs.html#9b8ddfdbaa9d93af" class="i field">bitk</a> = <span class="r15 r">k</span>;
						<span class="r8 r">z</span>.<a href="ZStream.cs.html#4dde63befa366043" class="i field">avail_in</a> = <span class="r17 r">n</span>;
						<span class="r8 r">z</span>.<a href="ZStream.cs.html#948985959b111adc" class="i field">total_in</a> += <span class="r16 r">p</span> - <span class="r8 r">z</span>.<a href="ZStream.cs.html#b33f6c3d5ac8bf3e" class="i field">next_in_index</a>;
						<span class="r8 r">z</span>.<a href="ZStream.cs.html#b33f6c3d5ac8bf3e" class="i field">next_in_index</a> = <span class="r16 r">p</span>;
						<span class="r7 r">s</span>.<a href="InfBlocks.cs.html#5bce480d14e3afaa" class="i field">write</a> = <span class="r18 r">q</span>;
						<b>return</b> <span class="r7 r">s</span>.<a href="InfBlocks.cs.html#935bf1338a2e6d6f" class="i method">Inflate_flush</a>(<span class="r8 r">z</span>, <span class="r9 r">r</span>);
					}

					<b>default</b>:
					{
						<span class="r9 r">r</span> = <a href="#5d5e48eaefa719bc" class="i field">Z_STREAM_ERROR</a>;
						<span class="r7 r">s</span>.<a href="InfBlocks.cs.html#4552ac0052c4e46f" class="i field">bitb</a> = <span class="r14 r">b</span>;
						<span class="r7 r">s</span>.<a href="InfBlocks.cs.html#9b8ddfdbaa9d93af" class="i field">bitk</a> = <span class="r15 r">k</span>;
						<span class="r8 r">z</span>.<a href="ZStream.cs.html#4dde63befa366043" class="i field">avail_in</a> = <span class="r17 r">n</span>;
						<span class="r8 r">z</span>.<a href="ZStream.cs.html#948985959b111adc" class="i field">total_in</a> += <span class="r16 r">p</span> - <span class="r8 r">z</span>.<a href="ZStream.cs.html#b33f6c3d5ac8bf3e" class="i field">next_in_index</a>;
						<span class="r8 r">z</span>.<a href="ZStream.cs.html#b33f6c3d5ac8bf3e" class="i field">next_in_index</a> = <span class="r16 r">p</span>;
						<span class="r7 r">s</span>.<a href="InfBlocks.cs.html#5bce480d14e3afaa" class="i field">write</a> = <span class="r18 r">q</span>;
						<b>return</b> <span class="r7 r">s</span>.<a href="InfBlocks.cs.html#935bf1338a2e6d6f" class="i method">Inflate_flush</a>(<span class="r8 r">z</span>, <span class="r9 r">r</span>);
						<b>break</b>;
					}
				}
			}
		}

		<b>internal void</b> <a id="fc9af321855b71e9" href="../R/fc9af321855b71e9.html" target="n" data-glyph="74,1" class="i method">Free</a>(<a href="ZStream.cs.html#d2b19bd05b9e75af" class="t t">ZStream</a> <span id="r21 rd" class="r21 r">z</span>)
		{
		}

		<span class="c">//  ZFREE(z, c);</span>
		<span class="c">// Called with number of bytes left to write in window at least 258</span>
		<span class="c">// (the maximum string length) and number of input bytes available</span>
		<span class="c">// at least ten.  The ten bytes are six bytes for the longest length/</span>
		<span class="c">// distance pair plus four bytes for overloading the bit buffer.</span>
		<b>internal int</b> <a id="424fcd22f2132048" href="../R/424fcd22f2132048.html" target="n" data-glyph="74,1" class="i method">Inflate_fast</a>(<b>int</b> <span id="r22 rd" class="r22 r">bl</span>, <b>int</b> <span id="r23 rd" class="r23 r">bd</span>, <b>int</b>[] <span id="r24 rd" class="r24 r">tl</span>, <b>int</b> <span id="r25 rd" class="r25 r">tl_index</span>, <b>int</b>[] <span id="r26 rd" class="r26 r">td</span>, <b>int</b> <span id="r27 rd" class="r27 r">td_index</span>
			, <a href="InfBlocks.cs.html#e7130a772740f028" class="t t">InfBlocks</a> <span id="r28 rd" class="r28 r">s</span>, <a href="ZStream.cs.html#d2b19bd05b9e75af" class="t t">ZStream</a> <span id="r29 rd" class="r29 r">z</span>)
		{
			<b>int</b> <span id="r30 rd" class="r30 r">t</span>;
			<span class="c">// temporary pointer</span>
			<b>int</b>[] <span id="r31 rd" class="r31 r">tp</span>;
			<span class="c">// temporary pointer</span>
			<b>int</b> <span id="r32 rd" class="r32 r">tp_index</span>;
			<span class="c">// temporary pointer</span>
			<b>int</b> <span id="r33 rd" class="r33 r">e</span>;
			<span class="c">// extra bits or operation</span>
			<b>int</b> <span id="r34 rd" class="r34 r">b</span>;
			<span class="c">// bit buffer</span>
			<b>int</b> <span id="r35 rd" class="r35 r">k</span>;
			<span class="c">// bits in bit buffer</span>
			<b>int</b> <span id="r36 rd" class="r36 r">p</span>;
			<span class="c">// input data pointer</span>
			<b>int</b> <span id="r37 rd" class="r37 r">n</span>;
			<span class="c">// bytes available there</span>
			<b>int</b> <span id="r38 rd" class="r38 r">q</span>;
			<span class="c">// output window write pointer</span>
			<b>int</b> <span id="r39 rd" class="r39 r">m</span>;
			<span class="c">// bytes to end of window or read pointer</span>
			<b>int</b> <span id="r40 rd" class="r40 r">ml</span>;
			<span class="c">// mask for literal/length tree</span>
			<b>int</b> <span id="r41 rd" class="r41 r">md</span>;
			<span class="c">// mask for distance tree</span>
			<b>int</b> <span id="r42 rd" class="r42 r">c</span>;
			<span class="c">// bytes to copy</span>
			<b>int</b> <span id="r43 rd" class="r43 r">d</span>;
			<span class="c">// distance back to copy from</span>
			<b>int</b> <span id="r44 rd" class="r44 r">r</span>;
			<span class="c">// copy source pointer</span>
			<b>int</b> <span id="r45 rd" class="r45 r">tp_index_t_3</span>;
			<span class="c">// (tp_index+t)*3</span>
			<span class="c">// load input, output, bit values</span>
			<span class="r36 r">p</span> = <span class="r29 r">z</span>.<a href="ZStream.cs.html#b33f6c3d5ac8bf3e" class="i field">next_in_index</a>;
			<span class="r37 r">n</span> = <span class="r29 r">z</span>.<a href="ZStream.cs.html#4dde63befa366043" class="i field">avail_in</a>;
			<span class="r34 r">b</span> = <span class="r28 r">s</span>.<a href="InfBlocks.cs.html#4552ac0052c4e46f" class="i field">bitb</a>;
			<span class="r35 r">k</span> = <span class="r28 r">s</span>.<a href="InfBlocks.cs.html#9b8ddfdbaa9d93af" class="i field">bitk</a>;
			<span class="r38 r">q</span> = <span class="r28 r">s</span>.<a href="InfBlocks.cs.html#5bce480d14e3afaa" class="i field">write</a>;
			<span class="r39 r">m</span> = <span class="r38 r">q</span> &lt; <span class="r28 r">s</span>.<a href="InfBlocks.cs.html#4951f0b9caa3dde3" class="i field">read</a> ? <span class="r28 r">s</span>.<a href="InfBlocks.cs.html#4951f0b9caa3dde3" class="i field">read</a> - <span class="r38 r">q</span> - 1 : <span class="r28 r">s</span>.<a href="InfBlocks.cs.html#644e6059ae8f39cb" class="i field">end</a> - <span class="r38 r">q</span>;
			<span class="c">// initialize masks</span>
			<span class="r40 r">ml</span> = <a href="#4cc5273d0c5e87c4" class="i field">inflate_mask</a>[<span class="r22 r">bl</span>];
			<span class="r41 r">md</span> = <a href="#4cc5273d0c5e87c4" class="i field">inflate_mask</a>[<span class="r23 r">bd</span>];
			<b>do</b>
			{
				<span class="c">// do until not enough input or output space for fast loop</span>
				<span class="c">// assume called with m &gt;= 258 &amp;&amp; n &gt;= 10</span>
				<span class="c">// get literal/length code</span>
				<b>while</b> (<span class="r35 r">k</span> &lt; (20))
				{
					<span class="c">// max bits for literal/length code</span>
					<span class="r37 r">n</span>--;
					<span class="r34 r">b</span> |= (<span class="r29 r">z</span>.<a href="ZStream.cs.html#4369f207df005701" class="i field">next_in</a>[<span class="r36 r">p</span>++] &amp; <b>unchecked</b>((<b>int</b>)(0xff))) &lt;&lt; <span class="r35 r">k</span>;
					<span class="r35 r">k</span> += 8;
				}
				<span class="r30 r">t</span> = <span class="r34 r">b</span> &amp; <span class="r40 r">ml</span>;
				<span class="r31 r">tp</span> = <span class="r24 r">tl</span>;
				<span class="r32 r">tp_index</span> = <span class="r25 r">tl_index</span>;
				<span class="r45 r">tp_index_t_3</span> = (<span class="r32 r">tp_index</span> + <span class="r30 r">t</span>) * 3;
				<b>if</b> ((<span class="r33 r">e</span> = <span class="r31 r">tp</span>[<span class="r45 r">tp_index_t_3</span>]) == 0)
				{
					<span class="r34 r">b</span> &gt;&gt;= (<span class="r31 r">tp</span>[<span class="r45 r">tp_index_t_3</span> + 1]);
					<span class="r35 r">k</span> -= (<span class="r31 r">tp</span>[<span class="r45 r">tp_index_t_3</span> + 1]);
					<span class="r28 r">s</span>.<a href="InfBlocks.cs.html#c430e1cb7f680c8d" class="i field">window</a>[<span class="r38 r">q</span>++] = <b>unchecked</b>((<b>byte</b>)<span class="r31 r">tp</span>[<span class="r45 r">tp_index_t_3</span> + 2]);
					<span class="r39 r">m</span>--;
					<b>continue</b>;
				}
				<b>do</b>
				{
					<span class="r34 r">b</span> &gt;&gt;= (<span class="r31 r">tp</span>[<span class="r45 r">tp_index_t_3</span> + 1]);
					<span class="r35 r">k</span> -= (<span class="r31 r">tp</span>[<span class="r45 r">tp_index_t_3</span> + 1]);
					<b>if</b> ((<span class="r33 r">e</span> &amp; 16) != 0)
					{
						<span class="r33 r">e</span> &amp;= 15;
						<span class="r42 r">c</span> = <span class="r31 r">tp</span>[<span class="r45 r">tp_index_t_3</span> + 2] + ((<b>int</b>)<span class="r34 r">b</span> &amp; <a href="#4cc5273d0c5e87c4" class="i field">inflate_mask</a>[<span class="r33 r">e</span>]);
						<span class="r34 r">b</span> &gt;&gt;= <span class="r33 r">e</span>;
						<span class="r35 r">k</span> -= <span class="r33 r">e</span>;
						<span class="c">// decode distance base of block to copy</span>
						<b>while</b> (<span class="r35 r">k</span> &lt; (15))
						{
							<span class="c">// max bits for distance code</span>
							<span class="r37 r">n</span>--;
							<span class="r34 r">b</span> |= (<span class="r29 r">z</span>.<a href="ZStream.cs.html#4369f207df005701" class="i field">next_in</a>[<span class="r36 r">p</span>++] &amp; <b>unchecked</b>((<b>int</b>)(0xff))) &lt;&lt; <span class="r35 r">k</span>;
							<span class="r35 r">k</span> += 8;
						}
						<span class="r30 r">t</span> = <span class="r34 r">b</span> &amp; <span class="r41 r">md</span>;
						<span class="r31 r">tp</span> = <span class="r26 r">td</span>;
						<span class="r32 r">tp_index</span> = <span class="r27 r">td_index</span>;
						<span class="r45 r">tp_index_t_3</span> = (<span class="r32 r">tp_index</span> + <span class="r30 r">t</span>) * 3;
						<span class="r33 r">e</span> = <span class="r31 r">tp</span>[<span class="r45 r">tp_index_t_3</span>];
						<b>do</b>
						{
							<span class="r34 r">b</span> &gt;&gt;= (<span class="r31 r">tp</span>[<span class="r45 r">tp_index_t_3</span> + 1]);
							<span class="r35 r">k</span> -= (<span class="r31 r">tp</span>[<span class="r45 r">tp_index_t_3</span> + 1]);
							<b>if</b> ((<span class="r33 r">e</span> &amp; 16) != 0)
							{
								<span class="c">// get extra bits to add to distance base</span>
								<span class="r33 r">e</span> &amp;= 15;
								<b>while</b> (<span class="r35 r">k</span> &lt; (<span class="r33 r">e</span>))
								{
									<span class="c">// get extra bits (up to 13)</span>
									<span class="r37 r">n</span>--;
									<span class="r34 r">b</span> |= (<span class="r29 r">z</span>.<a href="ZStream.cs.html#4369f207df005701" class="i field">next_in</a>[<span class="r36 r">p</span>++] &amp; <b>unchecked</b>((<b>int</b>)(0xff))) &lt;&lt; <span class="r35 r">k</span>;
									<span class="r35 r">k</span> += 8;
								}
								<span class="r43 r">d</span> = <span class="r31 r">tp</span>[<span class="r45 r">tp_index_t_3</span> + 2] + (<span class="r34 r">b</span> &amp; <a href="#4cc5273d0c5e87c4" class="i field">inflate_mask</a>[<span class="r33 r">e</span>]);
								<span class="r34 r">b</span> &gt;&gt;= (<span class="r33 r">e</span>);
								<span class="r35 r">k</span> -= (<span class="r33 r">e</span>);
								<span class="c">// do the copy</span>
								<span class="r39 r">m</span> -= <span class="r42 r">c</span>;
								<b>if</b> (<span class="r38 r">q</span> &gt;= <span class="r43 r">d</span>)
								{
									<span class="c">// offset before dest</span>
									<span class="c">//  just copy</span>
									<span class="r44 r">r</span> = <span class="r38 r">q</span> - <span class="r43 r">d</span>;
									<b>if</b> (<span class="r38 r">q</span> - <span class="r44 r">r</span> &gt; 0 &amp;&amp; 2 &gt; (<span class="r38 r">q</span> - <span class="r44 r">r</span>))
									{
										<span class="r28 r">s</span>.<a href="InfBlocks.cs.html#c430e1cb7f680c8d" class="i field">window</a>[<span class="r38 r">q</span>++] = <span class="r28 r">s</span>.<a href="InfBlocks.cs.html#c430e1cb7f680c8d" class="i field">window</a>[<span class="r44 r">r</span>++];
										<span class="c">// minimum count is three,</span>
										<span class="r28 r">s</span>.<a href="InfBlocks.cs.html#c430e1cb7f680c8d" class="i field">window</a>[<span class="r38 r">q</span>++] = <span class="r28 r">s</span>.<a href="InfBlocks.cs.html#c430e1cb7f680c8d" class="i field">window</a>[<span class="r44 r">r</span>++];
										<span class="c">// so unroll loop a little</span>
										<span class="r42 r">c</span> -= 2;
									}
									<b>else</b>
									{
										<span class="i n">System</span>.<a href="@0@mscorlib/A.html#156e066ecc4ccedf" class="t t">Array</a>.<a href="@0@mscorlib/A.html#7441c6721593042c" class="i method">Copy</a>(<span class="r28 r">s</span>.<a href="InfBlocks.cs.html#c430e1cb7f680c8d" class="i field">window</a>, <span class="r44 r">r</span>, <span class="r28 r">s</span>.<a href="InfBlocks.cs.html#c430e1cb7f680c8d" class="i field">window</a>, <span class="r38 r">q</span>, 2);
										<span class="r38 r">q</span> += 2;
										<span class="r44 r">r</span> += 2;
										<span class="r42 r">c</span> -= 2;
									}
								}
								<b>else</b>
								{
									<span class="c">// else offset after destination</span>
									<span class="r44 r">r</span> = <span class="r38 r">q</span> - <span class="r43 r">d</span>;
									<b>do</b>
									{
										<span class="r44 r">r</span> += <span class="r28 r">s</span>.<a href="InfBlocks.cs.html#644e6059ae8f39cb" class="i field">end</a>;
									}
									<b>while</b> (<span class="r44 r">r</span> &lt; 0);
									<span class="c">// force pointer in window</span>
									<span class="c">// covers invalid distances</span>
									<span class="r33 r">e</span> = <span class="r28 r">s</span>.<a href="InfBlocks.cs.html#644e6059ae8f39cb" class="i field">end</a> - <span class="r44 r">r</span>;
									<b>if</b> (<span class="r42 r">c</span> &gt; <span class="r33 r">e</span>)
									{
										<span class="c">// if source crosses,</span>
										<span class="r42 r">c</span> -= <span class="r33 r">e</span>;
										<span class="c">// wrapped copy</span>
										<b>if</b> (<span class="r38 r">q</span> - <span class="r44 r">r</span> &gt; 0 &amp;&amp; <span class="r33 r">e</span> &gt; (<span class="r38 r">q</span> - <span class="r44 r">r</span>))
										{
											<b>do</b>
											{
												<span class="r28 r">s</span>.<a href="InfBlocks.cs.html#c430e1cb7f680c8d" class="i field">window</a>[<span class="r38 r">q</span>++] = <span class="r28 r">s</span>.<a href="InfBlocks.cs.html#c430e1cb7f680c8d" class="i field">window</a>[<span class="r44 r">r</span>++];
											}
											<b>while</b> (--<span class="r33 r">e</span> != 0);
										}
										<b>else</b>
										{
											<span class="i n">System</span>.<a href="@0@mscorlib/A.html#156e066ecc4ccedf" class="t t">Array</a>.<a href="@0@mscorlib/A.html#7441c6721593042c" class="i method">Copy</a>(<span class="r28 r">s</span>.<a href="InfBlocks.cs.html#c430e1cb7f680c8d" class="i field">window</a>, <span class="r44 r">r</span>, <span class="r28 r">s</span>.<a href="InfBlocks.cs.html#c430e1cb7f680c8d" class="i field">window</a>, <span class="r38 r">q</span>, <span class="r33 r">e</span>);
											<span class="r38 r">q</span> += <span class="r33 r">e</span>;
											<span class="r44 r">r</span> += <span class="r33 r">e</span>;
											<span class="r33 r">e</span> = 0;
										}
										<span class="r44 r">r</span> = 0;
									}
								}
								<span class="c">// copy rest from start of window</span>
								<span class="c">// copy all or what&#39;s left</span>
								<b>if</b> (<span class="r38 r">q</span> - <span class="r44 r">r</span> &gt; 0 &amp;&amp; <span class="r42 r">c</span> &gt; (<span class="r38 r">q</span> - <span class="r44 r">r</span>))
								{
									<b>do</b>
									{
										<span class="r28 r">s</span>.<a href="InfBlocks.cs.html#c430e1cb7f680c8d" class="i field">window</a>[<span class="r38 r">q</span>++] = <span class="r28 r">s</span>.<a href="InfBlocks.cs.html#c430e1cb7f680c8d" class="i field">window</a>[<span class="r44 r">r</span>++];
									}
									<b>while</b> (--<span class="r42 r">c</span> != 0);
								}
								<b>else</b>
								{
									<span class="i n">System</span>.<a href="@0@mscorlib/A.html#156e066ecc4ccedf" class="t t">Array</a>.<a href="@0@mscorlib/A.html#7441c6721593042c" class="i method">Copy</a>(<span class="r28 r">s</span>.<a href="InfBlocks.cs.html#c430e1cb7f680c8d" class="i field">window</a>, <span class="r44 r">r</span>, <span class="r28 r">s</span>.<a href="InfBlocks.cs.html#c430e1cb7f680c8d" class="i field">window</a>, <span class="r38 r">q</span>, <span class="r42 r">c</span>);
									<span class="r38 r">q</span> += <span class="r42 r">c</span>;
									<span class="r44 r">r</span> += <span class="r42 r">c</span>;
									<span class="r42 r">c</span> = 0;
								}
								<b>break</b>;
							}
							<b>else</b>
							{
								<b>if</b> ((<span class="r33 r">e</span> &amp; 64) == 0)
								{
									<span class="r30 r">t</span> += <span class="r31 r">tp</span>[<span class="r45 r">tp_index_t_3</span> + 2];
									<span class="r30 r">t</span> += (<span class="r34 r">b</span> &amp; <a href="#4cc5273d0c5e87c4" class="i field">inflate_mask</a>[<span class="r33 r">e</span>]);
									<span class="r45 r">tp_index_t_3</span> = (<span class="r32 r">tp_index</span> + <span class="r30 r">t</span>) * 3;
									<span class="r33 r">e</span> = <span class="r31 r">tp</span>[<span class="r45 r">tp_index_t_3</span>];
								}
								<b>else</b>
								{
									<span class="r29 r">z</span>.<a href="ZStream.cs.html#1375722af7f7b471" class="i field">msg</a> = <span class="s">&quot;invalid distance code&quot;</span>;
									<span class="r42 r">c</span> = <span class="r29 r">z</span>.<a href="ZStream.cs.html#4dde63befa366043" class="i field">avail_in</a> - <span class="r37 r">n</span>;
									<span class="r42 r">c</span> = (<span class="r35 r">k</span> &gt;&gt; 3) &lt; <span class="r42 r">c</span> ? <span class="r35 r">k</span> &gt;&gt; 3 : <span class="r42 r">c</span>;
									<span class="r37 r">n</span> += <span class="r42 r">c</span>;
									<span class="r36 r">p</span> -= <span class="r42 r">c</span>;
									<span class="r35 r">k</span> -= <span class="r42 r">c</span> &lt;&lt; 3;
									<span class="r28 r">s</span>.<a href="InfBlocks.cs.html#4552ac0052c4e46f" class="i field">bitb</a> = <span class="r34 r">b</span>;
									<span class="r28 r">s</span>.<a href="InfBlocks.cs.html#9b8ddfdbaa9d93af" class="i field">bitk</a> = <span class="r35 r">k</span>;
									<span class="r29 r">z</span>.<a href="ZStream.cs.html#4dde63befa366043" class="i field">avail_in</a> = <span class="r37 r">n</span>;
									<span class="r29 r">z</span>.<a href="ZStream.cs.html#948985959b111adc" class="i field">total_in</a> += <span class="r36 r">p</span> - <span class="r29 r">z</span>.<a href="ZStream.cs.html#b33f6c3d5ac8bf3e" class="i field">next_in_index</a>;
									<span class="r29 r">z</span>.<a href="ZStream.cs.html#b33f6c3d5ac8bf3e" class="i field">next_in_index</a> = <span class="r36 r">p</span>;
									<span class="r28 r">s</span>.<a href="InfBlocks.cs.html#5bce480d14e3afaa" class="i field">write</a> = <span class="r38 r">q</span>;
									<b>return</b> <a href="#6f88a127c39875a1" class="i field">Z_DATA_ERROR</a>;
								}
							}
						}
						<b>while</b> (<b>true</b>);
						<b>break</b>;
					}
					<b>if</b> ((<span class="r33 r">e</span> &amp; 64) == 0)
					{
						<span class="r30 r">t</span> += <span class="r31 r">tp</span>[<span class="r45 r">tp_index_t_3</span> + 2];
						<span class="r30 r">t</span> += (<span class="r34 r">b</span> &amp; <a href="#4cc5273d0c5e87c4" class="i field">inflate_mask</a>[<span class="r33 r">e</span>]);
						<span class="r45 r">tp_index_t_3</span> = (<span class="r32 r">tp_index</span> + <span class="r30 r">t</span>) * 3;
						<b>if</b> ((<span class="r33 r">e</span> = <span class="r31 r">tp</span>[<span class="r45 r">tp_index_t_3</span>]) == 0)
						{
							<span class="r34 r">b</span> &gt;&gt;= (<span class="r31 r">tp</span>[<span class="r45 r">tp_index_t_3</span> + 1]);
							<span class="r35 r">k</span> -= (<span class="r31 r">tp</span>[<span class="r45 r">tp_index_t_3</span> + 1]);
							<span class="r28 r">s</span>.<a href="InfBlocks.cs.html#c430e1cb7f680c8d" class="i field">window</a>[<span class="r38 r">q</span>++] = <b>unchecked</b>((<b>byte</b>)<span class="r31 r">tp</span>[<span class="r45 r">tp_index_t_3</span> + 2]);
							<span class="r39 r">m</span>--;
							<b>break</b>;
						}
					}
					<b>else</b>
					{
						<b>if</b> ((<span class="r33 r">e</span> &amp; 32) != 0)
						{
							<span class="r42 r">c</span> = <span class="r29 r">z</span>.<a href="ZStream.cs.html#4dde63befa366043" class="i field">avail_in</a> - <span class="r37 r">n</span>;
							<span class="r42 r">c</span> = (<span class="r35 r">k</span> &gt;&gt; 3) &lt; <span class="r42 r">c</span> ? <span class="r35 r">k</span> &gt;&gt; 3 : <span class="r42 r">c</span>;
							<span class="r37 r">n</span> += <span class="r42 r">c</span>;
							<span class="r36 r">p</span> -= <span class="r42 r">c</span>;
							<span class="r35 r">k</span> -= <span class="r42 r">c</span> &lt;&lt; 3;
							<span class="r28 r">s</span>.<a href="InfBlocks.cs.html#4552ac0052c4e46f" class="i field">bitb</a> = <span class="r34 r">b</span>;
							<span class="r28 r">s</span>.<a href="InfBlocks.cs.html#9b8ddfdbaa9d93af" class="i field">bitk</a> = <span class="r35 r">k</span>;
							<span class="r29 r">z</span>.<a href="ZStream.cs.html#4dde63befa366043" class="i field">avail_in</a> = <span class="r37 r">n</span>;
							<span class="r29 r">z</span>.<a href="ZStream.cs.html#948985959b111adc" class="i field">total_in</a> += <span class="r36 r">p</span> - <span class="r29 r">z</span>.<a href="ZStream.cs.html#b33f6c3d5ac8bf3e" class="i field">next_in_index</a>;
							<span class="r29 r">z</span>.<a href="ZStream.cs.html#b33f6c3d5ac8bf3e" class="i field">next_in_index</a> = <span class="r36 r">p</span>;
							<span class="r28 r">s</span>.<a href="InfBlocks.cs.html#5bce480d14e3afaa" class="i field">write</a> = <span class="r38 r">q</span>;
							<b>return</b> <a href="#de0ab417a74dc586" class="i field">Z_STREAM_END</a>;
						}
						<b>else</b>
						{
							<span class="r29 r">z</span>.<a href="ZStream.cs.html#1375722af7f7b471" class="i field">msg</a> = <span class="s">&quot;invalid literal/length code&quot;</span>;
							<span class="r42 r">c</span> = <span class="r29 r">z</span>.<a href="ZStream.cs.html#4dde63befa366043" class="i field">avail_in</a> - <span class="r37 r">n</span>;
							<span class="r42 r">c</span> = (<span class="r35 r">k</span> &gt;&gt; 3) &lt; <span class="r42 r">c</span> ? <span class="r35 r">k</span> &gt;&gt; 3 : <span class="r42 r">c</span>;
							<span class="r37 r">n</span> += <span class="r42 r">c</span>;
							<span class="r36 r">p</span> -= <span class="r42 r">c</span>;
							<span class="r35 r">k</span> -= <span class="r42 r">c</span> &lt;&lt; 3;
							<span class="r28 r">s</span>.<a href="InfBlocks.cs.html#4552ac0052c4e46f" class="i field">bitb</a> = <span class="r34 r">b</span>;
							<span class="r28 r">s</span>.<a href="InfBlocks.cs.html#9b8ddfdbaa9d93af" class="i field">bitk</a> = <span class="r35 r">k</span>;
							<span class="r29 r">z</span>.<a href="ZStream.cs.html#4dde63befa366043" class="i field">avail_in</a> = <span class="r37 r">n</span>;
							<span class="r29 r">z</span>.<a href="ZStream.cs.html#948985959b111adc" class="i field">total_in</a> += <span class="r36 r">p</span> - <span class="r29 r">z</span>.<a href="ZStream.cs.html#b33f6c3d5ac8bf3e" class="i field">next_in_index</a>;
							<span class="r29 r">z</span>.<a href="ZStream.cs.html#b33f6c3d5ac8bf3e" class="i field">next_in_index</a> = <span class="r36 r">p</span>;
							<span class="r28 r">s</span>.<a href="InfBlocks.cs.html#5bce480d14e3afaa" class="i field">write</a> = <span class="r38 r">q</span>;
							<b>return</b> <a href="#6f88a127c39875a1" class="i field">Z_DATA_ERROR</a>;
						}
					}
				}
				<b>while</b> (<b>true</b>);
			}
			<b>while</b> (<span class="r39 r">m</span> &gt;= 258 &amp;&amp; <span class="r37 r">n</span> &gt;= 10);
			<span class="c">// not enough input or output--restore pointers and return</span>
			<span class="r42 r">c</span> = <span class="r29 r">z</span>.<a href="ZStream.cs.html#4dde63befa366043" class="i field">avail_in</a> - <span class="r37 r">n</span>;
			<span class="r42 r">c</span> = (<span class="r35 r">k</span> &gt;&gt; 3) &lt; <span class="r42 r">c</span> ? <span class="r35 r">k</span> &gt;&gt; 3 : <span class="r42 r">c</span>;
			<span class="r37 r">n</span> += <span class="r42 r">c</span>;
			<span class="r36 r">p</span> -= <span class="r42 r">c</span>;
			<span class="r35 r">k</span> -= <span class="r42 r">c</span> &lt;&lt; 3;
			<span class="r28 r">s</span>.<a href="InfBlocks.cs.html#4552ac0052c4e46f" class="i field">bitb</a> = <span class="r34 r">b</span>;
			<span class="r28 r">s</span>.<a href="InfBlocks.cs.html#9b8ddfdbaa9d93af" class="i field">bitk</a> = <span class="r35 r">k</span>;
			<span class="r29 r">z</span>.<a href="ZStream.cs.html#4dde63befa366043" class="i field">avail_in</a> = <span class="r37 r">n</span>;
			<span class="r29 r">z</span>.<a href="ZStream.cs.html#948985959b111adc" class="i field">total_in</a> += <span class="r36 r">p</span> - <span class="r29 r">z</span>.<a href="ZStream.cs.html#b33f6c3d5ac8bf3e" class="i field">next_in_index</a>;
			<span class="r29 r">z</span>.<a href="ZStream.cs.html#b33f6c3d5ac8bf3e" class="i field">next_in_index</a> = <span class="r36 r">p</span>;
			<span class="r28 r">s</span>.<a href="InfBlocks.cs.html#5bce480d14e3afaa" class="i field">write</a> = <span class="r38 r">q</span>;
			<b>return</b> <a href="#cea2b52eeec209aa" class="i field">Z_OK</a>;
		}
	}
}
</pre></td></tr></table></div></body></html>
