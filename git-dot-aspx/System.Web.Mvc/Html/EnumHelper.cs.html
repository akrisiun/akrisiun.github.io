<!DOCTYPE html>
<html><head><title>EnumHelper.cs</title><link rel="stylesheet" href="../../styles.css"><script src="../../scripts.js"></script></head>
<body class="cB" onload="i(293);"><div class="dH">
<table style="width: 100%">
<tr><td>File: <a id="filePath" class="blueLink" href="/#System.Web.Mvc/Html/EnumHelper.cs" target="_top">Html\EnumHelper.cs</a><br/></td><td></td></tr>
<tr><td>Project: <a id="projectPath" class="blueLink" href="/#System.Web.Mvc" target="_top">..\Mvc\src\System.Web.Mvc\System.Web.Mvc.csproj</a> (System.Web.Mvc)</td><td></td></tr>
</table>
</div>
<div class="cz"><table class="tb" cellpadding="0" cellspacing="0"><tr><td valign="top" align="right"><pre id="ln"></pre></td><td valign="top" align="left"><pre id="code">
<span class="c">// Copyright (c) Microsoft Open Technologies, Inc. All rights reserved. See License.txt in the project root for license information.</span>
 
<b>using</b> <span class="i n">System</span>.<span class="i n">Collections</span>.<span class="i n">Generic</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">ComponentModel</span>.<span class="i n">DataAnnotations</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Diagnostics</span>.<span class="i n">Contracts</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Linq</span>.<span class="i n">Expressions</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Reflection</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Web</span>.<span class="i n">Mvc</span>.<span class="i n">Properties</span>;
 
<b>namespace</b> <span class="i n">System</span>.<span class="i n">Web</span>.<span class="i n">Mvc</span>.<span class="i n">Html</span>
{
    <b>public static class</b> <a id="24cb73f6fe4e6b2c" href="../R/24cb73f6fe4e6b2c.html" target="n" data-glyph="0,0" class="t t">EnumHelper</a>
    {
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Gets a value indicating whether the given </span><span class="c">&lt;</span><span class="c">paramref</span><span class="c"> </span><span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r0 r">type</span><span class="c">&quot;</span><span class="c">/&gt;</span><span class="c"> or an expression of this</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">see</span><span class="c"> </span><span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="@0@mscorlib/A.html#3d00eeab9feb80f3" class="t t">Type</a><span class="c">&quot;</span><span class="c">/&gt;</span><span class="c"> is suitable for use in </span><span class="c">&lt;</span><span class="c">see</span><span class="c"> </span><span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="#8bad38268478cd46" class="i method">GetSelectList</a>(<a href="@0@mscorlib/A.html#3d00eeab9feb80f3" class="t t">Type</a>)<span class="c">&quot;</span><span class="c">/&gt;</span><span class="c"> and </span><span class="c">&lt;</span><span class="c">see</span>
        <span class="c">///</span><span class="c"> </span><span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="SelectExtensions.cs.html#e61ba5e770b72472" class="t t">SelectExtensions</a>.<a href="SelectExtensions.cs.html#a5edd39d42c0d3c5" class="i method">EnumDropDownListFor</a>{<span class="r1 r t">TModel</span>,<span class="r2 r t">TEnum</span>}(<a href="../HtmlHelperOfTModel.cs.html#6a40e06c15fa31c2" class="t t">HtmlHelper</a>{<span class="r1 r t">TModel</span>}, <a href="@0@System.Core/A.html#51d6d604b8c53dc8" class="t t">Expression</a>{<a href="@0@mscorlib/A.html#7a86aba051da82dd" class="t t">Func</a>{<span class="r1 r t">TModel</span>, <span class="r2 r t">TEnum</span>}})<span class="c">&quot;</span><span class="c">/&gt;</span>
        <span class="c">///</span><span class="c"> calls.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span><span class="c"> </span><span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r0 r">type</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">The </span><span class="c">&lt;</span><span class="c">see</span><span class="c"> </span><span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="@0@mscorlib/A.html#3d00eeab9feb80f3" class="t t">Type</a><span class="c">&quot;</span><span class="c">/&gt;</span><span class="c"> to check.</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">returns</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">see</span><span class="c"> </span><span class="c">langword</span><span class="c">=</span><span class="c">&quot;</span><span class="c">true</span><span class="c">&quot;</span><span class="c">/&gt;</span><span class="c"> if </span><span class="c">&lt;</span><span class="c">see</span><span class="c"> </span><span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="#8bad38268478cd46" class="i method">GetSelectList</a>(<a href="@0@mscorlib/A.html#3d00eeab9feb80f3" class="t t">Type</a>)<span class="c">&quot;</span><span class="c">/&gt;</span><span class="c"> will not throw when passed given</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">see</span><span class="c"> </span><span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="@0@mscorlib/A.html#3d00eeab9feb80f3" class="t t">Type</a><span class="c">&quot;</span><span class="c">/&gt;</span><span class="c"> and </span><span class="c">&lt;</span><span class="c">see</span>
        <span class="c">///</span><span class="c"> </span><span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="SelectExtensions.cs.html#e61ba5e770b72472" class="t t">SelectExtensions</a>.<a href="SelectExtensions.cs.html#a5edd39d42c0d3c5" class="i method">EnumDropDownListFor</a>{<span class="r3 r t">TModel</span>,<span class="r4 r t">TEnum</span>}(<a href="../HtmlHelperOfTModel.cs.html#6a40e06c15fa31c2" class="t t">HtmlHelper</a>{<span class="r3 r t">TModel</span>}, <a href="@0@System.Core/A.html#51d6d604b8c53dc8" class="t t">Expression</a>{<a href="@0@mscorlib/A.html#7a86aba051da82dd" class="t t">Func</a>{<span class="r3 r t">TModel</span>, <span class="r4 r t">TEnum</span>}})<span class="c">&quot;</span><span class="c">/&gt;</span>
        <span class="c">///</span><span class="c"> will not throw when passed an expression of this </span><span class="c">&lt;</span><span class="c">see</span><span class="c"> </span><span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="@0@mscorlib/A.html#3d00eeab9feb80f3" class="t t">Type</a><span class="c">&quot;</span><span class="c">/&gt;</span><span class="c">; </span><span class="c">&lt;</span><span class="c">see</span><span class="c"> </span><span class="c">langword</span><span class="c">=</span><span class="c">&quot;</span><span class="c">false</span><span class="c">&quot;</span><span class="c">/&gt;</span><span class="c"> otherwise.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">returns</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">remarks</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Currently returns </span><span class="c">&lt;</span><span class="c">see</span><span class="c"> </span><span class="c">langref</span><span class="c">=</span><span class="c">&quot;</span><span class="c">true</span><span class="c">&quot;</span><span class="c">/&gt;</span><span class="c"> if the </span><span class="c">&lt;</span><span class="c">paramref</span><span class="c"> </span><span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r0 r">type</span><span class="c">&quot;</span><span class="c">/&gt;</span><span class="c"> parameter is</span>
        <span class="c">///</span><span class="c"> non-</span><span class="c">&lt;</span><span class="c">see</span><span class="c"> </span><span class="c">langref</span><span class="c">=</span><span class="c">&quot;</span><span class="c">null</span><span class="c">&quot;</span><span class="c">/&gt;</span><span class="c">, is an </span><span class="c">&lt;</span><span class="c">see</span><span class="c"> </span><span class="c">langref</span><span class="c">=</span><span class="c">&quot;</span><span class="c">enum</span><span class="c">&quot;</span><span class="c">/&gt;</span><span class="c"> type, and does not have a</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">see</span><span class="c"> </span><span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="@0@mscorlib/A.html#47d2b3588d8b28ad" class="t t">FlagsAttribute</a><span class="c">&quot;</span><span class="c">/&gt;</span><span class="c"> attribute.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">remarks</span><span class="c">&gt;</span>
        <b>public static bool</b> <a id="11bce976c8d48bee" href="../R/11bce976c8d48bee.html" target="n" data-glyph="72,1" class="i method">IsValidForEnumHelper</a>(<a href="@0@mscorlib/A.html#3d00eeab9feb80f3" class="t t">Type</a> <span id="r0 rd" class="r0 r">type</span>)
        {
            <b>bool</b> <span id="r5 rd" class="r5 r">isValid</span> = <b>false</b>;
            <b>if</b> (<span class="r0 r">type</span> != <b>null</b>)
            {
                <span class="c">// Type.IsEnum is false for Nullable&lt;T&gt; even if T is an enum.  Check underlying type (if any).</span>
                <span class="c">// Do not support Enum type itself -- IsEnum property is false for that class.</span>
                <a href="@0@mscorlib/A.html#3d00eeab9feb80f3" class="t t">Type</a> <span id="r6 rd" class="r6 r">checkedType</span> = <a href="@0@mscorlib/A.html#c9505a785f9fd8c5" class="t t">Nullable</a>.<a href="@0@mscorlib/A.html#ae2ae0d65dd71ecb" class="i method">GetUnderlyingType</a>(<span class="r0 r">type</span>) ?? <span class="r0 r">type</span>;
                <b>if</b> (<span class="r6 r">checkedType</span>.<a href="@0@mscorlib/A.html#0cce4a870a253033" class="i property">IsEnum</a>)
                {
                    <span class="r5 r">isValid</span> = !<a href="#2d95b11a976ea7bc" class="i method">HasFlagsInternal</a>(<span class="r6 r">checkedType</span>);
                }
            }
 
            <b>return</b> <span class="r5 r">isValid</span>;
        }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Gets a value indicating whether the given </span><span class="c">&lt;</span><span class="c">paramref</span><span class="c"> </span><span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r7 r">metadata</span><span class="c">&quot;</span><span class="c">/&gt;</span><span class="c"> or associated expression is suitable</span>
        <span class="c">///</span><span class="c"> for use in </span><span class="c">&lt;</span><span class="c">see</span><span class="c"> </span><span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="#d653c13421c23134" class="i method">GetSelectList</a>(<a href="../ModelMetadata.cs.html#9f822c3699e92a04" class="t t">ModelMetadata</a>)<span class="c">&quot;</span><span class="c">/&gt;</span><span class="c"> and </span><span class="c">&lt;</span><span class="c">see</span>
        <span class="c">///</span><span class="c"> </span><span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="SelectExtensions.cs.html#e61ba5e770b72472" class="t t">SelectExtensions</a>.<a href="SelectExtensions.cs.html#a5edd39d42c0d3c5" class="i method">EnumDropDownListFor</a>{<span class="r8 r t">TModel</span>,<span class="r9 r t">TEnum</span>}(<a href="../HtmlHelperOfTModel.cs.html#6a40e06c15fa31c2" class="t t">HtmlHelper</a>{<span class="r8 r t">TModel</span>}, <a href="@0@System.Core/A.html#51d6d604b8c53dc8" class="t t">Expression</a>{<a href="@0@mscorlib/A.html#7a86aba051da82dd" class="t t">Func</a>{<span class="r8 r t">TModel</span>, <span class="r9 r t">TEnum</span>}})<span class="c">&quot;</span><span class="c">/&gt;</span>
        <span class="c">///</span><span class="c"> calls.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span><span class="c"> </span><span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r7 r">metadata</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">The </span><span class="c">&lt;</span><span class="c">see</span><span class="c"> </span><span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="../ModelMetadata.cs.html#9f822c3699e92a04" class="t t">ModelMetadata</a><span class="c">&quot;</span><span class="c">/&gt;</span><span class="c"> to check.</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">returns</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">see</span><span class="c"> </span><span class="c">langword</span><span class="c">=</span><span class="c">&quot;</span><span class="c">true</span><span class="c">&quot;</span><span class="c">/&gt;</span><span class="c"> if </span><span class="c">&lt;</span><span class="c">see</span><span class="c"> </span><span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="#d653c13421c23134" class="i method">GetSelectList</a>(<a href="../ModelMetadata.cs.html#9f822c3699e92a04" class="t t">ModelMetadata</a>)<span class="c">&quot;</span><span class="c">/&gt;</span><span class="c"> will return not throw when passed</span>
        <span class="c">///</span><span class="c"> given </span><span class="c">&lt;</span><span class="c">see</span><span class="c"> </span><span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="../ModelMetadata.cs.html#9f822c3699e92a04" class="t t">ModelMetadata</a><span class="c">&quot;</span><span class="c">/&gt;</span><span class="c"> and </span><span class="c">&lt;</span><span class="c">see</span>
        <span class="c">///</span><span class="c"> </span><span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="SelectExtensions.cs.html#e61ba5e770b72472" class="t t">SelectExtensions</a>.<a href="SelectExtensions.cs.html#a5edd39d42c0d3c5" class="i method">EnumDropDownListFor</a>{<span class="r10 r t">TModel</span>,<span class="r11 r t">TEnum</span>}(<a href="../HtmlHelperOfTModel.cs.html#6a40e06c15fa31c2" class="t t">HtmlHelper</a>{<span class="r10 r t">TModel</span>}, <a href="@0@System.Core/A.html#51d6d604b8c53dc8" class="t t">Expression</a>{<a href="@0@mscorlib/A.html#7a86aba051da82dd" class="t t">Func</a>{<span class="r10 r t">TModel</span>, <span class="r11 r t">TEnum</span>}})<span class="c">&quot;</span><span class="c">/&gt;</span>
        <span class="c">///</span><span class="c"> will not throw when passed associated expression; </span><span class="c">&lt;</span><span class="c">see</span><span class="c"> </span><span class="c">langword</span><span class="c">=</span><span class="c">&quot;</span><span class="c">false</span><span class="c">&quot;</span><span class="c">/&gt;</span><span class="c"> otherwise.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">returns</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">remarks</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Currently returns </span><span class="c">&lt;</span><span class="c">see</span><span class="c"> </span><span class="c">langref</span><span class="c">=</span><span class="c">&quot;</span><span class="c">true</span><span class="c">&quot;</span><span class="c">/&gt;</span><span class="c"> if the </span><span class="c">&lt;</span><span class="c">paramref</span><span class="c"> </span><span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r7 r">metadata</span><span class="c">&quot;</span><span class="c">/&gt;</span><span class="c"> parameter is</span>
        <span class="c">///</span><span class="c"> non-</span><span class="c">&lt;</span><span class="c">see</span><span class="c"> </span><span class="c">langref</span><span class="c">=</span><span class="c">&quot;</span><span class="c">null</span><span class="c">&quot;</span><span class="c">/&gt;</span><span class="c"> and </span><span class="c">&lt;</span><span class="c">see</span><span class="c"> </span><span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="#11bce976c8d48bee" class="i method">IsValidForEnumHelper</a>(<a href="@0@mscorlib/A.html#3d00eeab9feb80f3" class="t t">Type</a>)<span class="c">&quot;</span><span class="c">/&gt;</span><span class="c"> returns </span><span class="c">&lt;</span><span class="c">see</span><span class="c"> </span><span class="c">langref</span><span class="c">=</span><span class="c">&quot;</span><span class="c">true</span><span class="c">&quot;</span><span class="c">/&gt;</span><span class="c"> for</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">c</span><span class="c">&gt;</span><span class="c">metadata.ModelType</span><span class="c">&lt;/</span><span class="c">c</span><span class="c">&gt;</span><span class="c">.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">remarks</span><span class="c">&gt;</span>
        <b>public static bool</b> <a id="ef5c2e7d5a87e85b" href="../R/ef5c2e7d5a87e85b.html" target="n" data-glyph="72,1" class="i method">IsValidForEnumHelper</a>(<a href="../ModelMetadata.cs.html#9f822c3699e92a04" class="t t">ModelMetadata</a> <span id="r7 rd" class="r7 r">metadata</span>)
        {
            <b>return</b> <span class="r7 r">metadata</span> != <b>null</b> &amp;&amp; <a href="#11bce976c8d48bee" class="i method">IsValidForEnumHelper</a>(<span class="r7 r">metadata</span>.<a href="../ModelMetadata.cs.html#85ec391405d56c1f" class="i property">ModelType</a>);
        }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Gets a list of </span><span class="c">&lt;</span><span class="c">see</span><span class="c"> </span><span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="../SelectListItem.cs.html#7e9d249e1124355a" class="t t">SelectListItem</a><span class="c">&quot;</span><span class="c">/&gt;</span><span class="c"> objects corresponding to enum constants defined in the given</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">paramref</span><span class="c"> </span><span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r12 r">type</span><span class="c">&quot;</span><span class="c">/&gt;</span><span class="c">.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span><span class="c"> </span><span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r12 r">type</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">The </span><span class="c">&lt;</span><span class="c">see</span><span class="c"> </span><span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="@0@mscorlib/A.html#3d00eeab9feb80f3" class="t t">Type</a><span class="c">&quot;</span><span class="c">/&gt;</span><span class="c"> to evaluate.</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">returns</span><span class="c">&gt;</span><span class="c"> An </span><span class="c">&lt;</span><span class="c">see</span><span class="c"> </span><span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="@0@mscorlib/A.html#b19f71a84062554b" class="t t">IList</a>{<span class="r13 r t">SelectListItem</span>}<span class="c">&quot;</span><span class="c">/&gt;</span><span class="c"> for the given </span><span class="c">&lt;</span><span class="c">paramref</span><span class="c"> </span><span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r12 r">type</span><span class="c">&quot;</span><span class="c">/&gt;</span><span class="c">.</span><span class="c">&lt;/</span><span class="c">returns</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">remarks</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Throws if </span><span class="c">&lt;</span><span class="c">see</span><span class="c"> </span><span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="#11bce976c8d48bee" class="i method">IsValidForEnumHelper</a>(<a href="@0@mscorlib/A.html#3d00eeab9feb80f3" class="t t">Type</a>)<span class="c">&quot;</span><span class="c">/&gt;</span><span class="c"> returns </span><span class="c">&lt;</span><span class="c">see</span><span class="c"> </span><span class="c">langref</span><span class="c">=</span><span class="c">&quot;</span><span class="c">false</span><span class="c">&quot;</span><span class="c">/&gt;</span><span class="c"> for the given</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">paramref</span><span class="c"> </span><span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r12 r">type</span><span class="c">&quot;</span><span class="c">/&gt;</span><span class="c">.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">remarks</span><span class="c">&gt;</span>
        <b>public static</b> <a href="@0@mscorlib/A.html#b19f71a84062554b" class="t t">IList</a>&lt;<a href="../SelectListItem.cs.html#7e9d249e1124355a" class="t t">SelectListItem</a>&gt; <a id="8bad38268478cd46" href="../R/8bad38268478cd46.html" target="n" data-glyph="72,1" class="i method">GetSelectList</a>(<a href="@0@mscorlib/A.html#3d00eeab9feb80f3" class="t t">Type</a> <span id="r12 rd" class="r12 r">type</span>)
        {
            <b>if</b> (<span class="r12 r">type</span> == <b>null</b>)
            {
                <b>throw</b> <a href="../Error.cs.html#99b77324465ca7fb" class="t t">Error</a>.<a href="../Error.cs.html#f1948c77593bc958" class="i method">ArgumentNull</a>(<span class="s">&quot;type&quot;</span>);
            }
 
            <b>if</b> (!<a href="#11bce976c8d48bee" class="i method">IsValidForEnumHelper</a>(<span class="r12 r">type</span>))
            {
                <b>throw</b> <a href="../Error.cs.html#99b77324465ca7fb" class="t t">Error</a>.<a href="../Error.cs.html#d08d30898dd0576f" class="i method">Argument</a>(<span class="s">&quot;type&quot;</span>, <a href="../Properties/MvcResources.Designer.cs.html#9b6f1e9cbe67d146" class="t t">MvcResources</a>.<a href="../Properties/MvcResources.Designer.cs.html#940c2adafb4312c5" class="i property">EnumHelper_InvalidParameterType</a>, <span class="r12 r">type</span>.<a href="@0@mscorlib/A.html#976443bb39dc37cd" class="i property">FullName</a>);
            }
 
            <a href="@0@mscorlib/A.html#b19f71a84062554b" class="t t">IList</a>&lt;<a href="../SelectListItem.cs.html#7e9d249e1124355a" class="t t">SelectListItem</a>&gt; <span id="r14 rd" class="r14 r">selectList</span> = <b>new</b> <a href="@0@mscorlib/A.html#9e5352b2b304ceba" class="t constructor">List</a>&lt;<a href="../SelectListItem.cs.html#7e9d249e1124355a" class="t t">SelectListItem</a>&gt;();
 
            <span class="c">// According to HTML5: &quot;The first child option element of a select element with a required attribute and</span>
            <span class="c">// without a multiple attribute, and whose size is &quot;1&quot;, must have either an empty value attribute, or must</span>
            <span class="c">// have no text content.&quot;  SelectExtensions.DropDownList[For]() methods often generate a matching</span>
            <span class="c">// &lt;select/&gt;.  Empty value for Nullable&lt;T&gt;, empty text for round-tripping an unrecognized value, or option</span>
            <span class="c">// label serves in some cases.  But otherwise, ignoring this does not cause problems in either IE or Chrome.</span>
            <a href="@0@mscorlib/A.html#3d00eeab9feb80f3" class="t t">Type</a> <span id="r15 rd" class="r15 r">checkedType</span> = <a href="@0@mscorlib/A.html#c9505a785f9fd8c5" class="t t">Nullable</a>.<a href="@0@mscorlib/A.html#ae2ae0d65dd71ecb" class="i method">GetUnderlyingType</a>(<span class="r12 r">type</span>) ?? <span class="r12 r">type</span>;
            <b>if</b> (<span class="r15 r">checkedType</span> != <span class="r12 r">type</span>)
            {
                <span class="c">// Underlying type was non-null so handle Nullable&lt;T&gt;; ensure returned list has a spot for null</span>
                <span class="r14 r">selectList</span>.<a href="@0@mscorlib/A.html#a9319db8c62ae453" class="i method">Add</a>(<b>new</b> <a href="../SelectListItem.cs.html#7e9d249e1124355a" class="t constructor">SelectListItem</a> { <a href="../SelectListItem.cs.html#07dc4e0291c60568" class="i property">Text</a> = <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="t t">String</a>.<a href="@0@mscorlib/A.html#c9f70a27facb27cf" class="i field">Empty</a>, <a href="../SelectListItem.cs.html#b00b7571dec33478" class="i property">Value</a> = <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="t t">String</a>.<a href="@0@mscorlib/A.html#c9f70a27facb27cf" class="i field">Empty</a>, });
            }
 
            <span class="c">// Populate the list</span>
            <b>const</b> <a href="@0@mscorlib/A.html#4795caf3b483702d" class="t t">BindingFlags</a> <span id="r16 rd" class="r16 r">BindingFlags</span> =
                <a href="@0@mscorlib/A.html#4795caf3b483702d" class="t t">BindingFlags</a>.<a href="@0@mscorlib/A.html#837153523ebc2e3b" class="i field">DeclaredOnly</a> | <a href="@0@mscorlib/A.html#4795caf3b483702d" class="t t">BindingFlags</a>.<a href="@0@mscorlib/A.html#3cd29d73949adaa3" class="i field">GetField</a> | <a href="@0@mscorlib/A.html#4795caf3b483702d" class="t t">BindingFlags</a>.<a href="@0@mscorlib/A.html#ef2ef39bdfa059df" class="i field">Public</a> | <a href="@0@mscorlib/A.html#4795caf3b483702d" class="t t">BindingFlags</a>.<a href="@0@mscorlib/A.html#d1fa47f9abe3c16a" class="i field">Static</a>;
            <b>foreach</b> (<a href="@0@mscorlib/A.html#329d417f4b15c86c" class="t t">FieldInfo</a> <span id="r17 rd" class="r17 r">field</span> <b>in</b> <span class="r15 r">checkedType</span>.<a href="@0@mscorlib/A.html#6e620aa7cbd52b97" class="i method">GetFields</a>(<span class="r16 r">BindingFlags</span>))
            {
                <span class="c">// fieldValue will be an numeric type (byte, ...)</span>
                <b>object</b> <span id="r18 rd" class="r18 r">fieldValue</span> = <span class="r17 r">field</span>.<a href="@0@mscorlib/A.html#93e37b02777cbb6e" class="i method">GetRawConstantValue</a>();
 
                <span class="r14 r">selectList</span>.<a href="@0@mscorlib/A.html#a9319db8c62ae453" class="i method">Add</a>(<b>new</b> <a href="../SelectListItem.cs.html#7e9d249e1124355a" class="t constructor">SelectListItem</a> { <a href="../SelectListItem.cs.html#07dc4e0291c60568" class="i property">Text</a> = <a href="#3646944171259137" class="i method">GetDisplayName</a>(<span class="r17 r">field</span>), <a href="../SelectListItem.cs.html#b00b7571dec33478" class="i property">Value</a> = <span class="r18 r">fieldValue</span>.<a href="@0@mscorlib/A.html#ff31a6bf27c58f89" class="i method">ToString</a>(), });
            }
 
            <b>return</b> <span class="r14 r">selectList</span>;
        }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Gets a list of </span><span class="c">&lt;</span><span class="c">see</span><span class="c"> </span><span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="../SelectListItem.cs.html#7e9d249e1124355a" class="t t">SelectListItem</a><span class="c">&quot;</span><span class="c">/&gt;</span><span class="c"> objects corresponding to enum constants defined in the given</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">paramref</span><span class="c"> </span><span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r19 r">metadata</span><span class="c">&quot;</span><span class="c">/&gt;</span><span class="c">.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span><span class="c"> </span><span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r19 r">metadata</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">The </span><span class="c">&lt;</span><span class="c">see</span><span class="c"> </span><span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="../ModelMetadata.cs.html#9f822c3699e92a04" class="t t">ModelMetadata</a><span class="c">&quot;</span><span class="c">/&gt;</span><span class="c"> to evaluate.</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">returns</span><span class="c">&gt;</span><span class="c"> An </span><span class="c">&lt;</span><span class="c">see</span><span class="c"> </span><span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="@0@mscorlib/A.html#b19f71a84062554b" class="t t">IList</a>{<span class="r20 r t">SelectListItem</span>}<span class="c">&quot;</span><span class="c">/&gt;</span><span class="c"> for the given </span><span class="c">&lt;</span><span class="c">paramref</span><span class="c"> </span><span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r19 r">metadata</span><span class="c">&quot;</span><span class="c">/&gt;</span><span class="c">.</span><span class="c">&lt;/</span><span class="c">returns</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">remarks</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Throws if </span><span class="c">&lt;</span><span class="c">see</span><span class="c"> </span><span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="#ef5c2e7d5a87e85b" class="i method">IsValidForEnumHelper</a>(<a href="../ModelMetadata.cs.html#9f822c3699e92a04" class="t t">ModelMetadata</a>)<span class="c">&quot;</span><span class="c">/&gt;</span><span class="c"> returns </span><span class="c">&lt;</span><span class="c">see</span><span class="c"> </span><span class="c">langref</span><span class="c">=</span><span class="c">&quot;</span><span class="c">false</span><span class="c">&quot;</span><span class="c">/&gt;</span><span class="c"> for the given</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">paramref</span><span class="c"> </span><span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r19 r">metadata</span><span class="c">&quot;</span><span class="c">/&gt;</span><span class="c">.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">remarks</span><span class="c">&gt;</span>
        <b>public static</b> <a href="@0@mscorlib/A.html#b19f71a84062554b" class="t t">IList</a>&lt;<a href="../SelectListItem.cs.html#7e9d249e1124355a" class="t t">SelectListItem</a>&gt; <a id="d653c13421c23134" href="../R/d653c13421c23134.html" target="n" data-glyph="72,1" class="i method">GetSelectList</a>(<a href="../ModelMetadata.cs.html#9f822c3699e92a04" class="t t">ModelMetadata</a> <span id="r19 rd" class="r19 r">metadata</span>)
        {
            <b>if</b> (<span class="r19 r">metadata</span> == <b>null</b>)
            {
                <b>throw</b> <a href="../Error.cs.html#99b77324465ca7fb" class="t t">Error</a>.<a href="../Error.cs.html#f1948c77593bc958" class="i method">ArgumentNull</a>(<span class="s">&quot;metadata&quot;</span>);
            }
 
            <b>if</b> (<span class="r19 r">metadata</span>.<a href="../ModelMetadata.cs.html#85ec391405d56c1f" class="i property">ModelType</a> == <b>null</b>)
            {
                <b>throw</b> <a href="../Error.cs.html#99b77324465ca7fb" class="t t">Error</a>.<a href="../Error.cs.html#d08d30898dd0576f" class="i method">Argument</a>(<span class="s">&quot;metadata&quot;</span>, <a href="../Properties/MvcResources.Designer.cs.html#9b6f1e9cbe67d146" class="t t">MvcResources</a>.<a href="../Properties/MvcResources.Designer.cs.html#5a1dfea11e3c8c0d" class="i property">EnumHelper_InvalidMetadataParameter</a>);
            }
 
            <b>if</b> (!<a href="#ef5c2e7d5a87e85b" class="i method">IsValidForEnumHelper</a>(<span class="r19 r">metadata</span>))
            {
                <b>throw</b> <a href="../Error.cs.html#99b77324465ca7fb" class="t t">Error</a>.<a href="../Error.cs.html#d08d30898dd0576f" class="i method">Argument</a>(<span class="s">&quot;metadata&quot;</span>, <a href="../Properties/MvcResources.Designer.cs.html#9b6f1e9cbe67d146" class="t t">MvcResources</a>.<a href="../Properties/MvcResources.Designer.cs.html#940c2adafb4312c5" class="i property">EnumHelper_InvalidParameterType</a>,
                    <span class="r19 r">metadata</span>.<a href="../ModelMetadata.cs.html#85ec391405d56c1f" class="i property">ModelType</a>.<a href="@0@mscorlib/A.html#976443bb39dc37cd" class="i property">FullName</a>);
            }
 
            <b>return</b> <a href="#8bad38268478cd46" class="i method">GetSelectList</a>(<span class="r19 r">metadata</span>.<a href="../ModelMetadata.cs.html#85ec391405d56c1f" class="i property">ModelType</a>);
        }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Gets a list of </span><span class="c">&lt;</span><span class="c">see</span><span class="c"> </span><span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="../SelectListItem.cs.html#7e9d249e1124355a" class="t t">SelectListItem</a><span class="c">&quot;</span><span class="c">/&gt;</span><span class="c"> objects corresponding to enum constants defined in the given</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">paramref</span><span class="c"> </span><span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r21 r">type</span><span class="c">&quot;</span><span class="c">/&gt;</span><span class="c">.  Also ensures the </span><span class="c">&lt;</span><span class="c">paramref</span><span class="c"> </span><span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r22 r">value</span><span class="c">&quot;</span><span class="c">/&gt;</span><span class="c"> will round-trip even if it does not</span>
        <span class="c">///</span><span class="c"> match a defined constant and sets the </span><span class="c">&lt;</span><span class="c">c</span><span class="c">&gt;</span><span class="c">Selected</span><span class="c">&lt;/</span><span class="c">c</span><span class="c">&gt;</span><span class="c"> property to </span><span class="c">&lt;</span><span class="c">see</span><span class="c"> </span><span class="c">langref</span><span class="c">=</span><span class="c">&quot;</span><span class="c">true</span><span class="c">&quot;</span><span class="c">/&gt;</span><span class="c"> for one element in</span>
        <span class="c">///</span><span class="c"> the returned list -- matching the </span><span class="c">&lt;</span><span class="c">paramref</span><span class="c"> </span><span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r22 r">value</span><span class="c">&quot;</span><span class="c">/&gt;</span><span class="c">.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span><span class="c"> </span><span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r21 r">type</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">The </span><span class="c">&lt;</span><span class="c">see</span><span class="c"> </span><span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="@0@mscorlib/A.html#3d00eeab9feb80f3" class="t t">Type</a><span class="c">&quot;</span><span class="c">/&gt;</span><span class="c"> to evaluate.</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span><span class="c"> </span><span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r22 r">value</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">Value from </span><span class="c">&lt;</span><span class="c">see</span><span class="c"> </span><span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="@0@mscorlib/A.html#3d00eeab9feb80f3" class="t t">Type</a><span class="c">&quot;</span><span class="c">/&gt;</span><span class="c"> </span><span class="c">&lt;</span><span class="c">paramref</span><span class="c"> </span><span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r21 r">type</span><span class="c">&quot;</span><span class="c">/&gt;</span><span class="c"> to select.</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">returns</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> An </span><span class="c">&lt;</span><span class="c">see</span><span class="c"> </span><span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="@0@mscorlib/A.html#b19f71a84062554b" class="t t">IList</a>{<span class="r23 r t">SelectListItem</span>}<span class="c">&quot;</span><span class="c">/&gt;</span><span class="c"> for the given </span><span class="c">&lt;</span><span class="c">paramref</span><span class="c"> </span><span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r21 r">type</span><span class="c">&quot;</span><span class="c">/&gt;</span><span class="c">, possibly extended to</span>
        <span class="c">///</span><span class="c"> include an unrecognized </span><span class="c">&lt;</span><span class="c">paramref</span><span class="c"> </span><span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r22 r">value</span><span class="c">&quot;</span><span class="c">/&gt;</span><span class="c">.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">returns</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">remarks</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Throws if </span><span class="c">&lt;</span><span class="c">see</span><span class="c"> </span><span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="#11bce976c8d48bee" class="i method">IsValidForEnumHelper</a>(<a href="@0@mscorlib/A.html#3d00eeab9feb80f3" class="t t">Type</a>)<span class="c">&quot;</span><span class="c">/&gt;</span><span class="c"> returns </span><span class="c">&lt;</span><span class="c">see</span><span class="c"> </span><span class="c">langref</span><span class="c">=</span><span class="c">&quot;</span><span class="c">false</span><span class="c">&quot;</span><span class="c">/&gt;</span><span class="c"> for the given</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">paramref</span><span class="c"> </span><span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r21 r">type</span><span class="c">&quot;</span><span class="c">/&gt;</span><span class="c"> or if a non-null </span><span class="c">&lt;</span><span class="c">paramref</span><span class="c"> </span><span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r22 r">value</span><span class="c">&quot;</span><span class="c">/&gt;</span><span class="c"> has a different </span><span class="c">&lt;</span><span class="c">see</span><span class="c"> </span><span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="@0@mscorlib/A.html#3d00eeab9feb80f3" class="t t">Type</a><span class="c">&quot;</span><span class="c">/&gt;</span><span class="c"> than</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">paramref</span><span class="c"> </span><span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r21 r">type</span><span class="c">&quot;</span><span class="c">/&gt;</span><span class="c">.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">remarks</span><span class="c">&gt;</span>
        <b>public static</b> <a href="@0@mscorlib/A.html#b19f71a84062554b" class="t t">IList</a>&lt;<a href="../SelectListItem.cs.html#7e9d249e1124355a" class="t t">SelectListItem</a>&gt; <a id="e34057e544541fdb" href="../R/e34057e544541fdb.html" target="n" data-glyph="72,1" class="i method">GetSelectList</a>(<a href="@0@mscorlib/A.html#3d00eeab9feb80f3" class="t t">Type</a> <span id="r21 rd" class="r21 r">type</span>, <a href="@0@mscorlib/A.html#36729210e317a805" class="t t">Enum</a> <span id="r22 rd" class="r22 r">value</span>)
        {
            <a href="@0@mscorlib/A.html#b19f71a84062554b" class="t t">IList</a>&lt;<a href="../SelectListItem.cs.html#7e9d249e1124355a" class="t t">SelectListItem</a>&gt; <span id="r24 rd" class="r24 r">selectList</span> = <a href="#8bad38268478cd46" class="i method">GetSelectList</a>(<span class="r21 r">type</span>);
 
            <a href="@0@mscorlib/A.html#3d00eeab9feb80f3" class="t t">Type</a> <span id="r25 rd" class="r25 r">valueType</span> = (<span class="r22 r">value</span> == <b>null</b>) ? <b>null</b> : <span class="r22 r">value</span>.<a href="@0@mscorlib/A.html#4d73eb225aef8a61" class="i method">GetType</a>();
            <b>if</b> (<span class="r25 r">valueType</span> != <b>null</b> &amp;&amp; <span class="r25 r">valueType</span> != <span class="r21 r">type</span> &amp;&amp; <span class="r25 r">valueType</span> != <a href="@0@mscorlib/A.html#c9505a785f9fd8c5" class="t t">Nullable</a>.<a href="@0@mscorlib/A.html#ae2ae0d65dd71ecb" class="i method">GetUnderlyingType</a>(<span class="r21 r">type</span>))
            {
                <b>throw</b> <a href="../Error.cs.html#99b77324465ca7fb" class="t t">Error</a>.<a href="../Error.cs.html#d08d30898dd0576f" class="i method">Argument</a>(<span class="s">&quot;value&quot;</span>, <a href="../Properties/MvcResources.Designer.cs.html#9b6f1e9cbe67d146" class="t t">MvcResources</a>.<a href="../Properties/MvcResources.Designer.cs.html#972eb415bff6da68" class="i property">EnumHelper_InvalidValueParameter</a>, <span class="r25 r">valueType</span>.<a href="@0@mscorlib/A.html#976443bb39dc37cd" class="i property">FullName</a>,
                    <span class="r21 r">type</span>.<a href="@0@mscorlib/A.html#976443bb39dc37cd" class="i property">FullName</a>);
            }
 
            <b>if</b> (<span class="r22 r">value</span> == <b>null</b> &amp;&amp; <span class="r24 r">selectList</span>.<a href="@0@mscorlib/A.html#3d6c21c4e9bd5f63" class="i property">Count</a> != 0 &amp;&amp; <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="t t">String</a>.<a href="@0@mscorlib/A.html#23a8597f842071f4" class="i method">IsNullOrEmpty</a>(<span class="r24 r">selectList</span>[0].<a href="../SelectListItem.cs.html#b00b7571dec33478" class="i property">Value</a>))
            {
                <span class="c">// Type is Nullable&lt;T&gt;; use existing entry to round trip null value</span>
                <span class="r24 r">selectList</span>[0].<a href="../SelectListItem.cs.html#866f319af0f81f4e" class="i property">Selected</a> = <b>true</b>;
            }
            <b>else</b>
            {
                <span class="c">// If null, use default for this (non-Nullable&lt;T&gt;) enum -- always has 0 integral value</span>
                <b>string</b> <span id="r26 rd" class="r26 r">valueString</span> = (<span class="r22 r">value</span> == <b>null</b>) ? <span class="s">&quot;0&quot;</span> : <span class="r22 r">value</span>.<a href="@0@mscorlib/A.html#e02a1db31e011144" class="i method">ToString</a>(<span class="s">&quot;d&quot;</span>);
 
                <span class="c">// Select the last matching item, imitating what at least IE and Chrome highlight when multiple</span>
                <span class="c">// elements in a &lt;select/&gt; element have a selected attribute.</span>
                <b>bool</b> <span id="r27 rd" class="r27 r">foundSelected</span> = <b>false</b>;
                <b>for</b> (<b>int</b> <span id="r28 rd" class="r28 r">i</span> = <span class="r24 r">selectList</span>.<a href="@0@mscorlib/A.html#3d6c21c4e9bd5f63" class="i property">Count</a> - 1; !<span class="r27 r">foundSelected</span> &amp;&amp; <span class="r28 r">i</span> &gt;= 0; --<span class="r28 r">i</span>)
                {
                    <a href="../SelectListItem.cs.html#7e9d249e1124355a" class="t t">SelectListItem</a> <span id="r29 rd" class="r29 r">item</span> = <span class="r24 r">selectList</span><a href="@0@mscorlib/A.html#396bb785d31f5979">[</a><span class="r28 r">i</span>];
                    <span class="r29 r">item</span>.<a href="../SelectListItem.cs.html#866f319af0f81f4e" class="i property">Selected</a> = (<span class="r26 r">valueString</span> == <span class="r29 r">item</span>.<a href="../SelectListItem.cs.html#b00b7571dec33478" class="i property">Value</a>);
                    <span class="r27 r">foundSelected</span> |= <span class="r29 r">item</span>.<a href="../SelectListItem.cs.html#866f319af0f81f4e" class="i property">Selected</a>;
                }
 
                <span class="c">// Round trip the current value</span>
                <b>if</b> (!<span class="r27 r">foundSelected</span>)
                {
                    <b>if</b> (<span class="r24 r">selectList</span>.<a href="@0@mscorlib/A.html#3d6c21c4e9bd5f63" class="i property">Count</a> != 0 &amp;&amp; <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="t t">String</a>.<a href="@0@mscorlib/A.html#23a8597f842071f4" class="i method">IsNullOrEmpty</a>(<span class="r24 r">selectList</span>[0].<a href="../SelectListItem.cs.html#b00b7571dec33478" class="i property">Value</a>))
                    {
                        <span class="c">// Type is Nullable&lt;T&gt;; use existing entry for round trip</span>
                        <span class="r24 r">selectList</span>[0].<a href="../SelectListItem.cs.html#866f319af0f81f4e" class="i property">Selected</a> = <b>true</b>;
                        <span class="r24 r">selectList</span>[0].<a href="../SelectListItem.cs.html#b00b7571dec33478" class="i property">Value</a> = <span class="r26 r">valueString</span>;
                    }
                    <b>else</b>
                    {
                        <span class="c">// Add new entry which does not display value to user</span>
                        <span class="r24 r">selectList</span>.<a href="@0@mscorlib/A.html#11453faf8022b027" class="i method">Insert</a>(0,
                            <b>new</b> <a href="../SelectListItem.cs.html#7e9d249e1124355a" class="t constructor">SelectListItem</a> { <a href="../SelectListItem.cs.html#866f319af0f81f4e" class="i property">Selected</a> = <b>true</b>, <a href="../SelectListItem.cs.html#07dc4e0291c60568" class="i property">Text</a> = <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="t t">String</a>.<a href="@0@mscorlib/A.html#c9f70a27facb27cf" class="i field">Empty</a>, <a href="../SelectListItem.cs.html#b00b7571dec33478" class="i property">Value</a> = <span class="r26 r">valueString</span>, });
                    }
                }
            }
 
            <b>return</b> <span class="r24 r">selectList</span>;
        }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Gets a list of </span><span class="c">&lt;</span><span class="c">see</span><span class="c"> </span><span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="../SelectListItem.cs.html#7e9d249e1124355a" class="t t">SelectListItem</a><span class="c">&quot;</span><span class="c">/&gt;</span><span class="c"> objects corresponding to enum constants defined in the given</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">paramref</span><span class="c"> </span><span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r30 r">metadata</span><span class="c">&quot;</span><span class="c">/&gt;</span><span class="c">.  Also ensures the </span><span class="c">&lt;</span><span class="c">paramref</span><span class="c"> </span><span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r31 r">value</span><span class="c">&quot;</span><span class="c">/&gt;</span><span class="c"> will round-trip even if it does not</span>
        <span class="c">///</span><span class="c"> match a defined constant and sets the </span><span class="c">&lt;</span><span class="c">c</span><span class="c">&gt;</span><span class="c">Selected</span><span class="c">&lt;/</span><span class="c">c</span><span class="c">&gt;</span><span class="c"> property to </span><span class="c">&lt;</span><span class="c">see</span><span class="c"> </span><span class="c">langref</span><span class="c">=</span><span class="c">&quot;</span><span class="c">true</span><span class="c">&quot;</span><span class="c">/&gt;</span><span class="c"> for one element in</span>
        <span class="c">///</span><span class="c"> the returned list -- matching the </span><span class="c">&lt;</span><span class="c">paramref</span><span class="c"> </span><span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r31 r">value</span><span class="c">&quot;</span><span class="c">/&gt;</span><span class="c">.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span><span class="c"> </span><span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r30 r">metadata</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">The </span><span class="c">&lt;</span><span class="c">see</span><span class="c"> </span><span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="../ModelMetadata.cs.html#9f822c3699e92a04" class="t t">ModelMetadata</a><span class="c">&quot;</span><span class="c">/&gt;</span><span class="c"> to evaluate.</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span><span class="c"> </span><span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r31 r">value</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">Value from </span><span class="c">&lt;</span><span class="c">see</span><span class="c"> </span><span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="@0@mscorlib/A.html#3d00eeab9feb80f3" class="t t">Type</a><span class="c">&quot;</span><span class="c">/&gt;</span><span class="c"> of </span><span class="c">&lt;</span><span class="c">paramref</span><span class="c"> </span><span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r30 r">metadata</span><span class="c">&quot;</span><span class="c">/&gt;</span><span class="c"> to select.</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">returns</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> An </span><span class="c">&lt;</span><span class="c">see</span><span class="c"> </span><span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="@0@mscorlib/A.html#b19f71a84062554b" class="t t">IList</a>{<span class="r32 r t">SelectListItem</span>}<span class="c">&quot;</span><span class="c">/&gt;</span><span class="c"> for the given </span><span class="c">&lt;</span><span class="c">paramref</span><span class="c"> </span><span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r30 r">metadata</span><span class="c">&quot;</span><span class="c">/&gt;</span><span class="c">, possibly extended to</span>
        <span class="c">///</span><span class="c"> include an unrecognized </span><span class="c">&lt;</span><span class="c">paramref</span><span class="c"> </span><span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r31 r">value</span><span class="c">&quot;</span><span class="c">/&gt;</span><span class="c">.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">returns</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">remarks</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Throws if </span><span class="c">&lt;</span><span class="c">see</span><span class="c"> </span><span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="#ef5c2e7d5a87e85b" class="i method">IsValidForEnumHelper</a>(<a href="../ModelMetadata.cs.html#9f822c3699e92a04" class="t t">ModelMetadata</a>)<span class="c">&quot;</span><span class="c">/&gt;</span><span class="c"> returns </span><span class="c">&lt;</span><span class="c">see</span><span class="c"> </span><span class="c">langref</span><span class="c">=</span><span class="c">&quot;</span><span class="c">false</span><span class="c">&quot;</span><span class="c">/&gt;</span><span class="c"> for the given</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">paramref</span><span class="c"> </span><span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r30 r">metadata</span><span class="c">&quot;</span><span class="c">/&gt;</span><span class="c"> or if a non-null </span><span class="c">&lt;</span><span class="c">paramref</span><span class="c"> </span><span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r31 r">value</span><span class="c">&quot;</span><span class="c">/&gt;</span><span class="c"> has a different </span><span class="c">&lt;</span><span class="c">see</span><span class="c"> </span><span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="@0@mscorlib/A.html#3d00eeab9feb80f3" class="t t">Type</a><span class="c">&quot;</span><span class="c">/&gt;</span>
        <span class="c">///</span><span class="c"> than </span><span class="c">&lt;</span><span class="c">c</span><span class="c">&gt;</span><span class="c">metadata.ModelType</span><span class="c">&lt;/</span><span class="c">c</span><span class="c">&gt;</span><span class="c">.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">remarks</span><span class="c">&gt;</span>
        <b>public static</b> <a href="@0@mscorlib/A.html#b19f71a84062554b" class="t t">IList</a>&lt;<a href="../SelectListItem.cs.html#7e9d249e1124355a" class="t t">SelectListItem</a>&gt; <a id="ab0de76d26a0aaa5" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">GetSelectList</a>(<a href="../ModelMetadata.cs.html#9f822c3699e92a04" class="t t">ModelMetadata</a> <span id="r30 rd" class="r30 r">metadata</span>, <a href="@0@mscorlib/A.html#36729210e317a805" class="t t">Enum</a> <span id="r31 rd" class="r31 r">value</span>)
        {
            <b>if</b> (<span class="r30 r">metadata</span> == <b>null</b>)
            {
                <b>throw</b> <a href="../Error.cs.html#99b77324465ca7fb" class="t t">Error</a>.<a href="../Error.cs.html#f1948c77593bc958" class="i method">ArgumentNull</a>(<span class="s">&quot;metadata&quot;</span>);
            }
 
            <b>if</b> (<span class="r30 r">metadata</span>.<a href="../ModelMetadata.cs.html#85ec391405d56c1f" class="i property">ModelType</a> == <b>null</b>)
            {
                <b>throw</b> <a href="../Error.cs.html#99b77324465ca7fb" class="t t">Error</a>.<a href="../Error.cs.html#d08d30898dd0576f" class="i method">Argument</a>(<span class="s">&quot;metadata&quot;</span>, <a href="../Properties/MvcResources.Designer.cs.html#9b6f1e9cbe67d146" class="t t">MvcResources</a>.<a href="../Properties/MvcResources.Designer.cs.html#5a1dfea11e3c8c0d" class="i property">EnumHelper_InvalidMetadataParameter</a>);
            }
 
            <b>if</b> (!<a href="#ef5c2e7d5a87e85b" class="i method">IsValidForEnumHelper</a>(<span class="r30 r">metadata</span>))
            {
                <b>throw</b> <a href="../Error.cs.html#99b77324465ca7fb" class="t t">Error</a>.<a href="../Error.cs.html#d08d30898dd0576f" class="i method">Argument</a>(<span class="s">&quot;metadata&quot;</span>, <a href="../Properties/MvcResources.Designer.cs.html#9b6f1e9cbe67d146" class="t t">MvcResources</a>.<a href="../Properties/MvcResources.Designer.cs.html#940c2adafb4312c5" class="i property">EnumHelper_InvalidParameterType</a>,
                    <span class="r30 r">metadata</span>.<a href="../ModelMetadata.cs.html#85ec391405d56c1f" class="i property">ModelType</a>.<a href="@0@mscorlib/A.html#976443bb39dc37cd" class="i property">FullName</a>);
            }
 
            <b>return</b> <a href="#e34057e544541fdb" class="i method">GetSelectList</a>(<span class="r30 r">metadata</span>.<a href="../ModelMetadata.cs.html#85ec391405d56c1f" class="i property">ModelType</a>, <span class="r31 r">value</span>);
        }
 
        <b>internal static bool</b> <a id="72fcc48c865e3ca5" href="../R/72fcc48c865e3ca5.html" target="n" data-glyph="74,1" class="i method">HasFlags</a>(<a href="@0@mscorlib/A.html#3d00eeab9feb80f3" class="t t">Type</a> <span id="r33 rd" class="r33 r">type</span>)
        {
            <a href="@0@mscorlib/A.html#c575dbe300e57438" class="t t">Contract</a>.<a href="@0@mscorlib/A.html#e87e73b73368f052" class="i method">Assert</a>(<span class="r33 r">type</span> != <b>null</b>);
 
            <a href="@0@mscorlib/A.html#3d00eeab9feb80f3" class="t t">Type</a> <span id="r34 rd" class="r34 r">checkedType</span> = <a href="@0@mscorlib/A.html#c9505a785f9fd8c5" class="t t">Nullable</a>.<a href="@0@mscorlib/A.html#ae2ae0d65dd71ecb" class="i method">GetUnderlyingType</a>(<span class="r33 r">type</span>) ?? <span class="r33 r">type</span>;
            <b>return</b> <a href="#2d95b11a976ea7bc" class="i method">HasFlagsInternal</a>(<span class="r34 r">checkedType</span>);
        }
 
        <b>private static bool</b> <a id="2d95b11a976ea7bc" href="../R/2d95b11a976ea7bc.html" target="n" data-glyph="76,1" class="i method">HasFlagsInternal</a>(<a href="@0@mscorlib/A.html#3d00eeab9feb80f3" class="t t">Type</a> <span id="r35 rd" class="r35 r">type</span>)
        {
            <a href="@0@mscorlib/A.html#c575dbe300e57438" class="t t">Contract</a>.<a href="@0@mscorlib/A.html#e87e73b73368f052" class="i method">Assert</a>(<span class="r35 r">type</span> != <b>null</b>);
 
            <a href="@0@mscorlib/A.html#47d2b3588d8b28ad" class="t t">FlagsAttribute</a> <span id="r36 rd" class="r36 r">attribute</span> = <span class="r35 r">type</span>.<a href="@0@mscorlib/A.html#c6bc76200d08473d" class="i method">GetCustomAttribute</a>&lt;<a href="@0@mscorlib/A.html#47d2b3588d8b28ad" class="t t">FlagsAttribute</a>&gt;(<span class="r37 r">inherit</span>: <b>false</b>);
            <b>return</b> <span class="r36 r">attribute</span> != <b>null</b>;
        }
 
        <span class="c">// Return non-empty name specified in a [Display] attribute for the given field, if any; field&#39;s name otherwise</span>
        <b>private static string</b> <a id="3646944171259137" href="../R/3646944171259137.html" target="n" data-glyph="76,1" class="i method">GetDisplayName</a>(<a href="@0@mscorlib/A.html#329d417f4b15c86c" class="t t">FieldInfo</a> <span id="r38 rd" class="r38 r">field</span>)
        {
            <a href="@0@System.ComponentModel.DataAnnotations/A.html#b290d77efef8586f" class="t t">DisplayAttribute</a> <span id="r39 rd" class="r39 r">display</span> = <span class="r38 r">field</span>.<a href="@0@mscorlib/A.html#c6bc76200d08473d" class="i method">GetCustomAttribute</a>&lt;<a href="@0@System.ComponentModel.DataAnnotations/A.html#b290d77efef8586f" class="t t">DisplayAttribute</a>&gt;(<span class="r40 r">inherit</span>: <b>false</b>);
            <b>if</b> (<span class="r39 r">display</span> != <b>null</b>)
            {
                <b>string</b> <span id="r41 rd" class="r41 r">name</span> = <span class="r39 r">display</span>.<a href="@0@System.ComponentModel.DataAnnotations/A.html#02ae3d06a99be27f" class="i method">GetName</a>();
                <b>if</b> (!<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="t t">String</a>.<a href="@0@mscorlib/A.html#23a8597f842071f4" class="i method">IsNullOrEmpty</a>(<span class="r41 r">name</span>))
                {
                    <b>return</b> <span class="r41 r">name</span>;
                }
            }
 
            <b>return</b> <span class="r38 r">field</span>.<a href="@0@mscorlib/A.html#aa4f112f79364b6e" class="i property">Name</a>;
        }
    }
}
</pre></td></tr></table></div></body></html>
