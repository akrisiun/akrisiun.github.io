<!DOCTYPE html>
<html><head><title>ModelMetadata.cs</title><link rel="stylesheet" href="../styles.css"><script src="../scripts.js"></script></head>
<body class="cB" onload="i(475);"><div class="dH">
<table style="width: 100%">
<tr><td>File: <a id="filePath" class="blueLink" href="/#System.Web.Mvc/ModelMetadata.cs" target="_top">ModelMetadata.cs</a><br/></td><td></td></tr>
<tr><td>Project: <a id="projectPath" class="blueLink" href="/#System.Web.Mvc" target="_top">..\Mvc\src\System.Web.Mvc\System.Web.Mvc.csproj</a> (System.Web.Mvc)</td><td></td></tr>
</table>
</div>
<div class="cz"><table class="tb" cellpadding="0" cellspacing="0"><tr><td valign="top" align="right"><pre id="ln"></pre></td><td valign="top" align="left"><pre id="code">
<span class="c">// Copyright (c) Microsoft Open Technologies, Inc. All rights reserved. See License.txt in the project root for license information.</span>
 
<b>using</b> <span class="i n">System</span>.<span class="i n">Collections</span>.<span class="i n">Generic</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Collections</span>.<span class="i n">ObjectModel</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">ComponentModel</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Diagnostics</span>.<span class="i n">CodeAnalysis</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Diagnostics</span>.<span class="i n">Contracts</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Globalization</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Linq</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Linq</span>.<span class="i n">Expressions</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Reflection</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Web</span>.<span class="i n">Mvc</span>.<span class="i n">ExpressionUtil</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Web</span>.<span class="i n">Mvc</span>.<span class="i n">Properties</span>;
 
<b>namespace</b> <span class="i n">System</span>.<span class="i n">Web</span>.<span class="i n">Mvc</span>
{
    <b>public class</b> <a id="9f822c3699e92a04" href="R/9f822c3699e92a04.html" target="n" data-glyph="0,0" class="t t">ModelMetadata</a>
    {
        <b>public const int</b> <a id="2879ed01bb7a04c6" href="R/2879ed01bb7a04c6.html" target="n" data-glyph="6,1" class="i field">DefaultOrder</a> = 10000;
 
        <b>private readonly</b> <a href="@0@mscorlib/A.html#3d00eeab9feb80f3" class="t t">Type</a> <a id="17d7a4eb312d6749" href="R/17d7a4eb312d6749.html" target="n" data-glyph="46,1" class="i field">_containerType</a>;
        <b>private readonly</b> <a href="@0@mscorlib/A.html#3d00eeab9feb80f3" class="t t">Type</a> <a id="bade7194c258b02b" href="R/bade7194c258b02b.html" target="n" data-glyph="46,1" class="i field">_modelType</a>;
        <b>private readonly string</b> <a id="49060aabf7c25eb0" href="R/49060aabf7c25eb0.html" target="n" data-glyph="46,1" class="i field">_propertyName</a>;
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Explicit backing store for the things we want initialized by default, so don&#39;t have to call</span>
        <span class="c">///</span><span class="c"> the protected virtual setters of an auto-generated property</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <b>private</b> <a href="@0@mscorlib/A.html#d3599058f8d79be0" class="t t">Dictionary</a>&lt;<b>string</b>, <b>object</b>&gt; <a id="4c3da33b78b177f0" href="R/4c3da33b78b177f0.html" target="n" data-glyph="46,1" class="i field">_additionalValues</a> = <b>new</b> <a href="@0@mscorlib/A.html#05d4a216235a779c" class="t constructor">Dictionary</a>&lt;<b>string</b>, <b>object</b>&gt;(<a href="@0@mscorlib/A.html#a1c3d85bbf4ae20e" class="t t">StringComparer</a>.<a href="@0@mscorlib/A.html#59b9c33842417944" class="i property">OrdinalIgnoreCase</a>);
        <b>private bool</b> <a id="9484a3c6de3d028a" href="R/9484a3c6de3d028a.html" target="n" data-glyph="46,1" class="i field">_convertEmptyStringToNull</a> = <b>true</b>;
        <b>private bool</b> <a id="efcd3a64f3284bd4" href="R/efcd3a64f3284bd4.html" target="n" data-glyph="46,1" class="i field">_htmlEncode</a> = <b>true</b>;
        <b>private bool</b> <a id="a136252fdbc49c1d" href="R/a136252fdbc49c1d.html" target="n" data-glyph="46,1" class="i field">_isRequired</a>;
        <b>private object</b> <a id="7ed05fe28fe28abe" href="R/7ed05fe28fe28abe.html" target="n" data-glyph="46,1" class="i field">_model</a>;
        <b>private</b> <a href="@0@mscorlib/A.html#87d60abb7092d5a4" class="t t">Func</a>&lt;<b>object</b>&gt; <a id="052781d67deb8878" href="R/052781d67deb8878.html" target="n" data-glyph="46,1" class="i field">_modelAccessor</a>;
        <b>private int</b> <a id="cb39ee1de1eeeefb" href="R/cb39ee1de1eeeefb.html" target="n" data-glyph="46,1" class="i field">_order</a> = <a href="#2879ed01bb7a04c6" class="i field">DefaultOrder</a>;
        <b>private</b> <a href="@0@mscorlib/A.html#3acf01620172c7f0" class="t t">IEnumerable</a>&lt;<a href="#9f822c3699e92a04" class="t t">ModelMetadata</a>&gt; <a id="8dab81282da5185c" href="R/8dab81282da5185c.html" target="n" data-glyph="46,1" class="i field">_properties</a>;
        <b>private</b> <a href="#9f822c3699e92a04" class="t t">ModelMetadata</a>[] <a id="b60505413ed11d10" href="R/b60505413ed11d10.html" target="n" data-glyph="46,1" class="i field">_propertiesInternal</a>;
        <b>private</b> <a href="@0@mscorlib/A.html#3d00eeab9feb80f3" class="t t">Type</a> <a id="bc25d77e664a2c4a" href="R/bc25d77e664a2c4a.html" target="n" data-glyph="46,1" class="i field">_realModelType</a>;
        <b>private bool</b> <a id="de3bbd253bac409d" href="R/de3bbd253bac409d.html" target="n" data-glyph="46,1" class="i field">_requestValidationEnabled</a> = <b>true</b>;
        <b>private bool</b> <a id="454647768e11bd6c" href="R/454647768e11bd6c.html" target="n" data-glyph="46,1" class="i field">_showForDisplay</a> = <b>true</b>;
        <b>private bool</b> <a id="81ded5309bd3de31" href="R/81ded5309bd3de31.html" target="n" data-glyph="46,1" class="i field">_showForEdit</a> = <b>true</b>;
        <b>private string</b> <a id="4007b780d7a109f8" href="R/4007b780d7a109f8.html" target="n" data-glyph="46,1" class="i field">_simpleDisplayText</a>;
 
        <b>public</b> <a id="0bc04937580d5d0e" href="R/0bc04937580d5d0e.html" target="n" data-glyph="72,1" class="i constructor">ModelMetadata</a>(<a href="ModelMetadataProvider.cs.html#ba9bde1540c6bcc0" class="t t">ModelMetadataProvider</a> <span id="r0 rd" class="r0 r">provider</span>, <a href="@0@mscorlib/A.html#3d00eeab9feb80f3" class="t t">Type</a> <span id="r1 rd" class="r1 r">containerType</span>, <a href="@0@mscorlib/A.html#87d60abb7092d5a4" class="t t">Func</a>&lt;<b>object</b>&gt; <span id="r2 rd" class="r2 r">modelAccessor</span>, <a href="@0@mscorlib/A.html#3d00eeab9feb80f3" class="t t">Type</a> <span id="r3 rd" class="r3 r">modelType</span>, <b>string</b> <span id="r4 rd" class="r4 r">propertyName</span>)
        {
            <b>if</b> (<span class="r0 r">provider</span> == <b>null</b>)
            {
                <b>throw</b> <b>new</b> <a href="@0@mscorlib/A.html#8314938388254d5a" class="t constructor">ArgumentNullException</a>(<span class="s">&quot;provider&quot;</span>);
            }
            <b>if</b> (<span class="r3 r">modelType</span> == <b>null</b>)
            {
                <b>throw</b> <b>new</b> <a href="@0@mscorlib/A.html#8314938388254d5a" class="t constructor">ArgumentNullException</a>(<span class="s">&quot;modelType&quot;</span>);
            }
 
            <a href="#991fd4b2544009d0" class="i property">Provider</a> = <span class="r0 r">provider</span>;
 
            <a href="#17d7a4eb312d6749" class="i field">_containerType</a> = <span class="r1 r">containerType</span>;
            <a href="#a136252fdbc49c1d" class="i field">_isRequired</a> = !<a href="TypeHelpers.cs.html#b558ee72f04a4b54" class="t t">TypeHelpers</a>.<a href="TypeHelpers.cs.html#a7fe8ec42f44c82b" class="i method">TypeAllowsNullValue</a>(<span class="r3 r">modelType</span>);
            <a href="#052781d67deb8878" class="i field">_modelAccessor</a> = <span class="r2 r">modelAccessor</span>;
            <a href="#bade7194c258b02b" class="i field">_modelType</a> = <span class="r3 r">modelType</span>;
            <a href="#49060aabf7c25eb0" class="i field">_propertyName</a> = <span class="r4 r">propertyName</span>;
        }
 
        <b>public virtual</b> <a href="@0@mscorlib/A.html#d3599058f8d79be0" class="t t">Dictionary</a>&lt;<b>string</b>, <b>object</b>&gt; <a id="27da0170e32b56d9" href="R/27da0170e32b56d9.html" target="n" data-glyph="102,1" class="i property">AdditionalValues</a>
        {
            <b>get</b> { <b>return</b> <a href="#4c3da33b78b177f0" class="i field">_additionalValues</a>; }
        }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> A reference to the model&#39;s container object. Will be non-null if the model represents a property.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <b>public object</b> <a id="d163178decd111ce" href="R/d163178decd111ce.html" target="n" data-glyph="102,1" class="i property">Container</a> { <b>get</b>; <b>set</b>; }
 
        <b>public</b> <a href="@0@mscorlib/A.html#3d00eeab9feb80f3" class="t t">Type</a> <a id="bd0d21c822864294" href="R/bd0d21c822864294.html" target="n" data-glyph="102,1" class="i property">ContainerType</a>
        {
            <b>get</b> { <b>return</b> <a href="#17d7a4eb312d6749" class="i field">_containerType</a>; }
        }
 
        <b>public virtual bool</b> <a id="6d26ade89e4d3e0c" href="R/6d26ade89e4d3e0c.html" target="n" data-glyph="102,1" class="i property">ConvertEmptyStringToNull</a>
        {
            <b>get</b> { <b>return</b> <a href="#9484a3c6de3d028a" class="i field">_convertEmptyStringToNull</a>; }
            <b>set</b> { <a href="#9484a3c6de3d028a" class="i field">_convertEmptyStringToNull</a> = <b>value</b>; }
        }
 
        <b>public virtual string</b> <a id="99b720252ded8360" href="R/99b720252ded8360.html" target="n" data-glyph="102,1" class="i property">DataTypeName</a> { <b>get</b>; <b>set</b>; }
 
        <b>public virtual string</b> <a id="eb2712091266e3c3" href="R/eb2712091266e3c3.html" target="n" data-glyph="102,1" class="i property">Description</a> { <b>get</b>; <b>set</b>; }
 
        <b>public virtual string</b> <a id="b3e5e8717cb83457" href="R/b3e5e8717cb83457.html" target="n" data-glyph="102,1" class="i property">DisplayFormatString</a> { <b>get</b>; <b>set</b>; }
 
        [<a href="@0@mscorlib/A.html#5e00de6576fb9ce7" class="t constructor">SuppressMessage</a>(<span class="s">&quot;Microsoft.Naming&quot;</span>, <span class="s">&quot;CA1721:PropertyNamesShouldNotMatchGetMethods&quot;</span>, <a href="@0@mscorlib/A.html#ce02a652a479502a" class="i property">Justification</a> = <span class="s">&quot;The method is a delegating helper to choose among multiple property values&quot;</span>)]
        <b>public virtual string</b> <a id="51821a047ac715bf" href="R/51821a047ac715bf.html" target="n" data-glyph="102,1" class="i property">DisplayName</a> { <b>get</b>; <b>set</b>; }
 
        <b>public virtual string</b> <a id="7aef49ce718485e2" href="R/7aef49ce718485e2.html" target="n" data-glyph="102,1" class="i property">EditFormatString</a> { <b>get</b>; <b>set</b>; }
 
        <b>internal virtual bool</b> <a id="26de1177be8ca940" href="R/26de1177be8ca940.html" target="n" data-glyph="104,1" class="i property">HasNonDefaultEditFormat</a> { <b>get</b>; <b>set</b>; }
 
        <b>public virtual bool</b> <a id="bc0e355f6960a348" href="R/bc0e355f6960a348.html" target="n" data-glyph="102,1" class="i property">HideSurroundingHtml</a> { <b>get</b>; <b>set</b>; }
 
        <b>public virtual bool</b> <a id="8a98c28e7bfc19f2" href="R/8a98c28e7bfc19f2.html" target="n" data-glyph="102,1" class="i property">HtmlEncode</a>
        {
            <b>get</b> { <b>return</b> <a href="#efcd3a64f3284bd4" class="i field">_htmlEncode</a>; }
            <b>set</b> { <a href="#efcd3a64f3284bd4" class="i field">_htmlEncode</a> = <b>value</b>; }
        }
 
        <b>public virtual bool</b> <a id="c94fe2e2dde60c8c" href="R/c94fe2e2dde60c8c.html" target="n" data-glyph="102,1" class="i property">IsComplexType</a>
        {
            <b>get</b> { <b>return</b> !(<a href="@0@System/A.html#7a0aedc986512dd3" class="t t">TypeDescriptor</a>.<a href="@0@System/A.html#977adff822336d07" class="i method">GetConverter</a>(<a href="#85ec391405d56c1f" class="i property">ModelType</a>).<a href="@0@System/A.html#24761470253af960" class="i method">CanConvertFrom</a>(<b>typeof</b>(<b>string</b>))); }
        }
 
        <b>public bool</b> <a id="038a3a89cf834a4e" href="R/038a3a89cf834a4e.html" target="n" data-glyph="102,1" class="i property">IsNullableValueType</a>
        {
            <b>get</b> { <b>return</b> <a href="TypeHelpers.cs.html#b558ee72f04a4b54" class="t t">TypeHelpers</a>.<a href="TypeHelpers.cs.html#add1dbe22b3b9366" class="i method">IsNullableValueType</a>(<a href="#85ec391405d56c1f" class="i property">ModelType</a>); }
        }
 
        <b>public virtual bool</b> <a id="44c802065777d094" href="R/44c802065777d094.html" target="n" data-glyph="102,1" class="i property">IsReadOnly</a> { <b>get</b>; <b>set</b>; }
 
        <b>public virtual bool</b> <a id="fd2f48b4d5f492de" href="R/fd2f48b4d5f492de.html" target="n" data-glyph="102,1" class="i property">IsRequired</a>
        {
            <b>get</b> { <b>return</b> <a href="#a136252fdbc49c1d" class="i field">_isRequired</a>; }
            <b>set</b> { <a href="#a136252fdbc49c1d" class="i field">_isRequired</a> = <b>value</b>; }
        }
 
        <b>public object</b> <a id="702e9529d4cd753c" href="R/702e9529d4cd753c.html" target="n" data-glyph="102,1" class="i property">Model</a>
        {
            <b>get</b>
            {
                <b>if</b> (<a href="#052781d67deb8878" class="i field">_modelAccessor</a> != <b>null</b>)
                {
                    <a href="#7ed05fe28fe28abe" class="i field">_model</a> = <a href="#052781d67deb8878" class="i field">_modelAccessor</a>();
                    <a href="#052781d67deb8878" class="i field">_modelAccessor</a> = <b>null</b>;
                }
                <b>return</b> <a href="#7ed05fe28fe28abe" class="i field">_model</a>;
            }
            <b>set</b>
            {
                <a href="#7ed05fe28fe28abe" class="i field">_model</a> = <b>value</b>;
                <a href="#052781d67deb8878" class="i field">_modelAccessor</a> = <b>null</b>;
                <a href="#8dab81282da5185c" class="i field">_properties</a> = <b>null</b>;
                <a href="#bc25d77e664a2c4a" class="i field">_realModelType</a> = <b>null</b>;
            }
        }
 
        <b>public</b> <a href="@0@mscorlib/A.html#3d00eeab9feb80f3" class="t t">Type</a> <a id="85ec391405d56c1f" href="R/85ec391405d56c1f.html" target="n" data-glyph="102,1" class="i property">ModelType</a>
        {
            <b>get</b> { <b>return</b> <a href="#bade7194c258b02b" class="i field">_modelType</a>; }
        }
 
        <b>public virtual string</b> <a id="a3103c2f1e6fb771" href="R/a3103c2f1e6fb771.html" target="n" data-glyph="102,1" class="i property">NullDisplayText</a> { <b>get</b>; <b>set</b>; }
 
        <b>public virtual int</b> <a id="da1407033be71f5d" href="R/da1407033be71f5d.html" target="n" data-glyph="102,1" class="i property">Order</a>
        {
            <b>get</b> { <b>return</b> <a href="#cb39ee1de1eeeefb" class="i field">_order</a>; }
            <b>set</b> { <a href="#cb39ee1de1eeeefb" class="i field">_order</a> = <b>value</b>; }
        }
 
        <b>public virtual</b> <a href="@0@mscorlib/A.html#3acf01620172c7f0" class="t t">IEnumerable</a>&lt;<a href="#9f822c3699e92a04" class="t t">ModelMetadata</a>&gt; <a id="88a3d436a17f4aa9" href="R/88a3d436a17f4aa9.html" target="n" data-glyph="102,1" class="i property">Properties</a>
        {
            <b>get</b>
            {
                <b>if</b> (<a href="#8dab81282da5185c" class="i field">_properties</a> == <b>null</b>)
                {
                    <a href="@0@mscorlib/A.html#3acf01620172c7f0" class="t t">IEnumerable</a>&lt;<a href="#9f822c3699e92a04" class="t t">ModelMetadata</a>&gt; <span id="r5 rd" class="r5 r">originalProperties</span> = <a href="#991fd4b2544009d0" class="i property">Provider</a>.<a href="ModelMetadataProvider.cs.html#aee94234438b3b70" class="i method">GetMetadataForProperties</a>(<a href="#702e9529d4cd753c" class="i property">Model</a>, <a href="#8118d9de5c969c5d" class="i property">RealModelType</a>);
                    <span class="c">// This will be returned as a copied out array in the common case, so reuse the returned array for performance.</span>
                    <a href="#b60505413ed11d10" class="i field">_propertiesInternal</a> = <a href="#3531564b8c955314" class="i method">SortProperties</a>(<span class="r5 r">originalProperties</span>.<a href="/System.Web.WebPages/A.html#3feade92d37bc3be" class="i method">AsArray</a>());
                    <a href="#8dab81282da5185c" class="i field">_properties</a> = <b>new</b> <a href="@0@mscorlib/A.html#64e45c8a9b38b1c2" class="t constructor">ReadOnlyCollection</a>&lt;<a href="#9f822c3699e92a04" class="t t">ModelMetadata</a>&gt;(<a href="#b60505413ed11d10" class="i field">_propertiesInternal</a>);
                }
                <b>return</b> <a href="#8dab81282da5185c" class="i field">_properties</a>;
            }
        }
 
        <b>internal</b> <a href="#9f822c3699e92a04" class="t t">ModelMetadata</a>[] <a id="d9726b75b89d52e3" href="R/d9726b75b89d52e3.html" target="n" data-glyph="104,1" class="i property">PropertiesAsArray</a> 
        {
            <b>get</b>
            {
                <a href="@0@mscorlib/A.html#3acf01620172c7f0" class="t t">IEnumerable</a>&lt;<a href="#9f822c3699e92a04" class="t t">ModelMetadata</a>&gt; <span id="r6 rd" class="r6 r">virtualProperties</span> = <a href="#88a3d436a17f4aa9" class="i property">Properties</a>;
                <b>if</b> (<a href="@0@mscorlib/A.html#d9262ceecc1719ab" class="t t">Object</a>.<a href="@0@mscorlib/A.html#4d607d6d56a93c7e" class="i method">ReferenceEquals</a>(<span class="r6 r">virtualProperties</span>, <a href="#8dab81282da5185c" class="i field">_properties</a>))
                {
                    <a href="@0@mscorlib/A.html#c575dbe300e57438" class="t t">Contract</a>.<a href="@0@mscorlib/A.html#e87e73b73368f052" class="i method">Assert</a>(<a href="#b60505413ed11d10" class="i field">_propertiesInternal</a> != <b>null</b>);
                    <b>return</b> <a href="#b60505413ed11d10" class="i field">_propertiesInternal</a>;
                }
                <b>return</b> <span class="r6 r">virtualProperties</span>.<a href="/System.Web.WebPages/A.html#3feade92d37bc3be" class="i method">AsArray</a>();
            }
        }
 
        <b>public string</b> <a id="01f848aa6c0ffb8f" href="R/01f848aa6c0ffb8f.html" target="n" data-glyph="102,1" class="i property">PropertyName</a>
        {
            <b>get</b> { <b>return</b> <a href="#49060aabf7c25eb0" class="i field">_propertyName</a>; }
        }
 
        <b>protected</b> <a href="ModelMetadataProvider.cs.html#ba9bde1540c6bcc0" class="t t">ModelMetadataProvider</a> <a id="991fd4b2544009d0" href="R/991fd4b2544009d0.html" target="n" data-glyph="105,1" class="i property">Provider</a> { <b>get</b>; <b>set</b>; }
 
        <b>internal</b> <a href="@0@mscorlib/A.html#3d00eeab9feb80f3" class="t t">Type</a> <a id="8118d9de5c969c5d" href="R/8118d9de5c969c5d.html" target="n" data-glyph="104,1" class="i property">RealModelType</a>
        {
            <b>get</b>
            {
                <b>if</b> (<a href="#bc25d77e664a2c4a" class="i field">_realModelType</a> == <b>null</b>)
                {
                    <a href="#bc25d77e664a2c4a" class="i field">_realModelType</a> = <a href="#85ec391405d56c1f" class="i property">ModelType</a>;
 
                    <span class="c">// Don&#39;t call GetType() if the model is Nullable&lt;T&gt;, because it will</span>
                    <span class="c">// turn Nullable&lt;T&gt; into T for non-null values</span>
                    <b>if</b> (<a href="#702e9529d4cd753c" class="i property">Model</a> != <b>null</b> &amp;&amp; !<a href="TypeHelpers.cs.html#b558ee72f04a4b54" class="t t">TypeHelpers</a>.<a href="TypeHelpers.cs.html#add1dbe22b3b9366" class="i method">IsNullableValueType</a>(<a href="#85ec391405d56c1f" class="i property">ModelType</a>))
                    {
                        <a href="#bc25d77e664a2c4a" class="i field">_realModelType</a> = <a href="#702e9529d4cd753c" class="i property">Model</a>.<a href="@0@mscorlib/A.html#4d73eb225aef8a61" class="i method">GetType</a>();
                    }
                }
 
                <b>return</b> <a href="#bc25d77e664a2c4a" class="i field">_realModelType</a>;
            }
        }
 
        <b>public virtual bool</b> <a id="ec97c894f3e84274" href="R/ec97c894f3e84274.html" target="n" data-glyph="102,1" class="i property">RequestValidationEnabled</a>
        {
            <b>get</b> { <b>return</b> <a href="#de3bbd253bac409d" class="i field">_requestValidationEnabled</a>; }
            <b>set</b> { <a href="#de3bbd253bac409d" class="i field">_requestValidationEnabled</a> = <b>value</b>; }
        }
 
        <b>public virtual string</b> <a id="967a795a30c49e4f" href="R/967a795a30c49e4f.html" target="n" data-glyph="102,1" class="i property">ShortDisplayName</a> { <b>get</b>; <b>set</b>; }
 
        <b>public virtual bool</b> <a id="e71a32b59d6516c8" href="R/e71a32b59d6516c8.html" target="n" data-glyph="102,1" class="i property">ShowForDisplay</a>
        {
            <b>get</b> { <b>return</b> <a href="#454647768e11bd6c" class="i field">_showForDisplay</a>; }
            <b>set</b> { <a href="#454647768e11bd6c" class="i field">_showForDisplay</a> = <b>value</b>; }
        }
 
        <b>public virtual bool</b> <a id="a8ccd6baea184901" href="R/a8ccd6baea184901.html" target="n" data-glyph="102,1" class="i property">ShowForEdit</a>
        {
            <b>get</b> { <b>return</b> <a href="#81ded5309bd3de31" class="i field">_showForEdit</a>; }
            <b>set</b> { <a href="#81ded5309bd3de31" class="i field">_showForEdit</a> = <b>value</b>; }
        }
 
        [<a href="@0@mscorlib/A.html#5e00de6576fb9ce7" class="t constructor">SuppressMessage</a>(<span class="s">&quot;Microsoft.Naming&quot;</span>, <span class="s">&quot;CA1721:PropertyNamesShouldNotMatchGetMethods&quot;</span>, <a href="@0@mscorlib/A.html#ce02a652a479502a" class="i property">Justification</a> = <span class="s">&quot;This property delegates to the method when the user has not yet set a simple display text value.&quot;</span>)]
        <b>public virtual string</b> <a id="51713915946477a1" href="R/51713915946477a1.html" target="n" data-glyph="102,1" class="i property">SimpleDisplayText</a>
        {
            <b>get</b>
            {
                <b>if</b> (<a href="#4007b780d7a109f8" class="i field">_simpleDisplayText</a> == <b>null</b>)
                {
                    <a href="#4007b780d7a109f8" class="i field">_simpleDisplayText</a> = <a href="#bedd6cb5fa169d7a" class="i method">GetSimpleDisplayText</a>();
                }
                <b>return</b> <a href="#4007b780d7a109f8" class="i field">_simpleDisplayText</a>;
            }
            <b>set</b> { <a href="#4007b780d7a109f8" class="i field">_simpleDisplayText</a> = <b>value</b>; }
        }
 
        <b>public virtual string</b> <a id="938b4e980c3c54ed" href="R/938b4e980c3c54ed.html" target="n" data-glyph="102,1" class="i property">TemplateHint</a> { <b>get</b>; <b>set</b>; }
 
        <b>public virtual string</b> <a id="35507c6fb14b7428" href="R/35507c6fb14b7428.html" target="n" data-glyph="102,1" class="i property">Watermark</a> { <b>get</b>; <b>set</b>; }
 
        [<a href="@0@mscorlib/A.html#5e00de6576fb9ce7" class="t constructor">SuppressMessage</a>(<span class="s">&quot;Microsoft.Design&quot;</span>, <span class="s">&quot;CA1006:DoNotNestGenericTypesInMemberSignatures&quot;</span>, <a href="@0@mscorlib/A.html#ce02a652a479502a" class="i property">Justification</a> = <span class="s">&quot;This is an appropriate nesting of generic types&quot;</span>)]
        <b>public static</b> <a href="#9f822c3699e92a04" class="t t">ModelMetadata</a> <a id="04714d2217801bd5" href="R/04714d2217801bd5.html" target="n" data-glyph="72,1" class="i method">FromLambdaExpression</a>&lt;<span id="r7 rd t" class="r7 r t">TParameter</span>, <span id="r8 rd t" class="r8 r t">TValue</span>&gt;(<a href="@0@System.Core/A.html#51d6d604b8c53dc8" class="t t">Expression</a>&lt;<a href="@0@mscorlib/A.html#7a86aba051da82dd" class="t t">Func</a>&lt;<span class="r7 r t">TParameter</span>, <span class="r8 r t">TValue</span>&gt;&gt; <span id="r9 rd" class="r9 r">expression</span>,
                                                                             <a href="ViewDataDictionaryOfTModel.cs.html#891bc5c7f47696ef" class="t t">ViewDataDictionary</a>&lt;<span class="r7 r t">TParameter</span>&gt; <span id="r10 rd" class="r10 r">viewData</span>)
        {
            <b>return</b> <a href="#2d96b297dfee1d00" class="i method">FromLambdaExpression</a>(<span class="r9 r">expression</span>, <span class="r10 r">viewData</span>, <span class="r11 r">metadataProvider</span>: <b>null</b>);
        }
 
        <b>internal static</b> <a href="#9f822c3699e92a04" class="t t">ModelMetadata</a> <a id="2d96b297dfee1d00" href="R/2d96b297dfee1d00.html" target="n" data-glyph="74,1" class="i method">FromLambdaExpression</a>&lt;<span id="r12 rd t" class="r12 r t">TParameter</span>, <span id="r13 rd t" class="r13 r t">TValue</span>&gt;(<a href="@0@System.Core/A.html#51d6d604b8c53dc8" class="t t">Expression</a>&lt;<a href="@0@mscorlib/A.html#7a86aba051da82dd" class="t t">Func</a>&lt;<span class="r12 r t">TParameter</span>, <span class="r13 r t">TValue</span>&gt;&gt; <span id="r14 rd" class="r14 r">expression</span>,
                                                                               <a href="ViewDataDictionaryOfTModel.cs.html#891bc5c7f47696ef" class="t t">ViewDataDictionary</a>&lt;<span class="r12 r t">TParameter</span>&gt; <span id="r15 rd" class="r15 r">viewData</span>,
                                                                               <a href="ModelMetadataProvider.cs.html#ba9bde1540c6bcc0" class="t t">ModelMetadataProvider</a> <span id="r16 rd" class="r16 r">metadataProvider</span>)
        {
            <b>if</b> (<span class="r14 r">expression</span> == <b>null</b>)
            {
                <b>throw</b> <b>new</b> <a href="@0@mscorlib/A.html#8314938388254d5a" class="t constructor">ArgumentNullException</a>(<span class="s">&quot;expression&quot;</span>);
            }
            <b>if</b> (<span class="r15 r">viewData</span> == <b>null</b>)
            {
                <b>throw</b> <b>new</b> <a href="@0@mscorlib/A.html#8314938388254d5a" class="t constructor">ArgumentNullException</a>(<span class="s">&quot;viewData&quot;</span>);
            }
 
            <b>string</b> <span id="r17 rd" class="r17 r">propertyName</span> = <b>null</b>;
            <a href="@0@mscorlib/A.html#3d00eeab9feb80f3" class="t t">Type</a> <span id="r18 rd" class="r18 r">containerType</span> = <b>null</b>;
            <b>bool</b> <span id="r19 rd" class="r19 r">legalExpression</span> = <b>false</b>;
 
            <span class="c">// Need to verify the expression is valid; it needs to at least end in something</span>
            <span class="c">// that we can convert to a meaningful string for model binding purposes</span>
 
            <b>switch</b> (<span class="r14 r">expression</span>.<a href="@0@System.Core/A.html#b82080a2b9c70503" class="i property">Body</a>.<a href="@0@System.Core/A.html#70a7ede4faadee85" class="i property">NodeType</a>)
            {
                <b>case</b> <a href="@0@System.Core/A.html#2b72e9fccb3368b2" class="t t">ExpressionType</a>.<a href="@0@System.Core/A.html#a3504aa95ec9c7f5" class="i field">ArrayIndex</a>:
                    <span class="c">// ArrayIndex always means a single-dimensional indexer; multi-dimensional indexer is a method call to Get()</span>
                    <span class="r19 r">legalExpression</span> = <b>true</b>;
                    <b>break</b>;
 
                <b>case</b> <a href="@0@System.Core/A.html#2b72e9fccb3368b2" class="t t">ExpressionType</a>.<a href="@0@System.Core/A.html#cc39ea008196a2da" class="i field">Call</a>:
                    <span class="c">// Only legal method call is a single argument indexer/DefaultMember call</span>
                    <span class="r19 r">legalExpression</span> = <a href="ExpressionHelper.cs.html#f66b732f0d67d127" class="t t">ExpressionHelper</a>.<a href="ExpressionHelper.cs.html#5a4f702e39095cdb" class="i method">IsSingleArgumentIndexer</a>(<span class="r14 r">expression</span>.<a href="@0@System.Core/A.html#b82080a2b9c70503" class="i property">Body</a>);
                    <b>break</b>;
 
                <b>case</b> <a href="@0@System.Core/A.html#2b72e9fccb3368b2" class="t t">ExpressionType</a>.<a href="@0@System.Core/A.html#7527ea1654c9680e" class="i field">MemberAccess</a>:
                    <span class="c">// Property/field access is always legal</span>
                    <a href="@0@System.Core/A.html#8760a057e74485a8" class="t t">MemberExpression</a> <span id="r20 rd" class="r20 r">memberExpression</span> = (<a href="@0@System.Core/A.html#8760a057e74485a8" class="t t">MemberExpression</a>)<span class="r14 r">expression</span>.<a href="@0@System.Core/A.html#b82080a2b9c70503" class="i property">Body</a>;
                    <span class="r17 r">propertyName</span> = <span class="r20 r">memberExpression</span>.<a href="@0@System.Core/A.html#464f3eb0ff158aae" class="i property">Member</a> <b>is</b> <a href="@0@mscorlib/A.html#f3f0ea5f89a8f162" class="t t">PropertyInfo</a> ? <span class="r20 r">memberExpression</span>.<a href="@0@System.Core/A.html#464f3eb0ff158aae" class="i property">Member</a>.<a href="@0@mscorlib/A.html#aa4f112f79364b6e" class="i property">Name</a> : <b>null</b>;
                    <span class="r18 r">containerType</span> = <span class="r20 r">memberExpression</span>.<a href="@0@System.Core/A.html#68eee84426991159" class="i property">Expression</a>.<a href="@0@System.Core/A.html#575f8f01a8a61fc4" class="i property">Type</a>;
                    <span class="r19 r">legalExpression</span> = <b>true</b>;
                    <b>break</b>;
 
                <b>case</b> <a href="@0@System.Core/A.html#2b72e9fccb3368b2" class="t t">ExpressionType</a>.<a href="@0@System.Core/A.html#85c31a1a1d7794d0" class="i field">Parameter</a>:
                    <span class="c">// Parameter expression means &quot;model =&gt; model&quot;, so we delegate to FromModel</span>
                    <b>return</b> <a href="#eaa895d8e4a6c74f" class="i method">FromModel</a>(<span class="r15 r">viewData</span>, <span class="r16 r">metadataProvider</span>);
            }
 
            <b>if</b> (!<span class="r19 r">legalExpression</span>)
            {
                <b>throw</b> <b>new</b> <a href="@0@mscorlib/A.html#265d72f49e915224" class="t constructor">InvalidOperationException</a>(<a href="Properties/MvcResources.Designer.cs.html#9b6f1e9cbe67d146" class="t t">MvcResources</a>.<a href="Properties/MvcResources.Designer.cs.html#c1ebb23d970686f1" class="i property">TemplateHelpers_TemplateLimitations</a>);
            }
 
            <span class="r12 r t">TParameter</span> <span id="r21 rd" class="r21 r">container</span> = <span class="r15 r">viewData</span>.<a href="ViewDataDictionaryOfTModel.cs.html#4d80ba078b23eadb" class="i property">Model</a>;
            <a href="@0@mscorlib/A.html#87d60abb7092d5a4" class="t t">Func</a>&lt;<b>object</b>&gt; <span id="r22 rd" class="r22 r">modelAccessor</span> = () =&gt;
            {
                <b>try</b>
                {
                    <b>return</b> <a href="ExpressionUtil/CachedExpressionCompiler.cs.html#cb4104b4f3dca837" class="t t">CachedExpressionCompiler</a>.<a href="ExpressionUtil/CachedExpressionCompiler.cs.html#f7336dbe8b99b3e1" class="i method">Process</a>(<span class="r14 r">expression</span>)(<span class="r21 r">container</span>);
                }
                <b>catch</b> (<a href="@0@mscorlib/A.html#2d739200b2282eb9" class="t t">NullReferenceException</a>)
                {
                    <b>return null</b>;
                }
            };
 
            <b>return</b> <a href="#b98c3c792e1a6b5b" class="i method">GetMetadataFromProvider</a>(<span class="r22 r">modelAccessor</span>, <b>typeof</b>(<span class="r13 r t">TValue</span>), <span class="r17 r">propertyName</span>, <span class="r21 r">container</span>, <span class="r18 r">containerType</span>, <span class="r16 r">metadataProvider</span>);
        }
 
        <b>private static</b> <a href="#9f822c3699e92a04" class="t t">ModelMetadata</a> <a id="eaa895d8e4a6c74f" href="R/eaa895d8e4a6c74f.html" target="n" data-glyph="76,1" class="i method">FromModel</a>(<a href="ViewDataDictionary.cs.html#d437a6ecdb0c13aa" class="t t">ViewDataDictionary</a> <span id="r23 rd" class="r23 r">viewData</span>, <a href="ModelMetadataProvider.cs.html#ba9bde1540c6bcc0" class="t t">ModelMetadataProvider</a> <span id="r24 rd" class="r24 r">metadataProvider</span>)
        {
            <b>return</b> <span class="r23 r">viewData</span>.<a href="ViewDataDictionary.cs.html#e571f93c6e941313" class="i property">ModelMetadata</a> ?? <a href="#b98c3c792e1a6b5b" class="i method">GetMetadataFromProvider</a>(<b>null</b>, <b>typeof</b>(<b>string</b>), <b>null</b>, <b>null</b>, <b>null</b>, <span class="r24 r">metadataProvider</span>);
        }
 
        <b>public static</b> <a href="#9f822c3699e92a04" class="t t">ModelMetadata</a> <a id="3fc9700fd4c3e349" href="R/3fc9700fd4c3e349.html" target="n" data-glyph="72,1" class="i method">FromStringExpression</a>(<b>string</b> <span id="r25 rd" class="r25 r">expression</span>, <a href="ViewDataDictionary.cs.html#d437a6ecdb0c13aa" class="t t">ViewDataDictionary</a> <span id="r26 rd" class="r26 r">viewData</span>)
        {
            <b>return</b> <a href="#2281da8c0fbeb4a3" class="i method">FromStringExpression</a>(<span class="r25 r">expression</span>, <span class="r26 r">viewData</span>, <span class="r27 r">metadataProvider</span>: <b>null</b>);
        }
 
        <b>internal static</b> <a href="#9f822c3699e92a04" class="t t">ModelMetadata</a> <a id="2281da8c0fbeb4a3" href="R/2281da8c0fbeb4a3.html" target="n" data-glyph="74,1" class="i method">FromStringExpression</a>(<b>string</b> <span id="r28 rd" class="r28 r">expression</span>, <a href="ViewDataDictionary.cs.html#d437a6ecdb0c13aa" class="t t">ViewDataDictionary</a> <span id="r29 rd" class="r29 r">viewData</span>, <a href="ModelMetadataProvider.cs.html#ba9bde1540c6bcc0" class="t t">ModelMetadataProvider</a> <span id="r27 rd" class="r27 r">metadataProvider</span>)
        {
            <b>if</b> (<span class="r28 r">expression</span> == <b>null</b>)
            {
                <b>throw</b> <b>new</b> <a href="@0@mscorlib/A.html#8314938388254d5a" class="t constructor">ArgumentNullException</a>(<span class="s">&quot;expression&quot;</span>);
            }
            <b>if</b> (<span class="r29 r">viewData</span> == <b>null</b>)
            {
                <b>throw</b> <b>new</b> <a href="@0@mscorlib/A.html#8314938388254d5a" class="t constructor">ArgumentNullException</a>(<span class="s">&quot;viewData&quot;</span>);
            }
            <b>if</b> (<span class="r28 r">expression</span>.<a href="@0@mscorlib/A.html#e13f5829ef28aa07" class="i property">Length</a> == 0)
            {
                <span class="c">// Empty string really means &quot;model metadata for the current model&quot;</span>
                <b>return</b> <a href="#eaa895d8e4a6c74f" class="i method">FromModel</a>(<span class="r29 r">viewData</span>, <span class="r27 r">metadataProvider</span>);
            }
 
            <a href="ViewDataInfo.cs.html#0a725e916be1b8b1" class="t t">ViewDataInfo</a> <span id="r30 rd" class="r30 r">vdi</span> = <span class="r29 r">viewData</span>.<a href="ViewDataDictionary.cs.html#e685698ba3605f76" class="i method">GetViewDataInfo</a>(<span class="r28 r">expression</span>);
            <b>object</b> <span id="r31 rd" class="r31 r">container</span> = <b>null</b>;
            <a href="@0@mscorlib/A.html#3d00eeab9feb80f3" class="t t">Type</a> <span id="r32 rd" class="r32 r">containerType</span> = <b>null</b>;
            <a href="@0@mscorlib/A.html#3d00eeab9feb80f3" class="t t">Type</a> <span id="r33 rd" class="r33 r">modelType</span> = <b>null</b>;
            <a href="@0@mscorlib/A.html#87d60abb7092d5a4" class="t t">Func</a>&lt;<b>object</b>&gt; <span id="r34 rd" class="r34 r">modelAccessor</span> = <b>null</b>;
            <b>string</b> <span id="r35 rd" class="r35 r">propertyName</span> = <b>null</b>;
 
            <b>if</b> (<span class="r30 r">vdi</span> != <b>null</b>)
            {
                <b>if</b> (<span class="r30 r">vdi</span>.<a href="ViewDataInfo.cs.html#5f0d65b14a136052" class="i property">Container</a> != <b>null</b>)
                {
                    <span class="r31 r">container</span> = <span class="r30 r">vdi</span>.<a href="ViewDataInfo.cs.html#5f0d65b14a136052" class="i property">Container</a>;
                    <span class="r32 r">containerType</span> = <span class="r30 r">vdi</span>.<a href="ViewDataInfo.cs.html#5f0d65b14a136052" class="i property">Container</a>.<a href="@0@mscorlib/A.html#4d73eb225aef8a61" class="i method">GetType</a>();
                }
 
                <span class="r34 r">modelAccessor</span> = () =&gt; <span class="r30 r">vdi</span>.<a href="ViewDataInfo.cs.html#fb5bc5a789c00132" class="i property">Value</a>;
 
                <b>if</b> (<span class="r30 r">vdi</span>.<a href="ViewDataInfo.cs.html#27d1f5441d651d97" class="i property">PropertyDescriptor</a> != <b>null</b>)
                {
                    <span class="r35 r">propertyName</span> = <span class="r30 r">vdi</span>.<a href="ViewDataInfo.cs.html#27d1f5441d651d97" class="i property">PropertyDescriptor</a>.<a href="@0@System/A.html#04b17a133b14e8c6" class="i property">Name</a>;
                    <span class="r33 r">modelType</span> = <span class="r30 r">vdi</span>.<a href="ViewDataInfo.cs.html#27d1f5441d651d97" class="i property">PropertyDescriptor</a>.<a href="@0@System/A.html#39d956f31be85f75" class="i property">PropertyType</a>;
                }
                <b>else if</b> (<span class="r30 r">vdi</span>.<a href="ViewDataInfo.cs.html#fb5bc5a789c00132" class="i property">Value</a> != <b>null</b>)
                {
                    <span class="c">// We only need to delay accessing properties (for LINQ to SQL)</span>
                    <span class="r33 r">modelType</span> = <span class="r30 r">vdi</span>.<a href="ViewDataInfo.cs.html#fb5bc5a789c00132" class="i property">Value</a>.<a href="@0@mscorlib/A.html#4d73eb225aef8a61" class="i method">GetType</a>();
                }
            }
            <b>else if</b> (<span class="r29 r">viewData</span>.<a href="ViewDataDictionary.cs.html#e571f93c6e941313" class="i property">ModelMetadata</a> != <b>null</b>)
            {
                <span class="c">//  Try getting a property from ModelMetadata if we couldn&#39;t find an answer in ViewData</span>
                <a href="#9f822c3699e92a04" class="t t">ModelMetadata</a> <span id="r36 rd" class="r36 r">propertyMetadata</span> = <span class="r29 r">viewData</span>.<a href="ViewDataDictionary.cs.html#e571f93c6e941313" class="i property">ModelMetadata</a>.<a href="#88a3d436a17f4aa9" class="i property">Properties</a>.<a href="@0@System.Core/A.html#e73922753675387a" class="i method">Where</a>(<span id="r37 rd" class="r37 r">p</span> =&gt; <span class="r37 r">p</span>.<a href="#01f848aa6c0ffb8f" class="i property">PropertyName</a> == <span class="r28 r">expression</span>).<a href="@0@System.Core/A.html#8087366974af11d2" class="i method">FirstOrDefault</a>();
                <b>if</b> (<span class="r36 r">propertyMetadata</span> != <b>null</b>)
                {
                    <b>return</b> <span class="r36 r">propertyMetadata</span>;
                }
            }
 
            <b>return</b> <a href="#b98c3c792e1a6b5b" class="i method">GetMetadataFromProvider</a>(<span class="r34 r">modelAccessor</span>, <span class="r33 r">modelType</span> ?? <b>typeof</b>(<b>string</b>), <span class="r35 r">propertyName</span>, <span class="r31 r">container</span>, <span class="r32 r">containerType</span>, <span class="r27 r">metadataProvider</span>);
        }
 
        [<a href="@0@mscorlib/A.html#5e00de6576fb9ce7" class="t constructor">SuppressMessage</a>(<span class="s">&quot;Microsoft.Design&quot;</span>, <span class="s">&quot;CA1024:UsePropertiesWhereAppropriate&quot;</span>, <a href="@0@mscorlib/A.html#ce02a652a479502a" class="i property">Justification</a> = <span class="s">&quot;The method is a delegating helper to choose among multiple property values&quot;</span>)]
        <b>public string</b> <a id="9851789d1edf3c55" href="R/9851789d1edf3c55.html" target="n" data-glyph="72,1" class="i method">GetDisplayName</a>()
        {
            <b>return</b> <a href="#51821a047ac715bf" class="i property">DisplayName</a> ?? <a href="#01f848aa6c0ffb8f" class="i property">PropertyName</a> ?? <a href="#85ec391405d56c1f" class="i property">ModelType</a>.<a href="@0@mscorlib/A.html#aa4f112f79364b6e" class="i property">Name</a>;
        }
 
        <b>private static</b> <a href="#9f822c3699e92a04" class="t t">ModelMetadata</a> <a id="b98c3c792e1a6b5b" href="R/b98c3c792e1a6b5b.html" target="n" data-glyph="76,1" class="i method">GetMetadataFromProvider</a>(<a href="@0@mscorlib/A.html#87d60abb7092d5a4" class="t t">Func</a>&lt;<b>object</b>&gt; <span id="r38 rd" class="r38 r">modelAccessor</span>, <a href="@0@mscorlib/A.html#3d00eeab9feb80f3" class="t t">Type</a> <span id="r39 rd" class="r39 r">modelType</span>, <b>string</b> <span id="r40 rd" class="r40 r">propertyName</span>, <b>object</b> <span id="r41 rd" class="r41 r">container</span>, <a href="@0@mscorlib/A.html#3d00eeab9feb80f3" class="t t">Type</a> <span id="r42 rd" class="r42 r">containerType</span>, <a href="ModelMetadataProvider.cs.html#ba9bde1540c6bcc0" class="t t">ModelMetadataProvider</a> <span id="r43 rd" class="r43 r">metadataProvider</span>)
        {
            <span class="r43 r">metadataProvider</span> = <span class="r43 r">metadataProvider</span> ?? <a href="ModelMetadataProviders.cs.html#0a0eb89054d8bc68" class="t t">ModelMetadataProviders</a>.<a href="ModelMetadataProviders.cs.html#19d9ca40978b1a26" class="i property">Current</a>;
            <b>if</b> (<span class="r42 r">containerType</span> != <b>null</b> &amp;&amp; !<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="t t">String</a>.<a href="@0@mscorlib/A.html#23a8597f842071f4" class="i method">IsNullOrEmpty</a>(<span class="r40 r">propertyName</span>))
            {
                <a href="#9f822c3699e92a04" class="t t">ModelMetadata</a> <span id="r44 rd" class="r44 r">metadata</span> = <span class="r43 r">metadataProvider</span>.<a href="ModelMetadataProvider.cs.html#79de6b906c34e1b5" class="i method">GetMetadataForProperty</a>(<span class="r38 r">modelAccessor</span>, <span class="r42 r">containerType</span>, <span class="r40 r">propertyName</span>);
                <b>if</b> (<span class="r44 r">metadata</span> != <b>null</b>)
                {
                    <span class="r44 r">metadata</span>.<a href="#d163178decd111ce" class="i property">Container</a> = <span class="r41 r">container</span>;
                }
                <b>return</b> <span class="r44 r">metadata</span>;
            }
            <b>return</b> <span class="r43 r">metadataProvider</span>.<a href="ModelMetadataProvider.cs.html#ae97be53914af06c" class="i method">GetMetadataForType</a>(<span class="r38 r">modelAccessor</span>, <span class="r39 r">modelType</span>);
        }
 
        [<a href="@0@mscorlib/A.html#5e00de6576fb9ce7" class="t constructor">SuppressMessage</a>(<span class="s">&quot;Microsoft.Design&quot;</span>, <span class="s">&quot;CA1024:UsePropertiesWhereAppropriate&quot;</span>, <a href="@0@mscorlib/A.html#ce02a652a479502a" class="i property">Justification</a> = <span class="s">&quot;This method is used to resolve the simple display text when it was not explicitly set through other means.&quot;</span>)]
        <b>protected virtual string</b> <a id="bedd6cb5fa169d7a" href="R/bedd6cb5fa169d7a.html" target="n" data-glyph="75,1" class="i method">GetSimpleDisplayText</a>()
        {
            <b>if</b> (<a href="#702e9529d4cd753c" class="i property">Model</a> == <b>null</b>)
            {
                <b>return</b> <a href="#a3103c2f1e6fb771" class="i property">NullDisplayText</a>;
            }
 
            <b>string</b> <span id="r45 rd" class="r45 r">toStringResult</span> = <a href="@0@mscorlib/A.html#fc990bd1275d43d6" class="t t">Convert</a>.<a href="@0@mscorlib/A.html#6a1a2c3ac58e60dd" class="i method">ToString</a>(<a href="#702e9529d4cd753c" class="i property">Model</a>, <a href="@0@mscorlib/A.html#e319c6636909012f" class="t t">CultureInfo</a>.<a href="@0@mscorlib/A.html#1f5907384ac6bb55" class="i property">CurrentCulture</a>);
            <b>if</b> (<span class="r45 r">toStringResult</span> == <b>null</b>)
            {
                <b>return</b> <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="t t">String</a>.<a href="@0@mscorlib/A.html#c9f70a27facb27cf" class="i field">Empty</a>;
            }
 
            <b>if</b> (!<span class="r45 r">toStringResult</span>.<a href="@0@mscorlib/A.html#b98069ccbe2d3960" class="i method">Equals</a>(<a href="#702e9529d4cd753c" class="i property">Model</a>.<a href="@0@mscorlib/A.html#4d73eb225aef8a61" class="i method">GetType</a>().<a href="@0@mscorlib/A.html#976443bb39dc37cd" class="i property">FullName</a>, <a href="@0@mscorlib/A.html#702797def97ecb7c" class="t t">StringComparison</a>.<a href="@0@mscorlib/A.html#87891a6d28c64c9b" class="i field">Ordinal</a>))
            {
                <b>return</b> <span class="r45 r">toStringResult</span>;
            }
 
            <a href="#9f822c3699e92a04" class="t t">ModelMetadata</a> <span id="r46 rd" class="r46 r">firstProperty</span> = <a href="#88a3d436a17f4aa9" class="i property">Properties</a>.<a href="@0@System.Core/A.html#8087366974af11d2" class="i method">FirstOrDefault</a>();
            <b>if</b> (<span class="r46 r">firstProperty</span> == <b>null</b>)
            {
                <b>return</b> <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="t t">String</a>.<a href="@0@mscorlib/A.html#c9f70a27facb27cf" class="i field">Empty</a>;
            }
 
            <b>if</b> (<span class="r46 r">firstProperty</span>.<a href="#702e9529d4cd753c" class="i property">Model</a> == <b>null</b>)
            {
                <b>return</b> <span class="r46 r">firstProperty</span>.<a href="#a3103c2f1e6fb771" class="i property">NullDisplayText</a>;
            }
 
            <b>return</b> <a href="@0@mscorlib/A.html#fc990bd1275d43d6" class="t t">Convert</a>.<a href="@0@mscorlib/A.html#6a1a2c3ac58e60dd" class="i method">ToString</a>(<span class="r46 r">firstProperty</span>.<a href="#702e9529d4cd753c" class="i property">Model</a>, <a href="@0@mscorlib/A.html#e319c6636909012f" class="t t">CultureInfo</a>.<a href="@0@mscorlib/A.html#1f5907384ac6bb55" class="i property">CurrentCulture</a>);
        }
 
        <b>public virtual</b> <a href="@0@mscorlib/A.html#3acf01620172c7f0" class="t t">IEnumerable</a>&lt;<a href="ModelValidator.cs.html#cb61db0d31b5eaba" class="t t">ModelValidator</a>&gt; <a id="b8ea813ccbc5a33e" href="R/b8ea813ccbc5a33e.html" target="n" data-glyph="72,1" class="i method">GetValidators</a>(<a href="ControllerContext.cs.html#2d2ade91d6ccd6fe" class="t t">ControllerContext</a> <span id="r47 rd" class="r47 r">context</span>)
        {
            <b>return</b> <a href="ModelValidatorProviders.cs.html#8969220f710c81c8" class="t t">ModelValidatorProviders</a>.<a href="ModelValidatorProviders.cs.html#f9a3c6431afebbf8" class="i property">Providers</a>.<a href="ModelValidatorProviderCollection.cs.html#55c7329679969cda" class="i method">GetValidators</a>(<a href="#9f822c3699e92a04" class="k">this</a>, <span class="r47 r">context</span>);
        }
 
        <b>private static</b> <a href="#9f822c3699e92a04" class="t t">ModelMetadata</a>[] <a id="3531564b8c955314" href="R/3531564b8c955314.html" target="n" data-glyph="76,1" class="i method">SortProperties</a>(<a href="#9f822c3699e92a04" class="t t">ModelMetadata</a>[] <span id="r48 rd" class="r48 r">properties</span>)
        {
            <span class="c">// Performance-senstive</span>
            <span class="c">// Common case is that properties do not need sorting</span>
            <b>int</b>? <span id="r49 rd" class="r49 r">previousOrder</span> = <b>null</b>;
            <b>bool</b> <span id="r50 rd" class="r50 r">needSort</span> = <b>false</b>;
            <b>for</b> (<b>int</b> <span id="r51 rd" class="r51 r">i</span> = 0; <span class="r51 r">i</span> &lt; <span class="r48 r">properties</span>.<a href="@0@mscorlib/A.html#42e9b7616956cf94" class="i property">Length</a>; <span class="r51 r">i</span>++)
            {
                <a href="#9f822c3699e92a04" class="t t">ModelMetadata</a> <span id="r52 rd" class="r52 r">metadata</span> = <span class="r48 r">properties</span>[<span class="r51 r">i</span>];
                <b>if</b> (<span class="r49 r">previousOrder</span> != <b>null</b> &amp;&amp; <span class="r49 r">previousOrder</span> &gt; <span class="r52 r">metadata</span>.<a href="#da1407033be71f5d" class="i property">Order</a>)
                {
                    <span class="r50 r">needSort</span> = <b>true</b>;
                    <b>break</b>;
                }
                <span class="r49 r">previousOrder</span> = <span class="r52 r">metadata</span>.<a href="#da1407033be71f5d" class="i property">Order</a>;
            }
            <b>if</b> (!<span class="r50 r">needSort</span>)
            {
                <b>return</b> <span class="r48 r">properties</span>;
            }
            <span class="c">// For compatibility the sort must be stable so use OrderBy rather than Array.Sort</span>
            <b>return</b> <span class="r48 r">properties</span>.<a href="@0@System.Core/A.html#e449fbc07f49dc52" class="i method">OrderBy</a>(<span id="r53 rd" class="r53 r">m</span> =&gt; <span class="r53 r">m</span>.<a href="#da1407033be71f5d" class="i property">Order</a>).<a href="@0@System.Core/A.html#783a052330e7d48d" class="i method">ToArray</a>();
        }
    }
}
</pre></td></tr></table></div></body></html>
