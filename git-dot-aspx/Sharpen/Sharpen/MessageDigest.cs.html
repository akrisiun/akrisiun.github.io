<!DOCTYPE html>
<html><head><title>MessageDigest.cs</title><link rel="stylesheet" href="../../styles.css"><script src="../../scripts.js"></script></head>
<body class="cB" onload="i(106);"><div class="dH">
<table style="width: 100%">
<tr><td>File: <a id="filePath" class="blueLink" href="/#Sharpen/Sharpen/MessageDigest.cs" target="_top">Sharpen\MessageDigest.cs</a><br/></td><td></td></tr>
<tr><td>Project: <a id="projectPath" class="blueLink" href="/#Sharpen" target="_top">lib\NGit\Sharpen\Sharpen.csproj</a> (Sharpen)</td><td></td></tr>
</table>
</div>
<div class="cz"><table class="tb" cellpadding="0" cellspacing="0"><tr><td valign="top" align="right"><pre id="ln"></pre></td><td valign="top" align="left"><pre id="code">
<b>namespace</b> <span class="i n">Sharpen</span>
{
	<b>using</b> <span class="i n">System</span>;
	<b>using</b> <span class="i n">System</span>.<span class="i n">IO</span>;
	<b>using</b> <span class="i n">System</span>.<span class="i n">Security</span>.<span class="i n">Cryptography</span>;

	<b>public abstract class</b> <a id="a356dea4cd4a7bb5" href="../R/a356dea4cd4a7bb5.html" target="n" data-glyph="0,0" class="t t">MessageDigest</a>
	{
		<b>protected</b> <a id="86d60b6972e263d7" href="../R/../../0000000000.html" target="n" data-glyph="75,1" class="i constructor">MessageDigest</a> ()
		{
		}
		
		<b>public void</b> <a id="e4091bf0e4af7aa8" href="../R/e4091bf0e4af7aa8.html" target="n" data-glyph="72,1" class="i method">Digest</a> (<b>byte</b>[] <span id="r0 rd" class="r0 r">buffer</span>, <b>int</b> <span id="r1 rd" class="r1 r">o</span>, <b>int</b> <span id="r2 rd" class="r2 r">len</span>)
		{
			<b>byte</b>[] <span id="r3 rd" class="r3 r">d</span> = <a href="#61dc860415e0e84f" class="i method">Digest</a> ();
			<span class="r3 r">d</span>.<a href="@0@mscorlib/A.html#d3c9a3da4e5d9327" class="i method">CopyTo</a> (<span class="r0 r">buffer</span>, <span class="r1 r">o</span>);
		}

		<b>public byte</b>[] <a id="c6d62311768b6ecb" href="../R/c6d62311768b6ecb.html" target="n" data-glyph="72,1" class="i method">Digest</a> (<b>byte</b>[] <span id="r4 rd" class="r4 r">buffer</span>)
		{
			<a href="#a844f6c26c0422b4" class="i method">Update</a> (<span class="r4 r">buffer</span>);
			<b>return</b> <a href="#61dc860415e0e84f" class="i method">Digest</a> ();
		}

		<b>public abstract byte</b>[] <a id="61dc860415e0e84f" href="../R/61dc860415e0e84f.html" target="n" data-glyph="72,1" class="i method">Digest</a> ();
		<b>public abstract int</b> <a id="6dcc23b5af4d5586" href="../R/6dcc23b5af4d5586.html" target="n" data-glyph="72,1" class="i method">GetDigestLength</a> ();
		<b>public static</b> <a href="#a356dea4cd4a7bb5" class="t t">MessageDigest</a> <a id="d18eaa1942f32b31" href="../R/d18eaa1942f32b31.html" target="n" data-glyph="72,1" class="i method">GetInstance</a> (<b>string</b> <span id="r5 rd" class="r5 r">algorithm</span>)
		{
			<b>switch</b> (<span class="r5 r">algorithm</span>.<a href="@0@mscorlib/A.html#0b5a1ee33618e0b3" class="i method">ToLower</a> ()) {
			<b>case</b> <span class="s">&quot;sha-1&quot;</span>:
				<b>return</b> <b>new</b> <a href="#043819d518bdf870" class="t constructor">MessageDigest</a>&lt;<a href="@0@mscorlib/A.html#5d9dbfaea57ea7b8" class="t t">SHA1Managed</a>&gt; ();
			<b>case</b> <span class="s">&quot;md5&quot;</span>:
				<b>return</b> <b>new</b> <a href="#043819d518bdf870" class="t constructor">MessageDigest</a>&lt;<a href="@0@mscorlib/A.html#80152d7eff9b1f70" class="t t">MD5CryptoServiceProvider</a>&gt; ();
			}
			<b>throw</b> <b>new</b> <a href="@0@mscorlib/A.html#3d3c2c03118be4f8" class="t constructor">NotSupportedException</a> (<b>string</b>.<a href="@0@mscorlib/A.html#9d5604d4425b216f" class="i method">Format</a> (<span class="s">&quot;The requested algorithm \&quot;{0}\&quot; is not supported.&quot;</span>, <span class="r5 r">algorithm</span>));
		}

		<b>public abstract void</b> <a id="7ffa9dbc88f4fe35" href="../R/7ffa9dbc88f4fe35.html" target="n" data-glyph="72,1" class="i method">Reset</a> ();
		<b>public abstract void</b> <a id="a844f6c26c0422b4" href="../R/a844f6c26c0422b4.html" target="n" data-glyph="72,1" class="i method">Update</a> (<b>byte</b>[] <span id="r6 rd" class="r6 r">b</span>);
		<b>public abstract void</b> <a id="257aed4f91e684ac" href="../R/257aed4f91e684ac.html" target="n" data-glyph="72,1" class="i method">Update</a> (<b>byte</b> <span id="r7 rd" class="r7 r">b</span>);
		<b>public abstract void</b> <a id="20cafcf60b0ce7a8" href="../R/20cafcf60b0ce7a8.html" target="n" data-glyph="72,1" class="i method">Update</a> (<b>byte</b>[] <span id="r8 rd" class="r8 r">b</span>, <b>int</b> <span id="r9 rd" class="r9 r">offset</span>, <b>int</b> <span id="r10 rd" class="r10 r">len</span>);
	}


	<b>public class</b> <a id="f315090399734faf" href="../R/f315090399734faf.html" target="n" data-glyph="0,0" class="t t">MessageDigest</a>&lt;<span id="r11 rd t" class="r11 r t">TAlgorithm</span>&gt; : <a href="#a356dea4cd4a7bb5" class="t t">MessageDigest</a> <b>where</b> <span class="r11 r t">TAlgorithm</span> : <a href="@0@mscorlib/A.html#e7c6be1ed86f474f" class="t t">HashAlgorithm</a>, <b>new</b>()
	{
		<b>private</b> <span class="r11 r t">TAlgorithm</span> <a id="4cf178cc5282f034" href="../R/4cf178cc5282f034.html" target="n" data-glyph="46,1" class="i field">_hash</a>;
		<b>private</b> <a href="@0@mscorlib/A.html#af85dc74cc324e3e" class="t t">CryptoStream</a> <a id="3117524f8f02ad8d" href="../R/3117524f8f02ad8d.html" target="n" data-glyph="46,1" class="i field">_stream</a>;

		<b>public</b> <a id="043819d518bdf870" href="../R/043819d518bdf870.html" target="n" data-glyph="72,1" class="i constructor">MessageDigest</a> ()
		{
			<a href="#f315090399734faf" class="k">this</a>.<a href="#23f9117a8f9e7e30" class="i method">Init</a> ();
		}

		<b>public override byte</b>[] <a id="ce96b76cc7faad03" href="../R/ce96b76cc7faad03.html" target="n" data-glyph="72,1" class="i method">Digest</a> ()
		{
			<a href="#f315090399734faf" class="k">this</a>.<a href="#3117524f8f02ad8d" class="i field">_stream</a>.<a href="@0@mscorlib/A.html#3331ffac62378a73" class="i method">FlushFinalBlock</a> ();
			<b>byte</b>[] <span id="r12 rd" class="r12 r">hash</span> = <a href="#f315090399734faf" class="k">this</a>.<a href="#4cf178cc5282f034" class="i field">_hash</a>.<a href="@0@mscorlib/A.html#2e02076b3e82a424" class="i property">Hash</a>;
			<a href="#f315090399734faf" class="k">this</a>.<a href="#d2d0c8597fbfe4f6" class="i method">Reset</a> ();
			<b>return</b> <span class="r12 r">hash</span>;
		}

		<b>public void</b> <a id="3e681334f1d81e7c" href="../R/3e681334f1d81e7c.html" target="n" data-glyph="72,1" class="i method">Dispose</a> ()
		{
			<b>if</b> (<a href="#f315090399734faf" class="k">this</a>.<a href="#3117524f8f02ad8d" class="i field">_stream</a> != <b>null</b>) {
				<a href="#f315090399734faf" class="k">this</a>.<a href="#3117524f8f02ad8d" class="i field">_stream</a>.<a href="@0@mscorlib/A.html#f1b4285950a82354" class="i method">Dispose</a> ();
			}
			<a href="#f315090399734faf" class="k">this</a>.<a href="#3117524f8f02ad8d" class="i field">_stream</a> = <b>null</b>;
		}

		<b>public override int</b> <a id="739634bbbc7c56d7" href="../R/739634bbbc7c56d7.html" target="n" data-glyph="72,1" class="i method">GetDigestLength</a> ()
		{
			<b>return</b> (<a href="#f315090399734faf" class="k">this</a>.<a href="#4cf178cc5282f034" class="i field">_hash</a>.<a href="@0@mscorlib/A.html#d35e3745fc61bafa" class="i property">HashSize</a> / 8);
		}

		<b>private void</b> <a id="23f9117a8f9e7e30" href="../R/23f9117a8f9e7e30.html" target="n" data-glyph="76,1" class="i method">Init</a> ()
		{
			<a href="#f315090399734faf" class="k">this</a>.<a href="#4cf178cc5282f034" class="i field">_hash</a> = <a href="@0@mscorlib/A.html#955a7437554c8efc" class="t t">Activator</a>.<a href="@0@mscorlib/A.html#168fafb64ad2a01e" class="i method">CreateInstance</a>&lt;<span class="r11 r t">TAlgorithm</span>&gt; ();
			<a href="#f315090399734faf" class="k">this</a>.<a href="#3117524f8f02ad8d" class="i field">_stream</a> = <b>new</b> <a href="@0@mscorlib/A.html#330d087abc7bf5a4" class="t constructor">CryptoStream</a> (<a href="@0@mscorlib/A.html#f956b0c07e86df64" class="t t">Stream</a>.<a href="@0@mscorlib/A.html#7e25c72455973e1f" class="i field">Null</a>, <a href="#f315090399734faf" class="k">this</a>.<a href="#4cf178cc5282f034" class="i field">_hash</a>, <a href="@0@mscorlib/A.html#8fdebb3719bf2a18" class="t t">CryptoStreamMode</a>.<a href="@0@mscorlib/A.html#9b063cb927fc8de9" class="i field">Write</a>);
		}

		<b>public override void</b> <a id="d2d0c8597fbfe4f6" href="../R/d2d0c8597fbfe4f6.html" target="n" data-glyph="72,1" class="i method">Reset</a> ()
		{
			<a href="#f315090399734faf" class="k">this</a>.<a href="#3e681334f1d81e7c" class="i method">Dispose</a> ();
			<a href="#f315090399734faf" class="k">this</a>.<a href="#23f9117a8f9e7e30" class="i method">Init</a> ();
		}

		<b>public override void</b> <a id="fe648ff81339545d" href="../R/fe648ff81339545d.html" target="n" data-glyph="72,1" class="i method">Update</a> (<b>byte</b>[] <span id="r13 rd" class="r13 r">input</span>)
		{
			<a href="#f315090399734faf" class="k">this</a>.<a href="#3117524f8f02ad8d" class="i field">_stream</a>.<a href="@0@mscorlib/A.html#7078f3223d3d0173" class="i method">Write</a> (<span class="r13 r">input</span>, 0, <span class="r13 r">input</span>.<a href="@0@mscorlib/A.html#42e9b7616956cf94" class="i property">Length</a>);
		}

		<b>public override void</b> <a id="50877566abcf8a19" href="../R/50877566abcf8a19.html" target="n" data-glyph="72,1" class="i method">Update</a> (<b>byte</b> <span id="r14 rd" class="r14 r">input</span>)
		{
			<a href="#f315090399734faf" class="k">this</a>.<a href="#3117524f8f02ad8d" class="i field">_stream</a>.<a href="@0@mscorlib/A.html#78aaa430fb7a00a4" class="i method">WriteByte</a> (<span class="r14 r">input</span>);
		}

		<b>public override void</b> <a id="e4f9fe03a53a56e1" href="../R/e4f9fe03a53a56e1.html" target="n" data-glyph="72,1" class="i method">Update</a> (<b>byte</b>[] <span id="r15 rd" class="r15 r">input</span>, <b>int</b> <span id="r16 rd" class="r16 r">index</span>, <b>int</b> <span id="r17 rd" class="r17 r">count</span>)
		{
			<b>if</b> (<span class="r17 r">count</span> &lt; 0)
				<a href="@0@mscorlib/A.html#f907d79481da6ba4" class="t t">Console</a>.<a href="@0@mscorlib/A.html#5ac7c4fda643413b" class="i method">WriteLine</a> (<span class="s">&quot;Argh!&quot;</span>);
			<a href="#f315090399734faf" class="k">this</a>.<a href="#3117524f8f02ad8d" class="i field">_stream</a>.<a href="@0@mscorlib/A.html#7078f3223d3d0173" class="i method">Write</a> (<span class="r15 r">input</span>, <span class="r16 r">index</span>, <span class="r17 r">count</span>);
		}
	}
}
</pre></td></tr></table></div></body></html>
