<!DOCTYPE html>
<html><head><title>WindowFrameBackend.cs</title><link rel="stylesheet" href="../../styles.css"><script src="../../scripts.js"></script></head>
<body class="cB" onload="i(426);"><div class="dH">
<table style="width: 100%">
<tr><td>File: <a id="filePath" class="blueLink" href="/#Xwt3.WPF/Xwt.WPFBackend/WindowFrameBackend.cs" target="_top">Xwt.WPFBackend\WindowFrameBackend.cs</a><br/></td><td></td></tr>
<tr><td>Project: <a id="projectPath" class="blueLink" href="/#Xwt3.WPF" target="_top">xwt\Xwt.WPF\Xwt3.WPF.csproj</a> (Xwt3.WPF)</td><td></td></tr>
</table>
</div>
<div class="cz"><table class="tb" cellpadding="0" cellspacing="0"><tr><td valign="top" align="right"><pre id="ln"></pre></td><td valign="top" align="left"><pre id="code">
<span class="c">// </span>
<span class="c">// WindowFrameBackend.cs</span>
<span class="c">//  </span>
<span class="c">// Author:</span>
<span class="c">//       Carlos Alberto Cortez &lt;calberto.cortez@gmail.com&gt;</span>
<span class="c">// </span>
<span class="c">// Copyright (c) 2011 Carlos Alberto Cortez</span>
<span class="c">// </span>
<span class="c">// Permission is hereby granted, free of charge, to any person obtaining a copy</span>
<span class="c">// of this software and associated documentation files (the &quot;Software&quot;), to deal</span>
<span class="c">// in the Software without restriction, including without limitation the rights</span>
<span class="c">// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell</span>
<span class="c">// copies of the Software, and to permit persons to whom the Software is</span>
<span class="c">// furnished to do so, subject to the following conditions:</span>
<span class="c">// </span>
<span class="c">// The above copyright notice and this permission notice shall be included in</span>
<span class="c">// all copies or substantial portions of the Software.</span>
<span class="c">// </span>
<span class="c">// THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR</span>
<span class="c">// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,</span>
<span class="c">// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE</span>
<span class="c">// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER</span>
<span class="c">// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,</span>
<span class="c">// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN</span>
<span class="c">// THE SOFTWARE.</span>
 
<b>using</b> <span class="i n">System</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Collections</span>.<span class="i n">Generic</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Linq</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Text</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Windows</span>;
 
<b>using</b> <span class="i n">Xwt</span>.<span class="i n">Backends</span>;
 
 
<b>namespace</b> <span class="i n">Xwt</span>.<span class="i n">WPFBackend</span>
{
	<b>public class</b> <a id="72030f320188ba1f" href="../R/72030f320188ba1f.html" target="n" data-glyph="0,0" class="t t">WindowFrameBackend</a> : <a href="/Xwt3/A.html#0d0d1a7be9349648" class="t t">IWindowFrameBackend</a>
	{
		<span class="i n">System</span>.<span class="i n">Windows</span>.<a href="@0@PresentationFramework/A.html#e438dc91640a8d15" class="t t">Window</a> <a id="6b21a6029cece40f" href="../R/6b21a6029cece40f.html" target="n" data-glyph="46,1" class="i field">window</a>;
		<a href="/Xwt3/A.html#35059fcf8c88afe3" class="t t">IWindowFrameEventSink</a> <a id="d400e106a6703b59" href="../R/d400e106a6703b59.html" target="n" data-glyph="46,1" class="i field">eventSink</a>;
		<a href="/Xwt3/A.html#2c6fcddc595f5ee8" class="t t">WindowFrame</a> <a id="8a0676f059f3b8f2" href="../R/8a0676f059f3b8f2.html" target="n" data-glyph="46,1" class="i field">frontend</a>;
		<b>bool</b> <a id="ba626a6a70e9b8b5" href="../R/ba626a6a70e9b8b5.html" target="n" data-glyph="46,1" class="i field">resizable</a> = <b>true</b>;
 
		<b>public</b> <a id="a78b8e2d96fce0ab" href="../R/a78b8e2d96fce0ab.html" target="n" data-glyph="72,1" class="i constructor">WindowFrameBackend</a> ()
		{
		}
 
		<b>void</b> <a href="/Xwt3/A.html#037bf028765c6b12" class="t t">IBackend</a>.<a href="/Xwt3/A.html#86c916158e8461be" class="i method">InitializeBackend</a> (<b>object</b> <span id="r0 rd" class="r0 r">frontend</span>, <a href="/Xwt3/A.html#c875bdb95bfcc114" class="t t">ApplicationContext</a> <span id="r1 rd" class="r1 r">context</span>)
		{
			<a href="#72030f320188ba1f" class="k">this</a>.<a href="#8a0676f059f3b8f2" class="i field">frontend</a> = (<a href="/Xwt3/A.html#2c6fcddc595f5ee8" class="t t">WindowFrame</a>) <span class="r0 r">frontend</span>;
			<a href="#77c449c0379f1fad" class="i property">Context</a> = <span class="r1 r">context</span>;
		}
 
		<b>void</b> <a href="/Xwt3/A.html#0d0d1a7be9349648" class="t t">IWindowFrameBackend</a>.<a href="/Xwt3/A.html#70ec61b2b3f0a1b2" class="i method">Initialize</a> (<a href="/Xwt3/A.html#35059fcf8c88afe3" class="t t">IWindowFrameEventSink</a> <span id="r2 rd" class="r2 r">eventSink</span>)
		{
			<a href="#72030f320188ba1f" class="k">this</a>.<a href="#d400e106a6703b59" class="i field">eventSink</a> = <span class="r2 r">eventSink</span>;
			<a href="#98609a711e16bfb2" class="i method">Initialize</a> ();
		}
 
		<b>public</b> <a href="/Xwt3/A.html#c875bdb95bfcc114" class="t t">ApplicationContext</a> <a id="77c449c0379f1fad" href="../R/77c449c0379f1fad.html" target="n" data-glyph="102,1" class="i property">Context</a> { <b>get</b>; <b>private set</b>; }
 
		<b>public virtual void</b> <a id="98609a711e16bfb2" href="../R/98609a711e16bfb2.html" target="n" data-glyph="72,1" class="i method">Initialize</a> ()
		{
		}
 
		<b>public virtual void</b> <a id="7e38329de8d58116" href="../R/7e38329de8d58116.html" target="n" data-glyph="72,1" class="i method">Dispose</a> ()
		{	
			<a href="#53b6343a111c2b2d" class="i property">Window</a>.<a href="@0@PresentationFramework/A.html#9eff3c5633604c43" class="i method">Close</a> ();
		}
 
		<b>public bool</b> <a id="6c9a2dc9d1ed5508" href="../R/6c9a2dc9d1ed5508.html" target="n" data-glyph="72,1" class="i method">Close</a> ()
		{
			<a href="#24a68553466e1cc6" class="i field">closePerformed</a> = <b>true</b>;
			<a href="#53b6343a111c2b2d" class="i property">Window</a>.<a href="@0@PresentationFramework/A.html#9eff3c5633604c43" class="i method">Close</a> ();
			<b>return</b> <a href="#24a68553466e1cc6" class="i field">closePerformed</a>;
		}
 
		<b>public</b> <span class="i n">System</span>.<span class="i n">Windows</span>.<a href="@0@PresentationFramework/A.html#e438dc91640a8d15" class="t t">Window</a> <a id="53b6343a111c2b2d" href="../R/53b6343a111c2b2d.html" target="n" data-glyph="102,1" class="i property">Window</a> {
			<b>get</b> { <b>return</b> <a href="#6b21a6029cece40f" class="i field">window</a>; }
			<b>set</b> { <a href="#6b21a6029cece40f" class="i field">window</a> = <b>value</b>; }
		}
 
		<b>public virtual bool</b> <a id="89d6cd757e5e47e2" href="../R/89d6cd757e5e47e2.html" target="n" data-glyph="102,1" class="i property">HasMenu</a> {
			<b>get</b> { <b>return false</b>;  }
		}
 
		<b>protected</b> <a href="/Xwt3/A.html#2c6fcddc595f5ee8" class="t t">WindowFrame</a> <a id="1314b6f649873e1d" href="../R/1314b6f649873e1d.html" target="n" data-glyph="105,1" class="i property">Frontend</a> {
			<b>get</b> { <b>return</b> <a href="#8a0676f059f3b8f2" class="i field">frontend</a>; }
		}
 
		<b>public</b> <a href="/Xwt3/A.html#35059fcf8c88afe3" class="t t">IWindowFrameEventSink</a> <a id="c95d62a44c4dc41c" href="../R/c95d62a44c4dc41c.html" target="n" data-glyph="102,1" class="i property">EventSink</a>
		{
			<b>get</b> { <b>return</b> <a href="#d400e106a6703b59" class="i field">eventSink</a>; }
		}
 
		<b>bool</b> <a href="/Xwt3/A.html#0d0d1a7be9349648" class="t t">IWindowFrameBackend</a>.<a href="/Xwt3/A.html#1d2f0dfb3b0e11f5" class="i property">Decorated</a> {
			<b>get</b> { <b>return</b> <a href="#6b21a6029cece40f" class="i field">window</a>.<a href="@0@PresentationFramework/A.html#9207be05156845c5" class="i property">WindowStyle</a> != <a href="@0@PresentationFramework/A.html#7d54d85f995ca63b" class="t t">WindowStyle</a>.<a href="@0@PresentationFramework/A.html#4dcefb0e18449ad3" class="i field">None</a>; }
			<b>set</b> {
				<a href="#6b21a6029cece40f" class="i field">window</a>.<a href="@0@PresentationFramework/A.html#9207be05156845c5" class="i property">WindowStyle</a> = <b>value</b> ? <a href="@0@PresentationFramework/A.html#7d54d85f995ca63b" class="t t">WindowStyle</a>.<a href="@0@PresentationFramework/A.html#d363e1554dca01c9" class="i field">SingleBorderWindow</a> : <a href="@0@PresentationFramework/A.html#7d54d85f995ca63b" class="t t">WindowStyle</a>.<a href="@0@PresentationFramework/A.html#4dcefb0e18449ad3" class="i field">None</a>;
				<a href="#4514bd031f45df99" class="i method">UpdateResizeMode</a> ();
			}
		}
 
		<b>bool</b> <a href="/Xwt3/A.html#0d0d1a7be9349648" class="t t">IWindowFrameBackend</a>.<a href="/Xwt3/A.html#2ac43f480f620737" class="i property">ShowInTaskbar</a> {
			<b>get</b> { <b>return</b> <a href="#6b21a6029cece40f" class="i field">window</a>.<a href="@0@PresentationFramework/A.html#eb2c2966352cfac7" class="i property">ShowInTaskbar</a>; }
			<b>set</b> { <a href="#6b21a6029cece40f" class="i field">window</a>.<a href="@0@PresentationFramework/A.html#eb2c2966352cfac7" class="i property">ShowInTaskbar</a> = <b>value</b>; }
		}
 
		<b>void</b> <a href="/Xwt3/A.html#0d0d1a7be9349648" class="t t">IWindowFrameBackend</a>.<a href="/Xwt3/A.html#6bd8d87f2026bac9" class="i method">SetTransientFor</a> (<a href="/Xwt3/A.html#0d0d1a7be9349648" class="t t">IWindowFrameBackend</a> <span id="r3 rd" class="r3 r">window</span>)
		{
			<a href="#72030f320188ba1f" class="k">this</a>.<a href="#53b6343a111c2b2d" class="i property">Window</a>.<a href="@0@PresentationFramework/A.html#d93ba8f45d327825" class="i property">Owner</a> = ((<a href="#72030f320188ba1f" class="t t">WindowFrameBackend</a>) <span class="r3 r">window</span>).<a href="#53b6343a111c2b2d" class="i property">Window</a>;
		}
 
		<b>bool</b> <a href="/Xwt3/A.html#0d0d1a7be9349648" class="t t">IWindowFrameBackend</a>.<a href="/Xwt3/A.html#659dde78abdfebcb" class="i property">Resizable</a> {
			<b>get</b> {
				<b>return</b> <a href="#ba626a6a70e9b8b5" class="i field">resizable</a>;
			}
			<b>set</b> {
				<b>if</b> (<b>value</b> != <a href="#ba626a6a70e9b8b5" class="i field">resizable</a>) {
					<a href="#ba626a6a70e9b8b5" class="i field">resizable</a> = <b>value</b>;
					<a href="#4514bd031f45df99" class="i method">UpdateResizeMode</a> ();
					<a href="/Xwt3/A.html#c6d9d3513c691785" class="k">var</a> <span id="r4 rd" class="r4 r">bounds</span> = <a href="#a0e8080644af82f1" class="i property">Bounds</a>;
					<a href="#6b21a6029cece40f" class="i field">window</a>.<a href="@0@PresentationFramework/A.html#531899bbecd9b093" class="i property">ResizeMode</a> = <b>value</b> ? <a href="@0@PresentationFramework/A.html#86f8402f4f262007" class="t t">ResizeMode</a>.<a href="@0@PresentationFramework/A.html#02208cb0df734a97" class="i field">CanResize</a> : <a href="@0@PresentationFramework/A.html#86f8402f4f262007" class="t t">ResizeMode</a>.<a href="@0@PresentationFramework/A.html#97ca87faf377fdfc" class="i field">NoResize</a>;
					<b>if</b> (<a href="#6b21a6029cece40f" class="i field">window</a>.<a href="@0@PresentationFramework/A.html#b05bbe3100c43c82" class="i property">IsLoaded</a> &amp;&amp; <span class="r4 r">bounds</span> != <a href="#a0e8080644af82f1" class="i property">Bounds</a>) {
						<span class="c">// The size of the border of resizable windows is different from fixed windows.</span>
						<span class="c">// If we change the resize mode, the border size will change, and the client</span>
						<span class="c">// area will then change. Here, we restore the client area to the size it</span>
						<span class="c">// had before the mode change.</span>
						<a href="#a0e8080644af82f1" class="i property">Bounds</a> = <span class="r4 r">bounds</span>;
					}
				}
			}
		}
 
		<b>void</b> <a id="4514bd031f45df99" href="../R/4514bd031f45df99.html" target="n" data-glyph="76,1" class="i method">UpdateResizeMode</a> ()
		{
			<a href="@0@PresentationFramework/A.html#86f8402f4f262007" class="k">var</a> <span id="r5 rd" class="r5 r">m</span> = <a href="#ba626a6a70e9b8b5" class="i field">resizable</a> &amp;&amp; <a href="#6b21a6029cece40f" class="i field">window</a>.<a href="@0@PresentationFramework/A.html#9207be05156845c5" class="i property">WindowStyle</a> == <a href="@0@PresentationFramework/A.html#7d54d85f995ca63b" class="t t">WindowStyle</a>.<a href="@0@PresentationFramework/A.html#d363e1554dca01c9" class="i field">SingleBorderWindow</a> ? <a href="@0@PresentationFramework/A.html#86f8402f4f262007" class="t t">ResizeMode</a>.<a href="@0@PresentationFramework/A.html#02208cb0df734a97" class="i field">CanResize</a> : <a href="@0@PresentationFramework/A.html#86f8402f4f262007" class="t t">ResizeMode</a>.<a href="@0@PresentationFramework/A.html#97ca87faf377fdfc" class="i field">NoResize</a>;
			<b>if</b> (<span class="r5 r">m</span> != <a href="#6b21a6029cece40f" class="i field">window</a>.<a href="@0@PresentationFramework/A.html#531899bbecd9b093" class="i property">ResizeMode</a>) {
				<a href="#6b21a6029cece40f" class="i field">window</a>.<a href="@0@PresentationFramework/A.html#531899bbecd9b093" class="i property">ResizeMode</a> = <span class="r5 r">m</span>;
				<a href="#8fac33e089a882c8" class="i method">OnResizeModeChanged</a> ();
			}
		}
 
		<b>protected virtual void</b> <a id="8fac33e089a882c8" href="../R/8fac33e089a882c8.html" target="n" data-glyph="75,1" class="i method">OnResizeModeChanged</a> ()
		{
		}
 
		<b>public void</b> <a id="73220f58529f4898" href="../R/73220f58529f4898.html" target="n" data-glyph="72,1" class="i method">SetIcon</a> (<a href="/Xwt3/A.html#eb81d8920e20d2d2" class="t t">ImageDescription</a> <span id="r6 rd" class="r6 r">imageBackend</span>)
		{
			<a href="#6b21a6029cece40f" class="i field">window</a>.<a href="@0@PresentationFramework/A.html#dc37dd0b84eb7b31" class="i property">Icon</a> = <span class="r6 r">imageBackend</span>.<a href="DataConverter.cs.html#b08749045769bba6" class="i method">ToImageSource</a> ();
		}
 
		<b>string</b> <a href="/Xwt3/A.html#0d0d1a7be9349648" class="t t">IWindowFrameBackend</a>.<a href="/Xwt3/A.html#ed3d70981512eb7d" class="i property">Title</a> {
			<b>get</b> { <b>return</b> <a href="#6b21a6029cece40f" class="i field">window</a>.<a href="@0@PresentationFramework/A.html#5002b3a8c196a7d1" class="i property">Title</a>; }
			<b>set</b> { <a href="#6b21a6029cece40f" class="i field">window</a>.<a href="@0@PresentationFramework/A.html#5002b3a8c196a7d1" class="i property">Title</a> = <b>value</b>; }
		}
 
		<b>bool</b> <a href="/Xwt3/A.html#0d0d1a7be9349648" class="t t">IWindowFrameBackend</a>.<a href="/Xwt3/A.html#ec0ce1c1b0717da9" class="i property">Visible</a>
		{
			<b>get</b> { <b>return</b> <a href="#6b21a6029cece40f" class="i field">window</a>.<a href="@0@PresentationCore/A.html#69f262dd47fdf2be" class="i property">Visibility</a> == <a href="@0@PresentationCore/A.html#2668d640196eddd0" class="t t">Visibility</a>.<a href="@0@PresentationCore/A.html#02d18b751f37c2fd" class="i field">Visible</a>; }
			<b>set</b> {
				<b>if</b> (<b>value</b>)
					<a href="#6b21a6029cece40f" class="i field">window</a>.<a href="@0@PresentationFramework/A.html#56eda567d5245381" class="i method">Show</a> ();
				<b>else</b>
					<a href="#6b21a6029cece40f" class="i field">window</a>.<a href="@0@PresentationFramework/A.html#fc67c5240861ea8f" class="i method">Hide</a> ();
			}
		}
 
		<b>bool</b> <a href="/Xwt3/A.html#0d0d1a7be9349648" class="t t">IWindowFrameBackend</a>.<a href="/Xwt3/A.html#b7e26db950645a6b" class="i property">Sensitive</a>
		{
			<b>get</b> { <b>return</b> <a href="#6b21a6029cece40f" class="i field">window</a>.<a href="@0@PresentationCore/A.html#166ae927a742c046" class="i property">IsEnabled</a>; }
			<b>set</b> { <a href="#6b21a6029cece40f" class="i field">window</a>.<a href="@0@PresentationCore/A.html#166ae927a742c046" class="i property">IsEnabled</a> = <b>value</b>;	}
		}
 
		<b>public double</b> <a id="6bdcf1b928f05b87" href="../R/6bdcf1b928f05b87.html" target="n" data-glyph="102,1" class="i property">Opacity</a>
		{
			<b>get</b> { <b>return</b> <a href="#6b21a6029cece40f" class="i field">window</a>.<a href="@0@PresentationCore/A.html#7ca23bf037950fa0" class="i property">Opacity</a>; }
			<b>set</b> { <a href="#6b21a6029cece40f" class="i field">window</a>.<a href="@0@PresentationCore/A.html#7ca23bf037950fa0" class="i property">Opacity</a> = <b>value</b>; }
		}
 
		<b>void</b> <a href="/Xwt3/A.html#0d0d1a7be9349648" class="t t">IWindowFrameBackend</a>.<a href="/Xwt3/A.html#d2c5635611510f2e" class="i method">Present</a> ()
		{
			<a href="#6b21a6029cece40f" class="i field">window</a>.<a href="@0@PresentationFramework/A.html#5dba8bee218265c4" class="i method">Activate</a> ();
		}
		
		<b>bool</b> <a href="/Xwt3/A.html#0d0d1a7be9349648" class="t t">IWindowFrameBackend</a>.<a href="/Xwt3/A.html#ca6f552e113da363" class="i property">FullScreen</a> {
			<b>get</b> {
				<b>return</b> <a href="#6b21a6029cece40f" class="i field">window</a>.<a href="@0@PresentationFramework/A.html#517238bcdb0593d7" class="i property">WindowState</a> == <a href="@0@PresentationFramework/A.html#27ce608a1c9bb620" class="t t">WindowState</a>.<a href="@0@PresentationFramework/A.html#3640e97c0fbbe428" class="i field">Maximized</a> 
					&amp;&amp; <a href="#6b21a6029cece40f" class="i field">window</a>.<a href="@0@PresentationFramework/A.html#531899bbecd9b093" class="i property">ResizeMode</a> == <a href="@0@PresentationFramework/A.html#86f8402f4f262007" class="t t">ResizeMode</a>.<a href="@0@PresentationFramework/A.html#97ca87faf377fdfc" class="i field">NoResize</a>;
			}
			<b>set</b> {
				<b>if</b> (<b>value</b>) {
					<a href="#6b21a6029cece40f" class="i field">window</a>.<a href="@0@PresentationFramework/A.html#517238bcdb0593d7" class="i property">WindowState</a> = <a href="@0@PresentationFramework/A.html#27ce608a1c9bb620" class="t t">WindowState</a>.<a href="@0@PresentationFramework/A.html#3640e97c0fbbe428" class="i field">Maximized</a>;
					<a href="#6b21a6029cece40f" class="i field">window</a>.<a href="@0@PresentationFramework/A.html#531899bbecd9b093" class="i property">ResizeMode</a> = <a href="@0@PresentationFramework/A.html#86f8402f4f262007" class="t t">ResizeMode</a>.<a href="@0@PresentationFramework/A.html#97ca87faf377fdfc" class="i field">NoResize</a>;
				}
				<b>else</b> {
					<a href="#6b21a6029cece40f" class="i field">window</a>.<a href="@0@PresentationFramework/A.html#517238bcdb0593d7" class="i property">WindowState</a> = <a href="@0@PresentationFramework/A.html#27ce608a1c9bb620" class="t t">WindowState</a>.<a href="@0@PresentationFramework/A.html#762fbb4fc66fac1b" class="i field">Normal</a>;
					<a href="#6b21a6029cece40f" class="i field">window</a>.<a href="@0@PresentationFramework/A.html#531899bbecd9b093" class="i property">ResizeMode</a> = <a href="@0@PresentationFramework/A.html#86f8402f4f262007" class="t t">ResizeMode</a>.<a href="@0@PresentationFramework/A.html#02208cb0df734a97" class="i field">CanResize</a>;
				}
			}
		}
 
		<b>object</b> <a href="/Xwt3/A.html#0d0d1a7be9349648" class="t t">IWindowFrameBackend</a>.<a href="/Xwt3/A.html#440eef8fd54d2090" class="i property">Screen</a> {
			<b>get</b> {
				<a href="/Xwt3/A.html#c6d9d3513c691785" class="k">var</a> <span id="r7 rd" class="r7 r">sb</span> = <a href="#a0e8080644af82f1" class="i property">Bounds</a>;
				<b>return</b> <span class="i n">System</span>.<span class="i n">Windows</span>.<span class="i n">Forms</span>.<a href="@0@System.Windows.Forms/A.html#61c7e4f4309b6603" class="t t">Screen</a>.<a href="@0@System.Windows.Forms/A.html#2e0e1ecaea45bb71" class="i method">FromRectangle</a> (<b>new</b> <span class="i n">System</span>.<span class="i n">Drawing</span>.<a href="@0@System.Drawing/A.html#3915ba377b43f9bf" class="t constructor">Rectangle</a> ((<b>int</b>)<span class="r7 r">sb</span>.<a href="/Xwt3/A.html#cf42a8e40bfd8f8c" class="i property">X</a>, (<b>int</b>)<span class="r7 r">sb</span>.<a href="/Xwt3/A.html#2c58e6ad62c3bbe2" class="i property">Y</a>, (<b>int</b>)<span class="r7 r">sb</span>.<a href="/Xwt3/A.html#22f68cc800fa5b91" class="i property">Width</a>, (<b>int</b>)<span class="r7 r">sb</span>.<a href="/Xwt3/A.html#9ef2952dfc0f8fe1" class="i property">Height</a>));
			}
		}
 
		<b>public void</b> <a id="9446ef619312ae70" href="../R/9446ef619312ae70.html" target="n" data-glyph="72,1" class="i method">Move</a> (<b>double</b> <span id="r8 rd" class="r8 r">x</span>, <b>double</b> <span id="r9 rd" class="r9 r">y</span>)
		{
			<a href="/Xwt3/A.html#c6d9d3513c691785" class="k">var</a> <span id="r10 rd" class="r10 r">value</span> = <a href="#bebde492bd6049cf" class="i method">ToNonClientRect</a> (<b>new</b> <a href="/Xwt3/A.html#370723d8012de275" class="t constructor">Rectangle</a> (<span class="r8 r">x</span>, <span class="r9 r">y</span>, 1, 1));
			<a href="#6b21a6029cece40f" class="i field">window</a>.<a href="@0@PresentationFramework/A.html#d6db15f2bca39f0b" class="i property">Top</a> = <span class="r10 r">value</span>.<a href="/Xwt3/A.html#78e31225d5037de8" class="i property">Top</a>;
			<a href="#6b21a6029cece40f" class="i field">window</a>.<a href="@0@PresentationFramework/A.html#c3f9155c7db6905b" class="i property">Left</a> = <span class="r10 r">value</span>.<a href="/Xwt3/A.html#dcfc4e94824c8469" class="i property">Left</a>;
			<a href="#77c449c0379f1fad" class="i property">Context</a>.<a href="/Xwt3/A.html#5db8b61c4608e0e0" class="i method">InvokeUserCode</a> (<b>delegate</b>
			{
				<a href="#d400e106a6703b59" class="i field">eventSink</a>.<a href="/Xwt3/A.html#f8c44db0353a2e0f" class="i method">OnBoundsChanged</a> (<a href="#a0e8080644af82f1" class="i property">Bounds</a>);
			});
		}
 
		<b>public void</b> <a id="171d29433e8e23d9" href="../R/171d29433e8e23d9.html" target="n" data-glyph="72,1" class="i method">SetSize</a> (<b>double</b> <span id="r11 rd" class="r11 r">width</span>, <b>double</b> <span id="r12 rd" class="r12 r">height</span>)
		{
			<a href="/Xwt3/A.html#c6d9d3513c691785" class="k">var</a> <span id="r13 rd" class="r13 r">r</span> = <a href="#a0e8080644af82f1" class="i property">Bounds</a>;
			<span class="r13 r">r</span>.<a href="/Xwt3/A.html#22f68cc800fa5b91" class="i property">Width</a> = <span class="r11 r">width</span>;
			<span class="r13 r">r</span>.<a href="/Xwt3/A.html#9ef2952dfc0f8fe1" class="i property">Height</a> = <span class="r12 r">height</span>;
			<a href="#a0e8080644af82f1" class="i property">Bounds</a> = <span class="r13 r">r</span>;
		}
 
        <b>public void</b> <a id="358d5fdcb95edf02" href="../R/358d5fdcb95edf02.html" target="n" data-glyph="72,1" class="i method">SetInitialSize</a>(<b>double</b> <span id="r14 rd" class="r14 r">width</span>, <b>double</b> <span id="r15 rd" class="r15 r">height</span>)
        {
            <a href="#6b21a6029cece40f" class="i field">window</a>.<a href="@0@PresentationFramework/A.html#d0e1f940abafebe8" class="i property">Width</a> = <span class="r14 r">width</span>;
            <a href="#6b21a6029cece40f" class="i field">window</a>.<a href="@0@PresentationFramework/A.html#df2641c07f10d929" class="i property">Height</a> = <span class="r15 r">height</span>;
            <a href="#77c449c0379f1fad" class="i property">Context</a>.<a href="/Xwt3/A.html#5db8b61c4608e0e0" class="i method">InvokeUserCode</a>(<b>delegate</b> {
                <a href="#d400e106a6703b59" class="i field">eventSink</a>.<a href="/Xwt3/A.html#f8c44db0353a2e0f" class="i method">OnBoundsChanged</a>(<a href="#a0e8080644af82f1" class="i property">Bounds</a>);
            });
        }
 
        <b>public</b> <a href="/Xwt3/A.html#eac7fbe727da55f3" class="t t">Size</a> <a id="df15578fcb0a40f2" href="../R/df15578fcb0a40f2.html" target="n" data-glyph="102,1" class="i property">DesiredSize</a> { <b>get</b> { <b>return</b> <b>new</b> <span class="i n">Xwt</span>.<a href="/Xwt3/A.html#a7fd0b1ede9d65f0" class="t constructor">Size</a>(<a href="#6b21a6029cece40f" class="i field">window</a>.<a href="@0@PresentationFramework/A.html#d0e1f940abafebe8" class="i property">Width</a>, <a href="#6b21a6029cece40f" class="i field">window</a>.<a href="@0@PresentationFramework/A.html#df2641c07f10d929" class="i property">Height</a>); } } 
                <span class="c">// .DesiredSize.Width, window.DesiredSize.Height); } }</span>
 
        <b>public virtual</b> <a href="/Xwt3/A.html#c6d9d3513c691785" class="t t">Rectangle</a> <a id="a0e8080644af82f1" href="../R/a0e8080644af82f1.html" target="n" data-glyph="102,1" class="i property">Bounds</a> {
			<b>get</b> {
				<b>double</b> <span id="r16 rd" class="r16 r">width</span> = <a href="@0@mscorlib/A.html#1a65cbdb09544ba1" class="t t">Double</a>.<a href="@0@mscorlib/A.html#b3843db5f359a0fd" class="i method">IsNaN</a> (<a href="#6b21a6029cece40f" class="i field">window</a>.<a href="@0@PresentationFramework/A.html#d0e1f940abafebe8" class="i property">Width</a>) ? <a href="#6b21a6029cece40f" class="i field">window</a>.<a href="@0@PresentationFramework/A.html#7cc64ed9667c9f70" class="i property">ActualWidth</a> : <a href="#6b21a6029cece40f" class="i field">window</a>.<a href="@0@PresentationFramework/A.html#d0e1f940abafebe8" class="i property">Width</a>;
				<b>double</b> <span id="r17 rd" class="r17 r">height</span> = <a href="@0@mscorlib/A.html#1a65cbdb09544ba1" class="t t">Double</a>.<a href="@0@mscorlib/A.html#b3843db5f359a0fd" class="i method">IsNaN</a> (<a href="#6b21a6029cece40f" class="i field">window</a>.<a href="@0@PresentationFramework/A.html#df2641c07f10d929" class="i property">Height</a>) ? <a href="#6b21a6029cece40f" class="i field">window</a>.<a href="@0@PresentationFramework/A.html#5554a4892ffe2cfc" class="i property">ActualHeight</a> : <a href="#6b21a6029cece40f" class="i field">window</a>.<a href="@0@PresentationFramework/A.html#df2641c07f10d929" class="i property">Height</a>;
				<b>return</b> <a href="#4a27d98b983eae10" class="i method">ToClientRect</a> (<b>new</b> <a href="/Xwt3/A.html#370723d8012de275" class="t constructor">Rectangle</a> (<a href="#6b21a6029cece40f" class="i field">window</a>.<a href="@0@PresentationFramework/A.html#c3f9155c7db6905b" class="i property">Left</a>, <a href="#6b21a6029cece40f" class="i field">window</a>.<a href="@0@PresentationFramework/A.html#d6db15f2bca39f0b" class="i property">Top</a>, <span class="r16 r">width</span>, <span class="r17 r">height</span>));
			}
			<b>set</b> {
				<b>value</b> = <a href="#bebde492bd6049cf" class="i method">ToNonClientRect</a> (<b>value</b>);
				<a href="#6b21a6029cece40f" class="i field">window</a>.<a href="@0@PresentationFramework/A.html#d6db15f2bca39f0b" class="i property">Top</a> = <b>value</b>.<a href="/Xwt3/A.html#78e31225d5037de8" class="i property">Top</a>;
				<a href="#6b21a6029cece40f" class="i field">window</a>.<a href="@0@PresentationFramework/A.html#c3f9155c7db6905b" class="i property">Left</a> = <b>value</b>.<a href="/Xwt3/A.html#dcfc4e94824c8469" class="i property">Left</a>;
				<a href="#6b21a6029cece40f" class="i field">window</a>.<a href="@0@PresentationFramework/A.html#d0e1f940abafebe8" class="i property">Width</a> = <b>value</b>.<a href="/Xwt3/A.html#22f68cc800fa5b91" class="i property">Width</a>;
				<a href="#6b21a6029cece40f" class="i field">window</a>.<a href="@0@PresentationFramework/A.html#df2641c07f10d929" class="i property">Height</a> = <b>value</b>.<a href="/Xwt3/A.html#9ef2952dfc0f8fe1" class="i property">Height</a>;
				<a href="#77c449c0379f1fad" class="i property">Context</a>.<a href="/Xwt3/A.html#5db8b61c4608e0e0" class="i method">InvokeUserCode</a> (<b>delegate</b> {
					<a href="#d400e106a6703b59" class="i field">eventSink</a>.<a href="/Xwt3/A.html#f8c44db0353a2e0f" class="i method">OnBoundsChanged</a> (<a href="#a0e8080644af82f1" class="i property">Bounds</a>);
				});
			}
		}
 
		<b>public virtual void</b> <a id="67e62d18168782a0" href="../R/67e62d18168782a0.html" target="n" data-glyph="72,1" class="i method">EnableEvent</a> (<b>object</b> <span id="r18 rd" class="r18 r">eventId</span>)
		{
			<b>if</b> (<span class="r18 r">eventId</span> <b>is</b> <a href="/Xwt3/A.html#a1a8639c223093c6" class="t t">WindowFrameEvent</a>) {
				<b>switch</b> ((<a href="/Xwt3/A.html#a1a8639c223093c6" class="t t">WindowFrameEvent</a>)<span class="r18 r">eventId</span>) {
					<b>case</b> <a href="/Xwt3/A.html#a1a8639c223093c6" class="t t">WindowFrameEvent</a>.<a href="/Xwt3/A.html#385da660e3268542" class="i field">BoundsChanged</a>:
						<a href="#6b21a6029cece40f" class="i field">window</a>.<a href="@0@PresentationFramework/A.html#0fed81344da0d601" class="i">LocationChanged</a> += <a href="#23c986dd79b6b6be" class="i method">BoundsChangedHandler</a>;
						<a href="#6b21a6029cece40f" class="i field">window</a>.<a href="@0@PresentationFramework/A.html#ec1a90b4f82457bf" class="i">SizeChanged</a> += <a href="#23c986dd79b6b6be" class="i method">BoundsChangedHandler</a>;
						<b>break</b>;
					<b>case</b> <a href="/Xwt3/A.html#a1a8639c223093c6" class="t t">WindowFrameEvent</a>.<a href="/Xwt3/A.html#1add7c0cee2ea873" class="i field">Shown</a>:
						<a href="#6b21a6029cece40f" class="i field">window</a>.<a href="@0@PresentationCore/A.html#798084dd6c266279" class="i">IsVisibleChanged</a> += <a href="#1d8b879050b90a75" class="i method">ShownHandler</a>;
						<b>break</b>;
					<b>case</b> <a href="/Xwt3/A.html#a1a8639c223093c6" class="t t">WindowFrameEvent</a>.<a href="/Xwt3/A.html#cc7958dda6cc9016" class="i field">Hidden</a>:
						<a href="#6b21a6029cece40f" class="i field">window</a>.<a href="@0@PresentationCore/A.html#798084dd6c266279" class="i">IsVisibleChanged</a> += <a href="#b19f9e406b5ff14c" class="i method">HiddenHandler</a>;
						<b>break</b>;
					<b>case</b> <a href="/Xwt3/A.html#a1a8639c223093c6" class="t t">WindowFrameEvent</a>.<a href="/Xwt3/A.html#6fa2a4e85b217ec7" class="i field">CloseRequested</a>:
						<a href="#6b21a6029cece40f" class="i field">window</a>.<a href="@0@PresentationFramework/A.html#b6174546060fdecd" class="i">Closing</a> += <a href="#65155465dad05d66" class="i method">ClosingHandler</a>;
						<b>break</b>;
					<b>case</b> <a href="/Xwt3/A.html#a1a8639c223093c6" class="t t">WindowFrameEvent</a>.<a href="/Xwt3/A.html#b894c5d94e16012a" class="i field">Closed</a>:
						<a href="#6b21a6029cece40f" class="i field">window</a>.<a href="@0@PresentationFramework/A.html#9fd79ba8127bdb15" class="i">Closed</a> += <a href="#39a1294eaa7dc720" class="i method">ClosedHandler</a>;
						<b>break</b>;
				}
			}
		}
 
		<b>public virtual void</b> <a id="89c31235e0317754" href="../R/89c31235e0317754.html" target="n" data-glyph="72,1" class="i method">DisableEvent</a> (<b>object</b> <span id="r19 rd" class="r19 r">eventId</span>)
		{
			<b>if</b> (<span class="r19 r">eventId</span> <b>is</b> <a href="/Xwt3/A.html#a1a8639c223093c6" class="t t">WindowFrameEvent</a>) {
				<b>switch</b> ((<a href="/Xwt3/A.html#a1a8639c223093c6" class="t t">WindowFrameEvent</a>)<span class="r19 r">eventId</span>) {
					<b>case</b> <a href="/Xwt3/A.html#a1a8639c223093c6" class="t t">WindowFrameEvent</a>.<a href="/Xwt3/A.html#385da660e3268542" class="i field">BoundsChanged</a>:
						<a href="#6b21a6029cece40f" class="i field">window</a>.<a href="@0@PresentationFramework/A.html#0fed81344da0d601" class="i">LocationChanged</a> -= <a href="#23c986dd79b6b6be" class="i method">BoundsChangedHandler</a>;
						<a href="#6b21a6029cece40f" class="i field">window</a>.<a href="@0@PresentationFramework/A.html#ec1a90b4f82457bf" class="i">SizeChanged</a> -= <a href="#23c986dd79b6b6be" class="i method">BoundsChangedHandler</a>;
						<b>break</b>;
					<b>case</b> <a href="/Xwt3/A.html#a1a8639c223093c6" class="t t">WindowFrameEvent</a>.<a href="/Xwt3/A.html#1add7c0cee2ea873" class="i field">Shown</a>:
						<a href="#6b21a6029cece40f" class="i field">window</a>.<a href="@0@PresentationCore/A.html#798084dd6c266279" class="i">IsVisibleChanged</a> -= <a href="#1d8b879050b90a75" class="i method">ShownHandler</a>;
						<b>break</b>;
					<b>case</b> <a href="/Xwt3/A.html#a1a8639c223093c6" class="t t">WindowFrameEvent</a>.<a href="/Xwt3/A.html#cc7958dda6cc9016" class="i field">Hidden</a>:
						<a href="#6b21a6029cece40f" class="i field">window</a>.<a href="@0@PresentationCore/A.html#798084dd6c266279" class="i">IsVisibleChanged</a> -= <a href="#b19f9e406b5ff14c" class="i method">HiddenHandler</a>;
						<b>break</b>;
					<b>case</b> <a href="/Xwt3/A.html#a1a8639c223093c6" class="t t">WindowFrameEvent</a>.<a href="/Xwt3/A.html#6fa2a4e85b217ec7" class="i field">CloseRequested</a>:
						<a href="#6b21a6029cece40f" class="i field">window</a>.<a href="@0@PresentationFramework/A.html#b6174546060fdecd" class="i">Closing</a> -= <a href="#65155465dad05d66" class="i method">ClosingHandler</a>;
						<b>break</b>;
					<b>case</b> <a href="/Xwt3/A.html#a1a8639c223093c6" class="t t">WindowFrameEvent</a>.<a href="/Xwt3/A.html#b894c5d94e16012a" class="i field">Closed</a>:
						<a href="#6b21a6029cece40f" class="i field">window</a>.<a href="@0@PresentationFramework/A.html#b6174546060fdecd" class="i">Closing</a> -= <a href="#39a1294eaa7dc720" class="i method">ClosedHandler</a>;
						<b>break</b>;
				}
			}
		}
 
		<b>private void</b> <a id="39a1294eaa7dc720" href="../R/39a1294eaa7dc720.html" target="n" data-glyph="76,1" class="i method">ClosedHandler</a> (<b>object</b> <span id="r20 rd" class="r20 r">sender</span>, <a href="@0@mscorlib/A.html#9a1496aa60befd10" class="t t">EventArgs</a> <span id="r21 rd" class="r21 r">e</span>)
		{
			<b>if</b> (!<a href="#4286618376932cf9" class="i property">InhibitCloseRequested</a>)
				<a href="#77c449c0379f1fad" class="i property">Context</a>.<a href="/Xwt3/A.html#5db8b61c4608e0e0" class="i method">InvokeUserCode</a> (<a href="#d400e106a6703b59" class="i field">eventSink</a>.<a href="/Xwt3/A.html#5a9492fee7bb23a6" class="i method">OnClosed</a>);
		}
 
		<b>void</b> <a id="23c986dd79b6b6be" href="../R/23c986dd79b6b6be.html" target="n" data-glyph="76,1" class="i method">BoundsChangedHandler</a> (<b>object</b> <span id="r22 rd" class="r22 r">o</span>, <a href="@0@mscorlib/A.html#9a1496aa60befd10" class="t t">EventArgs</a> <span id="r23 rd" class="r23 r">args</span>)
		{
			<a href="#77c449c0379f1fad" class="i property">Context</a>.<a href="/Xwt3/A.html#5db8b61c4608e0e0" class="i method">InvokeUserCode</a> (<b>delegate</b> () {
				<a href="#d400e106a6703b59" class="i field">eventSink</a>.<a href="/Xwt3/A.html#f8c44db0353a2e0f" class="i method">OnBoundsChanged</a> (<a href="#a0e8080644af82f1" class="i property">Bounds</a>);
			});
		}
 
		<b>private void</b> <a id="1d8b879050b90a75" href="../R/1d8b879050b90a75.html" target="n" data-glyph="76,1" class="i method">ShownHandler</a> (<b>object</b> <span id="r24 rd" class="r24 r">sender</span>, <a href="@0@WindowsBase/A.html#71a1a16823f70b8c" class="t t">DependencyPropertyChangedEventArgs</a> <span id="r25 rd" class="r25 r">e</span>)
		{
			<span class="c">// delay shown event until window is loaded</span>
			<b>if</b> (!<a href="#6b21a6029cece40f" class="i field">window</a>.<a href="@0@PresentationFramework/A.html#b05bbe3100c43c82" class="i property">IsLoaded</a>) {
				<a href="#6b21a6029cece40f" class="i field">window</a>.<a href="@0@PresentationFramework/A.html#a815b4f12f279dee" class="i">Loaded</a> += (<span id="r26 rd" class="r26 r">sender2</span>, <span id="r27 rd" class="r27 r">e2</span>) =&gt; <a href="#1d8b879050b90a75" class="i method">ShownHandler</a> (<span class="r24 r">sender</span>, <span class="r25 r">e</span>);
				<b>return</b>;
			}
			<b>if</b>((<b>bool</b>)<span class="r25 r">e</span>.<a href="@0@WindowsBase/A.html#0acf297ea547e623" class="i property">NewValue</a>)
			{
				<a href="#77c449c0379f1fad" class="i property">Context</a>.<a href="/Xwt3/A.html#5db8b61c4608e0e0" class="i method">InvokeUserCode</a> (<b>delegate</b> ()
				{
					<a href="#d400e106a6703b59" class="i field">eventSink</a>.<a href="/Xwt3/A.html#e9c10208e440b439" class="i method">OnShown</a> ();
				});
			}
		}
 
		<b>private void</b> <a id="b19f9e406b5ff14c" href="../R/b19f9e406b5ff14c.html" target="n" data-glyph="76,1" class="i method">HiddenHandler</a> (<b>object</b> <span id="r28 rd" class="r28 r">sender</span>, <a href="@0@WindowsBase/A.html#71a1a16823f70b8c" class="t t">DependencyPropertyChangedEventArgs</a> <span id="r29 rd" class="r29 r">e</span>)
		{
			<b>if</b>((<b>bool</b>)<span class="r29 r">e</span>.<a href="@0@WindowsBase/A.html#0acf297ea547e623" class="i property">NewValue</a> == <b>false</b>)
			{
				<a href="#77c449c0379f1fad" class="i property">Context</a>.<a href="/Xwt3/A.html#5db8b61c4608e0e0" class="i method">InvokeUserCode</a> (<b>delegate</b> ()
				{
					<a href="#d400e106a6703b59" class="i field">eventSink</a>.<a href="/Xwt3/A.html#2c283b67955843b3" class="i method">OnHidden</a> ();
				});
			}
		}
 
		<b>protected bool</b> <a id="4286618376932cf9" href="../R/4286618376932cf9.html" target="n" data-glyph="105,1" class="i property">InhibitCloseRequested</a> { <b>get</b>; <b>set</b>; }
 
		<b>bool</b> <a id="24a68553466e1cc6" href="../R/24a68553466e1cc6.html" target="n" data-glyph="46,1" class="i field">closePerformed</a>;
 
		<b>private void</b> <a id="65155465dad05d66" href="../R/65155465dad05d66.html" target="n" data-glyph="76,1" class="i method">ClosingHandler</a> (<b>object</b> <span id="r30 rd" class="r30 r">sender</span>, <span class="i n">System</span>.<span class="i n">ComponentModel</span>.<a href="@0@System/A.html#f3f0af957be5a083" class="t t">CancelEventArgs</a> <span id="r31 rd" class="r31 r">e</span>)
		{
			<b>if</b> (<a href="#4286618376932cf9" class="i property">InhibitCloseRequested</a>)
				<b>return</b>;
			<a href="#77c449c0379f1fad" class="i property">Context</a>.<a href="/Xwt3/A.html#5db8b61c4608e0e0" class="i method">InvokeUserCode</a> (<b>delegate</b> ()
			{
				<span class="r31 r">e</span>.<a href="@0@System/A.html#f00907f5b18da6d7" class="i property">Cancel</a> = !<a href="#d400e106a6703b59" class="i field">eventSink</a>.<a href="/Xwt3/A.html#32f900492e2242a5" class="i method">OnCloseRequested</a> ();
				<a href="#24a68553466e1cc6" class="i field">closePerformed</a> = !<span class="r31 r">e</span>.<a href="@0@System/A.html#f00907f5b18da6d7" class="i property">Cancel</a>;
			});
		}
 
		<a href="/Xwt3/A.html#eac7fbe727da55f3" class="t t">Size</a> <a id="6500aa626d2079c8" href="../R/6500aa626d2079c8.html" target="n" data-glyph="76,1" class="i method">GetBorderSize</a> ()
		{
			<b>if</b> (<a href="#6b21a6029cece40f" class="i field">window</a>.<a href="@0@PresentationFramework/A.html#531899bbecd9b093" class="i property">ResizeMode</a> == <a href="@0@PresentationFramework/A.html#86f8402f4f262007" class="t t">ResizeMode</a>.<a href="@0@PresentationFramework/A.html#02208cb0df734a97" class="i field">CanResize</a>)
				<b>return</b> <b>new</b> <a href="/Xwt3/A.html#a7fd0b1ede9d65f0" class="t constructor">Size</a> (<a href="@0@PresentationFramework/A.html#02007600b4eb5699" class="t t">SystemParameters</a>.<a href="@0@PresentationFramework/A.html#86045cb1b6ba473f" class="i property">ResizeFrameVerticalBorderWidth</a>, <a href="@0@PresentationFramework/A.html#02007600b4eb5699" class="t t">SystemParameters</a>.<a href="@0@PresentationFramework/A.html#4c104283313597c0" class="i property">ResizeFrameHorizontalBorderHeight</a>);
			<b>else
				return</b> <b>new</b> <a href="/Xwt3/A.html#a7fd0b1ede9d65f0" class="t constructor">Size</a> (<a href="@0@PresentationFramework/A.html#02007600b4eb5699" class="t t">SystemParameters</a>.<a href="@0@PresentationFramework/A.html#2b72811f602716a6" class="i property">FixedFrameVerticalBorderWidth</a>, <a href="@0@PresentationFramework/A.html#02007600b4eb5699" class="t t">SystemParameters</a>.<a href="@0@PresentationFramework/A.html#a610516a41d54174" class="i property">FixedFrameHorizontalBorderHeight</a>);
		}
 
		<b>protected</b> <a href="/Xwt3/A.html#c6d9d3513c691785" class="t t">Rectangle</a> <a id="bebde492bd6049cf" href="../R/bebde492bd6049cf.html" target="n" data-glyph="75,1" class="i method">ToNonClientRect</a> (<a href="/Xwt3/A.html#c6d9d3513c691785" class="t t">Rectangle</a> <span id="r32 rd" class="r32 r">rect</span>)
		{
			<span class="c">// WARNING: SystemParameters.ResizeFrameHorizontalBorderHeight is known to return invalid values in some cases, due to</span>
			<span class="c">// a workaround in the Windows API to support legacy applications running on Aero.</span>
			<span class="c">// We can&#39;t rely then on ToNonClientRect and ToClientRect to return 100% correct values, so they are not used for calculating</span>
			<span class="c">// the required client area. However, the result of those methods is good enough for calculating the position of the window.</span>
 
			<a href="/Xwt3/A.html#eac7fbe727da55f3" class="k">var</a> <span id="r33 rd" class="r33 r">size</span> = <span class="r32 r">rect</span>.<a href="/Xwt3/A.html#e60694360b25d635" class="i property">Size</a>;
			<a href="/Xwt3/A.html#0e54e87b6e891b4f" class="k">var</a> <span id="r34 rd" class="r34 r">loc</span> = <span class="r32 r">rect</span>.<a href="/Xwt3/A.html#82ea50b4f256fd27" class="i property">Location</a>;
 
			<a href="/Xwt3/A.html#eac7fbe727da55f3" class="k">var</a> <span id="r35 rd" class="r35 r">border</span> = <a href="#6500aa626d2079c8" class="i method">GetBorderSize</a> ();
			<span class="r33 r">size</span>.<a href="/Xwt3/A.html#c6e7d92f05c1315b" class="i property">Height</a> += <span class="r35 r">border</span>.<a href="/Xwt3/A.html#c6e7d92f05c1315b" class="i property">Height</a> * 2;
			<span class="r33 r">size</span>.<a href="/Xwt3/A.html#cc006e4112f202b8" class="i property">Width</a> += <span class="r35 r">border</span>.<a href="/Xwt3/A.html#cc006e4112f202b8" class="i property">Width</a> * 2;
			<span class="r34 r">loc</span>.<a href="/Xwt3/A.html#a925f0d89fafd1e3" class="i property">X</a> -= <span class="r35 r">border</span>.<a href="/Xwt3/A.html#cc006e4112f202b8" class="i property">Width</a>;
			<span class="r34 r">loc</span>.<a href="/Xwt3/A.html#270121b6118aba39" class="i property">Y</a> -= <span class="r35 r">border</span>.<a href="/Xwt3/A.html#c6e7d92f05c1315b" class="i property">Height</a>;
 
			<b>if</b> (((<a href="/Xwt3/A.html#0d0d1a7be9349648" class="t t">IWindowFrameBackend</a>)<a href="#72030f320188ba1f" class="k">this</a>).<a href="/Xwt3/A.html#1d2f0dfb3b0e11f5" class="i property">Decorated</a>) {
				<span class="r33 r">size</span>.<a href="/Xwt3/A.html#c6e7d92f05c1315b" class="i property">Height</a> += <a href="@0@PresentationFramework/A.html#02007600b4eb5699" class="t t">SystemParameters</a>.<a href="@0@PresentationFramework/A.html#97ad95d1c3793f28" class="i property">WindowCaptionHeight</a>;
				<span class="r34 r">loc</span>.<a href="/Xwt3/A.html#270121b6118aba39" class="i property">Y</a> -= <a href="@0@PresentationFramework/A.html#02007600b4eb5699" class="t t">SystemParameters</a>.<a href="@0@PresentationFramework/A.html#97ad95d1c3793f28" class="i property">WindowCaptionHeight</a>;
			}
			<b>if</b> (<a href="#89d6cd757e5e47e2" class="i property">HasMenu</a>) {
				<span class="r33 r">size</span>.<a href="/Xwt3/A.html#c6e7d92f05c1315b" class="i property">Height</a> += <a href="@0@PresentationFramework/A.html#02007600b4eb5699" class="t t">SystemParameters</a>.<a href="@0@PresentationFramework/A.html#f1a851a89f8eb60e" class="i property">MenuBarHeight</a>;
				<span class="r34 r">loc</span>.<a href="/Xwt3/A.html#270121b6118aba39" class="i property">Y</a> -= <a href="@0@PresentationFramework/A.html#02007600b4eb5699" class="t t">SystemParameters</a>.<a href="@0@PresentationFramework/A.html#f1a851a89f8eb60e" class="i property">MenuBarHeight</a>;
			}
 
			<b>return</b> <b>new</b> <a href="/Xwt3/A.html#51dcefa0c43e9731" class="t constructor">Rectangle</a> (<span class="r34 r">loc</span>, <span class="r33 r">size</span>);
		}
 
		<b>protected</b> <a href="/Xwt3/A.html#c6d9d3513c691785" class="t t">Rectangle</a> <a id="4a27d98b983eae10" href="../R/4a27d98b983eae10.html" target="n" data-glyph="75,1" class="i method">ToClientRect</a> (<a href="/Xwt3/A.html#c6d9d3513c691785" class="t t">Rectangle</a> <span id="r36 rd" class="r36 r">rect</span>)
		{
			<a href="/Xwt3/A.html#eac7fbe727da55f3" class="k">var</a> <span id="r37 rd" class="r37 r">size</span> = <span class="r36 r">rect</span>.<a href="/Xwt3/A.html#e60694360b25d635" class="i property">Size</a>;
			<a href="/Xwt3/A.html#0e54e87b6e891b4f" class="k">var</a> <span id="r38 rd" class="r38 r">loc</span> = <span class="r36 r">rect</span>.<a href="/Xwt3/A.html#82ea50b4f256fd27" class="i property">Location</a>;
 
			<a href="/Xwt3/A.html#eac7fbe727da55f3" class="k">var</a> <span id="r39 rd" class="r39 r">border</span> = <a href="#6500aa626d2079c8" class="i method">GetBorderSize</a> ();
			<span class="r37 r">size</span>.<a href="/Xwt3/A.html#c6e7d92f05c1315b" class="i property">Height</a> -= <span class="r39 r">border</span>.<a href="/Xwt3/A.html#c6e7d92f05c1315b" class="i property">Height</a> * 2;
			<span class="r37 r">size</span>.<a href="/Xwt3/A.html#cc006e4112f202b8" class="i property">Width</a> -= <span class="r39 r">border</span>.<a href="/Xwt3/A.html#cc006e4112f202b8" class="i property">Width</a> * 2;
			<span class="r38 r">loc</span>.<a href="/Xwt3/A.html#a925f0d89fafd1e3" class="i property">X</a> += <span class="r39 r">border</span>.<a href="/Xwt3/A.html#cc006e4112f202b8" class="i property">Width</a>;
			<span class="r38 r">loc</span>.<a href="/Xwt3/A.html#270121b6118aba39" class="i property">Y</a> += <span class="r39 r">border</span>.<a href="/Xwt3/A.html#c6e7d92f05c1315b" class="i property">Height</a>;
 
			<b>if</b> (((<a href="/Xwt3/A.html#0d0d1a7be9349648" class="t t">IWindowFrameBackend</a>)<a href="#72030f320188ba1f" class="k">this</a>).<a href="/Xwt3/A.html#1d2f0dfb3b0e11f5" class="i property">Decorated</a>) {
                <span class="r37 r">size</span>.<a href="/Xwt3/A.html#c6e7d92f05c1315b" class="i property">Height</a> -= <a href="@0@PresentationFramework/A.html#02007600b4eb5699" class="t t">SystemParameters</a>.<a href="@0@PresentationFramework/A.html#97ad95d1c3793f28" class="i property">WindowCaptionHeight</a>;
                <span class="r38 r">loc</span>.<a href="/Xwt3/A.html#270121b6118aba39" class="i property">Y</a> += <a href="@0@PresentationFramework/A.html#02007600b4eb5699" class="t t">SystemParameters</a>.<a href="@0@PresentationFramework/A.html#97ad95d1c3793f28" class="i property">WindowCaptionHeight</a>;
			}
			<b>if</b> (<a href="#89d6cd757e5e47e2" class="i property">HasMenu</a>) {
				<span class="r37 r">size</span>.<a href="/Xwt3/A.html#c6e7d92f05c1315b" class="i property">Height</a> -= <a href="@0@PresentationFramework/A.html#02007600b4eb5699" class="t t">SystemParameters</a>.<a href="@0@PresentationFramework/A.html#f1a851a89f8eb60e" class="i property">MenuBarHeight</a>;
				<span class="r38 r">loc</span>.<a href="/Xwt3/A.html#270121b6118aba39" class="i property">Y</a> += <a href="@0@PresentationFramework/A.html#02007600b4eb5699" class="t t">SystemParameters</a>.<a href="@0@PresentationFramework/A.html#f1a851a89f8eb60e" class="i property">MenuBarHeight</a>;
			}
 
			<span class="r37 r">size</span>.<a href="/Xwt3/A.html#cc006e4112f202b8" class="i property">Width</a> = <a href="@0@mscorlib/A.html#a4407e67b9a5afad" class="t t">Math</a>.<a href="@0@mscorlib/A.html#e66bf1275e54a4bc" class="i method">Max</a> (0, <span class="r37 r">size</span>.<a href="/Xwt3/A.html#cc006e4112f202b8" class="i property">Width</a>);
			<span class="r37 r">size</span>.<a href="/Xwt3/A.html#c6e7d92f05c1315b" class="i property">Height</a> = <a href="@0@mscorlib/A.html#a4407e67b9a5afad" class="t t">Math</a>.<a href="@0@mscorlib/A.html#e66bf1275e54a4bc" class="i method">Max</a> (0, <span class="r37 r">size</span>.<a href="/Xwt3/A.html#c6e7d92f05c1315b" class="i property">Height</a>);
 
			<b>return</b> <b>new</b> <a href="/Xwt3/A.html#51dcefa0c43e9731" class="t constructor">Rectangle</a> (<span class="r38 r">loc</span>, <span class="r37 r">size</span>);
		}
	}
}
</pre></td></tr></table></div></body></html>
