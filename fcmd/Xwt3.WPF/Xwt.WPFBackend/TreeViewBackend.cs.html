<!DOCTYPE html>
<html><head><title>TreeViewBackend.cs</title><link rel="stylesheet" href="../../styles.css"><script src="../../scripts.js"></script></head>
<body class="cB" onload="i(627);"><div class="dH">
<table style="width: 100%">
<tr><td>File: <a id="filePath" class="blueLink" href="/#Xwt3.WPF/Xwt.WPFBackend/TreeViewBackend.cs" target="_top">Xwt.WPFBackend\TreeViewBackend.cs</a><br/></td><td></td></tr>
<tr><td>Project: <a id="projectPath" class="blueLink" href="/#Xwt3.WPF" target="_top">xwt\Xwt.WPF\Xwt3.WPF.csproj</a> (Xwt3.WPF)</td><td></td></tr>
</table>
</div>
<div class="cz"><table class="tb" cellpadding="0" cellspacing="0"><tr><td valign="top" align="right"><pre id="ln"></pre></td><td valign="top" align="left"><pre id="code">
<span class="c">//</span>
<span class="c">// TreeViewBackend.cs</span>
<span class="c">//</span>
<span class="c">// Author:</span>
<span class="c">//       Eric Maupin &lt;ermau@xamarin.com&gt;</span>
<span class="c">//</span>
<span class="c">// Copyright (c) 2012 Xamarin, Inc.</span>
<span class="c">//</span>
<span class="c">// Permission is hereby granted, free of charge, to any person obtaining a copy</span>
<span class="c">// of this software and associated documentation files (the &quot;Software&quot;), to deal</span>
<span class="c">// in the Software without restriction, including without limitation the rights</span>
<span class="c">// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell</span>
<span class="c">// copies of the Software, and to permit persons to whom the Software is</span>
<span class="c">// furnished to do so, subject to the following conditions:</span>
<span class="c">//</span>
<span class="c">// The above copyright notice and this permission notice shall be included in</span>
<span class="c">// all copies or substantial portions of the Software.</span>
<span class="c">//</span>
<span class="c">// THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR</span>
<span class="c">// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,</span>
<span class="c">// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE</span>
<span class="c">// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER</span>
<span class="c">// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,</span>
<span class="c">// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN</span>
<span class="c">// THE SOFTWARE.</span>

<b>using</b> <span class="i n">System</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Collections</span>.<span class="i n">Generic</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Linq</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Windows</span>.<span class="i n">Data</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Windows</span>.<span class="i n">Documents</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Windows</span>.<span class="i n">Markup</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Windows</span>.<span class="i n">Media</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Windows</span>.<span class="i n">Shapes</span>;

<b>using</b> <span class="i n">Xwt</span>.<span class="i n">Backends</span>;
<b>using</b> <span class="i n">Xwt</span>.<span class="i n">WPFBackend</span>.<span class="i n">Utilities</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Windows</span>;
<b>using</b> <span class="i">SWC</span>=<span class="i n">System</span>.<span class="i n">Windows</span>.<span class="i n">Controls</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Windows</span>.<span class="i n">Controls</span>;

<b>namespace</b> <span class="i n">Xwt</span>.<span class="i n">WPFBackend</span>
{
	<b>public class</b> <a id="f54eddb79b1efdc7" href="../R/f54eddb79b1efdc7.html" target="n" data-glyph="0,0" class="t t">TreeViewBackend</a>
		: <a href="WidgetBackend.cs.html#551a9684f2eb2b53" class="t t">WidgetBackend</a>, <a href="/Xwt3/A.html#24ddb88ea10e62f9" class="t t">ITreeViewBackend</a>
	{
		<a href="@0@mscorlib/A.html#d3599058f8d79be0" class="t t">Dictionary</a>&lt;<a href="/Xwt3/A.html#9af53f60be83be5c" class="t t">CellView</a>,<a href="#7a144a26134cf115" class="t t">CellInfo</a>&gt; <a id="57c34977ae5d18ec" href="../R/57c34977ae5d18ec.html" target="n" data-glyph="46,1" class="i field">cellViews</a> = <b>new</b> <a href="@0@mscorlib/A.html#bf6849e410b43c4c" class="t constructor">Dictionary</a>&lt;<a href="/Xwt3/A.html#9af53f60be83be5c" class="t t">CellView</a>, <a href="#7a144a26134cf115" class="t t">CellInfo</a>&gt; ();

		<b>class</b> <a id="7a144a26134cf115" href="../R/7a144a26134cf115.html" target="n" data-glyph="4,1" class="t t"><span id="51751aee8e8b84fe">CellInfo</span></a> {
			<b>public</b> <a href="/Xwt3/A.html#8687c4aba4c5d68c" class="t t">ListViewColumn</a> <a id="723a87e80ef74d7f" href="../R/723a87e80ef74d7f.html" target="n" data-glyph="42,2" class="i field">Column</a>;
			<b>public int</b> <a id="e9f0a0cc332bd945" href="../R/e9f0a0cc332bd945.html" target="n" data-glyph="42,2" class="i field">CellIndex</a>;
			<b>public int</b> <a id="087c27021124f6fc" href="../R/087c27021124f6fc.html" target="n" data-glyph="42,2" class="i field">ColumnIndex</a>;
		}

		<b>private static readonly</b> <a href="@0@PresentationFramework/A.html#08d992ee7e0a1516" class="t t">ResourceDictionary</a> <a id="fd4df47f9cb12ee2" href="../R/fd4df47f9cb12ee2.html" target="n" data-glyph="46,1" class="i field">TreeResourceDictionary</a>;
		<b>static</b> <a id="2d3445b4a2528eb8" href="../R/../../0000000000.html" target="n" data-glyph="76,1" class="i method">TreeViewBackend</a>()
		{
			<a href="@0@System/A.html#991565dd25f47c90" class="t t">Uri</a> <span id="r0 rd" class="r0 r">uri</span> = <b>new</b> <a href="@0@System/A.html#9e1bb2fef0d1159b" class="t constructor">Uri</a> (<span class="s">&quot;pack://application:,,,/Xwt.WPF;component/XWT.WPFBackend/TreeView.xaml&quot;</span>);
			<a href="#fd4df47f9cb12ee2" class="i field">TreeResourceDictionary</a> = (<a href="@0@PresentationFramework/A.html#08d992ee7e0a1516" class="t t">ResourceDictionary</a>)<a href="@0@PresentationFramework/A.html#7449eaf937932294" class="t t">XamlReader</a>.<a href="@0@PresentationFramework/A.html#5a2e202c49f4093f" class="i method">Load</a> (<span class="i n">System</span>.<span class="i n">Windows</span>.<a href="@0@PresentationFramework/A.html#cf9c51e402f97b05" class="t t">Application</a>.<a href="@0@PresentationFramework/A.html#5a38b7cc263b3618" class="i method">GetResourceStream</a> (<span class="r0 r">uri</span>).<a href="@0@PresentationFramework/A.html#371e1ac58c44b35d" class="i property">Stream</a>);
		}

		<b>public</b> <a id="b06694081c79a98a" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i constructor">TreeViewBackend</a> ()
		{
			<a href="#07d50b7b59f4046c" class="i property">Tree</a> = <b>new</b> <a href="ExTreeView.cs.html#46c8e88959e02c35" class="t constructor">ExTreeView</a>();
			<a href="#07d50b7b59f4046c" class="i property">Tree</a>.<a href="@0@PresentationFramework/A.html#49776fc24d2e2b0d" class="i property">Resources</a>.<a href="@0@PresentationFramework/A.html#864bafd614698a44" class="i property">MergedDictionaries</a>.<a href="@0@mscorlib/A.html#5c61cc24de82f7e7" class="i method">Add</a> (<a href="#fd4df47f9cb12ee2" class="i field">TreeResourceDictionary</a>);
			<a href="#07d50b7b59f4046c" class="i property">Tree</a>.<a href="@0@PresentationFramework/A.html#dfb10ea608e9e563" class="i property">ItemTemplate</a> = <b>new</b> <a href="@0@PresentationFramework/A.html#2e17fd10777a9d6a" class="t constructor">HierarchicalDataTemplate</a> { <a href="@0@PresentationFramework/A.html#0ecd1c8c84d99c28" class="i property">ItemsSource</a> = <b>new</b> <a href="@0@PresentationFramework/A.html#94f69147a4e4e69b" class="t constructor">Binding</a> (<span class="s">&quot;Children&quot;</span>) };
			<a href="#07d50b7b59f4046c" class="i property">Tree</a>.<a href="@0@WindowsBase/A.html#b1809fe135a72ec5" class="i method">SetValue</a> (<a href="@0@PresentationFramework/A.html#22e1b692280b25fa" class="t t">VirtualizingStackPanel</a>.<a href="@0@PresentationFramework/A.html#b4e3883f7476f9d0" class="i field">IsVirtualizingProperty</a>, <b>true</b>);
		}

		<b>public</b> <a href="@0@PresentationFramework/A.html#488ab4a977a015eb" class="t t">ScrollViewer</a> <a id="d4ecef107234a133" href="../R/d4ecef107234a133.html" target="n" data-glyph="102,1" class="i property">ScrollViewer</a> {
			<b>get</b> {
				<a href="@0@PresentationFramework/A.html#69b4bdadbc461ce5" class="t t">Decorator</a> <span id="r1 rd" class="r1 r">border</span> = <span class="i n">System</span>.<span class="i n">Windows</span>.<span class="i n">Media</span>.<a href="@0@PresentationCore/A.html#7f1e2538afba01e7" class="t t">VisualTreeHelper</a>.<a href="@0@PresentationCore/A.html#30089fb0c0679121" class="i method">GetChild</a>(<a href="#07d50b7b59f4046c" class="i property">Tree</a>, 0) <b>as</b> <a href="@0@PresentationFramework/A.html#69b4bdadbc461ce5" class="t t">Decorator</a>;
				<b>if</b> (<span class="r1 r">border</span> != <b>null</b>)
					<b>return</b> <span class="r1 r">border</span>.<a href="@0@PresentationFramework/A.html#2a880652079bdb31" class="i property">Child</a> <b>as</b> <a href="@0@PresentationFramework/A.html#488ab4a977a015eb" class="t t">ScrollViewer</a>;
				<b>else
					return null</b>;
			}
		}

		<b>public</b> <a href="/Xwt3/A.html#b5041ff6cb937110" class="t t">TreePosition</a> <a id="83492650198be42d" href="../R/83492650198be42d.html" target="n" data-glyph="102,1" class="i property">CurrentEventRow</a> { <b>get</b>; <b>set</b>;  }
		
		<b>public</b> <a href="/Xwt3/A.html#db9ace7b1c7d9c22" class="t t">ScrollPolicy</a> <a id="b139d267f55348b5" href="../R/b139d267f55348b5.html" target="n" data-glyph="102,1" class="i property">VerticalScrollPolicy</a> {
			<b>get</b> { <b>return</b> <a href="@0@PresentationFramework/A.html#488ab4a977a015eb" class="t t">ScrollViewer</a>.<a href="@0@PresentationFramework/A.html#0bb061fa751c5719" class="i method">GetVerticalScrollBarVisibility</a> (<a href="#07d50b7b59f4046c" class="i property">Tree</a>).<a href="DataConverter.cs.html#30182857045e92da" class="i method">ToXwtScrollPolicy</a> (); }
			<b>set</b> { <a href="@0@PresentationFramework/A.html#488ab4a977a015eb" class="t t">ScrollViewer</a>.<a href="@0@PresentationFramework/A.html#fa79f9d940831d3c" class="i method">SetVerticalScrollBarVisibility</a> (<a href="#07d50b7b59f4046c" class="i property">Tree</a>, <b>value</b>.<a href="DataConverter.cs.html#0ca381f976217491" class="i method">ToWpfScrollBarVisibility</a> ()); }
		}

		<b>public</b> <a href="/Xwt3/A.html#db9ace7b1c7d9c22" class="t t">ScrollPolicy</a> <a id="763195f39904e755" href="../R/763195f39904e755.html" target="n" data-glyph="102,1" class="i property">HorizontalScrollPolicy</a> {
			<b>get</b> { <b>return</b> <a href="@0@PresentationFramework/A.html#488ab4a977a015eb" class="t t">ScrollViewer</a>.<a href="@0@PresentationFramework/A.html#99c7adca67579b1b" class="i method">GetHorizontalScrollBarVisibility</a> (<a href="#07d50b7b59f4046c" class="i property">Tree</a>).<a href="DataConverter.cs.html#30182857045e92da" class="i method">ToXwtScrollPolicy</a> (); }
			<b>set</b> { <a href="@0@PresentationFramework/A.html#488ab4a977a015eb" class="t t">ScrollViewer</a>.<a href="@0@PresentationFramework/A.html#02784bc331b62067" class="i method">SetHorizontalScrollBarVisibility</a> (<a href="#07d50b7b59f4046c" class="i property">Tree</a>, <b>value</b>.<a href="DataConverter.cs.html#0ca381f976217491" class="i method">ToWpfScrollBarVisibility</a> ()); }
		}

		<b>public</b> <a href="/Xwt3/A.html#dd38dbd913dc552d" class="t t">IScrollControlBackend</a> <a id="6434a15034a1a0a5" href="../R/6434a15034a1a0a5.html" target="n" data-glyph="72,1" class="i method">CreateVerticalScrollControl</a>()
		{
			<b>return</b> <b>new</b> <a href="ScrollControlBackend.cs.html#9251e432c6384bdf" class="t constructor">ScrollControlBackend</a>(<a href="#d4ecef107234a133" class="i property">ScrollViewer</a>, <b>true</b>);
		}

		<b>public</b> <a href="/Xwt3/A.html#dd38dbd913dc552d" class="t t">IScrollControlBackend</a> <a id="257cc62d69fba4e1" href="../R/257cc62d69fba4e1.html" target="n" data-glyph="72,1" class="i method">CreateHorizontalScrollControl</a>()
		{
			<b>return</b> <b>new</b> <a href="ScrollControlBackend.cs.html#9251e432c6384bdf" class="t constructor">ScrollControlBackend</a>(<a href="#d4ecef107234a133" class="i property">ScrollViewer</a>, <b>false</b>);
		}

		<b>public</b> <a href="/Xwt3/A.html#b5041ff6cb937110" class="t t">TreePosition</a>[] <a id="cf341fd0d2dd69fc" href="../R/cf341fd0d2dd69fc.html" target="n" data-glyph="102,1" class="i property">SelectedRows</a> {
			<b>get</b> { <b>return</b> <a href="#07d50b7b59f4046c" class="i property">Tree</a>.<a href="ExTreeView.cs.html#0bab2449b8afe9e9" class="i property">SelectedItems</a>.<a href="@0@System.Core/A.html#27bb217a6d5457ec" class="i method">Cast</a>&lt;<a href="/Xwt3/A.html#b5041ff6cb937110" class="t t">TreePosition</a>&gt; ().<a href="@0@System.Core/A.html#783a052330e7d48d" class="i method">ToArray</a> (); }
		}


		<b>public</b> <a href="/Xwt3/A.html#b5041ff6cb937110" class="t t">TreePosition</a> <a id="9dea950afc42054a" href="../R/9dea950afc42054a.html" target="n" data-glyph="102,1" class="i property">FocusedRow</a> {
			<b>get</b> {
				<b>if</b> (<a href="#07d50b7b59f4046c" class="i property">Tree</a>.<a href="ExTreeView.cs.html#95f40a7a8dc0a8be" class="i property">FocusedItem</a> != <b>null</b>)
					<b>return</b> <a href="#07d50b7b59f4046c" class="i property">Tree</a>.<a href="ExTreeView.cs.html#95f40a7a8dc0a8be" class="i property">FocusedItem</a>.<a href="@0@PresentationFramework/A.html#e4aaca7514916173" class="i property">DataContext</a> <b>as</b> <a href="/Xwt3/A.html#b5041ff6cb937110" class="t t">TreePosition</a>;
				<b>return null</b>;
			}
			<b>set</b> {
				<a href="ExTreeViewItem.cs.html#505370876d79da38" class="t t">ExTreeViewItem</a> <span id="r2 rd" class="r2 r">item</span> = <a href="#f8d1cc938d27938a" class="i method">GetVisibleTreeItem</a> (<b>value</b>);
				<a href="#07d50b7b59f4046c" class="i property">Tree</a>.<a href="ExTreeView.cs.html#95f40a7a8dc0a8be" class="i property">FocusedItem</a> = <span class="r2 r">item</span>;
			}
		}

		<b>private bool</b> <a id="0ab238986f002c4c" href="../R/0ab238986f002c4c.html" target="n" data-glyph="46,1" class="i field">headersVisible</a> = <b>true</b>;
		<b>public bool</b> <a id="6500523e124fb675" href="../R/6500523e124fb675.html" target="n" data-glyph="102,1" class="i property">HeadersVisible</a> {
			<b>get</b> { <b>return</b> <a href="#f54eddb79b1efdc7" class="k">this</a>.<a href="#0ab238986f002c4c" class="i field">headersVisible</a>; }
			<b>set</b>
			{
				<a href="#f54eddb79b1efdc7" class="k">this</a>.<a href="#0ab238986f002c4c" class="i field">headersVisible</a> = <b>value</b>;
				<b>if</b> (<b>value</b>) {
					<b>if</b> (<a href="#07d50b7b59f4046c" class="i property">Tree</a>.<a href="ExTreeView.cs.html#b1fbc753ddb2cd94" class="i property">View</a>.<a href="@0@PresentationFramework/A.html#1ddc3c715357a0ed" class="i property">ColumnHeaderContainerStyle</a> != <b>null</b>)
						<a href="#07d50b7b59f4046c" class="i property">Tree</a>.<a href="ExTreeView.cs.html#b1fbc753ddb2cd94" class="i property">View</a>.<a href="@0@PresentationFramework/A.html#1ddc3c715357a0ed" class="i property">ColumnHeaderContainerStyle</a>.<a href="@0@PresentationFramework/A.html#b184603284693a4f" class="i property">Setters</a>.<a href="@0@mscorlib/A.html#7ea53c2fa96a1c7d" class="i method">Remove</a> (<a href="#3b15be0741b66426" class="i field">HideHeaderSetter</a>);
				} <b>else</b> {
					<b>if</b> (<a href="#07d50b7b59f4046c" class="i property">Tree</a>.<a href="ExTreeView.cs.html#b1fbc753ddb2cd94" class="i property">View</a>.<a href="@0@PresentationFramework/A.html#1ddc3c715357a0ed" class="i property">ColumnHeaderContainerStyle</a> == <b>null</b>)
						<a href="#07d50b7b59f4046c" class="i property">Tree</a>.<a href="ExTreeView.cs.html#b1fbc753ddb2cd94" class="i property">View</a>.<a href="@0@PresentationFramework/A.html#1ddc3c715357a0ed" class="i property">ColumnHeaderContainerStyle</a> = <b>new</b> <a href="@0@PresentationFramework/A.html#71226587a8022bb9" class="t constructor">Style</a>();

				    <a href="#07d50b7b59f4046c" class="i property">Tree</a>.<a href="ExTreeView.cs.html#b1fbc753ddb2cd94" class="i property">View</a>.<a href="@0@PresentationFramework/A.html#1ddc3c715357a0ed" class="i property">ColumnHeaderContainerStyle</a>.<a href="@0@PresentationFramework/A.html#b184603284693a4f" class="i property">Setters</a>.<a href="@0@mscorlib/A.html#5c61cc24de82f7e7" class="i method">Add</a> (<a href="#3b15be0741b66426" class="i field">HideHeaderSetter</a>);
				}
			}
		}

		<a href="/Xwt3/A.html#78a4ec3a7d429807" class="t t">GridLines</a> <a id="b93e3acb4d71da6c" href="../R/b93e3acb4d71da6c.html" target="n" data-glyph="46,1" class="i field">gridLinesVisible</a>;
		<b>public</b> <a href="/Xwt3/A.html#78a4ec3a7d429807" class="t t">GridLines</a> <a id="98c67155c5b27fbe" href="../R/98c67155c5b27fbe.html" target="n" data-glyph="102,1" class="i property">GridLinesVisible</a> {
			<b>get</b> {
				<b>return</b> <a href="#b93e3acb4d71da6c" class="i field">gridLinesVisible</a>;
			}
			<b>set</b> {
				<a href="#b93e3acb4d71da6c" class="i field">gridLinesVisible</a> = <b>value</b>;
			}
		}

		<b>public void</b> <a id="9ac8e6e2d432b262" href="../R/9ac8e6e2d432b262.html" target="n" data-glyph="72,1" class="i method">SelectRow</a> (<a href="/Xwt3/A.html#b5041ff6cb937110" class="t t">TreePosition</a> <span id="r3 rd" class="r3 r">pos</span>)
		{
			<a href="#07d50b7b59f4046c" class="i property">Tree</a>.<a href="ExTreeView.cs.html#0bab2449b8afe9e9" class="i property">SelectedItems</a>.<a href="@0@mscorlib/A.html#bded9f03433a53d4" class="i method">Add</a> (<span class="r3 r">pos</span>);
		}

		<b>public void</b> <a id="c878bf45d42886bf" href="../R/c878bf45d42886bf.html" target="n" data-glyph="72,1" class="i method">UnselectRow</a> (<a href="/Xwt3/A.html#b5041ff6cb937110" class="t t">TreePosition</a> <span id="r4 rd" class="r4 r">pos</span>)
		{
			<a href="#07d50b7b59f4046c" class="i property">Tree</a>.<a href="ExTreeView.cs.html#0bab2449b8afe9e9" class="i property">SelectedItems</a>.<a href="@0@mscorlib/A.html#36e262a0820371fd" class="i method">Remove</a> (<span class="r4 r">pos</span>);
		}

		<b>public bool</b> <a id="f8b96aa119484ecc" href="../R/f8b96aa119484ecc.html" target="n" data-glyph="72,1" class="i method">IsRowSelected</a> (<a href="/Xwt3/A.html#b5041ff6cb937110" class="t t">TreePosition</a> <span id="r5 rd" class="r5 r">row</span>)
		{
			<b>return</b> <a href="#07d50b7b59f4046c" class="i property">Tree</a>.<a href="ExTreeView.cs.html#0bab2449b8afe9e9" class="i property">SelectedItems</a>.<a href="@0@mscorlib/A.html#ffcdcc091fb8c1ef" class="i method">Contains</a> (<span class="r5 r">row</span>);
		}

		<b>public bool</b> <a id="6d4aaf5fcc9c8d22" href="../R/6d4aaf5fcc9c8d22.html" target="n" data-glyph="72,1" class="i method">IsRowExpanded</a> (<a href="/Xwt3/A.html#b5041ff6cb937110" class="t t">TreePosition</a> <span id="r6 rd" class="r6 r">row</span>)
		{
			<b>return</b> ((<a href="TreeStoreNode.cs.html#0256f9cffbf22578" class="t t">TreeStoreNode</a>) <span class="r6 r">row</span>).<a href="TreeStoreNode.cs.html#468dee013d894559" class="i property">IsExpanded</a>;
		}

		<b>public void</b> <a id="432b720c4c41d885" href="../R/432b720c4c41d885.html" target="n" data-glyph="72,1" class="i method">ExpandToRow</a> (<a href="/Xwt3/A.html#b5041ff6cb937110" class="t t">TreePosition</a> <span id="r7 rd" class="r7 r">pos</span>)
		{
			<a href="TreeStoreNode.cs.html#0256f9cffbf22578" class="t t">TreeStoreNode</a> <span id="r8 rd" class="r8 r">parent</span> = ((<a href="TreeStoreNode.cs.html#0256f9cffbf22578" class="t t">TreeStoreNode</a>) <span class="r7 r">pos</span>).<a href="TreeStoreNode.cs.html#22159df548e41300" class="i property">Parent</a>;
			<b>if</b> (<span class="r8 r">parent</span> != <b>null</b>)
			    <span class="r8 r">parent</span>.<a href="TreeStoreNode.cs.html#468dee013d894559" class="i property">IsExpanded</a> = <b>true</b>;
		}

		<b>public void</b> <a id="8cd1628d3beb0dca" href="../R/8cd1628d3beb0dca.html" target="n" data-glyph="72,1" class="i method">ExpandRow</a> (<a href="/Xwt3/A.html#b5041ff6cb937110" class="t t">TreePosition</a> <span id="r9 rd" class="r9 r">row</span>, <b>bool</b> <span id="r10 rd" class="r10 r">expandChildren</span>)
		{
			<a href="TreeStoreNode.cs.html#0256f9cffbf22578" class="t t">TreeStoreNode</a> <span id="r11 rd" class="r11 r">node</span> = ((<a href="TreeStoreNode.cs.html#0256f9cffbf22578" class="t t">TreeStoreNode</a>) <span class="r9 r">row</span>);
			<span class="r11 r">node</span>.<a href="TreeStoreNode.cs.html#468dee013d894559" class="i property">IsExpanded</a> = <b>true</b>;

			<b>if</b> (<span class="r10 r">expandChildren</span>) {
			    <b>foreach</b> (<a href="TreeStoreNode.cs.html#0256f9cffbf22578" class="t t">TreeStoreNode</a> <span id="r12 rd" class="r12 r">childNode</span> <b>in</b> <span class="r11 r">node</span>.<a href="TreeStoreNode.cs.html#35aa89006732a945" class="i property">Children</a>)
			        <span class="r12 r">childNode</span>.<a href="TreeStoreNode.cs.html#468dee013d894559" class="i property">IsExpanded</a> = <b>true</b>;
			}
		}

		<b>public void</b> <a id="4b70d066f2cc7665" href="../R/4b70d066f2cc7665.html" target="n" data-glyph="72,1" class="i method">CollapseRow</a> (<a href="/Xwt3/A.html#b5041ff6cb937110" class="t t">TreePosition</a> <span id="r13 rd" class="r13 r">row</span>)
		{
			((<a href="TreeStoreNode.cs.html#0256f9cffbf22578" class="t t">TreeStoreNode</a>) <span class="r13 r">row</span>).<a href="TreeStoreNode.cs.html#468dee013d894559" class="i property">IsExpanded</a> = <b>false</b>;
		}

		<b>public void</b> <a id="5ec9b29ea1b1a2f9" href="../R/5ec9b29ea1b1a2f9.html" target="n" data-glyph="72,1" class="i method">ScrollToRow</a> (<a href="/Xwt3/A.html#b5041ff6cb937110" class="t t">TreePosition</a> <span id="r14 rd" class="r14 r">pos</span>)
		{
			<a href="ExTreeViewItem.cs.html#505370876d79da38" class="t t">ExTreeViewItem</a> <span id="r15 rd" class="r15 r">item</span> = <a href="#f8d1cc938d27938a" class="i method">GetVisibleTreeItem</a> (<span class="r14 r">pos</span>);
			<b>if</b> (<span class="r15 r">item</span> != <b>null</b>)
				<span class="r15 r">item</span>.<a href="@0@PresentationFramework/A.html#9635a1dec3754b33" class="i method">BringIntoView</a> ();
		}

		<b>public void</b> <a id="a45e5dbd6f78da18" href="../R/a45e5dbd6f78da18.html" target="n" data-glyph="72,1" class="i method">SetSelectionMode</a> (<a href="/Xwt3/A.html#b453adf4ae0d8fef" class="t t">SelectionMode</a> <span id="r16 rd" class="r16 r">mode</span>)
		{
			<a href="#07d50b7b59f4046c" class="i property">Tree</a>.<a href="ExTreeView.cs.html#a00a6f8decc884bd" class="i property">SelectionMode</a> = (<span class="r16 r">mode</span> == <a href="/Xwt3/A.html#b453adf4ae0d8fef" class="t t">SelectionMode</a>.<a href="/Xwt3/A.html#056b9ea1c89b6e51" class="i field">Single</a>)
			                     	? <span class="i n">SWC</span>.<a href="@0@PresentationFramework/A.html#c049f467e619a257" class="t t">SelectionMode</a>.<a href="@0@PresentationFramework/A.html#7abb7043062e8485" class="i field">Single</a>
			                     	: <span class="i n">SWC</span>.<a href="@0@PresentationFramework/A.html#c049f467e619a257" class="t t">SelectionMode</a>.<a href="@0@PresentationFramework/A.html#a586fe8f50e993cf" class="i field">Extended</a>;
		}

		<b>public void</b> <a id="22de20bb07f9fe9e" href="../R/22de20bb07f9fe9e.html" target="n" data-glyph="72,1" class="i method">SelectAll</a> ()
		{
			<a href="#07d50b7b59f4046c" class="i property">Tree</a>.<a href="ExTreeView.cs.html#f7e5c6153eb26be0" class="i method">SelectAllExpanded</a>();
		}

		<b>public void</b> <a id="391b93d87a21e7fd" href="../R/391b93d87a21e7fd.html" target="n" data-glyph="72,1" class="i method">UnselectAll</a> ()
		{
			<a href="#07d50b7b59f4046c" class="i property">Tree</a>.<a href="ExTreeView.cs.html#d2bffb102609dc64" class="i method">UnselectAll</a>();
		}

		<b>public void</b> <a id="cb304a52d64f9d29" href="../R/cb304a52d64f9d29.html" target="n" data-glyph="72,1" class="i method">SetSource</a> (<a href="/Xwt3/A.html#ddc6c91c6cba14b5" class="t t">ITreeDataSource</a> <span id="r17 rd" class="r17 r">source</span>, <a href="/Xwt3/A.html#037bf028765c6b12" class="t t">IBackend</a> <span id="r18 rd" class="r18 r">sourceBackend</span>)
		{
			<a href="#07d50b7b59f4046c" class="i property">Tree</a>.<a href="@0@PresentationFramework/A.html#3bb5cb5ee01ee8d2" class="i property">ItemsSource</a> = (<a href="TreeStoreBackend.cs.html#8bb127f540e9bc08" class="t t">TreeStoreBackend</a>) <span class="r18 r">sourceBackend</span>;
		}

		<b>public object</b> <a id="23e830d8b1dc7c2d" href="../R/23e830d8b1dc7c2d.html" target="n" data-glyph="72,1" class="i method">AddColumn</a> (<a href="/Xwt3/A.html#8687c4aba4c5d68c" class="t t">ListViewColumn</a> <span id="r19 rd" class="r19 r">column</span>)
		{
			<a href="@0@PresentationFramework/A.html#4699e5df3b997f47" class="k">var</a> <span id="r20 rd" class="r20 r">col</span> = <b>new</b> <a href="@0@PresentationFramework/A.html#ba5e34b448fb8796" class="t constructor">GridViewColumn</a> ();

			<a href="#749f0b91944e0d87" class="i method">UpdateColumn</a> (<span class="r19 r">column</span>, <span class="r20 r">col</span>, <a href="/Xwt3/A.html#5e8af302873dd871" class="t t">ListViewColumnChange</a>.<a href="/Xwt3/A.html#42cedc9d728aad9b" class="i field">Title</a>);

			<a href="#07d50b7b59f4046c" class="i property">Tree</a>.<a href="ExTreeView.cs.html#b1fbc753ddb2cd94" class="i property">View</a>.<a href="@0@PresentationFramework/A.html#33e1454180ebe7a5" class="i property">Columns</a>.<a href="@0@mscorlib/A.html#5c61cc24de82f7e7" class="i method">Add</a> (<span class="r20 r">col</span>);
			
			<a href="#749f0b91944e0d87" class="i method">UpdateColumn</a> (<span class="r19 r">column</span>, <span class="r20 r">col</span>, <a href="/Xwt3/A.html#5e8af302873dd871" class="t t">ListViewColumnChange</a>.<a href="/Xwt3/A.html#18db84d12b8652b0" class="i field">Cells</a>);

			<b>return</b> <span class="r20 r">col</span>;
		}

		<b>public void</b> <a id="749f0b91944e0d87" href="../R/749f0b91944e0d87.html" target="n" data-glyph="72,1" class="i method">UpdateColumn</a> (<a href="/Xwt3/A.html#8687c4aba4c5d68c" class="t t">ListViewColumn</a> <span id="r21 rd" class="r21 r">column</span>, <b>object</b> <span id="r22 rd" class="r22 r">handle</span>, <a href="/Xwt3/A.html#5e8af302873dd871" class="t t">ListViewColumnChange</a> <span id="r23 rd" class="r23 r">change</span>)
		{
			<a href="@0@PresentationFramework/A.html#4699e5df3b997f47" class="k">var</a> <span id="r24 rd" class="r24 r">col</span> = ((<a href="@0@PresentationFramework/A.html#4699e5df3b997f47" class="t t">GridViewColumn</a>) <span class="r22 r">handle</span>);
			<b>switch</b> (<span class="r23 r">change</span>) {
			<b>case</b> <a href="/Xwt3/A.html#5e8af302873dd871" class="t t">ListViewColumnChange</a>.<a href="/Xwt3/A.html#42cedc9d728aad9b" class="i field">Title</a>:
				<span class="r24 r">col</span>.<a href="@0@PresentationFramework/A.html#b20e25890cd7643b" class="i property">Header</a> = <span class="r21 r">column</span>.<a href="/Xwt3/A.html#0fab8ef30b825294" class="i property">Title</a>;
				<b>break</b>;

			<b>case</b> <a href="/Xwt3/A.html#5e8af302873dd871" class="t t">ListViewColumnChange</a>.<a href="/Xwt3/A.html#18db84d12b8652b0" class="i field">Cells</a>:
                <a href="@0@PresentationFramework/A.html#dcee1d06e39f1148" class="k">var</a> <span id="r25 rd" class="r25 r">cellTemplate</span> = <a href="../Xwt.WPFBackend.Utilities/CellUtil.cs.html#64d5190e23240978" class="t t">CellUtil</a>.<a href="../Xwt.WPFBackend.Utilities/CellUtil.cs.html#d5798f0fdc626d5d" class="i method">CreateBoundColumnTemplate</a>(<a href="Backend.cs.html#a1d66241a0d4621f" class="i property">Context</a>, <a href="WidgetBackend.cs.html#a0cac2053ea95bf6" class="i property">Frontend</a>, <span class="r21 r">column</span>.<a href="/Xwt3/A.html#31318c7d8d3554e1" class="i property">Views</a>);

				<span class="r24 r">col</span>.<a href="@0@PresentationFramework/A.html#9780ca1ffa9c0f95" class="i property">CellTemplate</a> = <b>new</b> <a href="@0@PresentationFramework/A.html#7d59ff37e43d139d" class="t constructor">DataTemplate</a> { <a href="@0@PresentationFramework/A.html#0ed53b508f4c0433" class="i property">VisualTree</a> = <span class="r25 r">cellTemplate</span> };

				<b>int</b> <span id="r26 rd" class="r26 r">index</span> = <a href="#07d50b7b59f4046c" class="i property">Tree</a>.<a href="ExTreeView.cs.html#b1fbc753ddb2cd94" class="i property">View</a>.<a href="@0@PresentationFramework/A.html#33e1454180ebe7a5" class="i property">Columns</a>.<a href="@0@mscorlib/A.html#5f1520f6f0d504ad" class="i method">IndexOf</a> (<span class="r24 r">col</span>);
				<b>if</b> (<span class="r26 r">index</span> == 0) {
					<a href="@0@PresentationFramework/A.html#dcee1d06e39f1148" class="k">var</a> <span id="r27 rd" class="r27 r">dockFactory</span> = <a href="#9ce7090cb269a5ad" class="i method">CreateExpanderDock</a> ();
					<span class="r27 r">dockFactory</span>.<a href="@0@PresentationFramework/A.html#aa86771013f3f7a3" class="i method">AppendChild</a> (<span class="r25 r">cellTemplate</span>);

					<span class="r24 r">col</span>.<a href="@0@PresentationFramework/A.html#9780ca1ffa9c0f95" class="i property">CellTemplate</a>.<a href="@0@PresentationFramework/A.html#0ed53b508f4c0433" class="i property">VisualTree</a> = <span class="r27 r">dockFactory</span>;
				}

				<a href="#f0fecaed81ae3d40" class="i method">MapColumn</a> (<span class="r21 r">column</span>, <span class="r24 r">col</span>);

				<b>break</b>;
			<b>case</b> <a href="/Xwt3/A.html#5e8af302873dd871" class="t t">ListViewColumnChange</a>.<a href="/Xwt3/A.html#0d18e7c22925d7aa" class="i field">Alignment</a>:
				<a href="@0@PresentationFramework/A.html#dd312833d0723042" class="k">var</a> <span id="r28 rd" class="r28 r">style</span> = <b>new</b> <a href="@0@PresentationFramework/A.html#77e1492c499487f0" class="t constructor">Style</a>(<b>typeof</b>(<a href="@0@PresentationFramework/A.html#ff64122b0ca985e1" class="t t">GridViewColumnHeader</a>));
				<span class="r28 r">style</span>.<a href="@0@PresentationFramework/A.html#b184603284693a4f" class="i property">Setters</a>.<a href="@0@mscorlib/A.html#5c61cc24de82f7e7" class="i method">Add</a>(<b>new</b> <a href="@0@PresentationFramework/A.html#c48706a61a5d8f59" class="t constructor">Setter</a>(<a href="@0@PresentationFramework/A.html#6750b721a2294fc5" class="t t">Control</a>.<a href="@0@PresentationFramework/A.html#93575f48464ecf78" class="i field">HorizontalContentAlignmentProperty</a>, <a href="Util.cs.html#b5438530d5d5a638" class="t t">Util</a>.<a href="Util.cs.html#34f78b77580f1f75" class="i method">ToWpfHorizontalAlignment</a>(<span class="r21 r">column</span>.<a href="/Xwt3/A.html#6fb193bd23bcb9b0" class="i property">Alignment</a>)));
				<span class="r24 r">col</span>.<a href="@0@PresentationFramework/A.html#73e200be5ba957a3" class="i property">HeaderContainerStyle</a> = <span class="r28 r">style</span>;
				<b>break</b>;
			}
		}

		<b>public void</b> <a id="65d4ccc45c787e61" href="../R/65d4ccc45c787e61.html" target="n" data-glyph="72,1" class="i method">RemoveColumn</a> (<a href="/Xwt3/A.html#8687c4aba4c5d68c" class="t t">ListViewColumn</a> <span id="r29 rd" class="r29 r">column</span>, <b>object</b> <span id="r30 rd" class="r30 r">handle</span>)
		{
			<a href="#07d50b7b59f4046c" class="i property">Tree</a>.<a href="ExTreeView.cs.html#b1fbc753ddb2cd94" class="i property">View</a>.<a href="@0@PresentationFramework/A.html#33e1454180ebe7a5" class="i property">Columns</a>.<a href="@0@mscorlib/A.html#7ea53c2fa96a1c7d" class="i method">Remove</a> ((<a href="@0@PresentationFramework/A.html#4699e5df3b997f47" class="t t">GridViewColumn</a>) <span class="r30 r">handle</span>);
			<b>foreach</b> (<a href="/Xwt3/A.html#9af53f60be83be5c" class="k">var</a> <span id="r31 rd" class="r31 r">k</span> <b>in</b> <a href="#57c34977ae5d18ec" class="i field">cellViews</a>.<a href="@0@System.Core/A.html#e73922753675387a" class="i method">Where</a> (<span id="r32 rd" class="r32 r">e</span> =&gt; <span class="r32 r">e</span>.<a href="@0@mscorlib/A.html#38c0e86cc4b30170" class="i property">Value</a>.<a href="#723a87e80ef74d7f" class="i field">Column</a> == <span class="r29 r">column</span>).<a href="@0@System.Core/A.html#5c652c53e80df013" class="i method">Select</a> (<span id="r33 rd" class="r33 r">e</span> =&gt; <span class="r33 r">e</span>.<a href="@0@mscorlib/A.html#f9d1c04feb1af032" class="i property">Key</a>).<a href="@0@System.Core/A.html#783a052330e7d48d" class="i method">ToArray</a> ())
				<a href="#57c34977ae5d18ec" class="i field">cellViews</a>.<a href="@0@mscorlib/A.html#a6db5ffdec557169" class="i method">Remove</a> (<span class="r31 r">k</span>);
		}

		<b>void</b> <a id="f0fecaed81ae3d40" href="../R/f0fecaed81ae3d40.html" target="n" data-glyph="76,1" class="i method">MapColumn</a> (<a href="/Xwt3/A.html#8687c4aba4c5d68c" class="t t">ListViewColumn</a> <span id="r34 rd" class="r34 r">col</span>, <a href="@0@PresentationFramework/A.html#4699e5df3b997f47" class="t t">GridViewColumn</a> <span id="r35 rd" class="r35 r">handle</span>)
		{
			<b>foreach</b> (<a href="/Xwt3/A.html#9af53f60be83be5c" class="k">var</a> <span id="r36 rd" class="r36 r">k</span> <b>in</b> <a href="#57c34977ae5d18ec" class="i field">cellViews</a>.<a href="@0@System.Core/A.html#e73922753675387a" class="i method">Where</a> (<span id="r37 rd" class="r37 r">e</span> =&gt; <span class="r37 r">e</span>.<a href="@0@mscorlib/A.html#38c0e86cc4b30170" class="i property">Value</a>.<a href="#723a87e80ef74d7f" class="i field">Column</a> == <span class="r34 r">col</span>).<a href="@0@System.Core/A.html#5c652c53e80df013" class="i method">Select</a> (<span id="r38 rd" class="r38 r">e</span> =&gt; <span class="r38 r">e</span>.<a href="@0@mscorlib/A.html#f9d1c04feb1af032" class="i property">Key</a>).<a href="@0@System.Core/A.html#783a052330e7d48d" class="i method">ToArray</a> ())
				<a href="#57c34977ae5d18ec" class="i field">cellViews</a>.<a href="@0@mscorlib/A.html#a6db5ffdec557169" class="i method">Remove</a> (<span class="r36 r">k</span>);

			<a href="@0@mscorlib/A.html#225942ed7b7a3252" class="k">var</a> <span id="r39 rd" class="r39 r">colindex</span> = <a href="#07d50b7b59f4046c" class="i property">Tree</a>.<a href="ExTreeView.cs.html#b1fbc753ddb2cd94" class="i property">View</a>.<a href="@0@PresentationFramework/A.html#33e1454180ebe7a5" class="i property">Columns</a>.<a href="@0@mscorlib/A.html#5f1520f6f0d504ad" class="i method">IndexOf</a> (<span class="r35 r">handle</span>);
			<b>for</b> (<b>int</b> <span id="r40 rd" class="r40 r">i</span> = 0; <span class="r40 r">i</span> &lt; <span class="r34 r">col</span>.<a href="/Xwt3/A.html#31318c7d8d3554e1" class="i property">Views</a>.<a href="@0@mscorlib/A.html#f2419069e9890f5d" class="i property">Count</a>; <span class="r40 r">i</span>++) {
				<a href="/Xwt3/A.html#9af53f60be83be5c" class="k">var</a> <span id="r41 rd" class="r41 r">v</span> = <span class="r34 r">col</span>.<a href="/Xwt3/A.html#31318c7d8d3554e1" class="i property">Views</a> [<span class="r40 r">i</span>];
				<a href="@0@mscorlib/A.html#225942ed7b7a3252" class="k">var</a> <span id="r42 rd" class="r42 r">cellindex</span> = <span class="r34 r">col</span>.<a href="/Xwt3/A.html#31318c7d8d3554e1" class="i property">Views</a>.<a href="@0@mscorlib/A.html#5f1520f6f0d504ad" class="i method">IndexOf</a> (<span class="r41 r">v</span>);
				<a href="#57c34977ae5d18ec" class="i field">cellViews</a> [<span class="r41 r">v</span>] = <b>new</b> <a href="#7a144a26134cf115" class="t constructor">CellInfo</a> {
					<a href="#723a87e80ef74d7f" class="i field">Column</a> = <span class="r34 r">col</span>,
					<a href="#e9f0a0cc332bd945" class="i field">CellIndex</a> = <span class="r42 r">cellindex</span>,
					<a href="#087c27021124f6fc" class="i field">ColumnIndex</a> = <span class="r39 r">colindex</span>
				};
			}
		}

		<b>private</b> <a href="/Xwt3/A.html#38d1c5f91b4ee723" class="t t">RowDropPosition</a> <a id="0c8861bfea5418eb" href="../R/0c8861bfea5418eb.html" target="n" data-glyph="46,1" class="i field">dropPosition</a>;
		<b>private</b> <a href="ExTreeViewItem.cs.html#505370876d79da38" class="t t">ExTreeViewItem</a> <a id="209189f8110f0dad" href="../R/209189f8110f0dad.html" target="n" data-glyph="46,1" class="i field">dropTarget</a>;
		<b>private</b> <a href="@0@PresentationFramework/A.html#77a0687d80209f70" class="t t">Adorner</a> <a id="cea5bec5c038d506" href="../R/cea5bec5c038d506.html" target="n" data-glyph="46,1" class="i field">dropAdorner</a>;
		<b>public bool</b> <a id="10645c30ba7a6a8b" href="../R/10645c30ba7a6a8b.html" target="n" data-glyph="72,1" class="i method">GetDropTargetRow</a> (<b>double</b> <span id="r43 rd" class="r43 r">x</span>, <b>double</b> <span id="r44 rd" class="r44 r">y</span>, <b>out</b> <a href="/Xwt3/A.html#38d1c5f91b4ee723" class="t t">RowDropPosition</a> <span id="r45 rd" class="r45 r">pos</span>, <b>out</b> <a href="/Xwt3/A.html#b5041ff6cb937110" class="t t">TreePosition</a> <span id="r46 rd" class="r46 r">nodePosition</span>)
		{
			<span class="r46 r">nodePosition</span> = <b>null</b>;
			<a href="#f54eddb79b1efdc7" class="k">this</a>.<a href="#0c8861bfea5418eb" class="i field">dropPosition</a> = <span class="r45 r">pos</span> = <a href="/Xwt3/A.html#38d1c5f91b4ee723" class="t t">RowDropPosition</a>.<a href="/Xwt3/A.html#fcf4981a412e8ab8" class="i field">Into</a>;

			<a href="@0@PresentationCore/A.html#593409343c876ca8" class="k">var</a> <span id="r47 rd" class="r47 r">result</span> = <a href="@0@PresentationCore/A.html#7f1e2538afba01e7" class="t t">VisualTreeHelper</a>.<a href="@0@PresentationCore/A.html#ca4dbd9df8904db7" class="i method">HitTest</a> (<a href="#07d50b7b59f4046c" class="i property">Tree</a>, <b>new</b> <span class="i n">System</span>.<span class="i n">Windows</span>.<a href="@0@WindowsBase/A.html#df31222d1f00fae5" class="t constructor">Point</a> (<span class="r43 r">x</span>, <span class="r44 r">y</span>)) <b>as</b> <a href="@0@PresentationCore/A.html#593409343c876ca8" class="t t">PointHitTestResult</a>;

			<a href="@0@PresentationFramework/A.html#d2d98a3022fbac2f" class="k">var</a> <span id="r48 rd" class="r48 r">element</span> = (<span class="r47 r">result</span> != <b>null</b>) ? <span class="r47 r">result</span>.<a href="@0@PresentationCore/A.html#0bb0f599da3a6718" class="i property">VisualHit</a> <b>as</b> <a href="@0@PresentationFramework/A.html#d2d98a3022fbac2f" class="t t">FrameworkElement</a> : <b>null</b>;
			<b>while</b> (<span class="r48 r">element</span> != <b>null</b>) {
				<b>if</b> (<span class="r48 r">element</span> <b>is</b> <a href="ExTreeViewItem.cs.html#505370876d79da38" class="t t">ExTreeViewItem</a>)
					<b>break</b>;
				<b>if</b> (<span class="r48 r">element</span> <b>is</b> <a href="ExTreeView.cs.html#f162c84db9d2e04f" class="t t">ExTreeView</a>) <span class="c">// We can&#39;t succeed past this point</span>
					<b>return false</b>;

				<span class="r48 r">element</span> = <a href="@0@PresentationCore/A.html#7f1e2538afba01e7" class="t t">VisualTreeHelper</a>.<a href="@0@PresentationCore/A.html#31ea065317da8a39" class="i method">GetParent</a> (<span class="r48 r">element</span>) <b>as</b> <a href="@0@PresentationFramework/A.html#d2d98a3022fbac2f" class="t t">FrameworkElement</a>;
			}
			
			<a href="#f54eddb79b1efdc7" class="k">this</a>.<a href="#209189f8110f0dad" class="i field">dropTarget</a> = (<a href="ExTreeViewItem.cs.html#505370876d79da38" class="t t">ExTreeViewItem</a>)<span class="r48 r">element</span>;
			
			<b>if</b> (<span class="r48 r">element</span> == <b>null</b>)
				<b>return false</b>;

			<a href="@0@WindowsBase/A.html#9120327717fc513d" class="k">var</a> <span id="r49 rd" class="r49 r">point</span> = ((<a href="@0@PresentationCore/A.html#7911653ccb506216" class="t t">UIElement</a>)<span class="r47 r">result</span>.<a href="@0@PresentationCore/A.html#0bb0f599da3a6718" class="i property">VisualHit</a>).<a href="@0@PresentationCore/A.html#9941ee27952e8318" class="i method">TranslatePoint</a> (<span class="r47 r">result</span>.<a href="@0@PresentationCore/A.html#6a0dddf3f191fbbc" class="i property">PointHit</a>, <span class="r48 r">element</span>);

			<b>double</b> <span id="r50 rd" class="r50 r">edge</span> = <span class="r48 r">element</span>.<a href="@0@PresentationFramework/A.html#5554a4892ffe2cfc" class="i property">ActualHeight</a> * 0.15;
			<b>if</b> (<span class="r49 r">point</span>.<a href="@0@WindowsBase/A.html#0a42b94edb8c27ab" class="i property">Y</a> &lt;= <span class="r50 r">edge</span>)
				<a href="#f54eddb79b1efdc7" class="k">this</a>.<a href="#0c8861bfea5418eb" class="i field">dropPosition</a> = <span class="r45 r">pos</span> = <a href="/Xwt3/A.html#38d1c5f91b4ee723" class="t t">RowDropPosition</a>.<a href="/Xwt3/A.html#58b753930823748f" class="i field">Before</a>;
			<b>else if</b> (<span class="r49 r">point</span>.<a href="@0@WindowsBase/A.html#0a42b94edb8c27ab" class="i property">Y</a> &gt;= <span class="r48 r">element</span>.<a href="@0@PresentationFramework/A.html#5554a4892ffe2cfc" class="i property">ActualHeight</a> - <span class="r50 r">edge</span>)
				<a href="#f54eddb79b1efdc7" class="k">this</a>.<a href="#0c8861bfea5418eb" class="i field">dropPosition</a> = <span class="r45 r">pos</span> = <a href="/Xwt3/A.html#38d1c5f91b4ee723" class="t t">RowDropPosition</a>.<a href="/Xwt3/A.html#08ff887d4e88d387" class="i field">After</a>;

			<span class="r46 r">nodePosition</span> = <span class="r48 r">element</span>.<a href="@0@PresentationFramework/A.html#e4aaca7514916173" class="i property">DataContext</a> <b>as</b> <a href="TreeStoreNode.cs.html#0256f9cffbf22578" class="t t">TreeStoreNode</a>;
			<b>return true</b>;
		}

		<b>public override void</b> <a id="3964be3cf96d3315" href="../R/3964be3cf96d3315.html" target="n" data-glyph="72,1" class="i method">EnableEvent</a> (<b>object</b> <span id="r51 rd" class="r51 r">eventId</span>)
		{
			<a href="WidgetBackend.cs.html#551a9684f2eb2b53" class="k">base</a>.<a href="WidgetBackend.cs.html#f8b0380971e0180b" class="i method">EnableEvent</a> (<span class="r51 r">eventId</span>);
			<b>if</b> (<span class="r51 r">eventId</span> <b>is</b> <a href="/Xwt3/A.html#e8b9bae9afeca062" class="t t">TableViewEvent</a>) {
				<b>switch</b> ((<a href="/Xwt3/A.html#e8b9bae9afeca062" class="t t">TableViewEvent</a>)<span class="r51 r">eventId</span>) {
				<b>case</b> <a href="/Xwt3/A.html#e8b9bae9afeca062" class="t t">TableViewEvent</a>.<a href="/Xwt3/A.html#14fca8709212bea5" class="i field">SelectionChanged</a>:
					<a href="#07d50b7b59f4046c" class="i property">Tree</a>.<a href="ExTreeView.cs.html#e5334f89054024d1" class="i">SelectedItemsChanged</a> += <a href="#54d72a2188187e76" class="i method">OnSelectedItemsChanged</a>;
					<b>break</b>;
				}
			}
		}

		<b>public override void</b> <a id="824f95b65774d75b" href="../R/824f95b65774d75b.html" target="n" data-glyph="72,1" class="i method">DisableEvent</a> (<b>object</b> <span id="r52 rd" class="r52 r">eventId</span>)
		{
			<a href="WidgetBackend.cs.html#551a9684f2eb2b53" class="k">base</a>.<a href="WidgetBackend.cs.html#8e6c62ffdbf4f00d" class="i method">DisableEvent</a> (<span class="r52 r">eventId</span>);
			<b>if</b> (<span class="r52 r">eventId</span> <b>is</b> <a href="/Xwt3/A.html#e8b9bae9afeca062" class="t t">TableViewEvent</a>) {
				<b>switch</b> ((<a href="/Xwt3/A.html#e8b9bae9afeca062" class="t t">TableViewEvent</a>)<span class="r52 r">eventId</span>) {
				<b>case</b> <a href="/Xwt3/A.html#e8b9bae9afeca062" class="t t">TableViewEvent</a>.<a href="/Xwt3/A.html#14fca8709212bea5" class="i field">SelectionChanged</a>:
					<a href="#07d50b7b59f4046c" class="i property">Tree</a>.<a href="ExTreeView.cs.html#e5334f89054024d1" class="i">SelectedItemsChanged</a> -= <a href="#54d72a2188187e76" class="i method">OnSelectedItemsChanged</a>;
					<b>break</b>;
				}
			}
		}

		<b>protected</b> <a href="ExTreeView.cs.html#f162c84db9d2e04f" class="t t">ExTreeView</a> <a id="07d50b7b59f4046c" href="../R/07d50b7b59f4046c.html" target="n" data-glyph="105,1" class="i property">Tree</a> {
			<b>get</b> { <b>return</b> (<a href="ExTreeView.cs.html#f162c84db9d2e04f" class="t t">ExTreeView</a>)<a href="WidgetBackend.cs.html#bfe5b8d8f773f1ef" class="i property">Widget</a>; }
			<b>set</b> { <a href="WidgetBackend.cs.html#bfe5b8d8f773f1ef" class="i property">Widget</a> = <b>value</b>; }
		}

		<b>protected</b> <a href="/Xwt3/A.html#6ce5c15f624b55a6" class="t t">ITreeViewEventSink</a> <a id="4b1990bc6fd8fe48" href="../R/4b1990bc6fd8fe48.html" target="n" data-glyph="105,1" class="i property">TreeViewEventSink</a> {
			<b>get</b> { <b>return</b> (<a href="/Xwt3/A.html#6ce5c15f624b55a6" class="t t">ITreeViewEventSink</a>)<a href="WidgetBackend.cs.html#6eebdc0ff8c33e10" class="i property">EventSink</a>; }
		}

		<b>protected override double</b> <a id="f4103501e1bc89e7" href="../R/f4103501e1bc89e7.html" target="n" data-glyph="105,1" class="i property">DefaultNaturalHeight</a> {
			<b>get</b> { <b>return</b> -1; }
		}

		<b>protected override double</b> <a id="899ee0be08c7bed0" href="../R/899ee0be08c7bed0.html" target="n" data-glyph="105,1" class="i property">DefaultNaturalWidth</a> {
			<b>get</b> { <b>return</b> -1; }
		}

		<b>public override</b> <a href="/Xwt3/A.html#eac7fbe727da55f3" class="t t">Size</a> <a id="78d183efc05a0e08" href="../R/78d183efc05a0e08.html" target="n" data-glyph="72,1" class="i method">GetPreferredSize</a> (<a href="/Xwt3/A.html#2b0499fa5e00539f" class="t t">SizeConstraint</a> <span id="r53 rd" class="r53 r">widthConstraint</span>, <a href="/Xwt3/A.html#2b0499fa5e00539f" class="t t">SizeConstraint</a> <span id="r54 rd" class="r54 r">heightConstraint</span>)
		{
			<b>return</b> <a href="/Xwt3/A.html#eac7fbe727da55f3" class="t t">Size</a>.<a href="/Xwt3/A.html#60340f105c6f6ccb" class="i field">Zero</a>;
		}

		<b>private void</b> <a id="54d72a2188187e76" href="../R/54d72a2188187e76.html" target="n" data-glyph="76,1" class="i method">OnSelectedItemsChanged</a> (<b>object</b> <span id="r55 rd" class="r55 r">sender</span>, <a href="@0@mscorlib/A.html#9a1496aa60befd10" class="t t">EventArgs</a> <span id="r56 rd" class="r56 r">e</span>)
		{
			<a href="Backend.cs.html#a1d66241a0d4621f" class="i property">Context</a>.<a href="/Xwt3/A.html#5db8b61c4608e0e0" class="i method">InvokeUserCode</a> (<a href="#4b1990bc6fd8fe48" class="i property">TreeViewEventSink</a>.<a href="/Xwt3/A.html#b556bd1610df527e" class="i method">OnSelectionChanged</a>);
		}

		<b>protected override void</b> <a id="fd1f5dc788d81a86" href="../R/fd1f5dc788d81a86.html" target="n" data-glyph="75,1" class="i method">OnDragOver</a> (<b>object</b> <span id="r57 rd" class="r57 r">sender</span>, <a href="/Xwt3/A.html#97abc4d7a9024156" class="t t">DragOverEventArgs</a> <span id="r58 rd" class="r58 r">e</span>)
		{
			<a href="@0@PresentationFramework/A.html#e1f0a45bf1e0169d" class="t t">AdornerLayer</a> <span id="r59 rd" class="r59 r">layer</span> = <a href="@0@PresentationFramework/A.html#e1f0a45bf1e0169d" class="t t">AdornerLayer</a>.<a href="@0@PresentationFramework/A.html#011f695af07f591c" class="i method">GetAdornerLayer</a> (<a href="WidgetBackend.cs.html#bfe5b8d8f773f1ef" class="i property">Widget</a>);
			<b>if</b> (<a href="#f54eddb79b1efdc7" class="k">this</a>.<a href="#cea5bec5c038d506" class="i field">dropAdorner</a> != <b>null</b>)
			    <span class="r59 r">layer</span>.<a href="@0@PresentationFramework/A.html#ccecd11219f2f63d" class="i method">Remove</a> (<a href="#f54eddb79b1efdc7" class="k">this</a>.<a href="#cea5bec5c038d506" class="i field">dropAdorner</a>);

			<a href="WidgetBackend.cs.html#551a9684f2eb2b53" class="k">base</a>.<a href="WidgetBackend.cs.html#0ada5ce5b53507c7" class="i method">OnDragOver</a> (<span class="r57 r">sender</span>, <span class="r58 r">e</span>);

			<b>if</b> (<a href="#f54eddb79b1efdc7" class="k">this</a>.<a href="#209189f8110f0dad" class="i field">dropTarget</a> != <b>null</b>)
			    <span class="r59 r">layer</span>.<a href="@0@PresentationFramework/A.html#7de3809373dae9b6" class="i method">Add</a> (<a href="#f54eddb79b1efdc7" class="k">this</a>.<a href="#cea5bec5c038d506" class="i field">dropAdorner</a> = <b>new</b> <a href="TreeViewDropAdorner.cs.html#3eab3370c24f68d0" class="t constructor">TreeViewDropAdorner</a> (<a href="#f54eddb79b1efdc7" class="k">this</a>.<a href="#209189f8110f0dad" class="i field">dropTarget</a>, <a href="#f54eddb79b1efdc7" class="k">this</a>.<a href="#0c8861bfea5418eb" class="i field">dropPosition</a>));
		}

		<b>protected override void</b> <a id="4830f4090276113d" href="../R/4830f4090276113d.html" target="n" data-glyph="75,1" class="i method">OnDragLeave</a> (<b>object</b> <span id="r60 rd" class="r60 r">sender</span>, <a href="@0@mscorlib/A.html#9a1496aa60befd10" class="t t">EventArgs</a> <span id="r61 rd" class="r61 r">e</span>)
		{
			<a href="WidgetBackend.cs.html#551a9684f2eb2b53" class="k">base</a>.<a href="WidgetBackend.cs.html#ff8910835d94f3eb" class="i method">OnDragLeave</a> (<span class="r60 r">sender</span>, <span class="r61 r">e</span>);

			<b>if</b> (<a href="#f54eddb79b1efdc7" class="k">this</a>.<a href="#cea5bec5c038d506" class="i field">dropAdorner</a> != <b>null</b>)
				<a href="@0@PresentationFramework/A.html#e1f0a45bf1e0169d" class="t t">AdornerLayer</a>.<a href="@0@PresentationFramework/A.html#011f695af07f591c" class="i method">GetAdornerLayer</a> (<a href="WidgetBackend.cs.html#bfe5b8d8f773f1ef" class="i property">Widget</a>).<a href="@0@PresentationFramework/A.html#ccecd11219f2f63d" class="i method">Remove</a> (<a href="#f54eddb79b1efdc7" class="k">this</a>.<a href="#cea5bec5c038d506" class="i field">dropAdorner</a>);
		}

		<b>protected override void</b> <a id="f98525ce33f9358d" href="../R/f98525ce33f9358d.html" target="n" data-glyph="75,1" class="i method">OnDragFinished</a> (<b>object</b> <span id="r62 rd" class="r62 r">sender</span>, <a href="/Xwt3/A.html#c15c5d9ba60a6d39" class="t t">DragFinishedEventArgs</a> <span id="r63 rd" class="r63 r">e</span>)
		{
			<a href="WidgetBackend.cs.html#551a9684f2eb2b53" class="k">base</a>.<a href="WidgetBackend.cs.html#3a7e587e7425baa2" class="i method">OnDragFinished</a> (<span class="r62 r">sender</span>, <span class="r63 r">e</span>);

			<b>if</b> (<a href="#f54eddb79b1efdc7" class="k">this</a>.<a href="#cea5bec5c038d506" class="i field">dropAdorner</a> != <b>null</b>)
				<a href="@0@PresentationFramework/A.html#e1f0a45bf1e0169d" class="t t">AdornerLayer</a>.<a href="@0@PresentationFramework/A.html#011f695af07f591c" class="i method">GetAdornerLayer</a> (<a href="WidgetBackend.cs.html#bfe5b8d8f773f1ef" class="i property">Widget</a>).<a href="@0@PresentationFramework/A.html#ccecd11219f2f63d" class="i method">Remove</a> (<a href="#f54eddb79b1efdc7" class="k">this</a>.<a href="#cea5bec5c038d506" class="i field">dropAdorner</a>);
		}

		<b>private</b> <a href="ExTreeViewItem.cs.html#505370876d79da38" class="t t">ExTreeViewItem</a> <a id="f8d1cc938d27938a" href="../R/f8d1cc938d27938a.html" target="n" data-glyph="76,1" class="i method">GetVisibleTreeItem</a> (<a href="/Xwt3/A.html#b5041ff6cb937110" class="t t">TreePosition</a> <span id="r64 rd" class="r64 r">pos</span>, <a href="@0@mscorlib/A.html#486d58da4553e12d" class="t t">Action</a>&lt;<a href="ExTreeViewItem.cs.html#505370876d79da38" class="t t">ExTreeViewItem</a>&gt; <span id="r65 rd" class="r65 r">walk</span> = <b>null</b>)
		{
			<a href="#07d50b7b59f4046c" class="i property">Tree</a>.<a href="@0@PresentationCore/A.html#b985370236fdd604" class="i method">UpdateLayout</a>();
			<a href="@0@System/A.html#c5371bef044c6ab6" class="t t">Stack</a>&lt;<a href="TreeStoreNode.cs.html#0256f9cffbf22578" class="t t">TreeStoreNode</a>&gt; <span id="r66 rd" class="r66 r">nodes</span> = <b>new</b> <a href="@0@System/A.html#692a18e31afb7ef9" class="t constructor">Stack</a>&lt;<a href="TreeStoreNode.cs.html#0256f9cffbf22578" class="t t">TreeStoreNode</a>&gt; ();

			<a href="TreeStoreNode.cs.html#0256f9cffbf22578" class="t t">TreeStoreNode</a> <span id="r67 rd" class="r67 r">node</span> = (<a href="TreeStoreNode.cs.html#0256f9cffbf22578" class="t t">TreeStoreNode</a>) <span class="r64 r">pos</span>;
			<b>do</b> {
				<span class="r66 r">nodes</span>.<a href="@0@System/A.html#83b1a3864aaa7198" class="i method">Push</a> (<span class="r67 r">node</span>);
				<span class="r67 r">node</span> = <span class="r67 r">node</span>.<a href="TreeStoreNode.cs.html#22159df548e41300" class="i property">Parent</a>;
			} <b>while</b> (<span class="r67 r">node</span> != <b>null</b>);

			<a href="ExTreeViewItem.cs.html#505370876d79da38" class="t t">ExTreeViewItem</a> <span id="r68 rd" class="r68 r">treeItem</span> = <b>null</b>;
			<a href="@0@PresentationFramework/A.html#1b7909b08c58ddd0" class="t t">ItemContainerGenerator</a> <span id="r69 rd" class="r69 r">g</span> = <a href="#07d50b7b59f4046c" class="i property">Tree</a>.<a href="@0@PresentationFramework/A.html#c92e787729ebd178" class="i property">ItemContainerGenerator</a>;
			<b>while</b> (<span class="r66 r">nodes</span>.<a href="@0@System/A.html#47350acaee6be7b6" class="i property">Count</a> &gt; 0) {
				<span class="r67 r">node</span> = <span class="r66 r">nodes</span>.<a href="@0@System/A.html#fd86d7436e55c84b" class="i method">Pop</a> ();
				<span class="r68 r">treeItem</span> = (<a href="ExTreeViewItem.cs.html#505370876d79da38" class="t t">ExTreeViewItem</a>) <span class="r69 r">g</span>.<a href="@0@PresentationFramework/A.html#6000667facb03be9" class="i method">ContainerFromItem</a> (<span class="r67 r">node</span>);
				<b>if</b> (<span class="r68 r">treeItem</span> == <b>null</b>)
					<b>continue</b>;

				<span class="r68 r">treeItem</span>.<a href="@0@PresentationCore/A.html#b985370236fdd604" class="i method">UpdateLayout</a> ();
				<span class="r69 r">g</span> = <span class="r68 r">treeItem</span>.<a href="@0@PresentationFramework/A.html#c92e787729ebd178" class="i property">ItemContainerGenerator</a>;

				<b>if</b> (<span class="r65 r">walk</span> != <b>null</b>)
					<span class="r65 r">walk</span> (<span class="r68 r">treeItem</span>);
			}

			<b>return</b> <span class="r68 r">treeItem</span>;
		}

		<b>private</b> <a href="@0@PresentationFramework/A.html#dcee1d06e39f1148" class="t t">FrameworkElementFactory</a> <a id="9ce7090cb269a5ad" href="../R/9ce7090cb269a5ad.html" target="n" data-glyph="76,1" class="i method">CreateExpanderDock</a> ()
		{
			<a href="@0@PresentationFramework/A.html#dcee1d06e39f1148" class="k">var</a> <span id="r70 rd" class="r70 r">dockFactory</span> = <b>new</b> <a href="@0@PresentationFramework/A.html#be3f2ab5cb633568" class="t constructor">FrameworkElementFactory</a> (<b>typeof</b> (<a href="@0@PresentationFramework/A.html#5f9a593483943440" class="t t">DockPanel</a>));

			<a href="@0@PresentationFramework/A.html#d53b060efb62b510" class="k">var</a> <span id="r71 rd" class="r71 r">source</span> = <b>new</b> <a href="@0@PresentationFramework/A.html#f036d5a2a0f610dc" class="t constructor">RelativeSource</a> (<a href="@0@PresentationFramework/A.html#40aeb64ea751ff26" class="t t">RelativeSourceMode</a>.<a href="@0@PresentationFramework/A.html#a0faf4563bcb1815" class="i field">FindAncestor</a>, <b>typeof</b> (<a href="ExTreeViewItem.cs.html#505370876d79da38" class="t t">ExTreeViewItem</a>), 1);

			<a href="@0@PresentationFramework/A.html#dd312833d0723042" class="t t">Style</a> <span id="r72 rd" class="r72 r">expanderStyle</span> = <b>new</b> <a href="@0@PresentationFramework/A.html#77e1492c499487f0" class="t constructor">Style</a> (<b>typeof</b> (<span class="i n">SWC</span>.<span class="i n">Primitives</span>.<a href="@0@PresentationFramework/A.html#490b99387e5fd4e0" class="t t">ToggleButton</a>));
			<span class="r72 r">expanderStyle</span>.<a href="@0@PresentationFramework/A.html#b184603284693a4f" class="i property">Setters</a>.<a href="@0@mscorlib/A.html#5c61cc24de82f7e7" class="i method">Add</a> (<b>new</b> <a href="@0@PresentationFramework/A.html#c48706a61a5d8f59" class="t constructor">Setter</a> (<a href="@0@PresentationCore/A.html#7911653ccb506216" class="t t">UIElement</a>.<a href="@0@PresentationCore/A.html#620e1d3207f53cdf" class="i field">FocusableProperty</a>, <b>false</b>));
			<span class="r72 r">expanderStyle</span>.<a href="@0@PresentationFramework/A.html#b184603284693a4f" class="i property">Setters</a>.<a href="@0@mscorlib/A.html#5c61cc24de82f7e7" class="i method">Add</a> (<b>new</b> <a href="@0@PresentationFramework/A.html#c48706a61a5d8f59" class="t constructor">Setter</a> (<a href="@0@PresentationFramework/A.html#d2d98a3022fbac2f" class="t t">FrameworkElement</a>.<a href="@0@PresentationFramework/A.html#eab43ecf1e67f8ba" class="i field">WidthProperty</a>, 19d));
			<span class="r72 r">expanderStyle</span>.<a href="@0@PresentationFramework/A.html#b184603284693a4f" class="i property">Setters</a>.<a href="@0@mscorlib/A.html#5c61cc24de82f7e7" class="i method">Add</a> (<b>new</b> <a href="@0@PresentationFramework/A.html#c48706a61a5d8f59" class="t constructor">Setter</a> (<a href="@0@PresentationFramework/A.html#d2d98a3022fbac2f" class="t t">FrameworkElement</a>.<a href="@0@PresentationFramework/A.html#2d42566e5f9dbe0e" class="i field">HeightProperty</a>, 13d));

			<a href="@0@PresentationFramework/A.html#0482070906838a23" class="k">var</a> <span id="r73 rd" class="r73 r">expanderTemplate</span> = <b>new</b> <a href="@0@PresentationFramework/A.html#587e56b264a5a93b" class="t constructor">ControlTemplate</a> (<b>typeof</b> (<span class="i n">SWC</span>.<span class="i n">Primitives</span>.<a href="@0@PresentationFramework/A.html#490b99387e5fd4e0" class="t t">ToggleButton</a>));

			<a href="@0@PresentationFramework/A.html#dcee1d06e39f1148" class="k">var</a> <span id="r74 rd" class="r74 r">outerBorderFactory</span> = <b>new</b> <a href="@0@PresentationFramework/A.html#be3f2ab5cb633568" class="t constructor">FrameworkElementFactory</a> (<b>typeof</b> (<a href="@0@PresentationFramework/A.html#06cd39da928ee424" class="t t">Border</a>));
			<span class="r74 r">outerBorderFactory</span>.<a href="@0@PresentationFramework/A.html#a60ac317f2b9a244" class="i method">SetValue</a> (<a href="@0@PresentationFramework/A.html#d2d98a3022fbac2f" class="t t">FrameworkElement</a>.<a href="@0@PresentationFramework/A.html#eab43ecf1e67f8ba" class="i field">WidthProperty</a>, 19d);
			<span class="r74 r">outerBorderFactory</span>.<a href="@0@PresentationFramework/A.html#a60ac317f2b9a244" class="i method">SetValue</a> (<a href="@0@PresentationFramework/A.html#d2d98a3022fbac2f" class="t t">FrameworkElement</a>.<a href="@0@PresentationFramework/A.html#2d42566e5f9dbe0e" class="i field">HeightProperty</a>, 13d);
			<span class="r74 r">outerBorderFactory</span>.<a href="@0@PresentationFramework/A.html#a60ac317f2b9a244" class="i method">SetValue</a> (<a href="@0@PresentationFramework/A.html#6750b721a2294fc5" class="t t">Control</a>.<a href="@0@PresentationFramework/A.html#a79e672f6084659d" class="i field">BackgroundProperty</a>, <a href="@0@PresentationCore/A.html#0110a86641bd833b" class="t t">Brushes</a>.<a href="@0@PresentationCore/A.html#8131d3ac109ee20d" class="i property">Transparent</a>);
			<span class="r74 r">outerBorderFactory</span>.<a href="@0@PresentationFramework/A.html#452381e73050a44a" class="i method">SetBinding</a> (<a href="@0@PresentationCore/A.html#7911653ccb506216" class="t t">UIElement</a>.<a href="@0@PresentationCore/A.html#01d4c3d0cf25d8f6" class="i field">VisibilityProperty</a>,
				<b>new</b> <a href="@0@PresentationFramework/A.html#94f69147a4e4e69b" class="t constructor">Binding</a> (<span class="s">&quot;HasItems&quot;</span>) { <a href="@0@PresentationFramework/A.html#3237b6417dc00600" class="i property">RelativeSource</a> = <span class="r71 r">source</span>, <a href="@0@PresentationFramework/A.html#8ec0eeebd514597f" class="i property">Converter</a> = <a href="#940516b6933c7e4b" class="i field">BoolVisibilityConverter</a> });

			<a href="@0@PresentationFramework/A.html#dcee1d06e39f1148" class="k">var</a> <span id="r75 rd" class="r75 r">innerBorderFactory</span> = <b>new</b> <a href="@0@PresentationFramework/A.html#be3f2ab5cb633568" class="t constructor">FrameworkElementFactory</a> (<b>typeof</b> (<a href="@0@PresentationFramework/A.html#06cd39da928ee424" class="t t">Border</a>));
			<span class="r75 r">innerBorderFactory</span>.<a href="@0@PresentationFramework/A.html#a60ac317f2b9a244" class="i method">SetValue</a> (<a href="@0@PresentationFramework/A.html#d2d98a3022fbac2f" class="t t">FrameworkElement</a>.<a href="@0@PresentationFramework/A.html#eab43ecf1e67f8ba" class="i field">WidthProperty</a>, 9d);
			<span class="r75 r">innerBorderFactory</span>.<a href="@0@PresentationFramework/A.html#a60ac317f2b9a244" class="i method">SetValue</a> (<a href="@0@PresentationFramework/A.html#d2d98a3022fbac2f" class="t t">FrameworkElement</a>.<a href="@0@PresentationFramework/A.html#2d42566e5f9dbe0e" class="i field">HeightProperty</a>, 9d);
			<span class="r75 r">innerBorderFactory</span>.<a href="@0@PresentationFramework/A.html#a60ac317f2b9a244" class="i method">SetValue</a> (<a href="@0@PresentationFramework/A.html#6750b721a2294fc5" class="t t">Control</a>.<a href="@0@PresentationFramework/A.html#77340e012afd68f2" class="i field">BorderThicknessProperty</a>, <b>new</b> <a href="@0@PresentationFramework/A.html#f24f92e6dee837d3" class="t constructor">Thickness</a> (1));
			<span class="r75 r">innerBorderFactory</span>.<a href="@0@PresentationFramework/A.html#a60ac317f2b9a244" class="i method">SetValue</a> (<a href="@0@PresentationFramework/A.html#6750b721a2294fc5" class="t t">Control</a>.<a href="@0@PresentationFramework/A.html#68243cc7f77e6ce4" class="i field">BorderBrushProperty</a>, <b>new</b> <a href="@0@PresentationCore/A.html#28be7a261187a210" class="t constructor">SolidColorBrush</a> (<a href="@0@PresentationCore/A.html#9c469acbf7b2cb81" class="t t">Color</a>.<a href="@0@PresentationCore/A.html#c0c2e7d2eff59dd2" class="i method">FromRgb</a> (120, 152, 181)));
			<span class="r75 r">innerBorderFactory</span>.<a href="@0@PresentationFramework/A.html#a60ac317f2b9a244" class="i method">SetValue</a> (<a href="@0@PresentationFramework/A.html#06cd39da928ee424" class="t t">Border</a>.<a href="@0@PresentationFramework/A.html#d0a3d8f763dc2fe2" class="i field">CornerRadiusProperty</a>, <b>new</b> <a href="@0@PresentationFramework/A.html#fd02a775b7286abc" class="t constructor">CornerRadius</a> (1));
			<span class="r75 r">innerBorderFactory</span>.<a href="@0@PresentationFramework/A.html#a60ac317f2b9a244" class="i method">SetValue</a> (<a href="@0@PresentationCore/A.html#7911653ccb506216" class="t t">UIElement</a>.<a href="@0@PresentationCore/A.html#417299ef6ab23bd3" class="i field">SnapsToDevicePixelsProperty</a>, <b>true</b>);

			<span class="r75 r">innerBorderFactory</span>.<a href="@0@PresentationFramework/A.html#a60ac317f2b9a244" class="i method">SetValue</a> (<a href="@0@PresentationFramework/A.html#6750b721a2294fc5" class="t t">Control</a>.<a href="@0@PresentationFramework/A.html#a79e672f6084659d" class="i field">BackgroundProperty</a>, <a href="#32e0dbcd84dec4c9" class="i field">ExpanderBackgroundBrush</a>);

			<a href="@0@PresentationFramework/A.html#dcee1d06e39f1148" class="k">var</a> <span id="r76 rd" class="r76 r">pathFactory</span> = <b>new</b> <a href="@0@PresentationFramework/A.html#be3f2ab5cb633568" class="t constructor">FrameworkElementFactory</a> (<b>typeof</b> (<a href="@0@PresentationFramework/A.html#ede77210f20e8cf9" class="t t">Path</a>));
			<span class="r76 r">pathFactory</span>.<a href="@0@PresentationFramework/A.html#a60ac317f2b9a244" class="i method">SetValue</a> (<a href="@0@PresentationFramework/A.html#d2d98a3022fbac2f" class="t t">FrameworkElement</a>.<a href="@0@PresentationFramework/A.html#e7644a8219c25033" class="i field">MarginProperty</a>, <b>new</b> <a href="@0@PresentationFramework/A.html#f24f92e6dee837d3" class="t constructor">Thickness</a> (1));
			<span class="r76 r">pathFactory</span>.<a href="@0@PresentationFramework/A.html#a60ac317f2b9a244" class="i method">SetValue</a> (<a href="@0@PresentationFramework/A.html#05936789d07d6eac" class="t t">Shape</a>.<a href="@0@PresentationFramework/A.html#9301a6e49e685f7a" class="i field">FillProperty</a>, <a href="@0@PresentationCore/A.html#0110a86641bd833b" class="t t">Brushes</a>.<a href="@0@PresentationCore/A.html#4c63c441ae36a080" class="i property">Black</a>);
			<span class="r76 r">pathFactory</span>.<a href="@0@PresentationFramework/A.html#452381e73050a44a" class="i method">SetBinding</a> (<a href="@0@PresentationFramework/A.html#ede77210f20e8cf9" class="t t">Path</a>.<a href="@0@PresentationFramework/A.html#61d78dfb034e1c0e" class="i field">DataProperty</a>, 
				<b>new</b> <a href="@0@PresentationFramework/A.html#94f69147a4e4e69b" class="t constructor">Binding</a> (<span class="s">&quot;IsChecked&quot;</span>) {
					<a href="@0@PresentationFramework/A.html#3237b6417dc00600" class="i property">RelativeSource</a> = <b>new</b> <a href="@0@PresentationFramework/A.html#f036d5a2a0f610dc" class="t constructor">RelativeSource</a> (<a href="@0@PresentationFramework/A.html#40aeb64ea751ff26" class="t t">RelativeSourceMode</a>.<a href="@0@PresentationFramework/A.html#a0faf4563bcb1815" class="i field">FindAncestor</a>, <b>typeof</b> (<span class="i n">SWC</span>.<span class="i n">Primitives</span>.<a href="@0@PresentationFramework/A.html#490b99387e5fd4e0" class="t t">ToggleButton</a>), 1),
					<a href="@0@PresentationFramework/A.html#8ec0eeebd514597f" class="i property">Converter</a> = <a href="#2373f2cf2d235aa0" class="i field">BooleanGeometryConverter</a>
			});

			<span class="r75 r">innerBorderFactory</span>.<a href="@0@PresentationFramework/A.html#aa86771013f3f7a3" class="i method">AppendChild</a> (<span class="r76 r">pathFactory</span>);
			<span class="r74 r">outerBorderFactory</span>.<a href="@0@PresentationFramework/A.html#aa86771013f3f7a3" class="i method">AppendChild</a> (<span class="r75 r">innerBorderFactory</span>);

			<span class="r73 r">expanderTemplate</span>.<a href="@0@PresentationFramework/A.html#0ed53b508f4c0433" class="i property">VisualTree</a> = <span class="r74 r">outerBorderFactory</span>;

			<span class="r72 r">expanderStyle</span>.<a href="@0@PresentationFramework/A.html#b184603284693a4f" class="i property">Setters</a>.<a href="@0@mscorlib/A.html#5c61cc24de82f7e7" class="i method">Add</a> (<b>new</b> <a href="@0@PresentationFramework/A.html#c48706a61a5d8f59" class="t constructor">Setter</a> (<a href="@0@PresentationFramework/A.html#6750b721a2294fc5" class="t t">Control</a>.<a href="@0@PresentationFramework/A.html#0735bc0b4323e8f7" class="i field">TemplateProperty</a>, <span class="r73 r">expanderTemplate</span>));

			<a href="@0@PresentationFramework/A.html#dcee1d06e39f1148" class="k">var</a> <span id="r77 rd" class="r77 r">toggleFactory</span> = <b>new</b> <a href="@0@PresentationFramework/A.html#be3f2ab5cb633568" class="t constructor">FrameworkElementFactory</a> (<b>typeof</b> (<span class="i n">SWC</span>.<span class="i n">Primitives</span>.<a href="@0@PresentationFramework/A.html#490b99387e5fd4e0" class="t t">ToggleButton</a>));
			<span class="r77 r">toggleFactory</span>.<a href="@0@PresentationFramework/A.html#a60ac317f2b9a244" class="i method">SetValue</a> (<a href="@0@PresentationFramework/A.html#d2d98a3022fbac2f" class="t t">FrameworkElement</a>.<a href="@0@PresentationFramework/A.html#bad73be985bb1fd6" class="i field">StyleProperty</a>, <span class="r72 r">expanderStyle</span>);
			<span class="r77 r">toggleFactory</span>.<a href="@0@PresentationFramework/A.html#452381e73050a44a" class="i method">SetBinding</a> (<a href="@0@PresentationFramework/A.html#d2d98a3022fbac2f" class="t t">FrameworkElement</a>.<a href="@0@PresentationFramework/A.html#e7644a8219c25033" class="i field">MarginProperty</a>,
				<b>new</b> <a href="@0@PresentationFramework/A.html#94f69147a4e4e69b" class="t constructor">Binding</a> (<span class="s">&quot;Level&quot;</span>) { <a href="@0@PresentationFramework/A.html#3237b6417dc00600" class="i property">RelativeSource</a> = <span class="r71 r">source</span>, <a href="@0@PresentationFramework/A.html#8ec0eeebd514597f" class="i property">Converter</a> = <a href="#a065db4e588c3475" class="i field">LevelConverter</a> });
			<span class="r77 r">toggleFactory</span>.<a href="@0@PresentationFramework/A.html#452381e73050a44a" class="i method">SetBinding</a> (<span class="i n">SWC</span>.<span class="i n">Primitives</span>.<a href="@0@PresentationFramework/A.html#490b99387e5fd4e0" class="t t">ToggleButton</a>.<a href="@0@PresentationFramework/A.html#9c12573211bf856e" class="i field">IsCheckedProperty</a>,
				<b>new</b> <a href="@0@PresentationFramework/A.html#94f69147a4e4e69b" class="t constructor">Binding</a> (<span class="s">&quot;IsExpanded&quot;</span>) { <a href="@0@PresentationFramework/A.html#3237b6417dc00600" class="i property">RelativeSource</a> = <span class="r71 r">source</span> });
			<span class="r77 r">toggleFactory</span>.<a href="@0@PresentationFramework/A.html#a60ac317f2b9a244" class="i method">SetValue</a> (<span class="i n">SWC</span>.<span class="i n">Primitives</span>.<a href="@0@PresentationFramework/A.html#1001a15c43ab91f9" class="t t">ButtonBase</a>.<a href="@0@PresentationFramework/A.html#f550794c31d0d901" class="i field">ClickModeProperty</a>, <a href="@0@PresentationFramework/A.html#2f4523d28fd85b18" class="t t">ClickMode</a>.<a href="@0@PresentationFramework/A.html#320a53f5c310a79b" class="i field">Press</a>);

			<span class="r70 r">dockFactory</span>.<a href="@0@PresentationFramework/A.html#aa86771013f3f7a3" class="i method">AppendChild</a> (<span class="r77 r">toggleFactory</span>);
			<b>return</b> <span class="r70 r">dockFactory</span>;
		}

		<b>private static readonly</b> <a href="LevelToIndentConverter.cs.html#56e9d0d2fb1c7680" class="t t">LevelToIndentConverter</a> <a id="a065db4e588c3475" href="../R/a065db4e588c3475.html" target="n" data-glyph="46,1" class="i field">LevelConverter</a> = <b>new</b> <a href="LevelToIndentConverter.cs.html#56e9d0d2fb1c7680" class="t constructor">LevelToIndentConverter</a>();
		<b>private static readonly</b> <a href="@0@PresentationFramework/A.html#220e750b66c04350" class="t t">BooleanToVisibilityConverter</a> <a id="940516b6933c7e4b" href="../R/940516b6933c7e4b.html" target="n" data-glyph="46,1" class="i field">BoolVisibilityConverter</a> = <b>new</b> <a href="@0@PresentationFramework/A.html#e101b9840516480b" class="t constructor">BooleanToVisibilityConverter</a>();

		<b>private static readonly</b> <a href="@0@PresentationCore/A.html#95e063a8a6c98a51" class="t t">LinearGradientBrush</a> <a id="32e0dbcd84dec4c9" href="../R/32e0dbcd84dec4c9.html" target="n" data-glyph="46,1" class="i field">ExpanderBackgroundBrush</a> = <b>new</b> <a href="@0@PresentationCore/A.html#cab8ccfc27cff4b9" class="t constructor">LinearGradientBrush</a> {
			<a href="@0@PresentationCore/A.html#b1eee9a6882b4bcd" class="i property">StartPoint</a> = <b>new</b> <span class="i n">System</span>.<span class="i n">Windows</span>.<a href="@0@WindowsBase/A.html#df31222d1f00fae5" class="t constructor">Point</a> (0, 0),
			<a href="@0@PresentationCore/A.html#f263c2997c4cfda3" class="i property">EndPoint</a> = <b>new</b> <span class="i n">System</span>.<span class="i n">Windows</span>.<a href="@0@WindowsBase/A.html#df31222d1f00fae5" class="t constructor">Point</a> (1, 1),
			<a href="@0@PresentationCore/A.html#0392ede480e9384d" class="i property">GradientStops</a> = <b>new</b> <a href="@0@PresentationCore/A.html#da78b9c1109ee092" class="t constructor">GradientStopCollection</a> {
				<b>new</b> <a href="@0@PresentationCore/A.html#0400ce61273143af" class="t constructor">GradientStop</a> (<a href="@0@PresentationCore/A.html#0584e1e7d7fb612c" class="t t">Colors</a>.<a href="@0@PresentationCore/A.html#f67f2a25c7c7b3fd" class="i property">White</a>, 0.2),
				<b>new</b> <a href="@0@PresentationCore/A.html#0400ce61273143af" class="t constructor">GradientStop</a> (<a href="@0@PresentationCore/A.html#9c469acbf7b2cb81" class="t t">Color</a>.<a href="@0@PresentationCore/A.html#c0c2e7d2eff59dd2" class="i method">FromRgb</a> (192, 183, 166), 1)
			}
		};

		<b>private static readonly</b> <a href="@0@PresentationCore/A.html#22ca37af0d997a39" class="t t">Geometry</a> <a id="1cfe186b7188975a" href="../R/1cfe186b7188975a.html" target="n" data-glyph="46,1" class="i field">Plus</a> = <a href="@0@PresentationCore/A.html#22ca37af0d997a39" class="t t">Geometry</a>.<a href="@0@PresentationCore/A.html#d70af5c8e06913bc" class="i method">Parse</a> (<span class="s">&quot;M 0 2 L 0 3 L 2 3 L 2 5 L 3 5 L 3 3 L 5 3 L 5 2 L 3 2 L 3 0 L 2 0 L 2 2 Z&quot;</span>);
		<b>private static readonly</b> <a href="@0@PresentationCore/A.html#22ca37af0d997a39" class="t t">Geometry</a> <a id="8ed1208be30b9ade" href="../R/8ed1208be30b9ade.html" target="n" data-glyph="46,1" class="i field">Minus</a> = <a href="@0@PresentationCore/A.html#22ca37af0d997a39" class="t t">Geometry</a>.<a href="@0@PresentationCore/A.html#d70af5c8e06913bc" class="i method">Parse</a> (<span class="s">&quot;M 0 2 L 0 3 L 5 3 L 5 2 Z&quot;</span>);

		<b>private static readonly</b> <a href="BooleanToValueConverter.cs.html#26dba04ff7f0b4a3" class="t t">BooleanToValueConverter</a> <a id="2373f2cf2d235aa0" href="../R/2373f2cf2d235aa0.html" target="n" data-glyph="46,1" class="i field">BooleanGeometryConverter</a> = 
			<b>new</b> <a href="BooleanToValueConverter.cs.html#26dba04ff7f0b4a3" class="t constructor">BooleanToValueConverter</a> { <a href="BooleanToValueConverter.cs.html#2a189487c4745e4d" class="i property">TrueValue</a> = <a href="#8ed1208be30b9ade" class="i field">Minus</a>, <a href="BooleanToValueConverter.cs.html#1ac95708c8022df7" class="i property">FalseValue</a> = <a href="#1cfe186b7188975a" class="i field">Plus</a> };

		<b>private static readonly</b> <a href="@0@PresentationFramework/A.html#5c676784218bb188" class="t t">Setter</a> <a id="3b15be0741b66426" href="../R/3b15be0741b66426.html" target="n" data-glyph="46,1" class="i field">HideHeaderSetter</a> = <b>new</b> <a href="@0@PresentationFramework/A.html#c48706a61a5d8f59" class="t constructor">Setter</a> (<a href="@0@PresentationCore/A.html#7911653ccb506216" class="t t">UIElement</a>.<a href="@0@PresentationCore/A.html#01d4c3d0cf25d8f6" class="i field">VisibilityProperty</a>, <a href="@0@PresentationCore/A.html#2668d640196eddd0" class="t t">Visibility</a>.<a href="@0@PresentationCore/A.html#b5dcd78ae53c5916" class="i field">Collapsed</a>);

		<b>public</b> <a href="/Xwt3/A.html#b5041ff6cb937110" class="t t">TreePosition</a> <a id="39e77ccea4e79bed" href="../R/39e77ccea4e79bed.html" target="n" data-glyph="72,1" class="i method">GetRowAtPosition</a> (<a href="/Xwt3/A.html#0e54e87b6e891b4f" class="t t">Point</a> <span id="r78 rd" class="r78 r">p</span>)
		{
			<a href="@0@PresentationCore/A.html#593409343c876ca8" class="k">var</a> <span id="r79 rd" class="r79 r">result</span> = <a href="@0@PresentationCore/A.html#7f1e2538afba01e7" class="t t">VisualTreeHelper</a>.<a href="@0@PresentationCore/A.html#ca4dbd9df8904db7" class="i method">HitTest</a> (<a href="#07d50b7b59f4046c" class="i property">Tree</a>, <b>new</b> <span class="i n">System</span>.<span class="i n">Windows</span>.<a href="@0@WindowsBase/A.html#df31222d1f00fae5" class="t constructor">Point</a> (<span class="r78 r">p</span>.<a href="/Xwt3/A.html#a925f0d89fafd1e3" class="i property">X</a>, <span class="r78 r">p</span>.<a href="/Xwt3/A.html#270121b6118aba39" class="i property">Y</a>)) <b>as</b> <a href="@0@PresentationCore/A.html#593409343c876ca8" class="t t">PointHitTestResult</a>;

			<a href="@0@PresentationFramework/A.html#d2d98a3022fbac2f" class="k">var</a> <span id="r80 rd" class="r80 r">element</span> = (<span class="r79 r">result</span> != <b>null</b>) ? <span class="r79 r">result</span>.<a href="@0@PresentationCore/A.html#0bb0f599da3a6718" class="i property">VisualHit</a> <b>as</b> <a href="@0@PresentationFramework/A.html#d2d98a3022fbac2f" class="t t">FrameworkElement</a> : <b>null</b>;
			<b>while</b> (<span class="r80 r">element</span> != <b>null</b>) {
				<b>if</b> (<span class="r80 r">element</span> <b>is</b> <a href="ExTreeViewItem.cs.html#505370876d79da38" class="t t">ExTreeViewItem</a>)
					<b>break</b>;
				<b>if</b> (<span class="r80 r">element</span> <b>is</b> <a href="ExTreeView.cs.html#f162c84db9d2e04f" class="t t">ExTreeView</a>) <span class="c">// We can&#39;t succeed past this point</span>
					<b>return null</b>;

				<span class="r80 r">element</span> = <a href="@0@PresentationCore/A.html#7f1e2538afba01e7" class="t t">VisualTreeHelper</a>.<a href="@0@PresentationCore/A.html#31ea065317da8a39" class="i method">GetParent</a> (<span class="r80 r">element</span>) <b>as</b> <a href="@0@PresentationFramework/A.html#d2d98a3022fbac2f" class="t t">FrameworkElement</a>;
			}

			<b>if</b> (<span class="r80 r">element</span> == <b>null</b>)
				<b>return null</b>;

			<b>return</b> (<span class="r80 r">element</span>.<a href="@0@PresentationFramework/A.html#e4aaca7514916173" class="i property">DataContext</a> <b>as</b> <a href="TreeStoreNode.cs.html#0256f9cffbf22578" class="t t">TreeStoreNode</a>);
		}

		<b>public</b> <a href="/Xwt3/A.html#c6d9d3513c691785" class="t t">Rectangle</a> <a id="a9e3c729a2fb750e" href="../R/a9e3c729a2fb750e.html" target="n" data-glyph="72,1" class="i method">GetCellBounds</a> (<a href="/Xwt3/A.html#b5041ff6cb937110" class="t t">TreePosition</a> <span id="r81 rd" class="r81 r">pos</span>, <a href="/Xwt3/A.html#9af53f60be83be5c" class="t t">CellView</a> <span id="r82 rd" class="r82 r">cell</span>, <b>bool</b> <span id="r83 rd" class="r83 r">includeMargin</span>)
		{
			<a href="ExTreeViewItem.cs.html#505370876d79da38" class="t t">ExTreeViewItem</a> <span id="r84 rd" class="r84 r">item</span> = <a href="#f8d1cc938d27938a" class="i method">GetVisibleTreeItem</a> (<span class="r81 r">pos</span>);
			<b>if</b> (<span class="r84 r">item</span> == <b>null</b>)
				<b>return</b> <a href="/Xwt3/A.html#c6d9d3513c691785" class="t t">Rectangle</a>.<a href="/Xwt3/A.html#a5b7ff1843c736f9" class="i field">Zero</a>;

			<span class="c">// this works only if the wpf layout remains the same</span>
			<b>try</b> {
				<a href="@0@WindowsBase/A.html#3ce192f6633decc8" class="k">var</a> <span id="r85 rd" class="r85 r">stackpanel</span> = <a href="@0@PresentationCore/A.html#7f1e2538afba01e7" class="t t">VisualTreeHelper</a>.<a href="@0@PresentationCore/A.html#30089fb0c0679121" class="i method">GetChild</a> (<span class="r84 r">item</span>, 0);
				<a href="@0@WindowsBase/A.html#3ce192f6633decc8" class="k">var</a> <span id="r86 rd" class="r86 r">border</span> = <a href="@0@PresentationCore/A.html#7f1e2538afba01e7" class="t t">VisualTreeHelper</a>.<a href="@0@PresentationCore/A.html#30089fb0c0679121" class="i method">GetChild</a> (<span class="r85 r">stackpanel</span>, 0);
				<a href="@0@PresentationFramework/A.html#d2d98a3022fbac2f" class="k">var</a> <span id="r87 rd" class="r87 r">rowpresenter</span> = <a href="@0@PresentationCore/A.html#7f1e2538afba01e7" class="t t">VisualTreeHelper</a>.<a href="@0@PresentationCore/A.html#30089fb0c0679121" class="i method">GetChild</a> (<span class="r86 r">border</span>, 0) <b>as</b> <a href="@0@PresentationFramework/A.html#d2d98a3022fbac2f" class="t t">FrameworkElement</a>;

				<b>if</b> (<a href="@0@PresentationCore/A.html#7f1e2538afba01e7" class="t t">VisualTreeHelper</a>.<a href="@0@PresentationCore/A.html#d74c0832c61e07fb" class="i method">GetChildrenCount</a> (<span class="r87 r">rowpresenter</span>) &lt; <a href="#57c34977ae5d18ec" class="i field">cellViews</a> [<span class="r82 r">cell</span>].<a href="#087c27021124f6fc" class="i field">ColumnIndex</a>)
					<b>return</b> <a href="/Xwt3/A.html#c6d9d3513c691785" class="t t">Rectangle</a>.<a href="/Xwt3/A.html#a5b7ff1843c736f9" class="i field">Zero</a>;

				<a href="@0@PresentationFramework/A.html#d2d98a3022fbac2f" class="k">var</a> <span id="r88 rd" class="r88 r">colpresenter</span> =  <a href="@0@PresentationCore/A.html#7f1e2538afba01e7" class="t t">VisualTreeHelper</a>.<a href="@0@PresentationCore/A.html#30089fb0c0679121" class="i method">GetChild</a> (<span class="r87 r">rowpresenter</span>, <a href="#57c34977ae5d18ec" class="i field">cellViews</a> [<span class="r82 r">cell</span>].<a href="#087c27021124f6fc" class="i field">ColumnIndex</a>) <b>as</b> <a href="@0@PresentationFramework/A.html#d2d98a3022fbac2f" class="t t">FrameworkElement</a>;
				<a href="@0@PresentationFramework/A.html#d2d98a3022fbac2f" class="k">var</a> <span id="r89 rd" class="r89 r">colchild</span> =  <a href="@0@PresentationCore/A.html#7f1e2538afba01e7" class="t t">VisualTreeHelper</a>.<a href="@0@PresentationCore/A.html#30089fb0c0679121" class="i method">GetChild</a> (<span class="r88 r">colpresenter</span>, 0) <b>as</b> <a href="@0@PresentationFramework/A.html#d2d98a3022fbac2f" class="t t">FrameworkElement</a>;

				<b>if</b> (<a href="#57c34977ae5d18ec" class="i field">cellViews</a> [<span class="r82 r">cell</span>].<a href="#723a87e80ef74d7f" class="i field">Column</a>.<a href="/Xwt3/A.html#31318c7d8d3554e1" class="i property">Views</a>.<a href="@0@mscorlib/A.html#f2419069e9890f5d" class="i property">Count</a> &gt; 1 &amp;&amp; <span class="r89 r">colchild</span> <b>is</b> <span class="i n">System</span>.<span class="i n">Windows</span>.<span class="i n">Controls</span>.<a href="@0@PresentationFramework/A.html#74647d237fc89a63" class="t t">StackPanel</a>) {
					<a href="@0@PresentationFramework/A.html#74647d237fc89a63" class="k">var</a> <span id="r90 rd" class="r90 r">childStack</span> = <span class="r89 r">colchild</span> <b>as</b> <span class="i n">System</span>.<span class="i n">Windows</span>.<span class="i n">Controls</span>.<a href="@0@PresentationFramework/A.html#74647d237fc89a63" class="t t">StackPanel</a>;
					<b>if</b> (<span class="r90 r">childStack</span> == <b>null</b> || <a href="@0@PresentationCore/A.html#7f1e2538afba01e7" class="t t">VisualTreeHelper</a>.<a href="@0@PresentationCore/A.html#d74c0832c61e07fb" class="i method">GetChildrenCount</a> (<span class="r90 r">childStack</span>) &lt; <a href="#57c34977ae5d18ec" class="i field">cellViews</a> [<span class="r82 r">cell</span>].<a href="#e9f0a0cc332bd945" class="i field">CellIndex</a>)
						<b>return</b> <a href="/Xwt3/A.html#c6d9d3513c691785" class="t t">Rectangle</a>.<a href="/Xwt3/A.html#a5b7ff1843c736f9" class="i field">Zero</a>;
					<a href="@0@PresentationFramework/A.html#d2d98a3022fbac2f" class="k">var</a> <span id="r91 rd" class="r91 r">cellpresenter</span> = <a href="@0@PresentationCore/A.html#7f1e2538afba01e7" class="t t">VisualTreeHelper</a>.<a href="@0@PresentationCore/A.html#30089fb0c0679121" class="i method">GetChild</a> (<span class="r90 r">childStack</span>, <a href="#57c34977ae5d18ec" class="i field">cellViews</a> [<span class="r82 r">cell</span>].<a href="#087c27021124f6fc" class="i field">ColumnIndex</a> == 0 ? <a href="#57c34977ae5d18ec" class="i field">cellViews</a> [<span class="r82 r">cell</span>].<a href="#e9f0a0cc332bd945" class="i field">CellIndex</a> + 1 : <a href="#57c34977ae5d18ec" class="i field">cellViews</a> [<span class="r82 r">cell</span>].<a href="#e9f0a0cc332bd945" class="i field">CellIndex</a>) <b>as</b> <a href="@0@PresentationFramework/A.html#d2d98a3022fbac2f" class="t t">FrameworkElement</a>;
					<a href="@0@WindowsBase/A.html#9120327717fc513d" class="k">var</a> <span id="r92 rd" class="r92 r">position</span> = <span class="r91 r">cellpresenter</span>.<a href="@0@PresentationCore/A.html#c8fcbc7ed8770a87" class="i method">TransformToAncestor</a> (<a href="#07d50b7b59f4046c" class="i property">Tree</a>).<a href="@0@PresentationCore/A.html#9ce175611bffc8b3" class="i method">Transform</a>(<b>new</b> <span class="i n">System</span>.<span class="i n">Windows</span>.<a href="@0@WindowsBase/A.html#df31222d1f00fae5" class="t constructor">Point</a>(-<a href="#07d50b7b59f4046c" class="i property">Tree</a>.<a href="@0@PresentationFramework/A.html#8e668d558ec8d7ab" class="i property">Padding</a>.<a href="@0@PresentationFramework/A.html#db037f9d297086b1" class="i property">Left</a>, 0));
					<a href="@0@WindowsBase/A.html#fc387a6f7a1c2856" class="k">var</a> <span id="r93 rd" class="r93 r">rect</span> = <b>new</b> <a href="@0@WindowsBase/A.html#ef3f15bc2f9537c0" class="t constructor">Rect</a> (<span class="r92 r">position</span>, <span class="r91 r">cellpresenter</span>.<a href="@0@PresentationCore/A.html#630885025f47613b" class="i property">RenderSize</a>);
					<b>return</b> <span class="r93 r">rect</span>.<a href="DataConverter.cs.html#9f3f837fa749e6de" class="i method">ToXwtRect</a> ();
				} <b>else</b> {
					<b>if</b> (<a href="#57c34977ae5d18ec" class="i field">cellViews</a> [<span class="r82 r">cell</span>].<a href="#087c27021124f6fc" class="i field">ColumnIndex</a> == 0)
						<span class="r89 r">colchild</span> = <a href="@0@PresentationCore/A.html#7f1e2538afba01e7" class="t t">VisualTreeHelper</a>.<a href="@0@PresentationCore/A.html#30089fb0c0679121" class="i method">GetChild</a> (<span class="r89 r">colchild</span>, 1) <b>as</b> <a href="@0@PresentationFramework/A.html#d2d98a3022fbac2f" class="t t">FrameworkElement</a>;
					<a href="@0@WindowsBase/A.html#9120327717fc513d" class="k">var</a> <span id="r94 rd" class="r94 r">position</span> = <span class="r89 r">colchild</span>.<a href="@0@PresentationCore/A.html#c8fcbc7ed8770a87" class="i method">TransformToAncestor</a> (<a href="#07d50b7b59f4046c" class="i property">Tree</a>).<a href="@0@PresentationCore/A.html#9ce175611bffc8b3" class="i method">Transform</a>(<b>new</b> <span class="i n">System</span>.<span class="i n">Windows</span>.<a href="@0@WindowsBase/A.html#df31222d1f00fae5" class="t constructor">Point</a>(-<a href="#07d50b7b59f4046c" class="i property">Tree</a>.<a href="@0@PresentationFramework/A.html#8e668d558ec8d7ab" class="i property">Padding</a>.<a href="@0@PresentationFramework/A.html#db037f9d297086b1" class="i property">Left</a>, 0));
					<a href="@0@WindowsBase/A.html#fc387a6f7a1c2856" class="k">var</a> <span id="r95 rd" class="r95 r">rect</span> = <b>new</b> <a href="@0@WindowsBase/A.html#ef3f15bc2f9537c0" class="t constructor">Rect</a> (<span class="r94 r">position</span>, <span class="r89 r">colchild</span>.<a href="@0@PresentationCore/A.html#630885025f47613b" class="i property">RenderSize</a>);
					<b>return</b> <span class="r95 r">rect</span>.<a href="DataConverter.cs.html#9f3f837fa749e6de" class="i method">ToXwtRect</a> ();
				}
			} <b>catch</b> (<a href="@0@mscorlib/A.html#2975f0aa875d4a32" class="t t">ArgumentOutOfRangeException</a>) {
				<b>return</b> <a href="/Xwt3/A.html#c6d9d3513c691785" class="t t">Rectangle</a>.<a href="/Xwt3/A.html#a5b7ff1843c736f9" class="i field">Zero</a>;
			} <b>catch</b> (<a href="@0@mscorlib/A.html#c742289497493bb8" class="t t">ArgumentNullException</a>) {
				<b>return</b> <a href="/Xwt3/A.html#c6d9d3513c691785" class="t t">Rectangle</a>.<a href="/Xwt3/A.html#a5b7ff1843c736f9" class="i field">Zero</a>;
			}
		}

		<b>public</b> <a href="/Xwt3/A.html#c6d9d3513c691785" class="t t">Rectangle</a> <a id="377fcfebc5a16211" href="../R/377fcfebc5a16211.html" target="n" data-glyph="72,1" class="i method">GetRowBounds</a> (<a href="/Xwt3/A.html#b5041ff6cb937110" class="t t">TreePosition</a> <span id="r96 rd" class="r96 r">pos</span>, <b>bool</b> <span id="r97 rd" class="r97 r">includeMargin</span>)
		{
			<a href="ExTreeViewItem.cs.html#505370876d79da38" class="t t">ExTreeViewItem</a> <span id="r98 rd" class="r98 r">item</span> = <a href="#f8d1cc938d27938a" class="i method">GetVisibleTreeItem</a> (<span class="r96 r">pos</span>);
			<b>if</b> (<span class="r98 r">item</span> == <b>null</b>)
				<b>return</b> <a href="/Xwt3/A.html#c6d9d3513c691785" class="t t">Rectangle</a>.<a href="/Xwt3/A.html#a5b7ff1843c736f9" class="i field">Zero</a>;

			<span class="c">// this works only if the wpf layout remains the same</span>
			<b>try</b> {
				<a href="@0@WindowsBase/A.html#3ce192f6633decc8" class="k">var</a> <span id="r99 rd" class="r99 r">stackpanel</span> = <a href="@0@PresentationCore/A.html#7f1e2538afba01e7" class="t t">VisualTreeHelper</a>.<a href="@0@PresentationCore/A.html#30089fb0c0679121" class="i method">GetChild</a> (<span class="r98 r">item</span>, 0);
				<a href="@0@PresentationFramework/A.html#d2d98a3022fbac2f" class="k">var</a> <span id="r100 rd" class="r100 r">border</span> = <a href="@0@PresentationCore/A.html#7f1e2538afba01e7" class="t t">VisualTreeHelper</a>.<a href="@0@PresentationCore/A.html#30089fb0c0679121" class="i method">GetChild</a> (<span class="r99 r">stackpanel</span>, 0) <b>as</b> <a href="@0@PresentationFramework/A.html#d2d98a3022fbac2f" class="t t">FrameworkElement</a>;

				<a href="/Xwt3/A.html#c6d9d3513c691785" class="k">var</a> <span id="r101 rd" class="r101 r">rect</span> = <a href="/Xwt3/A.html#c6d9d3513c691785" class="t t">Rectangle</a>.<a href="/Xwt3/A.html#a5b7ff1843c736f9" class="i field">Zero</a>;
				<b>if</b> (<span class="r97 r">includeMargin</span>) {
					<a href="@0@WindowsBase/A.html#9120327717fc513d" class="k">var</a> <span id="r102 rd" class="r102 r">position</span> = <span class="r100 r">border</span>.<a href="@0@PresentationCore/A.html#c8fcbc7ed8770a87" class="i method">TransformToAncestor</a> (<a href="#07d50b7b59f4046c" class="i property">Tree</a>).<a href="@0@PresentationCore/A.html#9ce175611bffc8b3" class="i method">Transform</a> (<b>new</b> <span class="i n">System</span>.<span class="i n">Windows</span>.<a href="@0@WindowsBase/A.html#df31222d1f00fae5" class="t constructor">Point</a> (0, 0));
					<span class="r101 r">rect</span> = <b>new</b> <a href="@0@WindowsBase/A.html#ef3f15bc2f9537c0" class="t constructor">Rect</a> (<span class="r102 r">position</span>, <span class="r100 r">border</span>.<a href="@0@PresentationCore/A.html#630885025f47613b" class="i property">RenderSize</a>).<a href="DataConverter.cs.html#9f3f837fa749e6de" class="i method">ToXwtRect</a>();
					<span class="r101 r">rect</span>.<a href="/Xwt3/A.html#cf42a8e40bfd8f8c" class="i property">X</a> -= <a href="#07d50b7b59f4046c" class="i property">Tree</a>.<a href="@0@PresentationFramework/A.html#8e668d558ec8d7ab" class="i property">Padding</a>.<a href="@0@PresentationFramework/A.html#db037f9d297086b1" class="i property">Left</a>;
				} <b>else</b> {
					<a href="@0@PresentationFramework/A.html#d2d98a3022fbac2f" class="k">var</a> <span id="r103 rd" class="r103 r">rowpresenter</span> = <a href="@0@PresentationCore/A.html#7f1e2538afba01e7" class="t t">VisualTreeHelper</a>.<a href="@0@PresentationCore/A.html#30089fb0c0679121" class="i method">GetChild</a> (<span class="r100 r">border</span>, 0) <b>as</b> <a href="@0@PresentationFramework/A.html#d2d98a3022fbac2f" class="t t">FrameworkElement</a>;
					<b>for</b> (<b>int</b> <span id="r104 rd" class="r104 r">i</span> = 0; <span class="r104 r">i</span> &lt; <a href="@0@PresentationCore/A.html#7f1e2538afba01e7" class="t t">VisualTreeHelper</a>.<a href="@0@PresentationCore/A.html#d74c0832c61e07fb" class="i method">GetChildrenCount</a> (<span class="r103 r">rowpresenter</span>); <span class="r104 r">i</span>++)
					{
						<a href="@0@PresentationFramework/A.html#d2d98a3022fbac2f" class="k">var</a> <span id="r105 rd" class="r105 r">colpresenter</span> =  <a href="@0@PresentationCore/A.html#7f1e2538afba01e7" class="t t">VisualTreeHelper</a>.<a href="@0@PresentationCore/A.html#30089fb0c0679121" class="i method">GetChild</a> (<span class="r103 r">rowpresenter</span>, <span class="r104 r">i</span>) <b>as</b> <a href="@0@PresentationFramework/A.html#d2d98a3022fbac2f" class="t t">FrameworkElement</a>;
						<a href="@0@PresentationFramework/A.html#d2d98a3022fbac2f" class="k">var</a> <span id="r106 rd" class="r106 r">colchild</span> =  <a href="@0@PresentationCore/A.html#7f1e2538afba01e7" class="t t">VisualTreeHelper</a>.<a href="@0@PresentationCore/A.html#30089fb0c0679121" class="i method">GetChild</a> (<span class="r105 r">colpresenter</span>, 0) <b>as</b> <a href="@0@PresentationFramework/A.html#d2d98a3022fbac2f" class="t t">FrameworkElement</a>;
						<a href="@0@mscorlib/A.html#225942ed7b7a3252" class="k">var</a> <span id="r107 rd" class="r107 r">cellcount</span> = <a href="@0@PresentationCore/A.html#7f1e2538afba01e7" class="t t">VisualTreeHelper</a>.<a href="@0@PresentationCore/A.html#d74c0832c61e07fb" class="i method">GetChildrenCount</a> (<span class="r106 r">colchild</span>);
						<b>if</b> (<span class="r107 r">cellcount</span> &gt; 1)
							<b>for</b> (<b>int</b> <span id="r108 rd" class="r108 r">j</span> = 0; <span class="r108 r">j</span> &lt; <span class="r107 r">cellcount</span>; <span class="r108 r">j</span>++) {
								<a href="@0@PresentationFramework/A.html#d2d98a3022fbac2f" class="k">var</a> <span id="r109 rd" class="r109 r">cell</span> =  <a href="@0@PresentationCore/A.html#7f1e2538afba01e7" class="t t">VisualTreeHelper</a>.<a href="@0@PresentationCore/A.html#30089fb0c0679121" class="i method">GetChild</a> (<span class="r106 r">colchild</span>, <span class="r108 r">j</span>) <b>as</b> <a href="@0@PresentationFramework/A.html#d2d98a3022fbac2f" class="t t">FrameworkElement</a>;
								<a href="@0@WindowsBase/A.html#9120327717fc513d" class="k">var</a> <span id="r110 rd" class="r110 r">position</span> = <span class="r109 r">cell</span>.<a href="@0@PresentationCore/A.html#c8fcbc7ed8770a87" class="i method">TransformToAncestor</a> (<a href="#07d50b7b59f4046c" class="i property">Tree</a>).<a href="@0@PresentationCore/A.html#9ce175611bffc8b3" class="i method">Transform</a>(<b>new</b> <span class="i n">System</span>.<span class="i n">Windows</span>.<a href="@0@WindowsBase/A.html#df31222d1f00fae5" class="t constructor">Point</a>(-<a href="#07d50b7b59f4046c" class="i property">Tree</a>.<a href="@0@PresentationFramework/A.html#8e668d558ec8d7ab" class="i property">Padding</a>.<a href="@0@PresentationFramework/A.html#db037f9d297086b1" class="i property">Left</a>, 0));
								<a href="/Xwt3/A.html#c6d9d3513c691785" class="k">var</a> <span id="r111 rd" class="r111 r">cell_rect</span> = <b>new</b> <a href="@0@WindowsBase/A.html#ef3f15bc2f9537c0" class="t constructor">Rect</a> (<span class="r110 r">position</span>, <span class="r109 r">cell</span>.<a href="@0@PresentationCore/A.html#630885025f47613b" class="i property">RenderSize</a>).<a href="DataConverter.cs.html#9f3f837fa749e6de" class="i method">ToXwtRect</a>();
								<b>if</b> (<span class="r101 r">rect</span> == <a href="/Xwt3/A.html#c6d9d3513c691785" class="t t">Rectangle</a>.<a href="/Xwt3/A.html#a5b7ff1843c736f9" class="i field">Zero</a>)
									<span class="r101 r">rect</span> = <span class="r111 r">cell_rect</span>;
								<b>else</b>
									<span class="r101 r">rect</span> = <span class="r101 r">rect</span>.<a href="/Xwt3/A.html#5abda06f29f3b0da" class="i method">Union</a>(<span class="r111 r">cell_rect</span>);
							}
						<b>else</b> {
							<a href="@0@WindowsBase/A.html#9120327717fc513d" class="k">var</a> <span id="r112 rd" class="r112 r">position</span> = <span class="r106 r">colchild</span>.<a href="@0@PresentationCore/A.html#c8fcbc7ed8770a87" class="i method">TransformToAncestor</a> (<a href="#07d50b7b59f4046c" class="i property">Tree</a>).<a href="@0@PresentationCore/A.html#9ce175611bffc8b3" class="i method">Transform</a>(<b>new</b> <span class="i n">System</span>.<span class="i n">Windows</span>.<a href="@0@WindowsBase/A.html#df31222d1f00fae5" class="t constructor">Point</a>(-<a href="#07d50b7b59f4046c" class="i property">Tree</a>.<a href="@0@PresentationFramework/A.html#8e668d558ec8d7ab" class="i property">Padding</a>.<a href="@0@PresentationFramework/A.html#db037f9d297086b1" class="i property">Left</a>, 0));
							<a href="/Xwt3/A.html#c6d9d3513c691785" class="k">var</a> <span id="r113 rd" class="r113 r">cell_rect</span> = <b>new</b> <a href="@0@WindowsBase/A.html#ef3f15bc2f9537c0" class="t constructor">Rect</a> (<span class="r112 r">position</span>, <span class="r106 r">colchild</span>.<a href="@0@PresentationCore/A.html#630885025f47613b" class="i property">RenderSize</a>).<a href="DataConverter.cs.html#9f3f837fa749e6de" class="i method">ToXwtRect</a>();
							<b>if</b> (<span class="r101 r">rect</span> == <a href="/Xwt3/A.html#c6d9d3513c691785" class="t t">Rectangle</a>.<a href="/Xwt3/A.html#a5b7ff1843c736f9" class="i field">Zero</a>)
								<span class="r101 r">rect</span> = <span class="r113 r">cell_rect</span>;
							<b>else</b>
								<span class="r101 r">rect</span> = <span class="r101 r">rect</span>.<a href="/Xwt3/A.html#5abda06f29f3b0da" class="i method">Union</a>(<span class="r113 r">cell_rect</span>);
						}
					}
					<span class="c">//var position = rowpresenter.TransformToAncestor (Tree).Transform(new System.Windows.Point(0,0));</span>
					<span class="c">//rect = new Rect (position, rowpresenter.RenderSize).ToXwtRect();</span>
					<span class="c">//rect.X -= Tree.Padding.Left + Tree.BorderThickness.Left;</span>
				}

				<b>return</b> <span class="r101 r">rect</span>;
			} <b>catch</b> (<a href="@0@mscorlib/A.html#2975f0aa875d4a32" class="t t">ArgumentOutOfRangeException</a>) {
				<b>return</b> <a href="/Xwt3/A.html#c6d9d3513c691785" class="t t">Rectangle</a>.<a href="/Xwt3/A.html#a5b7ff1843c736f9" class="i field">Zero</a>;
			} <b>catch</b> (<a href="@0@mscorlib/A.html#c742289497493bb8" class="t t">ArgumentNullException</a>) {
				<b>return</b> <a href="/Xwt3/A.html#c6d9d3513c691785" class="t t">Rectangle</a>.<a href="/Xwt3/A.html#a5b7ff1843c736f9" class="i field">Zero</a>;
			}
		}
	}
}
</pre></td></tr></table></div></body></html>
