<!DOCTYPE html>
<html><head><title>WidgetBackend.cs</title><link rel="stylesheet" href="../../styles.css"><script src="../../scripts.js"></script></head>
<body class="cB" onload="i(1032);"><div class="dH">
<table style="width: 100%">
<tr><td>File: <a id="filePath" class="blueLink" href="/#Xwt3.WPF/Xwt.WPFBackend/WidgetBackend.cs" target="_top">Xwt.WPFBackend\WidgetBackend.cs</a><br/></td><td></td></tr>
<tr><td>Project: <a id="projectPath" class="blueLink" href="/#Xwt3.WPF" target="_top">xwt\Xwt.WPF\Xwt3.WPF.csproj</a> (Xwt3.WPF)</td><td></td></tr>
</table>
</div>
<div class="cz"><table class="tb" cellpadding="0" cellspacing="0"><tr><td valign="top" align="right"><pre id="ln"></pre></td><td valign="top" align="left"><pre id="code">
<span class="c">//</span>
<span class="c">// WidgetBackend.cs</span>
<span class="c">//</span>
<span class="c">// Authors:</span>
<span class="c">//       Carlos Alberto Cortez &lt;calberto.cortez@gmail.com&gt;</span>
<span class="c">//       Eric Maupin &lt;ermau@xamarin.com&gt;</span>
<span class="c">//</span>
<span class="c">// Copyright (c) 2011 Carlos Alberto Cortez</span>
<span class="c">// Copyright (c) 2012 Xamarin, Inc.</span>
<span class="c">//</span>
<span class="c">// Permission is hereby granted, free of charge, to any person obtaining a copy</span>
<span class="c">// of this software and associated documentation files (the &quot;Software&quot;), to deal</span>
<span class="c">// in the Software without restriction, including without limitation the rights</span>
<span class="c">// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell</span>
<span class="c">// copies of the Software, and to permit persons to whom the Software is</span>
<span class="c">// furnished to do so, subject to the following conditions:</span>
<span class="c">//</span>
<span class="c">// The above copyright notice and this permission notice shall be included in</span>
<span class="c">// all copies or substantial portions of the Software.</span>
<span class="c">//</span>
<span class="c">// THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR</span>
<span class="c">// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,</span>
<span class="c">// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE</span>
<span class="c">// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER</span>
<span class="c">// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,</span>
<span class="c">// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN</span>
<span class="c">// THE SOFTWARE.</span>
 
<b>using</b> <span class="i n">System</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Collections</span>.<span class="i n">Specialized</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Linq</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Windows</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Windows</span>.<span class="i n">Controls</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Windows</span>.<span class="i n">Documents</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Windows</span>.<span class="i n">Input</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Windows</span>.<span class="i n">Media</span>;
<b>using</b> <span class="i">SWM</span> = <span class="i n">System</span>.<span class="i n">Windows</span>.<span class="i n">Media</span>;
<b>using</b> <span class="i">SWC</span> = <span class="i n">System</span>.<span class="i n">Windows</span>.<span class="i n">Controls</span>; <span class="c">// When we need to resolve ambigituies.</span>
<b>using</b> <span class="i">SW</span> = <span class="i n">System</span>.<span class="i n">Windows</span>; <span class="c">// When we need to resolve ambigituies.</span>
 
<b>using</b> <span class="i n">Xwt</span>.<span class="i n">Backends</span>;
 
<b>using</b> <span class="t">Color</span> = <span class="i n">Xwt</span>.<span class="i n">Drawing</span>.<a href="/Xwt3/A.html#773e78572598ea91" class="t t">Color</a>;
 
<b>namespace</b> <span class="i n">Xwt</span>.<span class="i n">WPFBackend</span>
{
	<b>public abstract class</b> <a id="551a9684f2eb2b53" href="../R/551a9684f2eb2b53.html" target="n" data-glyph="0,0" class="t t"><span id="952aa01daddb274c">WidgetBackend</span></a>
		: <a href="Backend.cs.html#abe0bf9c54203f7b" class="t t">Backend</a>, <a href="/Xwt3/A.html#afaa20aa76724b41" class="t t">IWidgetBackend</a>, <a href="#447ac45082ea1793" class="t t">IWpfWidgetBackend</a>
	{
		<a href="/Xwt3/A.html#91d803dd40128a28" class="t t">IWidgetEventSink</a> <a id="d1158759327ca5a9" href="../R/d1158759327ca5a9.html" target="n" data-glyph="46,1" class="i field">eventSink</a>;
		<a href="/Xwt3/A.html#c05db169102de2ea" class="t t">WidgetEvent</a> <a id="51dbe360b1ea83c5" href="../R/51dbe360b1ea83c5.html" target="n" data-glyph="46,1" class="i field">enabledEvents</a>;
		<a href="@0@PresentationCore/A.html#e5a8d642ee112795" class="t t">DragDropEffects</a> <a id="7a53212d79a444ad" href="../R/7a53212d79a444ad.html" target="n" data-glyph="46,1" class="i field">currentDragEffect</a>;
		<a href="@0@PresentationFramework/A.html#d2d98a3022fbac2f" class="t t">FrameworkElement</a> <a id="f789e3ab9263356c" href="../R/f789e3ab9263356c.html" target="n" data-glyph="46,1" class="i field">widget</a>;
 
		<b>class</b> <a id="b9152167a195b68e" href="../R/b9152167a195b68e.html" target="n" data-glyph="4,1" class="t t"><span id="04616f444cc25ac8">DragDropData</span></a>
		{
			<span class="c">// Source</span>
			<b>public bool</b> <a id="274e37b0b889530f" href="../R/274e37b0b889530f.html" target="n" data-glyph="42,2" class="i field">AutodetectDrag</a>;
			<b>public</b> <a href="@0@WindowsBase/A.html#fc387a6f7a1c2856" class="t t">Rect</a> <a id="8e7120f6d7b81e93" href="../R/8e7120f6d7b81e93.html" target="n" data-glyph="42,2" class="i field">DragRect</a> = <a href="@0@WindowsBase/A.html#fc387a6f7a1c2856" class="t t">Rect</a>.<a href="@0@WindowsBase/A.html#d791e7413af48db0" class="i property">Empty</a>;
			<span class="c">// Target</span>
			<b>public</b> <a href="/Xwt3/A.html#8d2aa7ab8e934767" class="t t">TransferDataType</a> [] <a id="73fed9cc3c8b3733" href="../R/73fed9cc3c8b3733.html" target="n" data-glyph="42,2" class="i field">TargetTypes</a> = <b>new</b> <a href="/Xwt3/A.html#8d2aa7ab8e934767" class="t t">TransferDataType</a> [0];
		}
 
		<a href="#b9152167a195b68e" class="t t">DragDropData</a> <a id="8c1e8b0452a5fce9" href="../R/8c1e8b0452a5fce9.html" target="n" data-glyph="46,1" class="i field">dragDropInfo</a>;
 
		<b>const</b> <a href="/Xwt3/A.html#c05db169102de2ea" class="t t">WidgetEvent</a> <a id="cbb4e7d7b4348c10" href="../R/cbb4e7d7b4348c10.html" target="n" data-glyph="10,1" class="i field">dragDropEvents</a> = <a href="/Xwt3/A.html#c05db169102de2ea" class="t t">WidgetEvent</a>.<a href="/Xwt3/A.html#5abae3c3dcd3b161" class="i field">DragDropCheck</a> | <a href="/Xwt3/A.html#c05db169102de2ea" class="t t">WidgetEvent</a>.<a href="/Xwt3/A.html#7511311a2884c553" class="i field">DragDrop</a> | <a href="/Xwt3/A.html#c05db169102de2ea" class="t t">WidgetEvent</a>.<a href="/Xwt3/A.html#e30cc3e21e73aaf4" class="i field">DragOver</a> | <a href="/Xwt3/A.html#c05db169102de2ea" class="t t">WidgetEvent</a>.<a href="/Xwt3/A.html#3947e29ed6facb54" class="i field">DragOverCheck</a>;
 
		<span class="c">// Set to true when measuring a natural size for this widget</span>
		<b>bool</b> <a id="26f810ef9e694188" href="../R/26f810ef9e694188.html" target="n" data-glyph="46,1" class="i field">gettingNaturalSize</a>;
 
		<span class="c">// Set to true when calculating the default preferred size of the widget</span>
		<b>bool</b> <a id="3cf32819f7c8b4da" href="../R/3cf32819f7c8b4da.html" target="n" data-glyph="46,1" class="i field">calculatingPreferredSize</a>;
 
		<b>void</b> <a href="/Xwt3/A.html#afaa20aa76724b41" class="t t">IWidgetBackend</a>.<a href="/Xwt3/A.html#ef0f4530eb279f52" class="i method">Initialize</a> (<a href="/Xwt3/A.html#91d803dd40128a28" class="t t">IWidgetEventSink</a> <span id="r0 rd" class="r0 r">eventSink</span>)
		{
			<a href="#551a9684f2eb2b53" class="k">this</a>.<a href="#d1158759327ca5a9" class="i field">eventSink</a> = <span class="r0 r">eventSink</span>;
			<a href="#611309596ff5a47a" class="i method">Initialize</a> ();
		}
 
		<b>protected virtual void</b> <a id="611309596ff5a47a" href="../R/611309596ff5a47a.html" target="n" data-glyph="75,1" class="i method">Initialize</a> ()
		{
		}
		
		~<a id="d3bbc5056ace1ee0" href="../R/../../0000000000.html" target="n" data-glyph="75,1" class="i method">WidgetBackend</a> ()
		{
			<a href="#f11f1ef9c37ffd44" class="i method">Dispose</a> (<b>false</b>);
		}
		
		<b>public void</b> <a id="a5c93838eff30cb2" href="../R/a5c93838eff30cb2.html" target="n" data-glyph="72,1" class="i method">Dispose</a> ()
		{
			<a href="@0@mscorlib/A.html#25d9c1e022317a99" class="t t">GC</a>.<a href="@0@mscorlib/A.html#2673f5220a565bf2" class="i method">SuppressFinalize</a> (<a href="#551a9684f2eb2b53" class="k">this</a>);
			<a href="#f11f1ef9c37ffd44" class="i method">Dispose</a> (<b>true</b>);
		}
		
		<b>protected virtual void</b> <a id="f11f1ef9c37ffd44" href="../R/f11f1ef9c37ffd44.html" target="n" data-glyph="75,1" class="i method">Dispose</a> (<b>bool</b> <span id="r1 rd" class="r1 r">disposing</span>)
		{
		}
 
		<b>public</b> <a href="/Xwt3/A.html#91d803dd40128a28" class="t t">IWidgetEventSink</a> <a id="6eebdc0ff8c33e10" href="../R/6eebdc0ff8c33e10.html" target="n" data-glyph="102,1" class="i property">EventSink</a> {
			<b>get</b> { <b>return</b> <a href="#d1158759327ca5a9" class="i field">eventSink</a>; }
		}
 
		<b>public object</b> <a id="1fbd7de39e64f058" href="../R/1fbd7de39e64f058.html" target="n" data-glyph="102,1" class="i property">NativeWidget</a> {
			<b>get</b> { <b>return</b> <a href="#bfe5b8d8f773f1ef" class="i property">Widget</a>; }
		}
 
		<b>public</b> <b>new</b> <a href="/Xwt3/A.html#66cf9eb320966cca" class="t t">Widget</a> <a id="a0cac2053ea95bf6" href="../R/a0cac2053ea95bf6.html" target="n" data-glyph="102,1" class="i property">Frontend</a> {
			<b>get</b> { <b>return</b> (<a href="/Xwt3/A.html#66cf9eb320966cca" class="t t">Widget</a>) <a href="Backend.cs.html#abe0bf9c54203f7b" class="k">base</a>.<a href="Backend.cs.html#bc5406a56eeba1d2" class="i property">Frontend</a>; }
		}
 
		<b>public</b> <a href="@0@PresentationFramework/A.html#d2d98a3022fbac2f" class="t t">FrameworkElement</a> <a id="bfe5b8d8f773f1ef" href="../R/bfe5b8d8f773f1ef.html" target="n" data-glyph="102,1" class="i property">Widget</a> {
			<b>get</b> { <b>return</b> <a href="#f789e3ab9263356c" class="i field">widget</a>; }
			<b>set</b>
			{
				<a href="#f789e3ab9263356c" class="i field">widget</a> = <b>value</b>;
				<b>if</b> (<a href="#f789e3ab9263356c" class="i field">widget</a> <b>is</b> <a href="#cc0e50a0d5748c2d" class="t t">IWpfWidget</a>)
					((<a href="#cc0e50a0d5748c2d" class="t t">IWpfWidget</a>)<a href="#f789e3ab9263356c" class="i field">widget</a>).<a href="#993669e9ca4e75f4" class="i property">Backend</a> = <a href="#551a9684f2eb2b53" class="k">this</a>;
				<a href="#f789e3ab9263356c" class="i field">widget</a>.<a href="@0@PresentationCore/A.html#45a2b3d7f602e83f" class="i method">InvalidateMeasure</a> ();
			}
		}
 
		<a href="/Xwt3/A.html#773e78572598ea91" class="t t">Color</a>? <a id="ad8aa134704bbdba" href="../R/ad8aa134704bbdba.html" target="n" data-glyph="46,1" class="i field">customBackgroundColor</a>;
 
		<b>public virtual</b> <a href="/Xwt3/A.html#773e78572598ea91" class="t t">Color</a> <a id="d2118170132e1aac" href="../R/d2118170132e1aac.html" target="n" data-glyph="102,1" class="i property">BackgroundColor</a> {
			<b>get</b> {
				<b>if</b> (<a href="#ad8aa134704bbdba" class="i field">customBackgroundColor</a>.<a href="@0@mscorlib/A.html#7bbe60e33e857298" class="i property">HasValue</a>)
					<b>return</b> <a href="#ad8aa134704bbdba" class="i field">customBackgroundColor</a>.<a href="@0@mscorlib/A.html#7b38d1fa76071c95" class="i property">Value</a>;
 
				<b>return</b> <a href="DataConverter.cs.html#2c4c5d9875573746" class="t t">DataConverter</a>.<a href="DataConverter.cs.html#bdc13e618e9c17be" class="i method">ToXwtColor</a> (<a href="#b85ba7a32e81bf6a" class="i method">GetWidgetColor</a> ());
			}
			<b>set</b> {
				<a href="#ad8aa134704bbdba" class="i field">customBackgroundColor</a> = <b>value</b>;
				<a href="#1f9656e66d1ae841" class="i method">SetWidgetColor</a> (<b>value</b>);
			}
		}
 
		<b>public bool</b> <a id="68c84d4899d5d216" href="../R/68c84d4899d5d216.html" target="n" data-glyph="102,1" class="i property">BackgroundColorSet</a>
		{
			<b>get</b> { <b>return</b> <a href="#ad8aa134704bbdba" class="i field">customBackgroundColor</a>.<a href="@0@mscorlib/A.html#7bbe60e33e857298" class="i property">HasValue</a>; }
		}
 
		<span class="i n">SWM</span>.<a href="@0@PresentationCore/A.html#9c469acbf7b2cb81" class="t t">Color</a> <a id="b85ba7a32e81bf6a" href="../R/b85ba7a32e81bf6a.html" target="n" data-glyph="76,1" class="i method">GetWidgetColor</a> ()
		{
			<b>if</b> (<a href="#bfe5b8d8f773f1ef" class="i property">Widget</a> <b>is</b> <a href="@0@PresentationFramework/A.html#6750b721a2294fc5" class="t t">Control</a>) {
				<a href="@0@PresentationFramework/A.html#6750b721a2294fc5" class="k">var</a> <span id="r2 rd" class="r2 r">control</span> = (<a href="@0@PresentationFramework/A.html#6750b721a2294fc5" class="t t">Control</a>)<a href="#bfe5b8d8f773f1ef" class="i property">Widget</a>;
				<b>if</b> (<span class="r2 r">control</span>.<a href="@0@PresentationFramework/A.html#4e6ce8c1fbfefae7" class="i property">Background</a> != <b>null</b>)
					<b>return</b> ((<span class="i n">SWM</span>.<a href="@0@PresentationCore/A.html#2bdb4a721050df52" class="t t">SolidColorBrush</a>)<span class="r2 r">control</span>.<a href="@0@PresentationFramework/A.html#4e6ce8c1fbfefae7" class="i property">Background</a>).<a href="@0@PresentationCore/A.html#eed7cf36d73cf29b" class="i property">Color</a>;
			} <b>else if</b> (<a href="#bfe5b8d8f773f1ef" class="i property">Widget</a> <b>is</b> <span class="i n">SWC</span>.<a href="@0@PresentationFramework/A.html#b65316d8b92f4b13" class="t t">Panel</a>) {
				<a href="@0@PresentationFramework/A.html#b65316d8b92f4b13" class="k">var</a> <span id="r3 rd" class="r3 r">panel</span> = (<span class="i n">SWC</span>.<a href="@0@PresentationFramework/A.html#b65316d8b92f4b13" class="t t">Panel</a>)<a href="#bfe5b8d8f773f1ef" class="i property">Widget</a>;
				<b>if</b> (<span class="r3 r">panel</span>.<a href="@0@PresentationFramework/A.html#03c5f431b20f4bce" class="i property">Background</a> != <b>null</b>)
					<b>return</b> ((<span class="i n">SWM</span>.<a href="@0@PresentationCore/A.html#2bdb4a721050df52" class="t t">SolidColorBrush</a>)<span class="r3 r">panel</span>.<a href="@0@PresentationFramework/A.html#03c5f431b20f4bce" class="i property">Background</a>).<a href="@0@PresentationCore/A.html#eed7cf36d73cf29b" class="i property">Color</a>;
			}
 
			<b>return</b> <a href="@0@PresentationFramework/A.html#1483e0bd2b6f4573" class="t t">SystemColors</a>.<a href="@0@PresentationFramework/A.html#585a68b3e6226a7c" class="i property">ControlColor</a>;
		}
 
		<b>protected virtual void</b> <a id="1f9656e66d1ae841" href="../R/1f9656e66d1ae841.html" target="n" data-glyph="75,1" class="i method">SetWidgetColor</a> (<a href="/Xwt3/A.html#773e78572598ea91" class="t t">Color</a> <span id="r4 rd" class="r4 r">value</span>)
		{
			<b>if</b> ((<a href="#bfe5b8d8f773f1ef" class="i property">Widget</a> <b>is</b> <a href="@0@PresentationFramework/A.html#6750b721a2294fc5" class="t t">Control</a>))
				((<a href="@0@PresentationFramework/A.html#6750b721a2294fc5" class="t t">Control</a>)<a href="#bfe5b8d8f773f1ef" class="i property">Widget</a>).<a href="@0@PresentationFramework/A.html#4e6ce8c1fbfefae7" class="i property">Background</a> = <a href="ResPool.cs.html#ca19aa5fc4bdc296" class="t t">ResPool</a>.<a href="ResPool.cs.html#e4f9ffe475596450" class="i method">GetSolidBrush</a> (<span class="r4 r">value</span>);
			<b>if</b> ((<a href="#bfe5b8d8f773f1ef" class="i property">Widget</a> <b>is</b> <span class="i n">System</span>.<span class="i n">Windows</span>.<span class="i n">Controls</span>.<a href="@0@PresentationFramework/A.html#b65316d8b92f4b13" class="t t">Panel</a>))
				((<span class="i n">SWC</span>.<a href="@0@PresentationFramework/A.html#b65316d8b92f4b13" class="t t">Panel</a>)<a href="#bfe5b8d8f773f1ef" class="i property">Widget</a>).<a href="@0@PresentationFramework/A.html#03c5f431b20f4bce" class="i property">Background</a> = <a href="ResPool.cs.html#ca19aa5fc4bdc296" class="t t">ResPool</a>.<a href="ResPool.cs.html#e4f9ffe475596450" class="i method">GetSolidBrush</a> (<span class="r4 r">value</span>);
		}
 
		<b>public bool</b> <a id="6c96e873d8e03fa1" href="../R/../../0000000000.html" target="n" data-glyph="102,1" class="i property">UsingCustomBackgroundColor</a> {
			<b>get</b> { <b>return</b> <a href="#ad8aa134704bbdba" class="i field">customBackgroundColor</a>.<a href="@0@mscorlib/A.html#7bbe60e33e857298" class="i property">HasValue</a>; }
		}
 
		<b>public virtual object</b> <a id="886945804f4ce51e" href="../R/886945804f4ce51e.html" target="n" data-glyph="102,1" class="i property">Font</a> {
			<b>get</b> { <b>return</b> <a href="#10e1802255963890" class="i method">GetWidgetFont</a> (); }
			<b>set</b> {
				<a href="#4b603ff699f8fb84" class="i method">SetWidgetFont</a> ((<a href="FontBackendHandler.cs.html#6682021f4e07ad66" class="t t">FontData</a>)<b>value</b>);
			}
		}
 
		<b>public double</b> <a id="d1dc0988b5d7b642" href="../R/d1dc0988b5d7b642.html" target="n" data-glyph="102,1" class="i property">Opacity</a> {
			<b>get</b> { <b>return</b> <a href="#bfe5b8d8f773f1ef" class="i property">Widget</a>.<a href="@0@PresentationCore/A.html#7ca23bf037950fa0" class="i property">Opacity</a>; }
			<b>set</b> { <a href="#bfe5b8d8f773f1ef" class="i property">Widget</a>.<a href="@0@PresentationCore/A.html#7ca23bf037950fa0" class="i property">Opacity</a> = <b>value</b>; }
		}
 
		<a href="FontBackendHandler.cs.html#6682021f4e07ad66" class="t t">FontData</a> <a id="10e1802255963890" href="../R/10e1802255963890.html" target="n" data-glyph="76,1" class="i method">GetWidgetFont</a> ()
		{
			<b>if</b> (!(<a href="#bfe5b8d8f773f1ef" class="i property">Widget</a> <b>is</b> <a href="@0@PresentationFramework/A.html#6750b721a2294fc5" class="t t">Control</a>)) {
				<b>double</b> <span id="r5 rd" class="r5 r">size</span> = <a href="FontBackendHandler.cs.html#d709ba6a2add5e78" class="t t">WpfFontBackendHandler</a>.<a href="FontBackendHandler.cs.html#5f84b4de8e7c588c" class="i method">GetPointsFromDeviceUnits</a> (<a href="@0@PresentationFramework/A.html#e2b8751638acf19d" class="t t">SystemFonts</a>.<a href="@0@PresentationFramework/A.html#b0e0d60d983893af" class="i property">MessageFontSize</a>);
 
				<b>return</b> <b>new</b> <a href="FontBackendHandler.cs.html#804a777bc3f91c5e" class="t constructor">FontData</a> (<a href="@0@PresentationFramework/A.html#e2b8751638acf19d" class="t t">SystemFonts</a>.<a href="@0@PresentationFramework/A.html#f7b5ad4602b99f86" class="i property">MessageFontFamily</a>, <span class="r5 r">size</span>) {
					<a href="FontBackendHandler.cs.html#934b37a9c258a5cf" class="i property">Style</a> = <a href="@0@PresentationFramework/A.html#e2b8751638acf19d" class="t t">SystemFonts</a>.<a href="@0@PresentationFramework/A.html#42eb93dbb3d14190" class="i property">MessageFontStyle</a>,
					<a href="FontBackendHandler.cs.html#9e53230563929696" class="i property">Weight</a> = <a href="@0@PresentationFramework/A.html#e2b8751638acf19d" class="t t">SystemFonts</a>.<a href="@0@PresentationFramework/A.html#82d813fb9268809d" class="i property">MessageFontWeight</a>
				};
			}
 
			<b>return</b> <a href="FontBackendHandler.cs.html#6682021f4e07ad66" class="t t">FontData</a>.<a href="FontBackendHandler.cs.html#ce6af201b7a26a75" class="i method">FromControl</a> ((<a href="@0@PresentationFramework/A.html#6750b721a2294fc5" class="t t">Control</a>)<a href="#bfe5b8d8f773f1ef" class="i property">Widget</a>);
		}
 
		<b>void</b> <a id="4b603ff699f8fb84" href="../R/4b603ff699f8fb84.html" target="n" data-glyph="76,1" class="i method">SetWidgetFont</a> (<a href="FontBackendHandler.cs.html#6682021f4e07ad66" class="t t">FontData</a> <span id="r6 rd" class="r6 r">font</span>)
		{
			<b>if</b> (!(<a href="#bfe5b8d8f773f1ef" class="i property">Widget</a> <b>is</b> <a href="@0@PresentationFramework/A.html#6750b721a2294fc5" class="t t">Control</a>))
				<b>return</b>;
 
			<a href="@0@PresentationFramework/A.html#6750b721a2294fc5" class="k">var</a> <span id="r7 rd" class="r7 r">control</span> = (<a href="@0@PresentationFramework/A.html#6750b721a2294fc5" class="t t">Control</a>)<a href="#bfe5b8d8f773f1ef" class="i property">Widget</a>;
			<span class="r7 r">control</span>.<a href="@0@PresentationFramework/A.html#9de10c4240af355e" class="i property">FontFamily</a> = <span class="r6 r">font</span>.<a href="FontBackendHandler.cs.html#c2f2eb035e98634e" class="i property">Family</a>;
			<span class="r7 r">control</span>.<a href="@0@PresentationFramework/A.html#06c25cfb99769839" class="i property">FontSize</a> = <span class="r6 r">font</span>.<a href="FontBackendHandler.cs.html#0e894021165a6f19" class="i method">GetDeviceIndependentPixelSize</a> (<span class="r7 r">control</span>);
			<span class="r7 r">control</span>.<a href="@0@PresentationFramework/A.html#7ff112e7fd3d2a6c" class="i property">FontStyle</a> = <span class="r6 r">font</span>.<a href="FontBackendHandler.cs.html#934b37a9c258a5cf" class="i property">Style</a>;
			<span class="r7 r">control</span>.<a href="@0@PresentationFramework/A.html#9010668f3342fa65" class="i property">FontWeight</a> = <span class="r6 r">font</span>.<a href="FontBackendHandler.cs.html#9e53230563929696" class="i property">Weight</a>;
			<span class="r7 r">control</span>.<a href="@0@PresentationFramework/A.html#afc6052df2fbc888" class="i property">FontStretch</a> = <span class="r6 r">font</span>.<a href="FontBackendHandler.cs.html#aee6fef9618bafd0" class="i property">Stretch</a>;
		}
 
		<b>public bool</b> <a id="ec56a99e59588083" href="../R/ec56a99e59588083.html" target="n" data-glyph="102,1" class="i property">CanGetFocus</a> {
			<b>get</b> { <b>return</b> <a href="#bfe5b8d8f773f1ef" class="i property">Widget</a>.<a href="@0@PresentationCore/A.html#8a06bc7205f956cc" class="i property">Focusable</a>; }
			<b>set</b> { <a href="#bfe5b8d8f773f1ef" class="i property">Widget</a>.<a href="@0@PresentationCore/A.html#8a06bc7205f956cc" class="i property">Focusable</a> = <b>value</b>; }
		}
 
		<b>public bool</b> <a id="5f19246339c4b34b" href="../R/5f19246339c4b34b.html" target="n" data-glyph="102,1" class="i property">HasFocus</a> {
			<b>get</b> { <b>return</b> <a href="#bfe5b8d8f773f1ef" class="i property">Widget</a>.<a href="@0@PresentationCore/A.html#55b65448d7989792" class="i property">IsFocused</a>; }
		}
 
		<b>public void</b> <a id="db5187539d03dd23" href="../R/db5187539d03dd23.html" target="n" data-glyph="72,1" class="i method">SetFocus</a> ()
		{
			<b>if</b> (<a href="#bfe5b8d8f773f1ef" class="i property">Widget</a>.<a href="@0@PresentationFramework/A.html#b05bbe3100c43c82" class="i property">IsLoaded</a>)
				<a href="#bfe5b8d8f773f1ef" class="i property">Widget</a>.<a href="@0@PresentationCore/A.html#0e11f7ae56f1c30f" class="i method">Focus</a> ();
			<b>else</b>
				<a href="#bfe5b8d8f773f1ef" class="i property">Widget</a>.<a href="@0@PresentationFramework/A.html#a815b4f12f279dee" class="i">Loaded</a> += <a href="#689aca53a02f0ffc" class="i method">DeferredFocus</a>;
		}
 
		<b>void</b> <a id="689aca53a02f0ffc" href="../R/689aca53a02f0ffc.html" target="n" data-glyph="76,1" class="i method">DeferredFocus</a> (<b>object</b> <span id="r8 rd" class="r8 r">sender</span>, <a href="@0@PresentationCore/A.html#3089ebf2139eba9d" class="t t">RoutedEventArgs</a> <span id="r9 rd" class="r9 r">e</span>)
		{
			<a href="#bfe5b8d8f773f1ef" class="i property">Widget</a>.<a href="@0@PresentationFramework/A.html#a815b4f12f279dee" class="i">Loaded</a> -= <a href="#689aca53a02f0ffc" class="i method">DeferredFocus</a>;
			<a href="#bfe5b8d8f773f1ef" class="i property">Widget</a>.<a href="@0@PresentationCore/A.html#0e11f7ae56f1c30f" class="i method">Focus</a> ();
		}
 
		<b>public virtual bool</b> <a id="04e501a17bbb11ec" href="../R/04e501a17bbb11ec.html" target="n" data-glyph="102,1" class="i property">Sensitive</a> {
			<b>get</b> { <b>return</b> <a href="#bfe5b8d8f773f1ef" class="i property">Widget</a>.<a href="@0@PresentationCore/A.html#166ae927a742c046" class="i property">IsEnabled</a>; }
			<b>set</b> { <a href="#bfe5b8d8f773f1ef" class="i property">Widget</a>.<a href="@0@PresentationCore/A.html#166ae927a742c046" class="i property">IsEnabled</a> = <b>value</b>; }
		}
 
		<b>public</b> <a href="/Xwt3/A.html#eac7fbe727da55f3" class="t t">Size</a> <a id="f454e43824e46d86" href="../R/f454e43824e46d86.html" target="n" data-glyph="102,1" class="i property">Size</a> {
			<b>get</b> { <b>return</b> <b>new</b> <a href="/Xwt3/A.html#a7fd0b1ede9d65f0" class="t constructor">Size</a> (<a href="#bfe5b8d8f773f1ef" class="i property">Widget</a>.<a href="@0@PresentationCore/A.html#630885025f47613b" class="i property">RenderSize</a>.<a href="@0@WindowsBase/A.html#6889b81bbde81637" class="i property">Width</a>, <a href="#bfe5b8d8f773f1ef" class="i property">Widget</a>.<a href="@0@PresentationCore/A.html#630885025f47613b" class="i property">RenderSize</a>.<a href="@0@WindowsBase/A.html#5c5d17caa72f2875" class="i property">Height</a>); }
		}
 
		<b>public virtual bool</b> <a id="b17b12f25ce4f3da" href="../R/b17b12f25ce4f3da.html" target="n" data-glyph="102,1" class="i property">Visible</a> {
			<b>get</b> { <b>return</b> <a href="#bfe5b8d8f773f1ef" class="i property">Widget</a>.<a href="@0@PresentationCore/A.html#69f262dd47fdf2be" class="i property">Visibility</a> == <a href="@0@PresentationCore/A.html#2668d640196eddd0" class="t t">Visibility</a>.<a href="@0@PresentationCore/A.html#02d18b751f37c2fd" class="i field">Visible</a>; }
			<b>set</b> { <a href="#bfe5b8d8f773f1ef" class="i property">Widget</a>.<a href="@0@PresentationCore/A.html#69f262dd47fdf2be" class="i property">Visibility</a> = <b>value</b> ? <a href="@0@PresentationCore/A.html#2668d640196eddd0" class="t t">Visibility</a>.<a href="@0@PresentationCore/A.html#02d18b751f37c2fd" class="i field">Visible</a> : <a href="@0@PresentationCore/A.html#2668d640196eddd0" class="t t">Visibility</a>.<a href="@0@PresentationCore/A.html#b5dcd78ae53c5916" class="i field">Collapsed</a>; }
		}
 
		<b>public string</b> <a id="fdb5704662a943f7" href="../R/fdb5704662a943f7.html" target="n" data-glyph="102,1" class="i property">TooltipText</a> {
			<b>get</b> { <b>return</b> <a href="#bfe5b8d8f773f1ef" class="i property">Widget</a>.<a href="@0@PresentationFramework/A.html#dfa9b59a70d7968c" class="i property">ToolTip</a>.<a href="@0@mscorlib/A.html#ff31a6bf27c58f89" class="i method">ToString</a> (); }
			<b>set</b> { <a href="#bfe5b8d8f773f1ef" class="i property">Widget</a>.<a href="@0@PresentationFramework/A.html#dfa9b59a70d7968c" class="i property">ToolTip</a> = <b>value</b>; }
		}
 
		<b>public static</b> <a href="@0@PresentationFramework/A.html#d2d98a3022fbac2f" class="t t">FrameworkElement</a> <a id="0a64d8a803e577a0" href="../R/0a64d8a803e577a0.html" target="n" data-glyph="72,1" class="i method">GetFrameworkElement</a> (<a href="/Xwt3/A.html#afaa20aa76724b41" class="t t">IWidgetBackend</a> <span id="r10 rd" class="r10 r">backend</span>)
		{
			<b>return</b> <span class="r10 r">backend</span> == <b>null</b> ? <b>null</b> : (<a href="@0@PresentationFramework/A.html#d2d98a3022fbac2f" class="t t">FrameworkElement</a>)<span class="r10 r">backend</span>.<a href="/Xwt3/A.html#b85c5c5d48346e23" class="i property">NativeWidget</a>;
		}
 
		<b>public</b> <a href="/Xwt3/A.html#0e54e87b6e891b4f" class="t t">Point</a> <a id="ea9b8c02111c531b" href="../R/ea9b8c02111c531b.html" target="n" data-glyph="72,1" class="i method">ConvertToScreenCoordinates</a> (<a href="/Xwt3/A.html#0e54e87b6e891b4f" class="t t">Point</a> <span id="r11 rd" class="r11 r">widgetCoordinates</span>)
		{
			<a href="@0@WindowsBase/A.html#9120327717fc513d" class="k">var</a> <span id="r12 rd" class="r12 r">p</span> = <a href="#bfe5b8d8f773f1ef" class="i property">Widget</a>.<a href="@0@PresentationCore/A.html#dd3ac0e288343e52" class="i method">PointToScreen</a> (<b>new</b> <span class="i n">System</span>.<span class="i n">Windows</span>.<a href="@0@WindowsBase/A.html#df31222d1f00fae5" class="t constructor">Point</a> (
				<span class="r11 r">widgetCoordinates</span>.<a href="/Xwt3/A.html#a925f0d89fafd1e3" class="i property">X</a>, <span class="r11 r">widgetCoordinates</span>.<a href="/Xwt3/A.html#270121b6118aba39" class="i property">Y</a>));
 
			<b>return</b> <b>new</b> <a href="/Xwt3/A.html#b106e29ed3f02bf8" class="t constructor">Point</a> (<span class="r12 r">p</span>.<a href="@0@WindowsBase/A.html#556ea90344bfb3ea" class="i property">X</a>, <span class="r12 r">p</span>.<a href="@0@WindowsBase/A.html#0a42b94edb8c27ab" class="i property">Y</a>);
		}
 
		<span class="i n">SW</span>.<a href="@0@WindowsBase/A.html#a844b9b525c2088c" class="t t">Size</a> <a id="45853fc05d17db67" href="../R/../../0000000000.html" target="n" data-glyph="46,1" class="i field">lastNaturalSize</a>;
 
		<b>void</b> <a id="6a0ba65933b0a42a" href="../R/6a0ba65933b0a42a.html" target="n" data-glyph="76,1" class="i method">GetWidgetDesiredSize</a> (<b>double</b> <span id="r13 rd" class="r13 r">availableWidth</span>, <b>double</b> <span id="r14 rd" class="r14 r">availableHeight</span>, <b>out</b> <span class="i n">SW</span>.<a href="@0@WindowsBase/A.html#a844b9b525c2088c" class="t t">Size</a> <span id="r15 rd" class="r15 r">size</span>)
		{
			<span class="c">// Calculates the desired size of widget.</span>
 
			<b>if</b> (!<a href="#bfe5b8d8f773f1ef" class="i property">Widget</a>.<a href="@0@PresentationCore/A.html#4a553376bceb8b4f" class="i property">IsMeasureValid</a>) {
				<b>try</b> {
					<a href="#3cf32819f7c8b4da" class="i field">calculatingPreferredSize</a> = <b>true</b>;
					<a href="#bfe5b8d8f773f1ef" class="i property">Widget</a>.<a href="@0@PresentationCore/A.html#0e6c09a4266b5db0" class="i method">Measure</a> (<b>new</b> <span class="i n">System</span>.<span class="i n">Windows</span>.<a href="@0@WindowsBase/A.html#a9e92f9d82abccc2" class="t constructor">Size</a> (<span class="r13 r">availableWidth</span>, <span class="r14 r">availableHeight</span>));
				}
				<b>finally</b> {
					<a href="#3cf32819f7c8b4da" class="i field">calculatingPreferredSize</a> = <b>false</b>;
					<a href="#26f810ef9e694188" class="i field">gettingNaturalSize</a> = <b>false</b>;
				}
			}
			<span class="r15 r">size</span> = <a href="#bfe5b8d8f773f1ef" class="i property">Widget</a>.<a href="@0@PresentationCore/A.html#32042c7c3b8912f8" class="i property">DesiredSize</a>;
		}
 
		<span class="c">// The GetPreferredSize method is called when the corresponding OnGetPreferredSize method in the</span>
		<span class="c">// XWT widget is not overriden, or if it is overriden and the new implementation calls</span>
		<span class="c">// base.OnGetPreferredSize. For this reason, we have to ensure that the widget&#39;s MeasureOverride</span>
		<span class="c">// method doesn&#39;t end calling the frontend OnGetPreferredSize method. To avoid it we set</span>
		<span class="c">// the calculatingPreferredSize flag to true, and we check this flag in MeasureOverride</span>
 
		<b>public virtual</b> <a href="/Xwt3/A.html#eac7fbe727da55f3" class="t t">Size</a> <a id="455dc76e64a73823" href="../R/455dc76e64a73823.html" target="n" data-glyph="72,1" class="i method">GetPreferredSize</a> (<a href="/Xwt3/A.html#2b0499fa5e00539f" class="t t">SizeConstraint</a> <span id="r16 rd" class="r16 r">widthConstraint</span>, <a href="/Xwt3/A.html#2b0499fa5e00539f" class="t t">SizeConstraint</a> <span id="r17 rd" class="r17 r">heightConstraint</span>)
		{
			<span class="i n">SW</span>.<a href="@0@WindowsBase/A.html#a844b9b525c2088c" class="t t">Size</a> <span id="r18 rd" class="r18 r">size</span>;
			<a href="#bfe5b8d8f773f1ef" class="i property">Widget</a>.<a href="@0@PresentationCore/A.html#45a2b3d7f602e83f" class="i method">InvalidateMeasure</a> ();
			<a href="#6a0ba65933b0a42a" class="i method">GetWidgetDesiredSize</a> (<span class="r16 r">widthConstraint</span>.<a href="/Xwt3/A.html#818759621defd99c" class="i property">IsConstrained</a> ? <span class="r16 r">widthConstraint</span>.<a href="/Xwt3/A.html#96bde53c6217af98" class="i property">AvailableSize</a> : <a href="@0@mscorlib/A.html#1a65cbdb09544ba1" class="t t">Double</a>.<a href="@0@mscorlib/A.html#704210f8dd6afaed" class="i field">PositiveInfinity</a>, <span class="r17 r">heightConstraint</span>.<a href="/Xwt3/A.html#818759621defd99c" class="i property">IsConstrained</a> ? <span class="r17 r">heightConstraint</span>.<a href="/Xwt3/A.html#96bde53c6217af98" class="i property">AvailableSize</a> : <a href="@0@mscorlib/A.html#1a65cbdb09544ba1" class="t t">Double</a>.<a href="@0@mscorlib/A.html#704210f8dd6afaed" class="i field">PositiveInfinity</a>, <b>out</b> <span class="r18 r">size</span>);
			<b>return</b> <b>new</b> <a href="/Xwt3/A.html#a7fd0b1ede9d65f0" class="t constructor">Size</a> (<span class="r18 r">size</span>.<a href="@0@WindowsBase/A.html#6889b81bbde81637" class="i property">Width</a>, <span class="r18 r">size</span>.<a href="@0@WindowsBase/A.html#5c5d17caa72f2875" class="i property">Height</a>);
		}
 
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> A default implementation of MeasureOverride to be used by all WPF widgets</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span><span class="c"> </span><span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r19 r">constraint</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">Size constraints</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span><span class="c"> </span><span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r20 r">wpfMeasure</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">Size returned by the base MeasureOverride</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">returns</span><span class="c">&gt;</span><span class="c">&lt;/</span><span class="c">returns</span><span class="c">&gt;</span>
		<b>public</b> <span class="i n">System</span>.<span class="i n">Windows</span>.<a href="@0@WindowsBase/A.html#a844b9b525c2088c" class="t t">Size</a> <a id="10b9740f443f1be6" href="../R/10b9740f443f1be6.html" target="n" data-glyph="72,1" class="i method">MeasureOverride</a> (<span class="i n">System</span>.<span class="i n">Windows</span>.<a href="@0@WindowsBase/A.html#a844b9b525c2088c" class="t t">Size</a> <span id="r19 rd" class="r19 r">constraint</span>, <span class="i n">System</span>.<span class="i n">Windows</span>.<a href="@0@WindowsBase/A.html#a844b9b525c2088c" class="t t">Size</a> <span id="r20 rd" class="r20 r">wpfMeasure</span>)
		{
			<a href="/Xwt3/A.html#eac7fbe727da55f3" class="k">var</a> <span id="r21 rd" class="r21 r">defNaturalSize</span> = <a href="#d1158759327ca5a9" class="i field">eventSink</a>.<a href="/Xwt3/A.html#96a60f3ee16ed1e9" class="i method">GetDefaultNaturalSize</a> ();
			<b>if</b> (!<b>double</b>.<a href="@0@mscorlib/A.html#a65c846c97d11599" class="i method">IsPositiveInfinity</a> (<span class="r19 r">constraint</span>.<a href="@0@WindowsBase/A.html#6889b81bbde81637" class="i property">Width</a>))
				<span class="r21 r">defNaturalSize</span>.<a href="/Xwt3/A.html#cc006e4112f202b8" class="i property">Width</a> = <a href="@0@mscorlib/A.html#a4407e67b9a5afad" class="t t">Math</a>.<a href="@0@mscorlib/A.html#e248b38c0156e9dd" class="i method">Min</a> (<span class="r21 r">defNaturalSize</span>.<a href="/Xwt3/A.html#cc006e4112f202b8" class="i property">Width</a>, <span class="r19 r">constraint</span>.<a href="@0@WindowsBase/A.html#6889b81bbde81637" class="i property">Width</a>);
			<b>if</b> (!<b>double</b>.<a href="@0@mscorlib/A.html#a65c846c97d11599" class="i method">IsPositiveInfinity</a> (<span class="r19 r">constraint</span>.<a href="@0@WindowsBase/A.html#5c5d17caa72f2875" class="i property">Height</a>))
				<span class="r21 r">defNaturalSize</span>.<a href="/Xwt3/A.html#c6e7d92f05c1315b" class="i property">Height</a> = <a href="@0@mscorlib/A.html#a4407e67b9a5afad" class="t t">Math</a>.<a href="@0@mscorlib/A.html#e248b38c0156e9dd" class="i method">Min</a> (<span class="r21 r">defNaturalSize</span>.<a href="/Xwt3/A.html#c6e7d92f05c1315b" class="i property">Height</a>, <span class="r19 r">constraint</span>.<a href="@0@WindowsBase/A.html#5c5d17caa72f2875" class="i property">Height</a>);
 
			<span class="c">// -2 means use the WPF default, -1 use the XWT default, any other other value is used as custom natural size</span>
			<a href="@0@mscorlib/A.html#1a65cbdb09544ba1" class="k">var</a> <span id="r22 rd" class="r22 r">nw</span> = <a href="#1e1a644a9133a647" class="i property">DefaultNaturalWidth</a>;
			<b>if</b> (<span class="r22 r">nw</span> == -1) {
				<span class="r22 r">nw</span> = <span class="r21 r">defNaturalSize</span>.<a href="/Xwt3/A.html#cc006e4112f202b8" class="i property">Width</a>;
				<b>if</b> (<span class="r22 r">nw</span> == 0)
					<span class="r22 r">nw</span> = <span class="r20 r">wpfMeasure</span>.<a href="@0@WindowsBase/A.html#6889b81bbde81637" class="i property">Width</a>;
				<span class="r20 r">wpfMeasure</span>.<a href="@0@WindowsBase/A.html#6889b81bbde81637" class="i property">Width</a> = <span class="r22 r">nw</span>;
			}
			<b>else if</b> (<span class="r22 r">nw</span> != -2)
				<span class="r20 r">wpfMeasure</span>.<a href="@0@WindowsBase/A.html#6889b81bbde81637" class="i property">Width</a> = <span class="r22 r">nw</span>;
 
			<a href="@0@mscorlib/A.html#1a65cbdb09544ba1" class="k">var</a> <span id="r23 rd" class="r23 r">nh</span> = <a href="#ce6d2d7349374e14" class="i property">DefaultNaturalHeight</a>;
			<b>if</b> (<span class="r23 r">nh</span> == -1) {
				<span class="r23 r">nh</span> = <span class="r21 r">defNaturalSize</span>.<a href="/Xwt3/A.html#c6e7d92f05c1315b" class="i property">Height</a>;
				<b>if</b> (<span class="r23 r">nh</span> == 0)
					<span class="r23 r">nh</span> = <span class="r20 r">wpfMeasure</span>.<a href="@0@WindowsBase/A.html#5c5d17caa72f2875" class="i property">Height</a>;
				<span class="r20 r">wpfMeasure</span>.<a href="@0@WindowsBase/A.html#5c5d17caa72f2875" class="i property">Height</a> = <span class="r23 r">nh</span>;
			}
			<b>else if</b> (<span class="r23 r">nh</span> != -2)
				<span class="r20 r">wpfMeasure</span>.<a href="@0@WindowsBase/A.html#5c5d17caa72f2875" class="i property">Height</a> = <span class="r23 r">nh</span>;
 
			<span class="c">// If we are calculating the default preferred size of the widget we end here.</span>
			<span class="c">// See note above about when GetPreferred* methods are called.</span>
			<b>if</b> (<a href="#3cf32819f7c8b4da" class="i field">calculatingPreferredSize</a>)
				<b>return</b> <span class="r20 r">wpfMeasure</span>;
 
			<b>if</b> ((<a href="#51dbe360b1ea83c5" class="i field">enabledEvents</a> &amp; <a href="/Xwt3/A.html#c05db169102de2ea" class="t t">WidgetEvent</a>.<a href="/Xwt3/A.html#6b9d4f52fe16a036" class="i field">PreferredSizeCheck</a>) != 0) {
				<a href="Backend.cs.html#a1d66241a0d4621f" class="i property">Context</a>.<a href="/Xwt3/A.html#5db8b61c4608e0e0" class="i method">InvokeUserCode</a> (<b>delegate</b>
				{
					<span class="c">// Calculate the preferred width through the frontend if there is an overriden OnGetPreferredWidth, but only do it</span>
					<span class="c">// if we are not given a constraint. If there is a width constraint, we&#39;ll use that constraint value for calculating the height</span>
					<a href="/Xwt3/A.html#2b0499fa5e00539f" class="k">var</a> <span id="r24 rd" class="r24 r">cw</span> = <b>double</b>.<a href="@0@mscorlib/A.html#a65c846c97d11599" class="i method">IsPositiveInfinity</a> (<span class="r19 r">constraint</span>.<a href="@0@WindowsBase/A.html#6889b81bbde81637" class="i property">Width</a>) ? <a href="/Xwt3/A.html#2b0499fa5e00539f" class="t t">SizeConstraint</a>.<a href="/Xwt3/A.html#b3b371a184166b14" class="i field">Unconstrained</a> : <span class="r19 r">constraint</span>.<a href="@0@WindowsBase/A.html#6889b81bbde81637" class="i property">Width</a>;
					<a href="/Xwt3/A.html#2b0499fa5e00539f" class="k">var</a> <span id="r25 rd" class="r25 r">ch</span> = <b>double</b>.<a href="@0@mscorlib/A.html#a65c846c97d11599" class="i method">IsPositiveInfinity</a> (<span class="r19 r">constraint</span>.<a href="@0@WindowsBase/A.html#5c5d17caa72f2875" class="i property">Height</a>) ? <a href="/Xwt3/A.html#2b0499fa5e00539f" class="t t">SizeConstraint</a>.<a href="/Xwt3/A.html#b3b371a184166b14" class="i field">Unconstrained</a> : <span class="r19 r">constraint</span>.<a href="@0@WindowsBase/A.html#5c5d17caa72f2875" class="i property">Height</a>;
					<a href="/Xwt3/A.html#eac7fbe727da55f3" class="k">var</a> <span id="r26 rd" class="r26 r">ws</span> = <a href="#d1158759327ca5a9" class="i field">eventSink</a>.<a href="/Xwt3/A.html#3da77c747a64a9ad" class="i method">GetPreferredSize</a> (<span class="r24 r">cw</span>, <span class="r25 r">ch</span>);
					<span class="r20 r">wpfMeasure</span> = <b>new</b> <span class="i n">System</span>.<span class="i n">Windows</span>.<a href="@0@WindowsBase/A.html#a9e92f9d82abccc2" class="t constructor">Size</a> (<span class="r26 r">ws</span>.<a href="/Xwt3/A.html#cc006e4112f202b8" class="i property">Width</a>, <span class="r26 r">ws</span>.<a href="/Xwt3/A.html#c6e7d92f05c1315b" class="i property">Height</a>);
				});
			}
			<b>return</b> <span class="r20 r">wpfMeasure</span>;
		}
 
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> Natural width for the widget. It can be any arbitrary custom value, </span>
		<span class="c">///</span><span class="c"> or -1 if the XWT defined default has to be used, </span>
		<span class="c">///</span><span class="c"> or -2 if the WPF desired size has to be used (this is the default)</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
		<b>protected virtual double</b> <a id="1e1a644a9133a647" href="../R/1e1a644a9133a647.html" target="n" data-glyph="105,1" class="i property">DefaultNaturalWidth</a> {
			<b>get</b> { <b>return</b> -2; }
		}
 
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> Natural width for the widget. It can be any arbitrary custom value, </span>
		<span class="c">///</span><span class="c"> or -1 if the XWT defined default has to be used, </span>
		<span class="c">///</span><span class="c"> or -2 if the WPF desired size has to be used (this is the default)</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
		<b>protected virtual double</b> <a id="ce6d2d7349374e14" href="../R/ce6d2d7349374e14.html" target="n" data-glyph="105,1" class="i property">DefaultNaturalHeight</a>
		{
			<b>get</b> { <b>return</b> -2; }
		}
 
		<b>public virtual void</b> <a id="3544daac6291dd0f" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">UpdateChildPlacement</a> (<a href="/Xwt3/A.html#afaa20aa76724b41" class="t t">IWidgetBackend</a> <span id="r27 rd" class="r27 r">childBackend</span>)
		{
			<a href="#3bb437fb6dbee40f" class="i method">SetChildPlacement</a> (<span class="r27 r">childBackend</span>);
		}
 
		<b>public static void</b> <a id="3bb437fb6dbee40f" href="../R/3bb437fb6dbee40f.html" target="n" data-glyph="72,1" class="i method">SetChildPlacement</a> (<a href="/Xwt3/A.html#afaa20aa76724b41" class="t t">IWidgetBackend</a> <span id="r28 rd" class="r28 r">childBackend</span>)
		{
			<a href="#551a9684f2eb2b53" class="k">var</a> <span id="r29 rd" class="r29 r">w</span> = ((<a href="#551a9684f2eb2b53" class="t t">WidgetBackend</a>)<span class="r28 r">childBackend</span>);
			<span class="r29 r">w</span>.<a href="#bfe5b8d8f773f1ef" class="i property">Widget</a>.<a href="@0@PresentationFramework/A.html#8aedc94268115177" class="i property">Margin</a> = <b>new</b> <a href="@0@PresentationFramework/A.html#7d5226ec44f0e6f6" class="t constructor">Thickness</a> (<span class="r29 r">w</span>.<a href="#a0cac2053ea95bf6" class="i property">Frontend</a>.<a href="/Xwt3/A.html#04a3721266738b5b" class="i property">MarginLeft</a>, <span class="r29 r">w</span>.<a href="#a0cac2053ea95bf6" class="i property">Frontend</a>.<a href="/Xwt3/A.html#0d2d0328c501165d" class="i property">MarginTop</a>, <span class="r29 r">w</span>.<a href="#a0cac2053ea95bf6" class="i property">Frontend</a>.<a href="/Xwt3/A.html#24330d3445abd958" class="i property">MarginRight</a>, <span class="r29 r">w</span>.<a href="#a0cac2053ea95bf6" class="i property">Frontend</a>.<a href="/Xwt3/A.html#cb2d42743fef15ef" class="i property">MarginBottom</a>);
			<b>switch</b> (<span class="r29 r">w</span>.<a href="#a0cac2053ea95bf6" class="i property">Frontend</a>.<a href="/Xwt3/A.html#8bacac1d87db13e0" class="i property">HorizontalPlacement</a>) {
				<b>case</b> <a href="/Xwt3/A.html#3462b059836b89d8" class="t t">WidgetPlacement</a>.<a href="/Xwt3/A.html#f505e00b21b30256" class="i field">Start</a>: <span class="r29 r">w</span>.<a href="#bfe5b8d8f773f1ef" class="i property">Widget</a>.<a href="@0@PresentationFramework/A.html#af1a9620ef03c2dd" class="i property">HorizontalAlignment</a> = <a href="@0@PresentationFramework/A.html#4adb839fdbe93e93" class="t t">HorizontalAlignment</a>.<a href="@0@PresentationFramework/A.html#2389f1469eca0a2b" class="i field">Left</a>; <b>break</b>;
				<b>case</b> <a href="/Xwt3/A.html#3462b059836b89d8" class="t t">WidgetPlacement</a>.<a href="/Xwt3/A.html#f96bc9ea34ba226f" class="i field">Center</a>: <span class="r29 r">w</span>.<a href="#bfe5b8d8f773f1ef" class="i property">Widget</a>.<a href="@0@PresentationFramework/A.html#af1a9620ef03c2dd" class="i property">HorizontalAlignment</a> = <a href="@0@PresentationFramework/A.html#4adb839fdbe93e93" class="t t">HorizontalAlignment</a>.<a href="@0@PresentationFramework/A.html#565e4c897ed23ea7" class="i field">Center</a>; <b>break</b>;
				<b>case</b> <a href="/Xwt3/A.html#3462b059836b89d8" class="t t">WidgetPlacement</a>.<a href="/Xwt3/A.html#206d98d5d27d37c8" class="i field">End</a>: <span class="r29 r">w</span>.<a href="#bfe5b8d8f773f1ef" class="i property">Widget</a>.<a href="@0@PresentationFramework/A.html#af1a9620ef03c2dd" class="i property">HorizontalAlignment</a> = <a href="@0@PresentationFramework/A.html#4adb839fdbe93e93" class="t t">HorizontalAlignment</a>.<a href="@0@PresentationFramework/A.html#2294716af8f325d5" class="i field">Right</a>; <b>break</b>;
				<b>case</b> <a href="/Xwt3/A.html#3462b059836b89d8" class="t t">WidgetPlacement</a>.<a href="/Xwt3/A.html#38a10756f2e381ac" class="i field">Fill</a>: <span class="r29 r">w</span>.<a href="#bfe5b8d8f773f1ef" class="i property">Widget</a>.<a href="@0@PresentationFramework/A.html#af1a9620ef03c2dd" class="i property">HorizontalAlignment</a> = <a href="@0@PresentationFramework/A.html#4adb839fdbe93e93" class="t t">HorizontalAlignment</a>.<a href="@0@PresentationFramework/A.html#6a7c22ea6114ef4d" class="i field">Stretch</a>; <b>break</b>;
			}
			<b>switch</b> (<span class="r29 r">w</span>.<a href="#a0cac2053ea95bf6" class="i property">Frontend</a>.<a href="/Xwt3/A.html#c2050ec4b638cd49" class="i property">VerticalPlacement</a>) {
				<b>case</b> <a href="/Xwt3/A.html#3462b059836b89d8" class="t t">WidgetPlacement</a>.<a href="/Xwt3/A.html#f505e00b21b30256" class="i field">Start</a>: <span class="r29 r">w</span>.<a href="#bfe5b8d8f773f1ef" class="i property">Widget</a>.<a href="@0@PresentationFramework/A.html#c6fdbbe63a3a42b3" class="i property">VerticalAlignment</a> = <a href="@0@PresentationFramework/A.html#8b1564c617a0b2f5" class="t t">VerticalAlignment</a>.<a href="@0@PresentationFramework/A.html#96f92478ccd71cba" class="i field">Top</a>; <b>break</b>;
				<b>case</b> <a href="/Xwt3/A.html#3462b059836b89d8" class="t t">WidgetPlacement</a>.<a href="/Xwt3/A.html#f96bc9ea34ba226f" class="i field">Center</a>: <span class="r29 r">w</span>.<a href="#bfe5b8d8f773f1ef" class="i property">Widget</a>.<a href="@0@PresentationFramework/A.html#c6fdbbe63a3a42b3" class="i property">VerticalAlignment</a> = <a href="@0@PresentationFramework/A.html#8b1564c617a0b2f5" class="t t">VerticalAlignment</a>.<a href="@0@PresentationFramework/A.html#370d572f36d471f7" class="i field">Center</a>; <b>break</b>;
				<b>case</b> <a href="/Xwt3/A.html#3462b059836b89d8" class="t t">WidgetPlacement</a>.<a href="/Xwt3/A.html#206d98d5d27d37c8" class="i field">End</a>: <span class="r29 r">w</span>.<a href="#bfe5b8d8f773f1ef" class="i property">Widget</a>.<a href="@0@PresentationFramework/A.html#c6fdbbe63a3a42b3" class="i property">VerticalAlignment</a> = <a href="@0@PresentationFramework/A.html#8b1564c617a0b2f5" class="t t">VerticalAlignment</a>.<a href="@0@PresentationFramework/A.html#ac8f76c840e264d3" class="i field">Bottom</a>; <b>break</b>;
				<b>case</b> <a href="/Xwt3/A.html#3462b059836b89d8" class="t t">WidgetPlacement</a>.<a href="/Xwt3/A.html#38a10756f2e381ac" class="i field">Fill</a>: <span class="r29 r">w</span>.<a href="#bfe5b8d8f773f1ef" class="i property">Widget</a>.<a href="@0@PresentationFramework/A.html#c6fdbbe63a3a42b3" class="i property">VerticalAlignment</a> = <a href="@0@PresentationFramework/A.html#8b1564c617a0b2f5" class="t t">VerticalAlignment</a>.<a href="@0@PresentationFramework/A.html#0a8625ffa5ba03a9" class="i field">Stretch</a>; <b>break</b>;
			}
		}
 
		<b>public void</b> <a id="6fb735ba672883a1" href="../R/6fb735ba672883a1.html" target="n" data-glyph="72,1" class="i method">SetMinSize</a> (<b>double</b> <span id="r30 rd" class="r30 r">width</span>, <b>double</b> <span id="r31 rd" class="r31 r">height</span>)
		{
			<b>if</b> (<span class="r30 r">width</span> == -1)
				<a href="#bfe5b8d8f773f1ef" class="i property">Widget</a>.<a href="@0@WindowsBase/A.html#8d908522bf9ccba7" class="i method">ClearValue</a> (<a href="@0@PresentationFramework/A.html#d2d98a3022fbac2f" class="t t">FrameworkElement</a>.<a href="@0@PresentationFramework/A.html#ba006e991fd0e8fd" class="i field">MinWidthProperty</a>);
			<b>else</b>
				<a href="#bfe5b8d8f773f1ef" class="i property">Widget</a>.<a href="@0@PresentationFramework/A.html#0c275d66ceac4be8" class="i property">MinWidth</a> = <span class="r30 r">width</span>;
 
			<b>if</b> (<span class="r31 r">height</span> == -1)
				<a href="#bfe5b8d8f773f1ef" class="i property">Widget</a>.<a href="@0@WindowsBase/A.html#8d908522bf9ccba7" class="i method">ClearValue</a> (<a href="@0@PresentationFramework/A.html#d2d98a3022fbac2f" class="t t">FrameworkElement</a>.<a href="@0@PresentationFramework/A.html#49392c811d2a71ac" class="i field">MinHeightProperty</a>);
			<b>else</b>
				<a href="#bfe5b8d8f773f1ef" class="i property">Widget</a>.<a href="@0@PresentationFramework/A.html#fc105b649c5a8030" class="i property">MinHeight</a> = <span class="r31 r">height</span>;
		}
 
		<b>public void</b> <a id="a4b0d2ed47cc5de9" href="../R/a4b0d2ed47cc5de9.html" target="n" data-glyph="72,1" class="i method">SetSizeRequest</a> (<b>double</b> <span id="r32 rd" class="r32 r">width</span>, <b>double</b> <span id="r33 rd" class="r33 r">height</span>)
		{
			<span class="c">// Nothing needs to be done here</span>
		}
 
		<b>public void</b> <a id="a090fdc15638ba2a" href="../R/a090fdc15638ba2a.html" target="n" data-glyph="72,1" class="i method">SetCursor</a> (<a href="/Xwt3/A.html#22050d35620c4cdb" class="t t">CursorType</a> <span id="r34 rd" class="r34 r">cursor</span>)
		{
			<b>if</b> (<span class="r34 r">cursor</span> == <a href="/Xwt3/A.html#22050d35620c4cdb" class="t t">CursorType</a>.<a href="/Xwt3/A.html#c1921703d1cfe279" class="i field">Arrow</a>)
				<a href="#bfe5b8d8f773f1ef" class="i property">Widget</a>.<a href="@0@PresentationFramework/A.html#63634408e3c1872a" class="i property">Cursor</a> = <a href="@0@PresentationCore/A.html#09092748875d5e78" class="t t">Cursors</a>.<a href="@0@PresentationCore/A.html#0682898066dd921a" class="i property">Arrow</a>;
			<b>else if</b> (<span class="r34 r">cursor</span> == <a href="/Xwt3/A.html#22050d35620c4cdb" class="t t">CursorType</a>.<a href="/Xwt3/A.html#9f83aab3acae3506" class="i field">Crosshair</a>)
				<a href="#bfe5b8d8f773f1ef" class="i property">Widget</a>.<a href="@0@PresentationFramework/A.html#63634408e3c1872a" class="i property">Cursor</a> = <a href="@0@PresentationCore/A.html#09092748875d5e78" class="t t">Cursors</a>.<a href="@0@PresentationCore/A.html#b1c1931391265212" class="i property">Cross</a>;
			<b>else if</b> (<span class="r34 r">cursor</span> == <a href="/Xwt3/A.html#22050d35620c4cdb" class="t t">CursorType</a>.<a href="/Xwt3/A.html#c6dfe5f7ec128c92" class="i field">Hand</a>)
				<a href="#bfe5b8d8f773f1ef" class="i property">Widget</a>.<a href="@0@PresentationFramework/A.html#63634408e3c1872a" class="i property">Cursor</a> = <a href="@0@PresentationCore/A.html#09092748875d5e78" class="t t">Cursors</a>.<a href="@0@PresentationCore/A.html#791fd2d276f57e73" class="i property">Hand</a>;
			<b>else if</b> (<span class="r34 r">cursor</span> == <a href="/Xwt3/A.html#22050d35620c4cdb" class="t t">CursorType</a>.<a href="/Xwt3/A.html#961bb402e062084b" class="i field">IBeam</a>)
				<a href="#bfe5b8d8f773f1ef" class="i property">Widget</a>.<a href="@0@PresentationFramework/A.html#63634408e3c1872a" class="i property">Cursor</a> = <a href="@0@PresentationCore/A.html#09092748875d5e78" class="t t">Cursors</a>.<a href="@0@PresentationCore/A.html#d3aea4e548fc8319" class="i property">IBeam</a>;
			<b>else if</b> (<span class="r34 r">cursor</span> == <a href="/Xwt3/A.html#22050d35620c4cdb" class="t t">CursorType</a>.<a href="/Xwt3/A.html#a66700ce2299d688" class="i field">ResizeDown</a>)
				<a href="#bfe5b8d8f773f1ef" class="i property">Widget</a>.<a href="@0@PresentationFramework/A.html#63634408e3c1872a" class="i property">Cursor</a> = <a href="@0@PresentationCore/A.html#09092748875d5e78" class="t t">Cursors</a>.<a href="@0@PresentationCore/A.html#d6b622866640ff61" class="i property">SizeNS</a>;
			<b>else if</b> (<span class="r34 r">cursor</span> == <a href="/Xwt3/A.html#22050d35620c4cdb" class="t t">CursorType</a>.<a href="/Xwt3/A.html#5c46e88392dbd786" class="i field">ResizeUp</a>)
				<a href="#bfe5b8d8f773f1ef" class="i property">Widget</a>.<a href="@0@PresentationFramework/A.html#63634408e3c1872a" class="i property">Cursor</a> = <a href="@0@PresentationCore/A.html#09092748875d5e78" class="t t">Cursors</a>.<a href="@0@PresentationCore/A.html#d6b622866640ff61" class="i property">SizeNS</a>;
			<b>else if</b> (<span class="r34 r">cursor</span> == <a href="/Xwt3/A.html#22050d35620c4cdb" class="t t">CursorType</a>.<a href="/Xwt3/A.html#b53d3f19e02a09ec" class="i field">ResizeUpDown</a>)
				<a href="#bfe5b8d8f773f1ef" class="i property">Widget</a>.<a href="@0@PresentationFramework/A.html#63634408e3c1872a" class="i property">Cursor</a> = <a href="@0@PresentationCore/A.html#09092748875d5e78" class="t t">Cursors</a>.<a href="@0@PresentationCore/A.html#d6b622866640ff61" class="i property">SizeNS</a>;
			<b>else if</b> (<span class="r34 r">cursor</span> == <a href="/Xwt3/A.html#22050d35620c4cdb" class="t t">CursorType</a>.<a href="/Xwt3/A.html#6d283d917f7e05da" class="i field">ResizeLeft</a>)
				<a href="#bfe5b8d8f773f1ef" class="i property">Widget</a>.<a href="@0@PresentationFramework/A.html#63634408e3c1872a" class="i property">Cursor</a> = <a href="@0@PresentationCore/A.html#09092748875d5e78" class="t t">Cursors</a>.<a href="@0@PresentationCore/A.html#d3d28c0a57230e9d" class="i property">SizeWE</a>;
			<b>else if</b> (<span class="r34 r">cursor</span> == <a href="/Xwt3/A.html#22050d35620c4cdb" class="t t">CursorType</a>.<a href="/Xwt3/A.html#46eb66de4e735fc0" class="i field">ResizeRight</a>)
				<a href="#bfe5b8d8f773f1ef" class="i property">Widget</a>.<a href="@0@PresentationFramework/A.html#63634408e3c1872a" class="i property">Cursor</a> = <a href="@0@PresentationCore/A.html#09092748875d5e78" class="t t">Cursors</a>.<a href="@0@PresentationCore/A.html#d3d28c0a57230e9d" class="i property">SizeWE</a>;
			<b>else if</b> (<span class="r34 r">cursor</span> == <a href="/Xwt3/A.html#22050d35620c4cdb" class="t t">CursorType</a>.<a href="/Xwt3/A.html#77591728d52ecd0d" class="i field">ResizeLeftRight</a>)
				<a href="#f789e3ab9263356c" class="i field">widget</a>.<a href="@0@PresentationFramework/A.html#63634408e3c1872a" class="i property">Cursor</a> = <a href="@0@PresentationCore/A.html#09092748875d5e78" class="t t">Cursors</a>.<a href="@0@PresentationCore/A.html#d3d28c0a57230e9d" class="i property">SizeWE</a>;
			<b>else if</b> (<span class="r34 r">cursor</span> == <a href="/Xwt3/A.html#22050d35620c4cdb" class="t t">CursorType</a>.<a href="/Xwt3/A.html#246f4f0d1103e02a" class="i field">Move</a>)
				<a href="#f789e3ab9263356c" class="i field">widget</a>.<a href="@0@PresentationFramework/A.html#63634408e3c1872a" class="i property">Cursor</a> = <a href="@0@PresentationCore/A.html#09092748875d5e78" class="t t">Cursors</a>.<a href="@0@PresentationCore/A.html#4a5cfabc7368baec" class="i property">SizeAll</a>;
			<b>else if</b> (<span class="r34 r">cursor</span> == <a href="/Xwt3/A.html#22050d35620c4cdb" class="t t">CursorType</a>.<a href="/Xwt3/A.html#1b45bdab4316369d" class="i field">Wait</a>)
				<a href="#f789e3ab9263356c" class="i field">widget</a>.<a href="@0@PresentationFramework/A.html#63634408e3c1872a" class="i property">Cursor</a> = <a href="@0@PresentationCore/A.html#09092748875d5e78" class="t t">Cursors</a>.<a href="@0@PresentationCore/A.html#24959022806807f4" class="i property">Wait</a>;
			<b>else if</b> (<span class="r34 r">cursor</span> == <a href="/Xwt3/A.html#22050d35620c4cdb" class="t t">CursorType</a>.<a href="/Xwt3/A.html#b686c189e3c7dde8" class="i field">Help</a>)
				<a href="#f789e3ab9263356c" class="i field">widget</a>.<a href="@0@PresentationFramework/A.html#63634408e3c1872a" class="i property">Cursor</a> = <a href="@0@PresentationCore/A.html#09092748875d5e78" class="t t">Cursors</a>.<a href="@0@PresentationCore/A.html#d8594f9009ee0cf5" class="i property">Help</a>;
			<b>else if</b> (<span class="r34 r">cursor</span> == <a href="/Xwt3/A.html#22050d35620c4cdb" class="t t">CursorType</a>.<a href="/Xwt3/A.html#cccec630b19e4602" class="i field">Invisible</a>)
				<a href="#f789e3ab9263356c" class="i field">widget</a>.<a href="@0@PresentationFramework/A.html#63634408e3c1872a" class="i property">Cursor</a> = <a href="@0@PresentationCore/A.html#09092748875d5e78" class="t t">Cursors</a>.<a href="@0@PresentationCore/A.html#2665e7ec83ad8592" class="i property">None</a>;
			<b>else</b>
				<a href="#bfe5b8d8f773f1ef" class="i property">Widget</a>.<a href="@0@PresentationFramework/A.html#63634408e3c1872a" class="i property">Cursor</a> = <a href="@0@PresentationCore/A.html#09092748875d5e78" class="t t">Cursors</a>.<a href="@0@PresentationCore/A.html#0682898066dd921a" class="i property">Arrow</a>;
		}
		
		<b>public virtual void</b> <a id="9e9986b0411a3adc" href="../R/9e9986b0411a3adc.html" target="n" data-glyph="72,1" class="i method">UpdateLayout</a> ()
		{
		}
 
		<b>public override void</b> <a id="f8b0380971e0180b" href="../R/f8b0380971e0180b.html" target="n" data-glyph="72,1" class="i method">EnableEvent</a> (<b>object</b> <span id="r35 rd" class="r35 r">eventId</span>)
		{
			<b>if</b> (<span class="r35 r">eventId</span> <b>is</b> <a href="/Xwt3/A.html#c05db169102de2ea" class="t t">WidgetEvent</a>) {
				<a href="/Xwt3/A.html#c05db169102de2ea" class="k">var</a> <span id="r36 rd" class="r36 r">ev</span> = (<a href="/Xwt3/A.html#c05db169102de2ea" class="t t">WidgetEvent</a>)<span class="r35 r">eventId</span>;
				<b>switch</b> (<span class="r36 r">ev</span>) {
					<b>case</b> <a href="/Xwt3/A.html#c05db169102de2ea" class="t t">WidgetEvent</a>.<a href="/Xwt3/A.html#bea1e6a108cffba1" class="i field">KeyPressed</a>:
						<a href="#bfe5b8d8f773f1ef" class="i property">Widget</a>.<a href="@0@PresentationCore/A.html#58bfd79a7ef6a62d" class="i">PreviewKeyDown</a> += <a href="#c6909d462ae4cfa4" class="i method">WidgetKeyDownHandler</a>;
						<b>break</b>;
					<b>case</b> <a href="/Xwt3/A.html#c05db169102de2ea" class="t t">WidgetEvent</a>.<a href="/Xwt3/A.html#87872dea1a7ee363" class="i field">KeyReleased</a>:
						<a href="#bfe5b8d8f773f1ef" class="i property">Widget</a>.<a href="@0@PresentationCore/A.html#4e5db2d6b9c4f1bd" class="i">PreviewKeyUp</a> += <a href="#b3bc373ca98e76a9" class="i method">WidgetKeyUpHandler</a>;
						<b>break</b>;
					<b>case</b> <a href="/Xwt3/A.html#c05db169102de2ea" class="t t">WidgetEvent</a>.<a href="/Xwt3/A.html#f4d7a958127bf725" class="i field">TextInput</a>:
						<a href="@0@PresentationCore/A.html#500fdfb1af85f6a4" class="t t">TextCompositionManager</a>.<a href="@0@PresentationCore/A.html#9c1edb6beb413324" class="i method">AddPreviewTextInputHandler</a>(<a href="#bfe5b8d8f773f1ef" class="i property">Widget</a>, <a href="#cce4f1f875c28667" class="i method">WidgetPreviewTextInputHandler</a>);
						<b>break</b>;
					<b>case</b> <a href="/Xwt3/A.html#c05db169102de2ea" class="t t">WidgetEvent</a>.<a href="/Xwt3/A.html#27f2946ce2f0e4f7" class="i field">ButtonPressed</a>:
						<a href="#bfe5b8d8f773f1ef" class="i property">Widget</a>.<a href="@0@PresentationCore/A.html#bb42e64a3ed1a0ce" class="i">MouseDown</a> += <a href="#aa6959bbd3396146" class="i method">WidgetMouseDownHandler</a>;
						<b>break</b>;
					<b>case</b> <a href="/Xwt3/A.html#c05db169102de2ea" class="t t">WidgetEvent</a>.<a href="/Xwt3/A.html#176b404be53ddbca" class="i field">ButtonReleased</a>:
						<a href="#bfe5b8d8f773f1ef" class="i property">Widget</a>.<a href="@0@PresentationCore/A.html#efe155ade2e36eaf" class="i">MouseUp</a> += <a href="#30a2caaa17a36653" class="i method">WidgetMouseUpHandler</a>;
						<b>break</b>;
					<b>case</b> <a href="/Xwt3/A.html#c05db169102de2ea" class="t t">WidgetEvent</a>.<a href="/Xwt3/A.html#d2cc38633325e81c" class="i field">GotFocus</a>:
						<a href="#bfe5b8d8f773f1ef" class="i property">Widget</a>.<a href="@0@PresentationCore/A.html#8d953a1d7fb18c62" class="i">GotFocus</a> += <a href="#d67fc4cd7e7e97c8" class="i method">WidgetGotFocusHandler</a>;
						<b>break</b>;
					<b>case</b> <a href="/Xwt3/A.html#c05db169102de2ea" class="t t">WidgetEvent</a>.<a href="/Xwt3/A.html#f7803c9c3123b0fb" class="i field">LostFocus</a>:
						<a href="#bfe5b8d8f773f1ef" class="i property">Widget</a>.<a href="@0@PresentationCore/A.html#251395f35bbcd55f" class="i">LostFocus</a> += <a href="#86244ab8d07e475b" class="i method">WidgetLostFocusHandler</a>;
						<b>break</b>;
					<b>case</b> <a href="/Xwt3/A.html#c05db169102de2ea" class="t t">WidgetEvent</a>.<a href="/Xwt3/A.html#471ed5026c2ca714" class="i field">MouseEntered</a>:
						<a href="#bfe5b8d8f773f1ef" class="i property">Widget</a>.<a href="@0@PresentationCore/A.html#d55f349888a09381" class="i">MouseEnter</a> += <a href="#35f7e117a6ebe852" class="i method">WidgetMouseEnteredHandler</a>;
						<b>break</b>;
					<b>case</b> <a href="/Xwt3/A.html#c05db169102de2ea" class="t t">WidgetEvent</a>.<a href="/Xwt3/A.html#2dffc2299fc2554a" class="i field">MouseExited</a>:
						<a href="#bfe5b8d8f773f1ef" class="i property">Widget</a>.<a href="@0@PresentationCore/A.html#03c2b50c1c615ebb" class="i">MouseLeave</a> += <a href="#b61321bfa3732ee5" class="i method">WidgetMouseExitedHandler</a>;
						<b>break</b>;
					<b>case</b> <a href="/Xwt3/A.html#c05db169102de2ea" class="t t">WidgetEvent</a>.<a href="/Xwt3/A.html#d175cab1fa6eb2c9" class="i field">MouseMoved</a>:
						<a href="#bfe5b8d8f773f1ef" class="i property">Widget</a>.<a href="@0@PresentationCore/A.html#8af943423996f9bf" class="i">MouseMove</a> += <a href="#baf763b3d8149de2" class="i method">WidgetMouseMoveHandler</a>;
						<b>break</b>;
					<b>case</b> <a href="/Xwt3/A.html#c05db169102de2ea" class="t t">WidgetEvent</a>.<a href="/Xwt3/A.html#6d5dd5294cc9bae2" class="i field">BoundsChanged</a>:
						<a href="#bfe5b8d8f773f1ef" class="i property">Widget</a>.<a href="@0@PresentationFramework/A.html#ec1a90b4f82457bf" class="i">SizeChanged</a> += <a href="#fb912eb1f460370b" class="i method">WidgetOnSizeChanged</a>;
						<b>break</b>;
					<b>case</b> <a href="/Xwt3/A.html#c05db169102de2ea" class="t t">WidgetEvent</a>.<a href="/Xwt3/A.html#e11f8ee9031f90d9" class="i field">MouseScrolled</a>:
						<a href="#bfe5b8d8f773f1ef" class="i property">Widget</a>.<a href="@0@PresentationCore/A.html#ebe95961ddbcbd2a" class="i">MouseWheel</a> += <a href="#7a8c00cf8c2cf663" class="i method">WidgetMouseWheelHandler</a>;
						<b>break</b>;
				}
 
				<b>if</b> ((<span class="r36 r">ev</span> &amp; <a href="#cbb4e7d7b4348c10" class="i field">dragDropEvents</a>) != 0 &amp;&amp; (<a href="#51dbe360b1ea83c5" class="i field">enabledEvents</a> &amp; <a href="#cbb4e7d7b4348c10" class="i field">dragDropEvents</a>) == 0) {
					<span class="c">// Enabling a drag&amp;drop event for the first time</span>
					<a href="#bfe5b8d8f773f1ef" class="i property">Widget</a>.<a href="@0@PresentationCore/A.html#ed28f7051c7e00db" class="i">DragOver</a> += <a href="#f9a1e6621bfc38c1" class="i method">WidgetDragOverHandler</a>;
					<a href="#bfe5b8d8f773f1ef" class="i property">Widget</a>.<a href="@0@PresentationCore/A.html#6e4c0f0eb9cd0ddc" class="i">Drop</a> += <a href="#de76620715387803" class="i method">WidgetDropHandler</a>;
					<a href="#f789e3ab9263356c" class="i field">widget</a>.<a href="@0@PresentationCore/A.html#50fbd91f2c510e14" class="i">DragLeave</a> += <a href="#7ec0fd9da271d5de" class="i method">WidgetDragLeaveHandler</a>;
				}
 
				<a href="#51dbe360b1ea83c5" class="i field">enabledEvents</a> |= <span class="r36 r">ev</span>;
			}
		}
 
		<b>public override void</b> <a id="8e6c62ffdbf4f00d" href="../R/8e6c62ffdbf4f00d.html" target="n" data-glyph="72,1" class="i method">DisableEvent</a> (<b>object</b> <span id="r37 rd" class="r37 r">eventId</span>)
		{
			<b>if</b> (<span class="r37 r">eventId</span> <b>is</b> <a href="/Xwt3/A.html#c05db169102de2ea" class="t t">WidgetEvent</a>) {
				<a href="/Xwt3/A.html#c05db169102de2ea" class="k">var</a> <span id="r38 rd" class="r38 r">ev</span> = (<a href="/Xwt3/A.html#c05db169102de2ea" class="t t">WidgetEvent</a>)<span class="r37 r">eventId</span>;
				<b>switch</b> (<span class="r38 r">ev</span>) {
					<b>case</b> <a href="/Xwt3/A.html#c05db169102de2ea" class="t t">WidgetEvent</a>.<a href="/Xwt3/A.html#bea1e6a108cffba1" class="i field">KeyPressed</a>:
						<a href="#bfe5b8d8f773f1ef" class="i property">Widget</a>.<a href="@0@PresentationCore/A.html#58bfd79a7ef6a62d" class="i">PreviewKeyDown</a> -= <a href="#c6909d462ae4cfa4" class="i method">WidgetKeyDownHandler</a>;
						<b>break</b>;
					<b>case</b> <a href="/Xwt3/A.html#c05db169102de2ea" class="t t">WidgetEvent</a>.<a href="/Xwt3/A.html#87872dea1a7ee363" class="i field">KeyReleased</a>:
						<a href="#bfe5b8d8f773f1ef" class="i property">Widget</a>.<a href="@0@PresentationCore/A.html#4e5db2d6b9c4f1bd" class="i">PreviewKeyUp</a> -= <a href="#b3bc373ca98e76a9" class="i method">WidgetKeyUpHandler</a>;
						<b>break</b>;
					<b>case</b> <a href="/Xwt3/A.html#c05db169102de2ea" class="t t">WidgetEvent</a>.<a href="/Xwt3/A.html#f4d7a958127bf725" class="i field">TextInput</a>:
						<a href="@0@PresentationCore/A.html#500fdfb1af85f6a4" class="t t">TextCompositionManager</a>.<a href="@0@PresentationCore/A.html#29eb6ae7f0d5d0f1" class="i method">RemovePreviewTextInputHandler</a>(<a href="#bfe5b8d8f773f1ef" class="i property">Widget</a>, <a href="#cce4f1f875c28667" class="i method">WidgetPreviewTextInputHandler</a>);
						<b>break</b>;
					<b>case</b> <a href="/Xwt3/A.html#c05db169102de2ea" class="t t">WidgetEvent</a>.<a href="/Xwt3/A.html#27f2946ce2f0e4f7" class="i field">ButtonPressed</a>:
						<a href="#bfe5b8d8f773f1ef" class="i property">Widget</a>.<a href="@0@PresentationCore/A.html#bb42e64a3ed1a0ce" class="i">MouseDown</a> -= <a href="#aa6959bbd3396146" class="i method">WidgetMouseDownHandler</a>;
						<b>break</b>;
					<b>case</b> <a href="/Xwt3/A.html#c05db169102de2ea" class="t t">WidgetEvent</a>.<a href="/Xwt3/A.html#176b404be53ddbca" class="i field">ButtonReleased</a>:
						<a href="#bfe5b8d8f773f1ef" class="i property">Widget</a>.<a href="@0@PresentationCore/A.html#efe155ade2e36eaf" class="i">MouseUp</a> -= <a href="#30a2caaa17a36653" class="i method">WidgetMouseUpHandler</a>;
						<b>break</b>;
					<b>case</b> <a href="/Xwt3/A.html#c05db169102de2ea" class="t t">WidgetEvent</a>.<a href="/Xwt3/A.html#471ed5026c2ca714" class="i field">MouseEntered</a>:
						<a href="#bfe5b8d8f773f1ef" class="i property">Widget</a>.<a href="@0@PresentationCore/A.html#d55f349888a09381" class="i">MouseEnter</a> -= <a href="#35f7e117a6ebe852" class="i method">WidgetMouseEnteredHandler</a>;
						<b>break</b>;
					<b>case</b> <a href="/Xwt3/A.html#c05db169102de2ea" class="t t">WidgetEvent</a>.<a href="/Xwt3/A.html#2dffc2299fc2554a" class="i field">MouseExited</a>:
						<a href="#bfe5b8d8f773f1ef" class="i property">Widget</a>.<a href="@0@PresentationCore/A.html#03c2b50c1c615ebb" class="i">MouseLeave</a> -= <a href="#b61321bfa3732ee5" class="i method">WidgetMouseExitedHandler</a>;
						<b>break</b>;
					<b>case</b> <a href="/Xwt3/A.html#c05db169102de2ea" class="t t">WidgetEvent</a>.<a href="/Xwt3/A.html#d175cab1fa6eb2c9" class="i field">MouseMoved</a>:
						<a href="#bfe5b8d8f773f1ef" class="i property">Widget</a>.<a href="@0@PresentationCore/A.html#8af943423996f9bf" class="i">MouseMove</a> -= <a href="#baf763b3d8149de2" class="i method">WidgetMouseMoveHandler</a>;
						<b>break</b>;
					<b>case</b> <a href="/Xwt3/A.html#c05db169102de2ea" class="t t">WidgetEvent</a>.<a href="/Xwt3/A.html#6d5dd5294cc9bae2" class="i field">BoundsChanged</a>:
						<a href="#bfe5b8d8f773f1ef" class="i property">Widget</a>.<a href="@0@PresentationFramework/A.html#ec1a90b4f82457bf" class="i">SizeChanged</a> -= <a href="#fb912eb1f460370b" class="i method">WidgetOnSizeChanged</a>;
						<b>break</b>;
					<b>case</b> <a href="/Xwt3/A.html#c05db169102de2ea" class="t t">WidgetEvent</a>.<a href="/Xwt3/A.html#e11f8ee9031f90d9" class="i field">MouseScrolled</a>:
						<a href="#bfe5b8d8f773f1ef" class="i property">Widget</a>.<a href="@0@PresentationCore/A.html#ebe95961ddbcbd2a" class="i">MouseWheel</a> -= <a href="#7a8c00cf8c2cf663" class="i method">WidgetMouseWheelHandler</a>;
						<b>break</b>;
				}
 
				<a href="#51dbe360b1ea83c5" class="i field">enabledEvents</a> &amp;= ~<span class="r38 r">ev</span>;
 
				<b>if</b> ((<span class="r38 r">ev</span> &amp; <a href="#cbb4e7d7b4348c10" class="i field">dragDropEvents</a>) != 0 &amp;&amp; (<a href="#51dbe360b1ea83c5" class="i field">enabledEvents</a> &amp; <a href="#cbb4e7d7b4348c10" class="i field">dragDropEvents</a>) == 0) {
					<span class="c">// All drag&amp;drop events have been disabled</span>
					<a href="#bfe5b8d8f773f1ef" class="i property">Widget</a>.<a href="@0@PresentationCore/A.html#ed28f7051c7e00db" class="i">DragOver</a> -= <a href="#f9a1e6621bfc38c1" class="i method">WidgetDragOverHandler</a>;
					<a href="#bfe5b8d8f773f1ef" class="i property">Widget</a>.<a href="@0@PresentationCore/A.html#6e4c0f0eb9cd0ddc" class="i">Drop</a> -= <a href="#de76620715387803" class="i method">WidgetDropHandler</a>;
					<a href="#bfe5b8d8f773f1ef" class="i property">Widget</a>.<a href="@0@PresentationCore/A.html#50fbd91f2c510e14" class="i">DragLeave</a> -= <a href="#7ec0fd9da271d5de" class="i method">WidgetDragLeaveHandler</a>;
				}
			}
		}
 
		<b>public double</b> <a id="da3e278fbd2cbf28" href="../R/../../0000000000.html" target="n" data-glyph="102,1" class="i property">aWidthPixelRatio</a>
		{
			<b>get</b>
			{
				<a href="@0@PresentationCore/A.html#317e126bb0affb36" class="t t">PresentationSource</a> <span id="r39 rd" class="r39 r">source</span> = <a href="@0@PresentationCore/A.html#317e126bb0affb36" class="t t">PresentationSource</a>.<a href="@0@PresentationCore/A.html#5fd0a5ffda5383c7" class="i method">FromVisual</a> (<a href="#bfe5b8d8f773f1ef" class="i property">Widget</a>);
				<b>if</b> (<span class="r39 r">source</span> == <b>null</b>)
					<b>return</b> 1;
 
				<a href="@0@WindowsBase/A.html#13b7d422c46ba7a0" class="t t">Matrix</a> <span id="r40 rd" class="r40 r">m</span> = <span class="r39 r">source</span>.<a href="@0@PresentationCore/A.html#802e4801f6e0193d" class="i property">CompositionTarget</a>.<a href="@0@PresentationCore/A.html#dacf5a3e03dc08fc" class="i property">TransformToDevice</a>;
				<b>return</b> <span class="r40 r">m</span>.<a href="@0@WindowsBase/A.html#50b41fe541141325" class="i property">M11</a>;
			}
		}
 
		<b>public double</b> <a id="c72a3f7a9461d2f4" href="../R/../../0000000000.html" target="n" data-glyph="102,1" class="i property">aHeightPixelRatio</a>
		{
			<b>get</b>
			{
				<a href="@0@PresentationCore/A.html#317e126bb0affb36" class="t t">PresentationSource</a> <span id="r41 rd" class="r41 r">source</span> = <a href="@0@PresentationCore/A.html#317e126bb0affb36" class="t t">PresentationSource</a>.<a href="@0@PresentationCore/A.html#5fd0a5ffda5383c7" class="i method">FromVisual</a> (<a href="#bfe5b8d8f773f1ef" class="i property">Widget</a>);
				<b>if</b> (<span class="r41 r">source</span> == <b>null</b>)
					<b>return</b> 1;
 
				<a href="@0@WindowsBase/A.html#13b7d422c46ba7a0" class="t t">Matrix</a> <span id="r42 rd" class="r42 r">m</span> = <span class="r41 r">source</span>.<a href="@0@PresentationCore/A.html#802e4801f6e0193d" class="i property">CompositionTarget</a>.<a href="@0@PresentationCore/A.html#dacf5a3e03dc08fc" class="i property">TransformToDevice</a>;
				<b>return</b> <span class="r42 r">m</span>.<a href="@0@WindowsBase/A.html#1812baec6e8e80d1" class="i property">M22</a>;
			}
		}
 
		<b>void</b> <a id="c6909d462ae4cfa4" href="../R/c6909d462ae4cfa4.html" target="n" data-glyph="76,1" class="i method">WidgetKeyDownHandler</a> (<b>object</b> <span id="r43 rd" class="r43 r">sender</span>, <span class="i n">System</span>.<span class="i n">Windows</span>.<span class="i n">Input</span>.<a href="@0@PresentationCore/A.html#0d2ce926f5cfc74b" class="t t">KeyEventArgs</a> <span id="r44 rd" class="r44 r">e</span>)
		{
			<a href="/Xwt3/A.html#2699ff808165cb8b" class="t t">KeyEventArgs</a> <span id="r45 rd" class="r45 r">args</span>;
			<b>if</b> (<a href="#7304ea8f7b0f9bf2" class="i method">MapToXwtKeyArgs</a> (<span class="r44 r">e</span>, <b>out</b> <span class="r45 r">args</span>)) {
				<a href="Backend.cs.html#a1d66241a0d4621f" class="i property">Context</a>.<a href="/Xwt3/A.html#5db8b61c4608e0e0" class="i method">InvokeUserCode</a> (<b>delegate</b> {
					<a href="#d1158759327ca5a9" class="i field">eventSink</a>.<a href="/Xwt3/A.html#618ec6fab1949e5b" class="i method">OnKeyPressed</a> (<span class="r45 r">args</span>);
				});
				<b>if</b> (<span class="r45 r">args</span>.<a href="/Xwt3/A.html#87ec7f2b11454c8e" class="i property">Handled</a>)
					<span class="r44 r">e</span>.<a href="@0@PresentationCore/A.html#f2bcc08494fea0e6" class="i property">Handled</a> = <b>true</b>;
			}
		}
 
		<b>void</b> <a id="b3bc373ca98e76a9" href="../R/b3bc373ca98e76a9.html" target="n" data-glyph="76,1" class="i method">WidgetKeyUpHandler</a> (<b>object</b> <span id="r46 rd" class="r46 r">sender</span>, <span class="i n">System</span>.<span class="i n">Windows</span>.<span class="i n">Input</span>.<a href="@0@PresentationCore/A.html#0d2ce926f5cfc74b" class="t t">KeyEventArgs</a> <span id="r47 rd" class="r47 r">e</span>)
		{
			<a href="/Xwt3/A.html#2699ff808165cb8b" class="t t">KeyEventArgs</a> <span id="r48 rd" class="r48 r">args</span>;
			<b>if</b> (<a href="#7304ea8f7b0f9bf2" class="i method">MapToXwtKeyArgs</a> (<span class="r47 r">e</span>, <b>out</b> <span class="r48 r">args</span>)) {
				<a href="Backend.cs.html#a1d66241a0d4621f" class="i property">Context</a>.<a href="/Xwt3/A.html#5db8b61c4608e0e0" class="i method">InvokeUserCode</a> (<b>delegate</b>
				{
					<a href="#d1158759327ca5a9" class="i field">eventSink</a>.<a href="/Xwt3/A.html#cfc3deb8ea749cb8" class="i method">OnKeyReleased</a> (<span class="r48 r">args</span>);
				});
				<b>if</b> (<span class="r48 r">args</span>.<a href="/Xwt3/A.html#87ec7f2b11454c8e" class="i property">Handled</a>)
					<span class="r47 r">e</span>.<a href="@0@PresentationCore/A.html#f2bcc08494fea0e6" class="i property">Handled</a> = <b>true</b>;
			}
		}
 
		<b>bool</b> <a id="7304ea8f7b0f9bf2" href="../R/7304ea8f7b0f9bf2.html" target="n" data-glyph="76,1" class="i method">MapToXwtKeyArgs</a> (<span class="i n">System</span>.<span class="i n">Windows</span>.<span class="i n">Input</span>.<a href="@0@PresentationCore/A.html#0d2ce926f5cfc74b" class="t t">KeyEventArgs</a> <span id="r49 rd" class="r49 r">e</span>, <b>out</b> <a href="/Xwt3/A.html#2699ff808165cb8b" class="t t">KeyEventArgs</a> <span id="r50 rd" class="r50 r">result</span>)
		{
			<span class="r50 r">result</span> = <b>null</b>;
 
			<a href="/Xwt3/A.html#90dd477465961572" class="k">var</a> <span id="r51 rd" class="r51 r">key</span> = <a href="KeyboardUtil.cs.html#9225c482050e5f1a" class="t t">KeyboardUtil</a>.<a href="KeyboardUtil.cs.html#d02e060db93c2ac2" class="i method">TranslateToXwtKey</a> (<span class="r49 r">e</span>.<a href="@0@PresentationCore/A.html#102560189e85fa41" class="i property">Key</a>);
			<b>if</b> ((<b>int</b>)<span class="r51 r">key</span> == 0)
				<b>return false</b>;
 
			<span class="r50 r">result</span> = <b>new</b> <a href="/Xwt3/A.html#4ef8733a01917578" class="t constructor">KeyEventArgs</a> (<span class="r51 r">key</span>, (<b>int</b>)<span class="r49 r">e</span>.<a href="@0@PresentationCore/A.html#102560189e85fa41" class="i property">Key</a>, <a href="KeyboardUtil.cs.html#9225c482050e5f1a" class="t t">KeyboardUtil</a>.<a href="KeyboardUtil.cs.html#e8e04709ff6cf44c" class="i method">GetModifiers</a> (), <span class="r49 r">e</span>.<a href="@0@PresentationCore/A.html#51b99a948988ff11" class="i property">IsRepeat</a>, <span class="r49 r">e</span>.<a href="@0@PresentationCore/A.html#6be199bb1e2388b8" class="i property">Timestamp</a>);
			<b>return true</b>;
		}
 
		<b>void</b> <a id="cce4f1f875c28667" href="../R/cce4f1f875c28667.html" target="n" data-glyph="76,1" class="i method">WidgetPreviewTextInputHandler</a> (<b>object</b> <span id="r52 rd" class="r52 r">sender</span>, <span class="i n">System</span>.<span class="i n">Windows</span>.<span class="i n">Input</span>.<a href="@0@PresentationCore/A.html#bacc32a235407dde" class="t t">TextCompositionEventArgs</a> <span id="r53 rd" class="r53 r">e</span>)
		{
			<a href="/Xwt3/A.html#f2fac8578553f8df" class="t t">TextInputEventArgs</a> <span id="r54 rd" class="r54 r">args</span> = <b>new</b> <a href="/Xwt3/A.html#d32ffa9df2424331" class="t constructor">TextInputEventArgs</a>(<span class="r53 r">e</span>.<a href="@0@PresentationCore/A.html#236a25f75ee03012" class="i property">Text</a>);
			<a href="Backend.cs.html#a1d66241a0d4621f" class="i property">Context</a>.<a href="/Xwt3/A.html#5db8b61c4608e0e0" class="i method">InvokeUserCode</a>(<b>delegate</b>
			{
				<a href="#d1158759327ca5a9" class="i field">eventSink</a>.<a href="/Xwt3/A.html#fb7e0fbcad811b4b" class="i method">OnTextInput</a>(<span class="r54 r">args</span>);
			});
			<b>if</b> (<span class="r54 r">args</span>.<a href="/Xwt3/A.html#ed75b9eb945c5614" class="i property">Handled</a>)
				<span class="r53 r">e</span>.<a href="@0@PresentationCore/A.html#f2bcc08494fea0e6" class="i property">Handled</a> = <b>true</b>;
		}
 
		<b>void</b> <a id="aa6959bbd3396146" href="../R/aa6959bbd3396146.html" target="n" data-glyph="76,1" class="i method">WidgetMouseDownHandler</a> (<b>object</b> <span id="r55 rd" class="r55 r">o</span>, <a href="@0@PresentationCore/A.html#8df546d93b7c55df" class="t t">MouseButtonEventArgs</a> <span id="r56 rd" class="r56 r">e</span>)
		{
			<a href="/Xwt3/A.html#4a2c7bf9c060e927" class="k">var</a> <span id="r57 rd" class="r57 r">args</span> = <a href="#37b8b74c5b285382" class="i method">ToXwtButtonArgs</a> (<span class="r56 r">e</span>);
			<a href="Backend.cs.html#a1d66241a0d4621f" class="i property">Context</a>.<a href="/Xwt3/A.html#5db8b61c4608e0e0" class="i method">InvokeUserCode</a> (<b>delegate</b> () {
				<a href="#d1158759327ca5a9" class="i field">eventSink</a>.<a href="/Xwt3/A.html#17ce3fd81f509856" class="i method">OnButtonPressed</a> (<span class="r57 r">args</span>);
			});
			<b>if</b> (<span class="r57 r">args</span>.<a href="/Xwt3/A.html#60e1d19608633180" class="i property">Handled</a>)
				<span class="r56 r">e</span>.<a href="@0@PresentationCore/A.html#f2bcc08494fea0e6" class="i property">Handled</a> = <b>true</b>;
		}
 
		<b>void</b> <a id="30a2caaa17a36653" href="../R/30a2caaa17a36653.html" target="n" data-glyph="76,1" class="i method">WidgetMouseUpHandler</a> (<b>object</b> <span id="r58 rd" class="r58 r">o</span>, <a href="@0@PresentationCore/A.html#8df546d93b7c55df" class="t t">MouseButtonEventArgs</a> <span id="r59 rd" class="r59 r">e</span>)
		{
			<a href="/Xwt3/A.html#4a2c7bf9c060e927" class="k">var</a> <span id="r60 rd" class="r60 r">args</span> = <a href="#37b8b74c5b285382" class="i method">ToXwtButtonArgs</a> (<span class="r59 r">e</span>);
			<a href="Backend.cs.html#a1d66241a0d4621f" class="i property">Context</a>.<a href="/Xwt3/A.html#5db8b61c4608e0e0" class="i method">InvokeUserCode</a> (<b>delegate</b> ()
			{
				<a href="#d1158759327ca5a9" class="i field">eventSink</a>.<a href="/Xwt3/A.html#91b1543fb2a504b3" class="i method">OnButtonReleased</a> (<span class="r60 r">args</span>);
			});
			<b>if</b> (<span class="r60 r">args</span>.<a href="/Xwt3/A.html#60e1d19608633180" class="i property">Handled</a>)
				<span class="r59 r">e</span>.<a href="@0@PresentationCore/A.html#f2bcc08494fea0e6" class="i property">Handled</a> = <b>true</b>;
		}
 
		<a href="/Xwt3/A.html#4a2c7bf9c060e927" class="t t">ButtonEventArgs</a> <a id="37b8b74c5b285382" href="../R/37b8b74c5b285382.html" target="n" data-glyph="76,1" class="i method">ToXwtButtonArgs</a> (<a href="@0@PresentationCore/A.html#8df546d93b7c55df" class="t t">MouseButtonEventArgs</a> <span id="r61 rd" class="r61 r">e</span>)
		{
			<a href="@0@WindowsBase/A.html#9120327717fc513d" class="k">var</a> <span id="r62 rd" class="r62 r">pos</span> = <span class="r61 r">e</span>.<a href="@0@PresentationCore/A.html#912fdca8fa7cbeed" class="i method">GetPosition</a> (<a href="#bfe5b8d8f773f1ef" class="i property">Widget</a>);
			<b>return</b> <b>new</b> <a href="/Xwt3/A.html#b982765f1e806fd5" class="t constructor">ButtonEventArgs</a> () {
				<a href="/Xwt3/A.html#793e4d80d2278d3f" class="i property">X</a> = <span class="r62 r">pos</span>.<a href="@0@WindowsBase/A.html#556ea90344bfb3ea" class="i property">X</a>,
				<a href="/Xwt3/A.html#d4dd6b7f740f9167" class="i property">Y</a> = <span class="r62 r">pos</span>.<a href="@0@WindowsBase/A.html#0a42b94edb8c27ab" class="i property">Y</a>,
				<a href="/Xwt3/A.html#17df1f1f3cd42379" class="i property">MultiplePress</a> = <span class="r61 r">e</span>.<a href="@0@PresentationCore/A.html#79d2e7de9470b391" class="i property">ClickCount</a>,
				<a href="/Xwt3/A.html#3ef8c160a38d8e6e" class="i property">Button</a> = <span class="r61 r">e</span>.<a href="@0@PresentationCore/A.html#9d535bdf975e446e" class="i property">ChangedButton</a>.<a href="DataConverter.cs.html#c0bbb364da70b56d" class="i method">ToXwtButton</a> ()
			};
		}
 
		<b>void</b> <a id="d67fc4cd7e7e97c8" href="../R/d67fc4cd7e7e97c8.html" target="n" data-glyph="76,1" class="i method">WidgetGotFocusHandler</a> (<b>object</b> <span id="r63 rd" class="r63 r">o</span>, <a href="@0@PresentationCore/A.html#3089ebf2139eba9d" class="t t">RoutedEventArgs</a> <span id="r64 rd" class="r64 r">e</span>)
		{
			<a href="Backend.cs.html#a1d66241a0d4621f" class="i property">Context</a>.<a href="/Xwt3/A.html#5db8b61c4608e0e0" class="i method">InvokeUserCode</a> (<a href="#551a9684f2eb2b53" class="k">this</a>.<a href="#d1158759327ca5a9" class="i field">eventSink</a>.<a href="/Xwt3/A.html#25391be61fb129bb" class="i method">OnGotFocus</a>);
		}
 
		<b>void</b> <a id="86244ab8d07e475b" href="../R/86244ab8d07e475b.html" target="n" data-glyph="76,1" class="i method">WidgetLostFocusHandler</a> (<b>object</b> <span id="r65 rd" class="r65 r">o</span>, <a href="@0@PresentationCore/A.html#3089ebf2139eba9d" class="t t">RoutedEventArgs</a> <span id="r66 rd" class="r66 r">e</span>)
		{
			<a href="Backend.cs.html#a1d66241a0d4621f" class="i property">Context</a>.<a href="/Xwt3/A.html#5db8b61c4608e0e0" class="i method">InvokeUserCode</a> (<a href="#d1158759327ca5a9" class="i field">eventSink</a>.<a href="/Xwt3/A.html#728e130b107fd49a" class="i method">OnLostFocus</a>);
		}
 
		<a href="#b9152167a195b68e" class="t t">DragDropData</a> <a id="5994dda353d53d55" href="../R/5994dda353d53d55.html" target="n" data-glyph="106,1" class="i property">DragDropInfo</a> {
			<b>get</b> {
				<b>if</b> (<a href="#8c1e8b0452a5fce9" class="i field">dragDropInfo</a> == <b>null</b>)
					<a href="#8c1e8b0452a5fce9" class="i field">dragDropInfo</a> = <b>new</b> <a href="#b9152167a195b68e" class="t constructor">DragDropData</a> ();
 
				<b>return</b> <a href="#8c1e8b0452a5fce9" class="i field">dragDropInfo</a>;
			}
		}
 
		<b>private static</b> <a href="ImageAdorner.cs.html#2dd30e9c94c7a7d9" class="t t">ImageAdorner</a> <a id="720a75e1a3f1d043" href="../R/720a75e1a3f1d043.html" target="n" data-glyph="46,1" class="i field">Adorner</a>;
		<b>private static</b> <a href="@0@PresentationFramework/A.html#e1f0a45bf1e0169d" class="t t">AdornerLayer</a> <a id="0940f0f687012e67" href="../R/0940f0f687012e67.html" target="n" data-glyph="46,1" class="i field">AdornedLayer</a>;
		<b>private static</b> <span class="i n">System</span>.<span class="i n">Windows</span>.<a href="@0@PresentationFramework/A.html#e438dc91640a8d15" class="t t">Window</a> <a id="01862997901aec86" href="../R/01862997901aec86.html" target="n" data-glyph="46,1" class="i field">AdornedWindow</a>;
 
		<b>private</b> <span class="i n">SW</span>.<a href="@0@PresentationFramework/A.html#e438dc91640a8d15" class="t t">Window</a> <a id="74252657f2f07b3f" href="../R/74252657f2f07b3f.html" target="n" data-glyph="76,1" class="i method">GetParentWindow</a>()
		{
			<b>return</b> <a href="#bfe5b8d8f773f1ef" class="i property">Widget</a>.<a href="Util.cs.html#bd2579d57b071338" class="i method">GetParentWindow</a> ();
		}
 
		<b>public void</b> <a id="679d07cc78b134a6" href="../R/679d07cc78b134a6.html" target="n" data-glyph="72,1" class="i method">DragStart</a> (<a href="/Xwt3/A.html#51f5d7edbbc811a2" class="t t">DragStartData</a> <span id="r67 rd" class="r67 r">data</span>)
		{
			<b>if</b> (<span class="r67 r">data</span>.<a href="/Xwt3/A.html#5887963b6c82b5f6" class="i property">Data</a> == <b>null</b>)
				<b>throw</b> <b>new</b> <a href="@0@mscorlib/A.html#8314938388254d5a" class="t constructor">ArgumentNullException</a> (<span class="s">&quot;data&quot;</span>);
			
			<a href="@0@PresentationCore/A.html#e61bfdf1a095bc9f" class="t t">DataObject</a> <span id="r68 rd" class="r68 r">dataObj</span> = <span class="r67 r">data</span>.<a href="/Xwt3/A.html#5887963b6c82b5f6" class="i property">Data</a>.<a href="DataConverter.cs.html#a7686560093c57b0" class="i method">ToDataObject</a>();
 
			<b>if</b> (<span class="r67 r">data</span>.<a href="/Xwt3/A.html#04ab15a60805774d" class="i property">ImageBackend</a> != <b>null</b>) {
				<a href="#01862997901aec86" class="i field">AdornedWindow</a> = <a href="#74252657f2f07b3f" class="i method">GetParentWindow</a> ();
				<a href="#01862997901aec86" class="i field">AdornedWindow</a>.<a href="@0@PresentationCore/A.html#7bb93713e354f1a7" class="i property">AllowDrop</a> = <b>true</b>;
 
				<a href="@0@PresentationCore/A.html#7911653ccb506216" class="k">var</a> <span id="r69 rd" class="r69 r">e</span> = (<a href="@0@PresentationCore/A.html#7911653ccb506216" class="t t">UIElement</a>)<a href="#01862997901aec86" class="i field">AdornedWindow</a>.<a href="@0@PresentationFramework/A.html#2811283b5ba60413" class="i property">Content</a>;
 
				<a href="#720a75e1a3f1d043" class="i field">Adorner</a> = <b>new</b> <a href="ImageAdorner.cs.html#91f4f42c3f5c837c" class="t constructor">ImageAdorner</a> (<span class="r69 r">e</span>, <span class="r67 r">data</span>.<a href="/Xwt3/A.html#04ab15a60805774d" class="i property">ImageBackend</a>);
 
				<a href="#0940f0f687012e67" class="i field">AdornedLayer</a> = <a href="@0@PresentationFramework/A.html#e1f0a45bf1e0169d" class="t t">AdornerLayer</a>.<a href="@0@PresentationFramework/A.html#011f695af07f591c" class="i method">GetAdornerLayer</a> (<span class="r69 r">e</span>);
				<a href="#0940f0f687012e67" class="i field">AdornedLayer</a>.<a href="@0@PresentationFramework/A.html#7de3809373dae9b6" class="i method">Add</a> (<a href="#720a75e1a3f1d043" class="i field">Adorner</a>);
 
				<a href="#01862997901aec86" class="i field">AdornedWindow</a>.<a href="@0@PresentationCore/A.html#ed28f7051c7e00db" class="i">DragOver</a> += <a href="#2f7e006c3be1d945" class="i method">AdornedWindowOnDragOver</a>;
			}
 
			<a href="#bfe5b8d8f773f1ef" class="i property">Widget</a>.<a href="@0@WindowsBase/A.html#bd03df1631104fbc" class="i property">Dispatcher</a>.<a href="@0@WindowsBase/A.html#968dc7ef71211110" class="i method">BeginInvoke</a> ((<a href="@0@mscorlib/A.html#9147ae6f76643aae" class="t t">Action</a>)(() =&gt; {
				<a href="@0@PresentationCore/A.html#e5a8d642ee112795" class="k">var</a> <span id="r70 rd" class="r70 r">effect</span> = <a href="@0@PresentationCore/A.html#049b528bf8d5df71" class="t t">DragDrop</a>.<a href="@0@PresentationCore/A.html#c306f9372ea32da3" class="i method">DoDragDrop</a> (<a href="#bfe5b8d8f773f1ef" class="i property">Widget</a>, <span class="r68 r">dataObj</span>, <span class="r67 r">data</span>.<a href="/Xwt3/A.html#7a3f448cda291703" class="i property">DragAction</a>.<a href="DataConverter.cs.html#64bd0cad0858dfc3" class="i method">ToWpfDropEffect</a> ());
 
				<a href="#3a7e587e7425baa2" class="i method">OnDragFinished</a> (<a href="#551a9684f2eb2b53" class="k">this</a>, <b>new</b> <a href="/Xwt3/A.html#7cb372565c0f4421" class="t constructor">DragFinishedEventArgs</a> (<span class="r70 r">effect</span> == <a href="@0@PresentationCore/A.html#e5a8d642ee112795" class="t t">DragDropEffects</a>.<a href="@0@PresentationCore/A.html#d84ef1ffbdf159ba" class="i field">Move</a>));
 
				<b>if</b> (<a href="#720a75e1a3f1d043" class="i field">Adorner</a> != <b>null</b>) {
					<a href="#0940f0f687012e67" class="i field">AdornedLayer</a>.<a href="@0@PresentationFramework/A.html#ccecd11219f2f63d" class="i method">Remove</a> (<a href="#720a75e1a3f1d043" class="i field">Adorner</a>);
					<a href="#0940f0f687012e67" class="i field">AdornedLayer</a> = <b>null</b>;
					<a href="#720a75e1a3f1d043" class="i field">Adorner</a> = <b>null</b>;
 
					<a href="#01862997901aec86" class="i field">AdornedWindow</a>.<a href="@0@PresentationCore/A.html#7bb93713e354f1a7" class="i property">AllowDrop</a> = <b>false</b>;
					<a href="#01862997901aec86" class="i field">AdornedWindow</a>.<a href="@0@PresentationCore/A.html#ed28f7051c7e00db" class="i">DragOver</a> -= <a href="#2f7e006c3be1d945" class="i method">AdornedWindowOnDragOver</a>;
					<a href="#01862997901aec86" class="i field">AdornedWindow</a> = <b>null</b>;
				}
			}));
		}
 
		<b>private void</b> <a id="2f7e006c3be1d945" href="../R/2f7e006c3be1d945.html" target="n" data-glyph="76,1" class="i method">AdornedWindowOnDragOver</a> (<b>object</b> <span id="r71 rd" class="r71 r">sender</span>, <span class="i n">System</span>.<span class="i n">Windows</span>.<a href="@0@PresentationCore/A.html#04916847ce5fcf2c" class="t t">DragEventArgs</a> <span id="r72 rd" class="r72 r">e</span>)
		{
			<a href="#f9a1e6621bfc38c1" class="i method">WidgetDragOverHandler</a> (<span class="r71 r">sender</span>, <span class="r72 r">e</span>);
		}
 
		<b>public void</b> <a id="3ba60721133e6ade" href="../R/3ba60721133e6ade.html" target="n" data-glyph="72,1" class="i method">SetDragTarget</a> (<a href="/Xwt3/A.html#8d2aa7ab8e934767" class="t t">TransferDataType</a> [] <span id="r73 rd" class="r73 r">types</span>, <a href="/Xwt3/A.html#fbdd69525947b5a6" class="t t">DragDropAction</a> <span id="r74 rd" class="r74 r">dragAction</span>)
		{
			<a href="#5994dda353d53d55" class="i property">DragDropInfo</a>.<a href="#73fed9cc3c8b3733" class="i field">TargetTypes</a> = <span class="r73 r">types</span> == <b>null</b> ? <b>new</b> <a href="/Xwt3/A.html#8d2aa7ab8e934767" class="t t">TransferDataType</a> [0] : <span class="r73 r">types</span>;
			<a href="#bfe5b8d8f773f1ef" class="i property">Widget</a>.<a href="@0@PresentationCore/A.html#7bb93713e354f1a7" class="i property">AllowDrop</a> = <b>true</b>;
		}
 
		<b>public void</b> <a id="870a69e127f1ed41" href="../R/870a69e127f1ed41.html" target="n" data-glyph="72,1" class="i method">SetDragSource</a> (<a href="/Xwt3/A.html#8d2aa7ab8e934767" class="t t">TransferDataType</a> [] <span id="r75 rd" class="r75 r">types</span>, <a href="/Xwt3/A.html#fbdd69525947b5a6" class="t t">DragDropAction</a> <span id="r76 rd" class="r76 r">dragAction</span>)
		{
			<b>if</b> (<a href="#5994dda353d53d55" class="i property">DragDropInfo</a>.<a href="#274e37b0b889530f" class="i field">AutodetectDrag</a>)
				<b>return</b>; <span class="c">// Drag auto detect has been already activated.</span>
 
			<a href="#5994dda353d53d55" class="i property">DragDropInfo</a>.<a href="#274e37b0b889530f" class="i field">AutodetectDrag</a> = <b>true</b>;
			<a href="#5994dda353d53d55" class="i property">DragDropInfo</a>.<a href="#73fed9cc3c8b3733" class="i field">TargetTypes</a> = <span class="r75 r">types</span> == <b>null</b> ? <b>new</b> <a href="/Xwt3/A.html#8d2aa7ab8e934767" class="t t">TransferDataType</a> [0] : <span class="r75 r">types</span>;
			<a href="#bfe5b8d8f773f1ef" class="i property">Widget</a>.<a href="@0@PresentationCore/A.html#efe155ade2e36eaf" class="i">MouseUp</a> += <a href="#36e9ac90d29f9841" class="i method">WidgetMouseUpForDragHandler</a>;
			<a href="#bfe5b8d8f773f1ef" class="i property">Widget</a>.<a href="@0@PresentationCore/A.html#8af943423996f9bf" class="i">MouseMove</a> += <a href="#d083edc6047f2121" class="i method">WidgetMouseMoveForDragHandler</a>;
		}
 
		<b>private void</b> <a id="71053eea1a1aeda7" href="../R/71053eea1a1aeda7.html" target="n" data-glyph="76,1" class="i method">SetupDragRect</a> (<a href="@0@PresentationCore/A.html#2bd9049c90bfe71a" class="t t">MouseEventArgs</a> <span id="r77 rd" class="r77 r">e</span>)
		{
			<a href="@0@mscorlib/A.html#1a65cbdb09544ba1" class="k">var</a> <span id="r78 rd" class="r78 r">width</span> = <a href="@0@PresentationFramework/A.html#02007600b4eb5699" class="t t">SystemParameters</a>.<a href="@0@PresentationFramework/A.html#65eb12ec2f144dc4" class="i property">MinimumHorizontalDragDistance</a>;
			<a href="@0@mscorlib/A.html#1a65cbdb09544ba1" class="k">var</a> <span id="r79 rd" class="r79 r">height</span> = <a href="@0@PresentationFramework/A.html#02007600b4eb5699" class="t t">SystemParameters</a>.<a href="@0@PresentationFramework/A.html#0bf459994d679537" class="i property">MinimumVerticalDragDistance</a>;
			<a href="@0@WindowsBase/A.html#9120327717fc513d" class="k">var</a> <span id="r80 rd" class="r80 r">loc</span> = <span class="r77 r">e</span>.<a href="@0@PresentationCore/A.html#912fdca8fa7cbeed" class="i method">GetPosition</a> (<a href="#bfe5b8d8f773f1ef" class="i property">Widget</a>);
			<a href="#5994dda353d53d55" class="i property">DragDropInfo</a>.<a href="#8e7120f6d7b81e93" class="i field">DragRect</a> = <b>new</b> <a href="@0@WindowsBase/A.html#299a3fd614724168" class="t constructor">Rect</a> (<span class="r80 r">loc</span>.<a href="@0@WindowsBase/A.html#556ea90344bfb3ea" class="i property">X</a> - <span class="r78 r">width</span> / 2, <span class="r80 r">loc</span>.<a href="@0@WindowsBase/A.html#0a42b94edb8c27ab" class="i property">Y</a> - <span class="r79 r">height</span> / 2, <span class="r78 r">width</span>, <span class="r79 r">height</span>);
		}
 
		<b>void</b> <a id="36e9ac90d29f9841" href="../R/36e9ac90d29f9841.html" target="n" data-glyph="76,1" class="i method">WidgetMouseUpForDragHandler</a> (<b>object</b> <span id="r81 rd" class="r81 r">o</span>, <a href="@0@mscorlib/A.html#9a1496aa60befd10" class="t t">EventArgs</a> <span id="r82 rd" class="r82 r">e</span>)
		{
			<a href="#5994dda353d53d55" class="i property">DragDropInfo</a>.<a href="#8e7120f6d7b81e93" class="i field">DragRect</a> = <a href="@0@WindowsBase/A.html#fc387a6f7a1c2856" class="t t">Rect</a>.<a href="@0@WindowsBase/A.html#d791e7413af48db0" class="i property">Empty</a>;
		}
 
		<b>void</b> <a id="d083edc6047f2121" href="../R/d083edc6047f2121.html" target="n" data-glyph="76,1" class="i method">WidgetMouseMoveForDragHandler</a> (<b>object</b> <span id="r83 rd" class="r83 r">o</span>, <a href="@0@PresentationCore/A.html#2bd9049c90bfe71a" class="t t">MouseEventArgs</a> <span id="r84 rd" class="r84 r">e</span>)
		{
			<b>if</b> ((<a href="#51dbe360b1ea83c5" class="i field">enabledEvents</a> &amp; <a href="/Xwt3/A.html#c05db169102de2ea" class="t t">WidgetEvent</a>.<a href="/Xwt3/A.html#d00df1c8062def7a" class="i field">DragStarted</a>) == 0)
				<b>return</b>;
			<b>if</b> (<span class="r84 r">e</span>.<a href="@0@PresentationCore/A.html#325207ca856ea87d" class="i property">LeftButton</a> != <a href="@0@PresentationCore/A.html#c49fee26f1f7a30c" class="t t">MouseButtonState</a>.<a href="@0@PresentationCore/A.html#84ab65d095fc0025" class="i field">Pressed</a>)
				<b>return</b>;
 
			<b>if</b> (<a href="#5994dda353d53d55" class="i property">DragDropInfo</a>.<a href="#8e7120f6d7b81e93" class="i field">DragRect</a>.<a href="@0@WindowsBase/A.html#9c4f573847595310" class="i property">IsEmpty</a>)
				<a href="#71053eea1a1aeda7" class="i method">SetupDragRect</a> (<span class="r84 r">e</span>);
 
			<b>if</b> (<a href="#5994dda353d53d55" class="i property">DragDropInfo</a>.<a href="#8e7120f6d7b81e93" class="i field">DragRect</a>.<a href="@0@WindowsBase/A.html#342b332bdeedb2c7" class="i method">Contains</a> (<span class="r84 r">e</span>.<a href="@0@PresentationCore/A.html#912fdca8fa7cbeed" class="i method">GetPosition</a> (<a href="#bfe5b8d8f773f1ef" class="i property">Widget</a>)))
				<b>return</b>;
 
			<a href="/Xwt3/A.html#51f5d7edbbc811a2" class="t t">DragStartData</a> <span id="r85 rd" class="r85 r">dragData</span> = <b>null</b>;
			<a href="Backend.cs.html#a1d66241a0d4621f" class="i property">Context</a>.<a href="/Xwt3/A.html#5db8b61c4608e0e0" class="i method">InvokeUserCode</a> (<b>delegate</b> {
				<span class="r85 r">dragData</span> = <a href="#d1158759327ca5a9" class="i field">eventSink</a>.<a href="/Xwt3/A.html#c4c78946565b45eb" class="i method">OnDragStarted</a> ();
			});
 
			<b>if</b> (<span class="r85 r">dragData</span> != <b>null</b>)
				<a href="#679d07cc78b134a6" class="i method">DragStart</a> (<span class="r85 r">dragData</span>);
 
			<a href="#5994dda353d53d55" class="i property">DragDropInfo</a>.<a href="#8e7120f6d7b81e93" class="i field">DragRect</a> = <a href="@0@WindowsBase/A.html#fc387a6f7a1c2856" class="t t">Rect</a>.<a href="@0@WindowsBase/A.html#d791e7413af48db0" class="i property">Empty</a>;
		}
 
		<b>static</b> <a href="/Xwt3/A.html#fbdd69525947b5a6" class="t t">DragDropAction</a> <a id="eb1900670ff0ba87" href="../R/eb1900670ff0ba87.html" target="n" data-glyph="76,1" class="i method">DetectDragAction</a> (<a href="@0@PresentationCore/A.html#ecb52e8b860c036b" class="t t">DragDropKeyStates</a> <span id="r86 rd" class="r86 r">keys</span>)
		{
			<b>if</b> ((<span class="r86 r">keys</span> &amp; <a href="@0@PresentationCore/A.html#ecb52e8b860c036b" class="t t">DragDropKeyStates</a>.<a href="@0@PresentationCore/A.html#1e3a9cd7a996ff6c" class="i field">ControlKey</a>) == <a href="@0@PresentationCore/A.html#ecb52e8b860c036b" class="t t">DragDropKeyStates</a>.<a href="@0@PresentationCore/A.html#1e3a9cd7a996ff6c" class="i field">ControlKey</a>) {
				<b>if</b> ((<span class="r86 r">keys</span> &amp; <a href="@0@PresentationCore/A.html#ecb52e8b860c036b" class="t t">DragDropKeyStates</a>.<a href="@0@PresentationCore/A.html#4f102bccafcf8add" class="i field">ShiftKey</a>) == <a href="@0@PresentationCore/A.html#ecb52e8b860c036b" class="t t">DragDropKeyStates</a>.<a href="@0@PresentationCore/A.html#4f102bccafcf8add" class="i field">ShiftKey</a>)
					<b>return</b> <a href="/Xwt3/A.html#fbdd69525947b5a6" class="t t">DragDropAction</a>.<a href="/Xwt3/A.html#809e0174d1709338" class="i field">Link</a>;
				<b>else
					return</b> <a href="/Xwt3/A.html#fbdd69525947b5a6" class="t t">DragDropAction</a>.<a href="/Xwt3/A.html#607da158197fc54b" class="i field">Copy</a>;
			}
 
			<b>return</b> <a href="/Xwt3/A.html#fbdd69525947b5a6" class="t t">DragDropAction</a>.<a href="/Xwt3/A.html#b423ff71a296a4da" class="i field">Move</a>;
		}
 
		<b>static void</b> <a id="5ae20611011e35fd" href="../R/5ae20611011e35fd.html" target="n" data-glyph="76,1" class="i method">FillDataStore</a> (<a href="/Xwt3/A.html#651658c0011a0231" class="t t">TransferDataStore</a> <span id="r87 rd" class="r87 r">store</span>, <a href="@0@PresentationCore/A.html#cc5703036bea61e8" class="t t">IDataObject</a> <span id="r88 rd" class="r88 r">data</span>, <a href="/Xwt3/A.html#8d2aa7ab8e934767" class="t t">TransferDataType</a> [] <span id="r89 rd" class="r89 r">types</span>)
		{
			<b>foreach</b> (<a href="/Xwt3/A.html#8d2aa7ab8e934767" class="k">var</a> <span id="r90 rd" class="r90 r">type</span> <b>in</b> <span class="r89 r">types</span>) {
				<b>string</b> <span id="r91 rd" class="r91 r">format</span> = <span class="r90 r">type</span>.<a href="DataConverter.cs.html#0689ed710717eb3e" class="i method">ToWpfDataFormat</a> ();
				<b>if</b> (!<span class="r88 r">data</span>.<a href="@0@PresentationCore/A.html#5ab0d218c006f20d" class="i method">GetDataPresent</a> (<span class="r91 r">format</span>)) {
					<span class="c">// This is a workaround to support type names which don&#39;t include the assembly name.</span>
					<span class="c">// It eases integration with Windows DND.</span>
					<span class="r91 r">format</span> = <a href="#6898a057ba3a289d" class="i method">NormalizeTypeName</a> (<span class="r91 r">format</span>);
					<b>if</b> (!<span class="r88 r">data</span>.<a href="@0@PresentationCore/A.html#5ab0d218c006f20d" class="i method">GetDataPresent</a> (<span class="r91 r">format</span>))
						<b>continue</b>;
				}
 
				<a href="@0@mscorlib/A.html#d9262ceecc1719ab" class="k">var</a> <span id="r92 rd" class="r92 r">value</span> = <span class="r88 r">data</span>.<a href="@0@PresentationCore/A.html#3d89d7eaeb4f5087" class="i method">GetData</a> (<span class="r91 r">format</span>);
				<b>if</b> (<span class="r90 r">type</span> == <a href="/Xwt3/A.html#8d2aa7ab8e934767" class="t t">TransferDataType</a>.<a href="/Xwt3/A.html#b61cd409a50bb305" class="i field">Text</a>)
					<span class="r87 r">store</span>.<a href="/Xwt3/A.html#90717402210fac6f" class="i method">AddText</a> ((<b>string</b>)<span class="r92 r">value</span>);
				<b>else if</b> (<span class="r90 r">type</span> == <a href="/Xwt3/A.html#8d2aa7ab8e934767" class="t t">TransferDataType</a>.<a href="/Xwt3/A.html#141b9b9c43b0ec11" class="i field">Uri</a>) {
					<b>var</b> <span id="r93 rd" class="r93 r">uris</span> = ((<b>string</b> [])<span class="r92 r">value</span>).<a href="@0@System.Core/A.html#5c652c53e80df013" class="i method">Select</a> (<span id="r94 rd" class="r94 r">f</span> =&gt; <b>new</b> <a href="@0@System/A.html#9e1bb2fef0d1159b" class="t constructor">Uri</a> (<span class="r94 r">f</span>)).<a href="@0@System.Core/A.html#783a052330e7d48d" class="i method">ToArray</a> ();
					<span class="r87 r">store</span>.<a href="/Xwt3/A.html#2b1365636c287e3d" class="i method">AddUris</a> (<span class="r93 r">uris</span>);
				} <b>else if</b> (<span class="r92 r">value</span> <b>is byte</b>[])
					<span class="r87 r">store</span>.<a href="/Xwt3/A.html#4fd3672e5819c29d" class="i method">AddValue</a> (<span class="r90 r">type</span>, (<b>byte</b>[]) <span class="r92 r">value</span>);
				<b>else</b>
					<span class="r87 r">store</span>.<a href="/Xwt3/A.html#fdcf3fffd8b848d9" class="i method">AddValue</a> (<span class="r90 r">type</span>, <span class="r92 r">value</span>);
			}
		}
 
		<b>static string</b> <a id="6898a057ba3a289d" href="../R/6898a057ba3a289d.html" target="n" data-glyph="76,1" class="i method">NormalizeTypeName</a> (<b>string</b> <span id="r95 rd" class="r95 r">dataType</span>)
		{
			<span class="c">// If the string is a fully qualified type name, strip the assembly name</span>
			<b>int</b> <span id="r96 rd" class="r96 r">i</span> = <span class="r95 r">dataType</span>.<a href="@0@mscorlib/A.html#eb06d6d166f6a3d9" class="i method">IndexOf</a> (<span class="s">&#39;,&#39;</span>);
			<b>if</b> (<span class="r96 r">i</span> == -1)
				<b>return</b> <span class="r95 r">dataType</span>;
			<b>string</b> <span id="r97 rd" class="r97 r">asmName</span> = <span class="r95 r">dataType</span>.<a href="@0@mscorlib/A.html#882fa7998d6ca35a" class="i method">Substring</a> (<span class="r96 r">i</span> + 1).<a href="@0@mscorlib/A.html#06a5f7c688e69307" class="i method">Trim</a> ();
			<b>try</b> {
				<b>new</b> <span class="i n">System</span>.<span class="i n">Reflection</span>.<a href="@0@mscorlib/A.html#669eea1990d45287" class="t constructor">AssemblyName</a> (<span class="r97 r">asmName</span>);
			}
			<b>catch</b> {
				<b>return</b> <span class="r95 r">dataType</span>;
			}
			<b>return</b> <span class="r95 r">dataType</span>.<a href="@0@mscorlib/A.html#8124961f027d9ac9" class="i method">Substring</a> (0, <span class="r96 r">i</span>).<a href="@0@mscorlib/A.html#06a5f7c688e69307" class="i method">Trim</a> ();
		}
 
		<b>protected virtual void</b> <a id="3a7e587e7425baa2" href="../R/3a7e587e7425baa2.html" target="n" data-glyph="75,1" class="i method">OnDragFinished</a> (<b>object</b> <span id="r98 rd" class="r98 r">sender</span>, <a href="/Xwt3/A.html#c15c5d9ba60a6d39" class="t t">DragFinishedEventArgs</a> <span id="r99 rd" class="r99 r">e</span>)
		{
			<a href="Backend.cs.html#a1d66241a0d4621f" class="i property">Context</a>.<a href="/Xwt3/A.html#5db8b61c4608e0e0" class="i method">InvokeUserCode</a> (<b>delegate</b> {
				<a href="#551a9684f2eb2b53" class="k">this</a>.<a href="#d1158759327ca5a9" class="i field">eventSink</a>.<a href="/Xwt3/A.html#58597460d1f76e53" class="i method">OnDragFinished</a> (<span class="r99 r">e</span>);
			});
		}
 
		<b>protected virtual void</b> <a id="0ada5ce5b53507c7" href="../R/0ada5ce5b53507c7.html" target="n" data-glyph="75,1" class="i method">OnDragOver</a> (<b>object</b> <span id="r100 rd" class="r100 r">sender</span>, <a href="/Xwt3/A.html#97abc4d7a9024156" class="t t">DragOverEventArgs</a> <span id="r101 rd" class="r101 r">e</span>)
		{
			<a href="Backend.cs.html#a1d66241a0d4621f" class="i property">Context</a>.<a href="/Xwt3/A.html#5db8b61c4608e0e0" class="i method">InvokeUserCode</a> (<b>delegate</b> {
				<a href="#d1158759327ca5a9" class="i field">eventSink</a>.<a href="/Xwt3/A.html#1c22aa4f7b6945ca" class="i method">OnDragOver</a> (<span class="r101 r">e</span>);
			});
		}
 
		<b>protected virtual void</b> <a id="ff8910835d94f3eb" href="../R/ff8910835d94f3eb.html" target="n" data-glyph="75,1" class="i method">OnDragLeave</a> (<b>object</b> <span id="r102 rd" class="r102 r">sender</span>, <a href="@0@mscorlib/A.html#9a1496aa60befd10" class="t t">EventArgs</a> <span id="r103 rd" class="r103 r">e</span>)
		{
			<a href="Backend.cs.html#a1d66241a0d4621f" class="i property">Context</a>.<a href="/Xwt3/A.html#5db8b61c4608e0e0" class="i method">InvokeUserCode</a> (<b>delegate</b> {
				<a href="#d1158759327ca5a9" class="i field">eventSink</a>.<a href="/Xwt3/A.html#90b249a942bc4e0e" class="i method">OnDragLeave</a> (<span class="r103 r">e</span>);
			});
		}
 
		<b>void</b> <a id="f9a1e6621bfc38c1" href="../R/f9a1e6621bfc38c1.html" target="n" data-glyph="76,1" class="i method">WidgetDragOverHandler</a> (<b>object</b> <span id="r104 rd" class="r104 r">sender</span>, <span class="i n">System</span>.<span class="i n">Windows</span>.<a href="@0@PresentationCore/A.html#04916847ce5fcf2c" class="t t">DragEventArgs</a> <span id="r105 rd" class="r105 r">e</span>)
		{
			<b>if</b> (<a href="#720a75e1a3f1d043" class="i field">Adorner</a> != <b>null</b>) {
				<a href="@0@PresentationFramework/A.html#e438dc91640a8d15" class="k">var</a> <span id="r106 rd" class="r106 r">w</span> = <a href="#74252657f2f07b3f" class="i method">GetParentWindow</a> ();
				<a href="@0@PresentationCore/A.html#7911653ccb506216" class="k">var</a> <span id="r107 rd" class="r107 r">v</span> = (<a href="@0@PresentationCore/A.html#7911653ccb506216" class="t t">UIElement</a>)<span class="r106 r">w</span>.<a href="@0@PresentationFramework/A.html#2811283b5ba60413" class="i property">Content</a>;
 
				<b>if</b> (<span class="r106 r">w</span> != <a href="#01862997901aec86" class="i field">AdornedWindow</a>) {
					<a href="#0940f0f687012e67" class="i field">AdornedLayer</a>.<a href="@0@PresentationFramework/A.html#ccecd11219f2f63d" class="i method">Remove</a> (<a href="#720a75e1a3f1d043" class="i field">Adorner</a>);
 
					<a href="#01862997901aec86" class="i field">AdornedWindow</a>.<a href="@0@PresentationCore/A.html#7bb93713e354f1a7" class="i property">AllowDrop</a> = <b>false</b>;
					<a href="#01862997901aec86" class="i field">AdornedWindow</a>.<a href="@0@PresentationCore/A.html#ed28f7051c7e00db" class="i">DragOver</a> -= <a href="#2f7e006c3be1d945" class="i method">AdornedWindowOnDragOver</a>;
 
					<a href="#01862997901aec86" class="i field">AdornedWindow</a> = <span class="r106 r">w</span>;
					<a href="#01862997901aec86" class="i field">AdornedWindow</a>.<a href="@0@PresentationCore/A.html#7bb93713e354f1a7" class="i property">AllowDrop</a> = <b>true</b>;
					<a href="#01862997901aec86" class="i field">AdornedWindow</a>.<a href="@0@PresentationCore/A.html#ed28f7051c7e00db" class="i">DragOver</a> += <a href="#2f7e006c3be1d945" class="i method">AdornedWindowOnDragOver</a>;
 
					<a href="#0940f0f687012e67" class="i field">AdornedLayer</a> = <a href="@0@PresentationFramework/A.html#e1f0a45bf1e0169d" class="t t">AdornerLayer</a>.<a href="@0@PresentationFramework/A.html#011f695af07f591c" class="i method">GetAdornerLayer</a> (<span class="r107 r">v</span>);
					<a href="#0940f0f687012e67" class="i field">AdornedLayer</a>.<a href="@0@PresentationFramework/A.html#7de3809373dae9b6" class="i method">Add</a> (<a href="#720a75e1a3f1d043" class="i field">Adorner</a>);
				}
 
				<a href="#720a75e1a3f1d043" class="i field">Adorner</a>.<a href="ImageAdorner.cs.html#d6e1a4b144300c34" class="i property">Offset</a> = <span class="r105 r">e</span>.<a href="@0@PresentationCore/A.html#113aac17ace9890e" class="i method">GetPosition</a> (<span class="r107 r">v</span>);
			}
			<a href="#174ba876729633ac" class="i method">CheckDrop</a> (<span class="r104 r">sender</span>, <span class="r105 r">e</span>);
		}
 
		<b>void</b> <a id="174ba876729633ac" href="../R/174ba876729633ac.html" target="n" data-glyph="76,1" class="i method">CheckDrop</a> (<b>object</b> <span id="r108 rd" class="r108 r">sender</span>, <span class="i n">System</span>.<span class="i n">Windows</span>.<a href="@0@PresentationCore/A.html#04916847ce5fcf2c" class="t t">DragEventArgs</a> <span id="r109 rd" class="r109 r">e</span>)
		{
			<b>var</b> <span id="r110 rd" class="r110 r">types</span> = <span class="r109 r">e</span>.<a href="@0@PresentationCore/A.html#e542a83d010deabe" class="i property">Data</a>.<a href="@0@PresentationCore/A.html#e99f6de9447fedcc" class="i method">GetFormats</a> ().<a href="@0@System.Core/A.html#5c652c53e80df013" class="i method">Select</a> (<span id="r111 rd" class="r111 r">t</span> =&gt; <span class="r111 r">t</span>.<a href="DataConverter.cs.html#2e6e8dcff70080bc" class="i method">ToXwtTransferType</a> ()).<a href="@0@System.Core/A.html#783a052330e7d48d" class="i method">ToArray</a> ();
			<a href="/Xwt3/A.html#0e54e87b6e891b4f" class="k">var</a> <span id="r112 rd" class="r112 r">pos</span> = <span class="r109 r">e</span>.<a href="@0@PresentationCore/A.html#113aac17ace9890e" class="i method">GetPosition</a> (<a href="#bfe5b8d8f773f1ef" class="i property">Widget</a>).<a href="DataConverter.cs.html#81bc759ba867f627" class="i method">ToXwtPoint</a> ();
			<a href="/Xwt3/A.html#fbdd69525947b5a6" class="k">var</a> <span id="r113 rd" class="r113 r">proposedAction</span> = <a href="#eb1900670ff0ba87" class="i method">DetectDragAction</a> (<span class="r109 r">e</span>.<a href="@0@PresentationCore/A.html#ccd6980505b5752b" class="i property">KeyStates</a>);
 
			<span class="r109 r">e</span>.<a href="@0@PresentationCore/A.html#f2bcc08494fea0e6" class="i property">Handled</a> = <b>true</b>; <span class="c">// Prevent default handlers from being used.</span>
 
			<b>if</b> ((<a href="#51dbe360b1ea83c5" class="i field">enabledEvents</a> &amp; <a href="/Xwt3/A.html#c05db169102de2ea" class="t t">WidgetEvent</a>.<a href="/Xwt3/A.html#3947e29ed6facb54" class="i field">DragOverCheck</a>) &gt; 0) {
				<a href="/Xwt3/A.html#f5e42d923df4f230" class="k">var</a> <span id="r114 rd" class="r114 r">checkArgs</span> = <b>new</b> <a href="/Xwt3/A.html#f9c807b7c95f7b02" class="t constructor">DragOverCheckEventArgs</a> (<span class="r112 r">pos</span>, <span class="r110 r">types</span>, <span class="r113 r">proposedAction</span>);
				<a href="Backend.cs.html#a1d66241a0d4621f" class="i property">Context</a>.<a href="/Xwt3/A.html#5db8b61c4608e0e0" class="i method">InvokeUserCode</a> (<b>delegate</b> {
					<a href="#d1158759327ca5a9" class="i field">eventSink</a>.<a href="/Xwt3/A.html#42519d4e0eb00e5b" class="i method">OnDragOverCheck</a> (<span class="r114 r">checkArgs</span>);
				});
				<b>if</b> (<span class="r114 r">checkArgs</span>.<a href="/Xwt3/A.html#e45ab4b24af5d785" class="i property">AllowedAction</a> == <a href="/Xwt3/A.html#fbdd69525947b5a6" class="t t">DragDropAction</a>.<a href="/Xwt3/A.html#8b4285aaeb4bd5c0" class="i field">None</a>) {
					<span class="r109 r">e</span>.<a href="@0@PresentationCore/A.html#6e1cc3a342260a9e" class="i property">Effects</a> = <a href="#7a53212d79a444ad" class="i field">currentDragEffect</a> = <a href="@0@PresentationCore/A.html#e5a8d642ee112795" class="t t">DragDropEffects</a>.<a href="@0@PresentationCore/A.html#83e00a29c2901e73" class="i field">None</a>;
					<b>return</b>;
				}
				<b>if</b> (<span class="r114 r">checkArgs</span>.<a href="/Xwt3/A.html#e45ab4b24af5d785" class="i property">AllowedAction</a> != <a href="/Xwt3/A.html#fbdd69525947b5a6" class="t t">DragDropAction</a>.<a href="/Xwt3/A.html#3dea4feb19056fb6" class="i field">Default</a>) {
					<span class="r109 r">e</span>.<a href="@0@PresentationCore/A.html#6e1cc3a342260a9e" class="i property">Effects</a> = <a href="#7a53212d79a444ad" class="i field">currentDragEffect</a> = <span class="r114 r">checkArgs</span>.<a href="/Xwt3/A.html#e45ab4b24af5d785" class="i property">AllowedAction</a>.<a href="DataConverter.cs.html#64bd0cad0858dfc3" class="i method">ToWpfDropEffect</a> ();
					<b>return</b>;
				}
			}
 
			<b>if</b> ((<a href="#51dbe360b1ea83c5" class="i field">enabledEvents</a> &amp; <a href="/Xwt3/A.html#c05db169102de2ea" class="t t">WidgetEvent</a>.<a href="/Xwt3/A.html#e30cc3e21e73aaf4" class="i field">DragOver</a>) &gt; 0) {
				<a href="/Xwt3/A.html#651658c0011a0231" class="k">var</a> <span id="r115 rd" class="r115 r">store</span> = <b>new</b> <a href="/Xwt3/A.html#651658c0011a0231" class="t constructor">TransferDataStore</a> ();
				<a href="#5ae20611011e35fd" class="i method">FillDataStore</a> (<span class="r115 r">store</span>, <span class="r109 r">e</span>.<a href="@0@PresentationCore/A.html#e542a83d010deabe" class="i property">Data</a>, <a href="#5994dda353d53d55" class="i property">DragDropInfo</a>.<a href="#73fed9cc3c8b3733" class="i field">TargetTypes</a>);
 
				<a href="/Xwt3/A.html#97abc4d7a9024156" class="k">var</a> <span id="r116 rd" class="r116 r">args</span> = <b>new</b> <a href="/Xwt3/A.html#c7c0ba83883d93fe" class="t constructor">DragOverEventArgs</a> (<span class="r112 r">pos</span>, <span class="r115 r">store</span>, <span class="r113 r">proposedAction</span>);
				<a href="#0ada5ce5b53507c7" class="i method">OnDragOver</a> (<span class="r108 r">sender</span>, <span class="r116 r">args</span>);
				<b>if</b> (<span class="r116 r">args</span>.<a href="/Xwt3/A.html#7852c7484475eac5" class="i property">AllowedAction</a> == <a href="/Xwt3/A.html#fbdd69525947b5a6" class="t t">DragDropAction</a>.<a href="/Xwt3/A.html#8b4285aaeb4bd5c0" class="i field">None</a>) {
					<span class="r109 r">e</span>.<a href="@0@PresentationCore/A.html#6e1cc3a342260a9e" class="i property">Effects</a> = <a href="#7a53212d79a444ad" class="i field">currentDragEffect</a> = <a href="@0@PresentationCore/A.html#e5a8d642ee112795" class="t t">DragDropEffects</a>.<a href="@0@PresentationCore/A.html#83e00a29c2901e73" class="i field">None</a>;
					<b>return</b>;
				}
				<b>if</b> (<span class="r116 r">args</span>.<a href="/Xwt3/A.html#7852c7484475eac5" class="i property">AllowedAction</a> != <a href="/Xwt3/A.html#fbdd69525947b5a6" class="t t">DragDropAction</a>.<a href="/Xwt3/A.html#3dea4feb19056fb6" class="i field">Default</a>) {
					<span class="r109 r">e</span>.<a href="@0@PresentationCore/A.html#6e1cc3a342260a9e" class="i property">Effects</a> = <a href="#7a53212d79a444ad" class="i field">currentDragEffect</a> = <span class="r116 r">args</span>.<a href="/Xwt3/A.html#7852c7484475eac5" class="i property">AllowedAction</a>.<a href="DataConverter.cs.html#64bd0cad0858dfc3" class="i method">ToWpfDropEffect</a> ();
					<b>return</b>;
				}
			}
 
			<span class="r109 r">e</span>.<a href="@0@PresentationCore/A.html#6e1cc3a342260a9e" class="i property">Effects</a> = <a href="#7a53212d79a444ad" class="i field">currentDragEffect</a> = <span class="r113 r">proposedAction</span>.<a href="DataConverter.cs.html#64bd0cad0858dfc3" class="i method">ToWpfDropEffect</a> ();
		}
 
		<b>void</b> <a id="de76620715387803" href="../R/de76620715387803.html" target="n" data-glyph="76,1" class="i method">WidgetDropHandler</a> (<b>object</b> <span id="r117 rd" class="r117 r">sender</span>, <span class="i n">System</span>.<span class="i n">Windows</span>.<a href="@0@PresentationCore/A.html#04916847ce5fcf2c" class="t t">DragEventArgs</a> <span id="r118 rd" class="r118 r">e</span>)
		{
			<span class="c">// Do a DragOverCheck before proceeding to the drop. This is required since in some cases the DragOver</span>
			<span class="c">// handler may not be called.</span>
			<a href="#174ba876729633ac" class="i method">CheckDrop</a> (<span class="r117 r">sender</span>, <span class="r118 r">e</span>);
			<b>if</b> (<span class="r118 r">e</span>.<a href="@0@PresentationCore/A.html#6e1cc3a342260a9e" class="i property">Effects</a> == <a href="@0@PresentationCore/A.html#e5a8d642ee112795" class="t t">DragDropEffects</a>.<a href="@0@PresentationCore/A.html#83e00a29c2901e73" class="i field">None</a>)
				<b>return</b>;
 
			<a href="#7ec0fd9da271d5de" class="i method">WidgetDragLeaveHandler</a> (<span class="r117 r">sender</span>, <span class="r118 r">e</span>);
 
			<b>var</b> <span id="r119 rd" class="r119 r">types</span> = <span class="r118 r">e</span>.<a href="@0@PresentationCore/A.html#e542a83d010deabe" class="i property">Data</a>.<a href="@0@PresentationCore/A.html#e99f6de9447fedcc" class="i method">GetFormats</a> ().<a href="@0@System.Core/A.html#5c652c53e80df013" class="i method">Select</a> (<span id="r120 rd" class="r120 r">t</span> =&gt; <span class="r120 r">t</span>.<a href="DataConverter.cs.html#2e6e8dcff70080bc" class="i method">ToXwtTransferType</a> ()).<a href="@0@System.Core/A.html#783a052330e7d48d" class="i method">ToArray</a> ();
			<a href="/Xwt3/A.html#0e54e87b6e891b4f" class="k">var</a> <span id="r121 rd" class="r121 r">pos</span> = <span class="r118 r">e</span>.<a href="@0@PresentationCore/A.html#113aac17ace9890e" class="i method">GetPosition</a> (<a href="#bfe5b8d8f773f1ef" class="i property">Widget</a>).<a href="DataConverter.cs.html#81bc759ba867f627" class="i method">ToXwtPoint</a> ();
			<a href="@0@PresentationCore/A.html#e5a8d642ee112795" class="k">var</a> <span id="r122 rd" class="r122 r">actualEffect</span> = <a href="#7a53212d79a444ad" class="i field">currentDragEffect</a>;
 
			<span class="r118 r">e</span>.<a href="@0@PresentationCore/A.html#f2bcc08494fea0e6" class="i property">Handled</a> = <b>true</b>; <span class="c">// Prevent default handlers from being used.</span>
			<span class="r118 r">e</span>.<a href="@0@PresentationCore/A.html#6e1cc3a342260a9e" class="i property">Effects</a> = <a href="@0@PresentationCore/A.html#e5a8d642ee112795" class="t t">DragDropEffects</a>.<a href="@0@PresentationCore/A.html#83e00a29c2901e73" class="i field">None</a>;
 
			<b>if</b> ((<a href="#51dbe360b1ea83c5" class="i field">enabledEvents</a> &amp; <a href="/Xwt3/A.html#c05db169102de2ea" class="t t">WidgetEvent</a>.<a href="/Xwt3/A.html#5abae3c3dcd3b161" class="i field">DragDropCheck</a>) &gt; 0) {
				<a href="/Xwt3/A.html#a95ad19d3408a2e8" class="k">var</a> <span id="r123 rd" class="r123 r">checkArgs</span> = <b>new</b> <a href="/Xwt3/A.html#e373ab1ad8531c8f" class="t constructor">DragCheckEventArgs</a> (<span class="r121 r">pos</span>, <span class="r119 r">types</span>, <span class="r122 r">actualEffect</span>.<a href="DataConverter.cs.html#d4ded87a61d2423c" class="i method">ToXwtDropAction</a> ());
				<b>bool</b> <span id="r124 rd" class="r124 r">res</span> = <a href="Backend.cs.html#a1d66241a0d4621f" class="i property">Context</a>.<a href="/Xwt3/A.html#5db8b61c4608e0e0" class="i method">InvokeUserCode</a> (<b>delegate</b> {
					<a href="#d1158759327ca5a9" class="i field">eventSink</a>.<a href="/Xwt3/A.html#d75c63571f1eddaa" class="i method">OnDragDropCheck</a> (<span class="r123 r">checkArgs</span>);
				});
 
				<b>if</b> (<span class="r123 r">checkArgs</span>.<a href="/Xwt3/A.html#ef4ce2e973c2f270" class="i property">Result</a> == <a href="/Xwt3/A.html#36c58d84abe60e3b" class="t t">DragDropResult</a>.<a href="/Xwt3/A.html#f91120fa5141ecd1" class="i field">Canceled</a> || !<span class="r124 r">res</span>) {
					<span class="r118 r">e</span>.<a href="@0@PresentationCore/A.html#6e1cc3a342260a9e" class="i property">Effects</a> = <a href="@0@PresentationCore/A.html#e5a8d642ee112795" class="t t">DragDropEffects</a>.<a href="@0@PresentationCore/A.html#83e00a29c2901e73" class="i field">None</a>;
					<b>return</b>;
				}
			}
 
			<b>if</b> ((<a href="#51dbe360b1ea83c5" class="i field">enabledEvents</a> &amp; <a href="/Xwt3/A.html#c05db169102de2ea" class="t t">WidgetEvent</a>.<a href="/Xwt3/A.html#7511311a2884c553" class="i field">DragDrop</a>) &gt; 0) {
				<a href="/Xwt3/A.html#651658c0011a0231" class="k">var</a> <span id="r125 rd" class="r125 r">store</span> = <b>new</b> <a href="/Xwt3/A.html#651658c0011a0231" class="t constructor">TransferDataStore</a> ();
				<a href="#5ae20611011e35fd" class="i method">FillDataStore</a> (<span class="r125 r">store</span>, <span class="r118 r">e</span>.<a href="@0@PresentationCore/A.html#e542a83d010deabe" class="i property">Data</a>, <a href="#5994dda353d53d55" class="i property">DragDropInfo</a>.<a href="#73fed9cc3c8b3733" class="i field">TargetTypes</a>);
 
				<a href="/Xwt3/A.html#45fa7fd283822475" class="k">var</a> <span id="r126 rd" class="r126 r">args</span> = <b>new</b> <a href="/Xwt3/A.html#37031a1e602fb528" class="t constructor">DragEventArgs</a> (<span class="r121 r">pos</span>, <span class="r125 r">store</span>, <span class="r122 r">actualEffect</span>.<a href="DataConverter.cs.html#d4ded87a61d2423c" class="i method">ToXwtDropAction</a> ());
				<a href="Backend.cs.html#a1d66241a0d4621f" class="i property">Context</a>.<a href="/Xwt3/A.html#5db8b61c4608e0e0" class="i method">InvokeUserCode</a> (<b>delegate</b> {
					<a href="#d1158759327ca5a9" class="i field">eventSink</a>.<a href="/Xwt3/A.html#cbae0a91376d842e" class="i method">OnDragDrop</a> (<span class="r126 r">args</span>);
				});
 
				<b>if</b> (<span class="r126 r">args</span>.<a href="/Xwt3/A.html#916107088d4bfae0" class="i property">Success</a>)
					<span class="r118 r">e</span>.<a href="@0@PresentationCore/A.html#6e1cc3a342260a9e" class="i property">Effects</a> = <span class="r122 r">actualEffect</span>;
			}
		}
 
		<b>void</b> <a id="7ec0fd9da271d5de" href="../R/7ec0fd9da271d5de.html" target="n" data-glyph="76,1" class="i method">WidgetDragLeaveHandler</a> (<b>object</b> <span id="r127 rd" class="r127 r">sender</span>, <span class="i n">System</span>.<span class="i n">Windows</span>.<a href="@0@PresentationCore/A.html#04916847ce5fcf2c" class="t t">DragEventArgs</a> <span id="r128 rd" class="r128 r">e</span>)
		{
			<a href="#ff8910835d94f3eb" class="i method">OnDragLeave</a> (<span class="r127 r">sender</span>, <span class="r128 r">e</span>);
		}
 
		<b>private void</b> <a id="35f7e117a6ebe852" href="../R/35f7e117a6ebe852.html" target="n" data-glyph="76,1" class="i method">WidgetMouseEnteredHandler</a> (<b>object</b> <span id="r129 rd" class="r129 r">sender</span>, <a href="@0@PresentationCore/A.html#2bd9049c90bfe71a" class="t t">MouseEventArgs</a> <span id="r130 rd" class="r130 r">e</span>)
		{
			<a href="Backend.cs.html#a1d66241a0d4621f" class="i property">Context</a>.<a href="/Xwt3/A.html#5db8b61c4608e0e0" class="i method">InvokeUserCode</a> (<a href="#d1158759327ca5a9" class="i field">eventSink</a>.<a href="/Xwt3/A.html#3119e54deabd0a7a" class="i method">OnMouseEntered</a>);
		}
 
		<b>private void</b> <a id="b61321bfa3732ee5" href="../R/b61321bfa3732ee5.html" target="n" data-glyph="76,1" class="i method">WidgetMouseExitedHandler</a> (<b>object</b> <span id="r131 rd" class="r131 r">sender</span>, <a href="@0@PresentationCore/A.html#2bd9049c90bfe71a" class="t t">MouseEventArgs</a> <span id="r132 rd" class="r132 r">e</span>)
		{
			<a href="Backend.cs.html#a1d66241a0d4621f" class="i property">Context</a>.<a href="/Xwt3/A.html#5db8b61c4608e0e0" class="i method">InvokeUserCode</a> (<a href="#d1158759327ca5a9" class="i field">eventSink</a>.<a href="/Xwt3/A.html#43a9348ded608f90" class="i method">OnMouseExited</a>);
		}
 
		<b>private void</b> <a id="baf763b3d8149de2" href="../R/baf763b3d8149de2.html" target="n" data-glyph="76,1" class="i method">WidgetMouseMoveHandler</a> (<b>object</b> <span id="r133 rd" class="r133 r">sender</span>, <a href="@0@PresentationCore/A.html#2bd9049c90bfe71a" class="t t">MouseEventArgs</a> <span id="r134 rd" class="r134 r">e</span>)
		{
			<a href="@0@WindowsBase/A.html#9120327717fc513d" class="k">var</a> <span id="r135 rd" class="r135 r">p</span> = <span class="r134 r">e</span>.<a href="@0@PresentationCore/A.html#912fdca8fa7cbeed" class="i method">GetPosition</a> (<a href="#bfe5b8d8f773f1ef" class="i property">Widget</a>);
			<a href="/Xwt3/A.html#1ff5346fb68322ed" class="k">var</a> <span id="r136 rd" class="r136 r">a</span> = <b>new</b> <a href="/Xwt3/A.html#a88c0513c7e0ac5b" class="t constructor">MouseMovedEventArgs</a>(<span class="r134 r">e</span>.<a href="@0@PresentationCore/A.html#6be199bb1e2388b8" class="i property">Timestamp</a>, <span class="r135 r">p</span>.<a href="@0@WindowsBase/A.html#556ea90344bfb3ea" class="i property">X</a>, <span class="r135 r">p</span>.<a href="@0@WindowsBase/A.html#0a42b94edb8c27ab" class="i property">Y</a>);
			<a href="Backend.cs.html#a1d66241a0d4621f" class="i property">Context</a>.<a href="/Xwt3/A.html#5db8b61c4608e0e0" class="i method">InvokeUserCode</a> (() =&gt; {
				<a href="#d1158759327ca5a9" class="i field">eventSink</a>.<a href="/Xwt3/A.html#05db8134541e67c9" class="i method">OnMouseMoved</a>(<span class="r136 r">a</span>);
			});
			<b>if</b> (<span class="r136 r">a</span>.<a href="/Xwt3/A.html#2719af4bd8657ba1" class="i property">Handled</a>)
				<span class="r134 r">e</span>.<a href="@0@PresentationCore/A.html#f2bcc08494fea0e6" class="i property">Handled</a> = <b>true</b>;
		}
 
		<b>private int</b> <a id="e8c577bd2e70d6a5" href="../R/e8c577bd2e70d6a5.html" target="n" data-glyph="46,1" class="i field">mouseScrollCumulation</a> = 0;
 
		<b>private void</b> <a id="7a8c00cf8c2cf663" href="../R/7a8c00cf8c2cf663.html" target="n" data-glyph="76,1" class="i method">WidgetMouseWheelHandler</a> (<b>object</b> <span id="r137 rd" class="r137 r">sender</span>, <a href="@0@PresentationCore/A.html#2907728f4bd9d8a3" class="t t">MouseWheelEventArgs</a> <span id="r138 rd" class="r138 r">e</span>)
		{
			<a href="#e8c577bd2e70d6a5" class="i field">mouseScrollCumulation</a> += <span class="r138 r">e</span>.<a href="@0@PresentationCore/A.html#da89a6a0b369523a" class="i property">Delta</a>;
			<b>int</b> <span id="r139 rd" class="r139 r">jumps</span> = <a href="#e8c577bd2e70d6a5" class="i field">mouseScrollCumulation</a> / 120;
			<a href="#e8c577bd2e70d6a5" class="i field">mouseScrollCumulation</a> %= 120;
			<a href="@0@WindowsBase/A.html#9120327717fc513d" class="k">var</a> <span id="r140 rd" class="r140 r">p</span> = <span class="r138 r">e</span>.<a href="@0@PresentationCore/A.html#912fdca8fa7cbeed" class="i method">GetPosition</a>(<a href="#bfe5b8d8f773f1ef" class="i property">Widget</a>);
			<a href="Backend.cs.html#a1d66241a0d4621f" class="i property">Context</a>.<a href="/Xwt3/A.html#5db8b61c4608e0e0" class="i method">InvokeUserCode</a> (<b>delegate</b> {
				<b>for</b> (<b>int</b> <span id="r141 rd" class="r141 r">i</span> = 0; <span class="r141 r">i</span> &lt; <span class="r139 r">jumps</span>; <span class="r141 r">i</span>++) {
					<a href="/Xwt3/A.html#541cbdd9ef7c6d46" class="k">var</a> <span id="r142 rd" class="r142 r">a</span> = <b>new</b> <a href="/Xwt3/A.html#6668a8b177e3be1f" class="t constructor">MouseScrolledEventArgs</a>(<span class="r138 r">e</span>.<a href="@0@PresentationCore/A.html#6be199bb1e2388b8" class="i property">Timestamp</a>, <span class="r140 r">p</span>.<a href="@0@WindowsBase/A.html#556ea90344bfb3ea" class="i property">X</a>, <span class="r140 r">p</span>.<a href="@0@WindowsBase/A.html#0a42b94edb8c27ab" class="i property">Y</a>, <a href="/Xwt3/A.html#a0b82e7e62c1869a" class="t t">ScrollDirection</a>.<a href="/Xwt3/A.html#0fc53f7b5c932d43" class="i field">Up</a>);
					<a href="#d1158759327ca5a9" class="i field">eventSink</a>.<a href="/Xwt3/A.html#4de0f01f35a56084" class="i method">OnMouseScrolled</a>(<span class="r142 r">a</span>);
					<b>if</b> (<span class="r142 r">a</span>.<a href="/Xwt3/A.html#fc41226cc3e46c7f" class="i property">Handled</a>)
						<span class="r138 r">e</span>.<a href="@0@PresentationCore/A.html#f2bcc08494fea0e6" class="i property">Handled</a> = <b>true</b>;
				}
				<b>for</b> (<b>int</b> <span id="r143 rd" class="r143 r">i</span> = 0; <span class="r143 r">i</span> &gt; <span class="r139 r">jumps</span>; <span class="r143 r">i</span>--) {
					<a href="/Xwt3/A.html#541cbdd9ef7c6d46" class="k">var</a> <span id="r144 rd" class="r144 r">a</span> = <b>new</b> <a href="/Xwt3/A.html#6668a8b177e3be1f" class="t constructor">MouseScrolledEventArgs</a>(<span class="r138 r">e</span>.<a href="@0@PresentationCore/A.html#6be199bb1e2388b8" class="i property">Timestamp</a>, <span class="r140 r">p</span>.<a href="@0@WindowsBase/A.html#556ea90344bfb3ea" class="i property">X</a>, <span class="r140 r">p</span>.<a href="@0@WindowsBase/A.html#0a42b94edb8c27ab" class="i property">Y</a>, <a href="/Xwt3/A.html#a0b82e7e62c1869a" class="t t">ScrollDirection</a>.<a href="/Xwt3/A.html#bd1a6301706eb9d6" class="i field">Down</a>);
					<a href="#d1158759327ca5a9" class="i field">eventSink</a>.<a href="/Xwt3/A.html#4de0f01f35a56084" class="i method">OnMouseScrolled</a>(<span class="r144 r">a</span>);
					<b>if</b> (<span class="r144 r">a</span>.<a href="/Xwt3/A.html#fc41226cc3e46c7f" class="i property">Handled</a>)
						<span class="r138 r">e</span>.<a href="@0@PresentationCore/A.html#f2bcc08494fea0e6" class="i property">Handled</a> = <b>true</b>;
				}
			});
		}
 
		<b>private void</b> <a id="fb912eb1f460370b" href="../R/fb912eb1f460370b.html" target="n" data-glyph="76,1" class="i method">WidgetOnSizeChanged</a> (<b>object</b> <span id="r145 rd" class="r145 r">sender</span>, <a href="@0@PresentationFramework/A.html#cde359118c1bffb9" class="t t">SizeChangedEventArgs</a> <span id="r146 rd" class="r146 r">e</span>)
		{
			<b>if</b> (<a href="#bfe5b8d8f773f1ef" class="i property">Widget</a>.<a href="@0@PresentationCore/A.html#90bc97a020426061" class="i property">IsVisible</a>)
				<a href="Backend.cs.html#a1d66241a0d4621f" class="i property">Context</a>.<a href="/Xwt3/A.html#5db8b61c4608e0e0" class="i method">InvokeUserCode</a> (<a href="#551a9684f2eb2b53" class="k">this</a>.<a href="#d1158759327ca5a9" class="i field">eventSink</a>.<a href="/Xwt3/A.html#b97b42894c03a679" class="i method">OnBoundsChanged</a>);
		}
	}
 
	<b>public interface</b> <a id="447ac45082ea1793" href="../R/447ac45082ea1793.html" target="n" data-glyph="48,0" class="t t">IWpfWidgetBackend</a>
	{
		<a href="@0@PresentationFramework/A.html#d2d98a3022fbac2f" class="t t">FrameworkElement</a> <a id="6af458e373847eea" href="../R/6af458e373847eea.html" target="n" data-glyph="102,1" class="i property">Widget</a> { <b>get</b>; }
	}
 
	<b>public interface</b> <a id="cc0e50a0d5748c2d" href="../R/cc0e50a0d5748c2d.html" target="n" data-glyph="48,0" class="t t">IWpfWidget</a>
	{
		<a href="#551a9684f2eb2b53" class="t t">WidgetBackend</a> <a id="993669e9ca4e75f4" href="../R/993669e9ca4e75f4.html" target="n" data-glyph="102,1" class="i property">Backend</a> { <b>get</b>; <b>set</b>; }
	}
}
</pre></td></tr></table></div></body></html>
