<!DOCTYPE html>
<html><head><title>NotebookBackend.cs</title><link rel="stylesheet" href="../../styles.css"><script src="../../scripts.js"></script></head>
<body class="cB" onload="i(171);"><div class="dH">
<table style="width: 100%">
<tr><td>File: <a id="filePath" class="blueLink" href="/#Xwt3.WPF/Xwt.WPFBackend/NotebookBackend.cs" target="_top">Xwt.WPFBackend\NotebookBackend.cs</a><br/></td><td></td></tr>
<tr><td>Project: <a id="projectPath" class="blueLink" href="/#Xwt3.WPF" target="_top">xwt\Xwt.WPF\Xwt3.WPF.csproj</a> (Xwt3.WPF)</td><td></td></tr>
</table>
</div>
<div class="cz"><table class="tb" cellpadding="0" cellspacing="0"><tr><td valign="top" align="right"><pre id="ln"></pre></td><td valign="top" align="left"><pre id="code">
<span class="c">// </span>
<span class="c">// NotebookBackend.cs</span>
<span class="c">//  </span>
<span class="c">// Author:</span>
<span class="c">//       Thomas Ziegler &lt;ziegler.thomas@web.de&gt;</span>
<span class="c">//       Eric Maupin &lt;ermau@xamarin.com&gt;</span>
<span class="c">// </span>
<span class="c">// Copyright (c) 2012 Thomas Ziegler</span>
<span class="c">// Copyright (c) 2012 Xamarin, Inc.</span>
<span class="c">// </span>
<span class="c">// Permission is hereby granted, free of charge, to any person obtaining a copy</span>
<span class="c">// of this software and associated documentation files (the &quot;Software&quot;), to deal</span>
<span class="c">// in the Software without restriction, including without limitation the rights</span>
<span class="c">// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell</span>
<span class="c">// copies of the Software, and to permit persons to whom the Software is</span>
<span class="c">// furnished to do so, subject to the following conditions:</span>
<span class="c">// </span>
<span class="c">// The above copyright notice and this permission notice shall be included in</span>
<span class="c">// all copies or substantial portions of the Software.</span>
<span class="c">// </span>
<span class="c">// THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR</span>
<span class="c">// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,</span>
<span class="c">// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE</span>
<span class="c">// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER</span>
<span class="c">// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,</span>
<span class="c">// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN</span>
<span class="c">// THE SOFTWARE.</span>
<b>using</b> <span class="i n">System</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Collections</span>.<span class="i n">Generic</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Linq</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Windows</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Windows</span>.<span class="i n">Controls</span>;

<b>using</b> <span class="i">SWC</span> = <span class="i n">System</span>.<span class="i n">Windows</span>.<span class="i n">Controls</span>;
<b>using</b> <span class="i n">Xwt</span>.<span class="i n">Backends</span>;

<b>namespace</b> <span class="i n">Xwt</span>.<span class="i n">WPFBackend</span>
{
	<b>public class</b> <a id="6d756fc26f27060e" href="../R/6d756fc26f27060e.html" target="n" data-glyph="0,0" class="t t">NotebookBackend</a> : <a href="WidgetBackend.cs.html#551a9684f2eb2b53" class="t t">WidgetBackend</a>, <a href="/Xwt3/A.html#613a1598b02224f9" class="t t">INotebookBackend</a>
	{
		<b>public</b> <a id="47560a9fb56bd5b0" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i constructor">NotebookBackend</a> ()
		{
			<a href="#ed49dd415d9c5ac0" class="i property">TabControl</a> = <b>new</b> <a href="#6beac9bf8aa0d5b2" class="t constructor">WpfNotebook</a> ();
		}

		<b>public int</b> <a id="2845df048412e5f9" href="../R/2845df048412e5f9.html" target="n" data-glyph="102,1" class="i property">CurrentTab</a> {
			<b>get</b> { <b>return</b> <a href="#ed49dd415d9c5ac0" class="i property">TabControl</a>.<a href="@0@PresentationFramework/A.html#ca98f21336190217" class="i property">SelectedIndex</a>; }
			<b>set</b> { <a href="#ed49dd415d9c5ac0" class="i property">TabControl</a>.<a href="@0@PresentationFramework/A.html#ca98f21336190217" class="i property">SelectedIndex</a> = <b>value</b>; }
		}

		<b>public</b> <span class="i n">Xwt</span>.<a href="/Xwt3/A.html#232d7268c6401f58" class="t t">NotebookTabOrientation</a> <a id="0ed830e2cbcaced0" href="../R/0ed830e2cbcaced0.html" target="n" data-glyph="102,1" class="i property">TabOrientation</a> {
			<b>get</b> {
				<span class="i n">Xwt</span>.<a href="/Xwt3/A.html#232d7268c6401f58" class="t t">NotebookTabOrientation</a> <span id="r0 rd" class="r0 r">tabPos</span> = <span class="i n">Xwt</span>.<a href="/Xwt3/A.html#232d7268c6401f58" class="t t">NotebookTabOrientation</a>.<a href="/Xwt3/A.html#dac04c343660342b" class="i field">Top</a>;
				<a href="@0@mscorlib/A.html#36729210e317a805" class="t t">Enum</a>.<a href="@0@mscorlib/A.html#6da2ad9fd66be476" class="i method">TryParse</a> (<a href="#ed49dd415d9c5ac0" class="i property">TabControl</a>.<a href="@0@PresentationFramework/A.html#1ab091c2fc73da7a" class="i property">TabStripPlacement</a>.<a href="@0@mscorlib/A.html#1365cfeffd45409d" class="i method">ToString</a> (), <b>out</b> <span class="r0 r">tabPos</span>);
				<b>return</b> <span class="r0 r">tabPos</span>;
			}
			<b>set</b> {
				<span class="i n">SWC</span>.<a href="@0@PresentationFramework/A.html#247b2a9cc539228a" class="t t">Dock</a> <span id="r1 rd" class="r1 r">tabPos</span> = <span class="i n">SWC</span>.<a href="@0@PresentationFramework/A.html#247b2a9cc539228a" class="t t">Dock</a>.<a href="@0@PresentationFramework/A.html#60fa0559eeaa26e6" class="i field">Top</a>;
				<a href="@0@mscorlib/A.html#36729210e317a805" class="t t">Enum</a>.<a href="@0@mscorlib/A.html#6da2ad9fd66be476" class="i method">TryParse</a> (<b>value</b>.<a href="@0@mscorlib/A.html#1365cfeffd45409d" class="i method">ToString</a> (), <b>out</b> <span class="r1 r">tabPos</span>);
				<a href="#ed49dd415d9c5ac0" class="i property">TabControl</a>.<a href="@0@PresentationFramework/A.html#1ab091c2fc73da7a" class="i property">TabStripPlacement</a> = <span class="r1 r">tabPos</span>;
			}
		}

		<b>public void</b> <a id="d580ec1b49132674" href="../R/d580ec1b49132674.html" target="n" data-glyph="72,1" class="i method">Add</a> (<a href="/Xwt3/A.html#afaa20aa76724b41" class="t t">IWidgetBackend</a> <span id="r2 rd" class="r2 r">widget</span>, <a href="/Xwt3/A.html#c6f188d5816a2dee" class="t t">NotebookTab</a> <span id="r3 rd" class="r3 r">tab</span>)
		{
			<a href="@0@PresentationCore/A.html#7911653ccb506216" class="t t">UIElement</a> <span id="r4 rd" class="r4 r">element</span> = (<a href="@0@PresentationCore/A.html#7911653ccb506216" class="t t">UIElement</a>)<span class="r2 r">widget</span>.<a href="/Xwt3/A.html#b85c5c5d48346e23" class="i property">NativeWidget</a>;
			<a href="@0@PresentationFramework/A.html#f6a592e69d86f1fc" class="t t">TabItem</a> <span id="r5 rd" class="r5 r">ti</span> = <b>new</b> <a href="@0@PresentationFramework/A.html#25e3e996737b1c31" class="t constructor">TabItem</a> {
				<a href="@0@PresentationFramework/A.html#2811283b5ba60413" class="i property">Content</a> = <span class="r4 r">element</span>,
				<a href="@0@PresentationFramework/A.html#2cc7278b4ea8419d" class="i property">Header</a> = <span class="r3 r">tab</span>.<a href="/Xwt3/A.html#ec1949c851495b82" class="i property">Label</a>,
				<a href="@0@PresentationFramework/A.html#53151b3ab7c73170" class="i property">Tag</a> = <span class="r3 r">tab</span>
			};

			<a href="@0@PresentationFramework/A.html#d2d98a3022fbac2f" class="t t">FrameworkElement</a> <span id="r6 rd" class="r6 r">felement</span> = <span class="r4 r">element</span> <b>as</b> <a href="@0@PresentationFramework/A.html#d2d98a3022fbac2f" class="t t">FrameworkElement</a>;
			<b>if</b> (<span class="r6 r">felement</span> != <b>null</b>) {
				<span class="r6 r">felement</span>.<a href="@0@PresentationFramework/A.html#53151b3ab7c73170" class="i property">Tag</a> = <span class="r2 r">widget</span>;
				<span class="r6 r">felement</span>.<a href="@0@PresentationFramework/A.html#a815b4f12f279dee" class="i">Loaded</a> += <a href="#c2ab160663c48d9a" class="i method">OnContentLoaded</a>;
			}

			<a href="#ed49dd415d9c5ac0" class="i property">TabControl</a>.<a href="@0@PresentationFramework/A.html#54366ee76d2f1106" class="i property">Items</a>.<a href="@0@PresentationFramework/A.html#d8832077b4ca2360" class="i method">Add</a> (<span class="r5 r">ti</span>);
			
			<b>if</b> (<a href="#ed49dd415d9c5ac0" class="i property">TabControl</a>.<a href="@0@PresentationFramework/A.html#ca98f21336190217" class="i property">SelectedIndex</a> == -1)
				<a href="#ed49dd415d9c5ac0" class="i property">TabControl</a>.<a href="@0@PresentationFramework/A.html#ca98f21336190217" class="i property">SelectedIndex</a> = 0;
		}

		<b>public void</b> <a id="de6ea57962cac655" href="../R/de6ea57962cac655.html" target="n" data-glyph="72,1" class="i method">Remove</a> (<a href="/Xwt3/A.html#afaa20aa76724b41" class="t t">IWidgetBackend</a> <span id="r7 rd" class="r7 r">widget</span>)
		{
			<a href="@0@PresentationCore/A.html#7911653ccb506216" class="t t">UIElement</a> <span id="r8 rd" class="r8 r">element</span> = <span class="r7 r">widget</span>.<a href="/Xwt3/A.html#b85c5c5d48346e23" class="i property">NativeWidget</a> <b>as</b> <a href="@0@PresentationCore/A.html#7911653ccb506216" class="t t">UIElement</a>;
			<b>if</b> (<span class="r8 r">element</span> == <b>null</b>)
				<b>throw</b> <b>new</b> <a href="@0@mscorlib/A.html#71d200dcf0047f8b" class="t constructor">ArgumentException</a> ();

			<a href="@0@PresentationFramework/A.html#d2d98a3022fbac2f" class="t t">FrameworkElement</a> <span id="r9 rd" class="r9 r">felement</span> = <span class="r8 r">element</span> <b>as</b> <a href="@0@PresentationFramework/A.html#d2d98a3022fbac2f" class="t t">FrameworkElement</a>;
			<b>if</b> (<span class="r9 r">felement</span> != <b>null</b>)
				<span class="r9 r">felement</span>.<a href="@0@PresentationFramework/A.html#a815b4f12f279dee" class="i">Loaded</a> -= <a href="#c2ab160663c48d9a" class="i method">OnContentLoaded</a>;
			
			<b>for</b> (<b>int</b> <span id="r10 rd" class="r10 r">i</span> = 0; <span class="r10 r">i</span> &lt; <a href="#ed49dd415d9c5ac0" class="i property">TabControl</a>.<a href="@0@PresentationFramework/A.html#54366ee76d2f1106" class="i property">Items</a>.<a href="@0@PresentationFramework/A.html#4808b70b6149b33d" class="i property">Count</a>; ++<span class="r10 r">i</span>) {
				<a href="@0@PresentationFramework/A.html#f6a592e69d86f1fc" class="t t">TabItem</a> <span id="r11 rd" class="r11 r">tab</span> = (<a href="@0@PresentationFramework/A.html#f6a592e69d86f1fc" class="t t">TabItem</a>)<a href="#ed49dd415d9c5ac0" class="i property">TabControl</a>.<a href="@0@PresentationFramework/A.html#54366ee76d2f1106" class="i property">Items</a> [<span class="r10 r">i</span>];
				<b>if</b> (<span class="r11 r">tab</span>.<a href="@0@PresentationFramework/A.html#2811283b5ba60413" class="i property">Content</a> == <span class="r7 r">widget</span>.<a href="/Xwt3/A.html#b85c5c5d48346e23" class="i property">NativeWidget</a>) {
					<a href="#ed49dd415d9c5ac0" class="i property">TabControl</a>.<a href="@0@PresentationFramework/A.html#54366ee76d2f1106" class="i property">Items</a>.<a href="@0@PresentationFramework/A.html#589cf66c40dc64ba" class="i method">RemoveAt</a> (<span class="r10 r">i</span>);
					<b>break</b>;
				}
			}
		}

		<b>public void</b> <a id="3037d77da4fb0730" href="../R/3037d77da4fb0730.html" target="n" data-glyph="72,1" class="i method">UpdateLabel</a> (<a href="/Xwt3/A.html#c6f188d5816a2dee" class="t t">NotebookTab</a> <span id="r12 rd" class="r12 r">tab</span>, <b>string</b> <span id="r13 rd" class="r13 r">hint</span>)
		{
			<a href="@0@PresentationFramework/A.html#f6a592e69d86f1fc" class="t t">TabItem</a> <span id="r14 rd" class="r14 r">item</span> = <a href="#ed49dd415d9c5ac0" class="i property">TabControl</a>.<a href="@0@PresentationFramework/A.html#54366ee76d2f1106" class="i property">Items</a>.<a href="@0@System.Core/A.html#27bb217a6d5457ec" class="i method">Cast</a>&lt;<a href="@0@PresentationFramework/A.html#f6a592e69d86f1fc" class="t t">TabItem</a>&gt; ().<a href="@0@System.Core/A.html#b7e5965cab68b1cf" class="i method">FirstOrDefault</a> (<span id="r15 rd" class="r15 r">t</span> =&gt; <span class="r15 r">t</span>.<a href="@0@PresentationFramework/A.html#53151b3ab7c73170" class="i property">Tag</a> == <span class="r12 r">tab</span>);
			<b>if</b> (<span class="r14 r">item</span> != <b>null</b>)
				<span class="r14 r">item</span>.<a href="@0@PresentationFramework/A.html#2cc7278b4ea8419d" class="i property">Header</a> = <span class="r12 r">tab</span>.<a href="/Xwt3/A.html#ec1949c851495b82" class="i property">Label</a>;
		}

		<b>public override void</b> <a id="bffc3f6e4d89dfd8" href="../R/bffc3f6e4d89dfd8.html" target="n" data-glyph="72,1" class="i method">EnableEvent</a> (<b>object</b> <span id="r16 rd" class="r16 r">eventId</span>)
		{
			<a href="WidgetBackend.cs.html#551a9684f2eb2b53" class="k">base</a>.<a href="WidgetBackend.cs.html#f8b0380971e0180b" class="i method">EnableEvent</a> (<span class="r16 r">eventId</span>);
			<b>if</b> (<span class="r16 r">eventId</span> <b>is</b> <a href="/Xwt3/A.html#a4c97f823b954db1" class="t t">NotebookEvent</a>) {
				<b>switch</b> ((<a href="/Xwt3/A.html#a4c97f823b954db1" class="t t">NotebookEvent</a>)<span class="r16 r">eventId</span>) {
				<b>case</b> <a href="/Xwt3/A.html#a4c97f823b954db1" class="t t">NotebookEvent</a>.<a href="/Xwt3/A.html#19aa746b580a0598" class="i field">CurrentTabChanged</a>:
					<a href="#ed49dd415d9c5ac0" class="i property">TabControl</a>.<a href="@0@PresentationFramework/A.html#76f03b62b2915375" class="i">SelectionChanged</a> += <a href="#e1f4414227332499" class="i method">OnCurrentTabChanged</a>;
					<b>break</b>;
				}
			}
		}

		<b>public override void</b> <a id="0520b4bc4955dcf3" href="../R/0520b4bc4955dcf3.html" target="n" data-glyph="72,1" class="i method">DisableEvent</a> (<b>object</b> <span id="r17 rd" class="r17 r">eventId</span>)
		{
			<a href="WidgetBackend.cs.html#551a9684f2eb2b53" class="k">base</a>.<a href="WidgetBackend.cs.html#8e6c62ffdbf4f00d" class="i method">DisableEvent</a> (<span class="r17 r">eventId</span>);
			<b>if</b> (<span class="r17 r">eventId</span> <b>is</b> <a href="/Xwt3/A.html#a4c97f823b954db1" class="t t">NotebookEvent</a>) {
				<b>switch</b> ((<a href="/Xwt3/A.html#a4c97f823b954db1" class="t t">NotebookEvent</a>)<span class="r17 r">eventId</span>) {
				<b>case</b> <a href="/Xwt3/A.html#a4c97f823b954db1" class="t t">NotebookEvent</a>.<a href="/Xwt3/A.html#19aa746b580a0598" class="i field">CurrentTabChanged</a>:
					<a href="#ed49dd415d9c5ac0" class="i property">TabControl</a>.<a href="@0@PresentationFramework/A.html#76f03b62b2915375" class="i">SelectionChanged</a> -= <a href="#e1f4414227332499" class="i method">OnCurrentTabChanged</a>;
					<b>break</b>;
				}
			}
		}

		<b>private void</b> <a id="e1f4414227332499" href="../R/e1f4414227332499.html" target="n" data-glyph="76,1" class="i method">OnCurrentTabChanged</a> (<b>object</b> <span id="r18 rd" class="r18 r">sender</span>, <a href="@0@PresentationFramework/A.html#c488465397cb1452" class="t t">SelectionChangedEventArgs</a> <span id="r19 rd" class="r19 r">e</span>)
		{
			<a href="Backend.cs.html#a1d66241a0d4621f" class="i property">Context</a>.<a href="/Xwt3/A.html#5db8b61c4608e0e0" class="i method">InvokeUserCode</a> (<a href="#6c8f7e7059d21a04" class="i property">NotebookEventSink</a>.<a href="/Xwt3/A.html#4fec54f9fd089bd6" class="i method">OnCurrentTabChanged</a>);
		}

		<b>protected</b> <a href="@0@PresentationFramework/A.html#aa40249032b289f4" class="t t">TabControl</a> <a id="ed49dd415d9c5ac0" href="../R/ed49dd415d9c5ac0.html" target="n" data-glyph="105,1" class="i property">TabControl</a> {
			<b>get</b> { <b>return</b> (<a href="@0@PresentationFramework/A.html#aa40249032b289f4" class="t t">TabControl</a>)<a href="WidgetBackend.cs.html#bfe5b8d8f773f1ef" class="i property">Widget</a>; }
			<b>set</b> { <a href="WidgetBackend.cs.html#bfe5b8d8f773f1ef" class="i property">Widget</a> = <b>value</b>; }
		}

		<b>protected</b> <a href="/Xwt3/A.html#26460ad9944217db" class="t t">INotebookEventSink</a> <a id="6c8f7e7059d21a04" href="../R/6c8f7e7059d21a04.html" target="n" data-glyph="105,1" class="i property">NotebookEventSink</a> {
			<b>get</b> { <b>return</b> (<a href="/Xwt3/A.html#26460ad9944217db" class="t t">INotebookEventSink</a>) <a href="WidgetBackend.cs.html#6eebdc0ff8c33e10" class="i property">EventSink</a>; }
		}

		<b>private void</b> <a id="c2ab160663c48d9a" href="../R/c2ab160663c48d9a.html" target="n" data-glyph="76,1" class="i method">OnContentLoaded</a> (<b>object</b> <span id="r20 rd" class="r20 r">sender</span>, <a href="@0@PresentationCore/A.html#3089ebf2139eba9d" class="t t">RoutedEventArgs</a> <span id="r21 rd" class="r21 r">routedEventArgs</span>)
		{
			<a href="WidgetBackend.cs.html#551a9684f2eb2b53" class="t t">WidgetBackend</a> <span id="r22 rd" class="r22 r">backend</span> = (<a href="WidgetBackend.cs.html#551a9684f2eb2b53" class="t t">WidgetBackend</a>)((<a href="@0@PresentationFramework/A.html#d2d98a3022fbac2f" class="t t">FrameworkElement</a>) <span class="r20 r">sender</span>).<a href="@0@PresentationFramework/A.html#53151b3ab7c73170" class="i property">Tag</a>;

			<a href="/Xwt3/A.html#f1551041ed661732" class="k">var</a> <span id="r23 rd" class="r23 r">surface</span> = <span class="r22 r">backend</span>.<a href="WidgetBackend.cs.html#a0cac2053ea95bf6" class="i property">Frontend</a> <b>as</b> <a href="/Xwt3/A.html#f1551041ed661732" class="t t">IWidgetSurface</a>;
			<b>if</b> (<span class="r23 r">surface</span> == <b>null</b>)
				<b>return</b>;

			<span class="r23 r">surface</span>.<a href="/Xwt3/A.html#a4666bf972e0fba2" class="i method">Reallocate</a>();
		}
	}

	<b>class</b> <a id="6beac9bf8aa0d5b2" href="../R/6beac9bf8aa0d5b2.html" target="n" data-glyph="2,0" class="t t"><span id="73bcd0e054853ee7">WpfNotebook</span></a> : <span class="i n">SWC</span>.<a href="@0@PresentationFramework/A.html#aa40249032b289f4" class="t t">TabControl</a>, <a href="WidgetBackend.cs.html#cc0e50a0d5748c2d" class="t t">IWpfWidget</a>
	{
		<b>public</b> <a href="WidgetBackend.cs.html#551a9684f2eb2b53" class="t t">WidgetBackend</a> <a id="436d5db9a63b4591" href="../R/436d5db9a63b4591.html" target="n" data-glyph="102,1" class="i property">Backend</a> { <b>get</b>; <b>set</b>; }

		<b>protected override</b> <span class="i n">System</span>.<span class="i n">Windows</span>.<a href="@0@WindowsBase/A.html#a844b9b525c2088c" class="t t">Size</a> <a id="03665da92d902d27" href="../R/03665da92d902d27.html" target="n" data-glyph="75,1" class="i method">MeasureOverride</a> (<span class="i n">System</span>.<span class="i n">Windows</span>.<a href="@0@WindowsBase/A.html#a844b9b525c2088c" class="t t">Size</a> <span id="r24 rd" class="r24 r">constraint</span>)
		{
			<a href="@0@WindowsBase/A.html#a844b9b525c2088c" class="k">var</a> <span id="r25 rd" class="r25 r">s</span> = <a href="@0@PresentationFramework/A.html#aa40249032b289f4" class="k">base</a>.<a href="@0@PresentationFramework/A.html#df065fbb00809e59" class="i method">MeasureOverride</a> (<span class="r24 r">constraint</span>);
			<b>return</b> <a href="#436d5db9a63b4591" class="i property">Backend</a>.<a href="WidgetBackend.cs.html#10b9740f443f1be6" class="i method">MeasureOverride</a> (<span class="r24 r">constraint</span>, <span class="r25 r">s</span>);
		}
	}
}</pre></td></tr></table></div></body></html>
