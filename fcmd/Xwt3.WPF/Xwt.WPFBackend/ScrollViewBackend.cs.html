<!DOCTYPE html>
<html><head><title>ScrollViewBackend.cs</title><link rel="stylesheet" href="../../styles.css"><script src="../../scripts.js"></script></head>
<body class="cB" onload="i(209);"><div class="dH">
<table style="width: 100%">
<tr><td>File: <a id="filePath" class="blueLink" href="/#Xwt3.WPF/Xwt.WPFBackend/ScrollViewBackend.cs" target="_top">Xwt.WPFBackend\ScrollViewBackend.cs</a><br/></td><td></td></tr>
<tr><td>Project: <a id="projectPath" class="blueLink" href="/#Xwt3.WPF" target="_top">xwt\Xwt.WPF\Xwt3.WPF.csproj</a> (Xwt3.WPF)</td><td></td></tr>
</table>
</div>
<div class="cz"><table class="tb" cellpadding="0" cellspacing="0"><tr><td valign="top" align="right"><pre id="ln"></pre></td><td valign="top" align="left"><pre id="code">
<span class="c">// </span>
<span class="c">// ScrollViewBackend.cs</span>
<span class="c">//  </span>
<span class="c">// Author:</span>
<span class="c">//	   Eric Maupin &lt;ermau@xamarin.com&gt;</span>
<span class="c">// </span>
<span class="c">// Copyright (c) 2012 Xamarin, Inc.</span>
<span class="c">// </span>
<span class="c">// Permission is hereby granted, free of charge, to any person obtaining a copy</span>
<span class="c">// of this software and associated documentation files (the &quot;Software&quot;), to deal</span>
<span class="c">// in the Software without restriction, including without limitation the rights</span>
<span class="c">// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell</span>
<span class="c">// copies of the Software, and to permit persons to whom the Software is</span>
<span class="c">// furnished to do so, subject to the following conditions:</span>
<span class="c">// </span>
<span class="c">// The above copyright notice and this permission notice shall be included in</span>
<span class="c">// all copies or substantial portions of the Software.</span>
<span class="c">// </span>
<span class="c">// THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR</span>
<span class="c">// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,</span>
<span class="c">// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE</span>
<span class="c">// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER</span>
<span class="c">// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,</span>
<span class="c">// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN</span>
<span class="c">// THE SOFTWARE.</span>

<b>using</b> <span class="i n">System</span>;
<b>using</b> <span class="i n">Xwt</span>.<span class="i n">Backends</span>;
<b>using</b> <span class="i n">Xwt</span>.<span class="i n">WPFBackend</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Windows</span>.<span class="i n">Controls</span>;

<b>namespace</b> <span class="i n">Xwt</span>.<span class="i n">WPFBackend</span>
{
	<b>public class</b> <a id="0afea9b045a7eafb" href="../R/0afea9b045a7eafb.html" target="n" data-glyph="0,0" class="t t">ScrollViewBackend</a>
		: <a href="WidgetBackend.cs.html#551a9684f2eb2b53" class="t t">WidgetBackend</a>, <a href="/Xwt3/A.html#0d75a3dbe76d7ecf" class="t t">IScrollViewBackend</a>
	{
		<b>public</b> <a id="bc4d0cbf6bb29d67" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i constructor">ScrollViewBackend</a>()
		{
			<a href="#21c055d7adf217b9" class="i property">ScrollViewer</a> = <b>new</b> <a href="ExScrollViewer.cs.html#7f7cd64efce7aee7" class="t constructor">ExScrollViewer</a>();
		}

		<b>public</b> <a href="/Xwt3/A.html#db9ace7b1c7d9c22" class="t t">ScrollPolicy</a> <a id="e1166d14f5823050" href="../R/e1166d14f5823050.html" target="n" data-glyph="102,1" class="i property">VerticalScrollPolicy</a>
		{
			<b>get</b> { <b>return</b> <a href="#f63e4d20c8263c60" class="i method">GetScrollPolicy</a> (<a href="#21c055d7adf217b9" class="i property">ScrollViewer</a>.<a href="@0@PresentationFramework/A.html#28ce83b7afba6596" class="i property">VerticalScrollBarVisibility</a>); }
			<b>set</b> { <a href="#21c055d7adf217b9" class="i property">ScrollViewer</a>.<a href="@0@PresentationFramework/A.html#28ce83b7afba6596" class="i property">VerticalScrollBarVisibility</a> = <a href="#eda19b4368200319" class="i method">GetScrollVisibility</a> (<b>value</b>); }
		}

		<b>public</b> <a href="/Xwt3/A.html#db9ace7b1c7d9c22" class="t t">ScrollPolicy</a> <a id="af3f3f4e5e92b059" href="../R/af3f3f4e5e92b059.html" target="n" data-glyph="102,1" class="i property">HorizontalScrollPolicy</a>
		{
			<b>get</b> { <b>return</b> <a href="#f63e4d20c8263c60" class="i method">GetScrollPolicy</a> (<a href="#21c055d7adf217b9" class="i property">ScrollViewer</a>.<a href="@0@PresentationFramework/A.html#1ad4e0e9b72d0a71" class="i property">HorizontalScrollBarVisibility</a>); }
			<b>set</b> { <a href="#21c055d7adf217b9" class="i property">ScrollViewer</a>.<a href="@0@PresentationFramework/A.html#1ad4e0e9b72d0a71" class="i property">HorizontalScrollBarVisibility</a> = <a href="#eda19b4368200319" class="i method">GetScrollVisibility</a> (<b>value</b>); }
		}

		<a href="/Xwt3/A.html#dd38dbd913dc552d" class="t t">IScrollControlBackend</a> <a id="654cc3776c06feef" href="../R/654cc3776c06feef.html" target="n" data-glyph="46,1" class="i field">vscrollControl</a>;
		<b>public</b> <a href="/Xwt3/A.html#dd38dbd913dc552d" class="t t">IScrollControlBackend</a> <a id="154320ea7f13a9d7" href="../R/154320ea7f13a9d7.html" target="n" data-glyph="72,1" class="i method">CreateVerticalScrollControl</a>()
		{
			<b>if</b> (<a href="#654cc3776c06feef" class="i field">vscrollControl</a> == <b>null</b>)
				<a href="#654cc3776c06feef" class="i field">vscrollControl</a> = <b>new</b> <a href="ScrollControlBackend.cs.html#9251e432c6384bdf" class="t constructor">ScrollControlBackend</a>(<a href="#21c055d7adf217b9" class="i property">ScrollViewer</a>, <b>true</b>);
			<b>return</b> <a href="#654cc3776c06feef" class="i field">vscrollControl</a>;
		}

		<a href="/Xwt3/A.html#dd38dbd913dc552d" class="t t">IScrollControlBackend</a> <a id="c281728ccf3c4a17" href="../R/c281728ccf3c4a17.html" target="n" data-glyph="46,1" class="i field">hscrollControl</a>;
		<b>public</b> <a href="/Xwt3/A.html#dd38dbd913dc552d" class="t t">IScrollControlBackend</a> <a id="f55ca80013f31e5f" href="../R/f55ca80013f31e5f.html" target="n" data-glyph="72,1" class="i method">CreateHorizontalScrollControl</a>()
		{
			<b>if</b> (<a href="#c281728ccf3c4a17" class="i field">hscrollControl</a> == <b>null</b>)
				<a href="#c281728ccf3c4a17" class="i field">hscrollControl</a> = <b>new</b> <a href="ScrollControlBackend.cs.html#9251e432c6384bdf" class="t constructor">ScrollControlBackend</a>(<a href="#21c055d7adf217b9" class="i property">ScrollViewer</a>, <b>false</b>);
			<b>return</b> <a href="#c281728ccf3c4a17" class="i field">hscrollControl</a>;
		}

		<b>protected override double</b> <a id="ee50e67a66857239" href="../R/ee50e67a66857239.html" target="n" data-glyph="105,1" class="i property">DefaultNaturalHeight</a>
		{
			<b>get</b>
			{
				<b>return</b> <a href="#e1166d14f5823050" class="i property">VerticalScrollPolicy</a> != <a href="/Xwt3/A.html#db9ace7b1c7d9c22" class="t t">ScrollPolicy</a>.<a href="/Xwt3/A.html#26b5c6dad750fc8e" class="i field">Never</a> ? - 1 : -2;
			}
		}

		<b>protected override double</b> <a id="21d38d1fdd7b49f3" href="../R/21d38d1fdd7b49f3.html" target="n" data-glyph="105,1" class="i property">DefaultNaturalWidth</a>
		{
			<b>get</b>
			{
				<b>return</b> <a href="#af3f3f4e5e92b059" class="i property">HorizontalScrollPolicy</a> != <a href="/Xwt3/A.html#db9ace7b1c7d9c22" class="t t">ScrollPolicy</a>.<a href="/Xwt3/A.html#26b5c6dad750fc8e" class="i field">Never</a> ? -1 : -2;
			}
		}

		<b>private bool</b> <a id="7d597df12a47f88c" href="../R/7d597df12a47f88c.html" target="n" data-glyph="46,1" class="i field">borderVisible</a> = <b>true</b>;
		<b>public bool</b> <a id="e33bd21f7a3bb0e8" href="../R/e33bd21f7a3bb0e8.html" target="n" data-glyph="102,1" class="i property">BorderVisible</a>
		{
			<b>get</b> { <b>return</b> <a href="#0afea9b045a7eafb" class="k">this</a>.<a href="#7d597df12a47f88c" class="i field">borderVisible</a>; }
			<b>set</b>
			{
				<b>if</b> (<a href="#0afea9b045a7eafb" class="k">this</a>.<a href="#7d597df12a47f88c" class="i field">borderVisible</a> == <b>value</b>)
					<b>return</b>;

				<b>if</b> (<b>value</b>)
					<a href="#21c055d7adf217b9" class="i property">ScrollViewer</a>.<a href="@0@WindowsBase/A.html#8d908522bf9ccba7" class="i method">ClearValue</a> (<a href="@0@PresentationFramework/A.html#6750b721a2294fc5" class="t t">Control</a>.<a href="@0@PresentationFramework/A.html#68243cc7f77e6ce4" class="i field">BorderBrushProperty</a>);
				<b>else</b>
					<a href="#21c055d7adf217b9" class="i property">ScrollViewer</a>.<a href="@0@PresentationFramework/A.html#1edea3428fbbbe39" class="i property">BorderBrush</a> = <b>null</b>;

				<a href="#0afea9b045a7eafb" class="k">this</a>.<a href="#7d597df12a47f88c" class="i field">borderVisible</a> = <b>value</b>;
			}
		}

		<b>public void</b> <a id="9a698de4d3f6ce67" href="../R/9a698de4d3f6ce67.html" target="n" data-glyph="72,1" class="i method">SetChild</a> (<a href="/Xwt3/A.html#afaa20aa76724b41" class="t t">IWidgetBackend</a> <span id="r0 rd" class="r0 r">child</span>)
		{
			<span class="c">// Remove the old child before adding the new one</span>
			<span class="c">// The child has to be removed from the viewport</span>

			<b>if</b> (<a href="#21c055d7adf217b9" class="i property">ScrollViewer</a>.<a href="@0@PresentationFramework/A.html#2811283b5ba60413" class="i property">Content</a> != <b>null</b>) {
				<a href="CustomScrollViewPort.cs.html#0d36022744c86b38" class="k">var</a> <span id="r1 rd" class="r1 r">port</span> = (<a href="CustomScrollViewPort.cs.html#0d36022744c86b38" class="t t">CustomScrollViewPort</a>)<a href="#21c055d7adf217b9" class="i property">ScrollViewer</a>.<a href="@0@PresentationFramework/A.html#2811283b5ba60413" class="i property">Content</a>;
				<span class="r1 r">port</span>.<a href="@0@PresentationFramework/A.html#fb9060d71a3afc83" class="i property">Children</a>.<a href="@0@PresentationFramework/A.html#62e60fbcbfe44bc8" class="i method">Remove</a> (<span class="r1 r">port</span>.<a href="@0@PresentationFramework/A.html#fb9060d71a3afc83" class="i property">Children</a>[0]);
			}

			<b>if</b> (<span class="r0 r">child</span> == <b>null</b>)
				<b>return</b>;

			<a href="WidgetBackend.cs.html#3bb437fb6dbee40f" class="i method">SetChildPlacement</a> (<span class="r0 r">child</span>);
			<a href="ScrollAdjustmentBackend.cs.html#96e2073efffc6d72" class="t t">ScrollAdjustmentBackend</a> <span id="r2 rd" class="r2 r">vbackend</span> = <b>null</b>, <span id="r3 rd" class="r3 r">hbackend</span> = <b>null</b>;
			<a href="WidgetBackend.cs.html#551a9684f2eb2b53" class="k">var</a> <span id="r4 rd" class="r4 r">widget</span> = (<a href="WidgetBackend.cs.html#551a9684f2eb2b53" class="t t">WidgetBackend</a>)<span class="r0 r">child</span>;

			<b>if</b> (<span class="r4 r">widget</span>.<a href="WidgetBackend.cs.html#6eebdc0ff8c33e10" class="i property">EventSink</a>.<a href="/Xwt3/A.html#a508395a22ec6d2a" class="i method">SupportsCustomScrolling</a> ()) {
				<a href="#654cc3776c06feef" class="i field">vscrollControl</a> = <span class="r2 r">vbackend</span> = <b>new</b> <a href="ScrollAdjustmentBackend.cs.html#a073345c13c0ee82" class="t constructor">ScrollAdjustmentBackend</a> ();
				<a href="#c281728ccf3c4a17" class="i field">hscrollControl</a> = <span class="r3 r">hbackend</span> = <b>new</b> <a href="ScrollAdjustmentBackend.cs.html#a073345c13c0ee82" class="t constructor">ScrollAdjustmentBackend</a> ();
			}
			<a href="#21c055d7adf217b9" class="i property">ScrollViewer</a>.<a href="@0@PresentationFramework/A.html#2811283b5ba60413" class="i property">Content</a> = <b>new</b> <a href="CustomScrollViewPort.cs.html#0263eefbe3861454" class="t constructor">CustomScrollViewPort</a> (<span class="r4 r">widget</span>.<a href="WidgetBackend.cs.html#1fbd7de39e64f058" class="i property">NativeWidget</a>, <span class="r2 r">vbackend</span>, <span class="r3 r">hbackend</span>);
			<a href="#21c055d7adf217b9" class="i property">ScrollViewer</a>.<a href="@0@PresentationFramework/A.html#28c1e53036e50ef1" class="i property">CanContentScroll</a> = <b>true</b>;

			<b>if</b> (<span class="r2 r">vbackend</span> != <b>null</b>)
				<span class="r4 r">widget</span>.<a href="WidgetBackend.cs.html#6eebdc0ff8c33e10" class="i property">EventSink</a>.<a href="/Xwt3/A.html#c1959d12945b14b1" class="i method">SetScrollAdjustments</a> (<span class="r3 r">hbackend</span>, <span class="r2 r">vbackend</span>);
		}
		
		<b>public void</b> <a id="8b7caa519fa86087" href="../R/8b7caa519fa86087.html" target="n" data-glyph="72,1" class="i method">SetChildSize</a> (<a href="/Xwt3/A.html#eac7fbe727da55f3" class="t t">Size</a> <span id="r5 rd" class="r5 r">s</span>)
		{

		}

		<b>public</b> <a href="/Xwt3/A.html#c6d9d3513c691785" class="t t">Rectangle</a> <a id="1a1d9e9b71c17fe2" href="../R/1a1d9e9b71c17fe2.html" target="n" data-glyph="102,1" class="i property">VisibleRect</a>
		{
			<b>get</b>
			{
				<b>return</b> <b>new</b> <a href="/Xwt3/A.html#370723d8012de275" class="t constructor">Rectangle</a> (	<a href="#21c055d7adf217b9" class="i property">ScrollViewer</a>.<a href="@0@PresentationFramework/A.html#4e0b447a5f0334f0" class="i property">HorizontalOffset</a>,
										<a href="#21c055d7adf217b9" class="i property">ScrollViewer</a>.<a href="@0@PresentationFramework/A.html#4ee58f4e34795f41" class="i property">VerticalOffset</a>,
										<a href="#21c055d7adf217b9" class="i property">ScrollViewer</a>.<a href="@0@PresentationFramework/A.html#4daa65c3b6665079" class="i property">ViewportWidth</a>,
										<a href="#21c055d7adf217b9" class="i property">ScrollViewer</a>.<a href="@0@PresentationFramework/A.html#ef0c25b6428d0132" class="i property">ViewportHeight</a>);
			}
		}

		<b>public override void</b> <a id="c8f5b573f3ffb1e3" href="../R/c8f5b573f3ffb1e3.html" target="n" data-glyph="72,1" class="i method">EnableEvent</a> (<b>object</b> <span id="r6 rd" class="r6 r">eventId</span>)
		{
			<a href="WidgetBackend.cs.html#551a9684f2eb2b53" class="k">base</a>.<a href="WidgetBackend.cs.html#f8b0380971e0180b" class="i method">EnableEvent</a> (<span class="r6 r">eventId</span>);

			<b>if</b> (<span class="r6 r">eventId</span> <b>is</b> <a href="/Xwt3/A.html#855854b434a4d396" class="t t">ScrollViewEvent</a>) {
				<b>switch</b> ((<a href="/Xwt3/A.html#855854b434a4d396" class="t t">ScrollViewEvent</a>)<span class="r6 r">eventId</span>) {
					<b>case</b> <a href="/Xwt3/A.html#855854b434a4d396" class="t t">ScrollViewEvent</a>.<a href="/Xwt3/A.html#8bca717cdbbc4f9d" class="i field">VisibleRectChanged</a>:
						<b>break</b>;
				}
			}
		}

		<b>public override void</b> <a id="99a927681a1d7f23" href="../R/99a927681a1d7f23.html" target="n" data-glyph="72,1" class="i method">DisableEvent</a> (<b>object</b> <span id="r7 rd" class="r7 r">eventId</span>)
		{
			<a href="WidgetBackend.cs.html#551a9684f2eb2b53" class="k">base</a>.<a href="WidgetBackend.cs.html#8e6c62ffdbf4f00d" class="i method">DisableEvent</a>(<span class="r7 r">eventId</span>);

			<b>if</b> (<span class="r7 r">eventId</span> <b>is</b> <a href="/Xwt3/A.html#855854b434a4d396" class="t t">ScrollViewEvent</a>) {
				<b>switch</b> ((<a href="/Xwt3/A.html#855854b434a4d396" class="t t">ScrollViewEvent</a>)<span class="r7 r">eventId</span>) {
					<b>case</b> <a href="/Xwt3/A.html#855854b434a4d396" class="t t">ScrollViewEvent</a>.<a href="/Xwt3/A.html#8bca717cdbbc4f9d" class="i field">VisibleRectChanged</a>:
						<b>break</b>;
				}
			}
		}

		<b>protected</b> <a href="@0@PresentationFramework/A.html#488ab4a977a015eb" class="t t">ScrollViewer</a> <a id="21c055d7adf217b9" href="../R/21c055d7adf217b9.html" target="n" data-glyph="105,1" class="i property">ScrollViewer</a>
		{
			<b>get</b> { <b>return</b> (<a href="@0@PresentationFramework/A.html#488ab4a977a015eb" class="t t">ScrollViewer</a>) <a href="WidgetBackend.cs.html#bfe5b8d8f773f1ef" class="i property">Widget</a>; }
			<b>set</b> { <a href="WidgetBackend.cs.html#bfe5b8d8f773f1ef" class="i property">Widget</a> = <b>value</b>; }
		}

		<b>private</b> <a href="@0@PresentationFramework/A.html#cc606f9d55be03ae" class="t t">ScrollBarVisibility</a> <a id="eda19b4368200319" href="../R/eda19b4368200319.html" target="n" data-glyph="76,1" class="i method">GetScrollVisibility</a> (<a href="/Xwt3/A.html#db9ace7b1c7d9c22" class="t t">ScrollPolicy</a> <span id="r8 rd" class="r8 r">policy</span>)
		{
			<b>switch</b> (<span class="r8 r">policy</span>) {
				<b>case</b> <a href="/Xwt3/A.html#db9ace7b1c7d9c22" class="t t">ScrollPolicy</a>.<a href="/Xwt3/A.html#36f9e866f30f6609" class="i field">Always</a>:
					<b>return</b> <a href="@0@PresentationFramework/A.html#cc606f9d55be03ae" class="t t">ScrollBarVisibility</a>.<a href="@0@PresentationFramework/A.html#d33c12e369a1b9fc" class="i field">Visible</a>;
				<b>case</b> <a href="/Xwt3/A.html#db9ace7b1c7d9c22" class="t t">ScrollPolicy</a>.<a href="/Xwt3/A.html#c13347e95c5d1bcd" class="i field">Automatic</a>:
					<b>return</b> <a href="@0@PresentationFramework/A.html#cc606f9d55be03ae" class="t t">ScrollBarVisibility</a>.<a href="@0@PresentationFramework/A.html#0ac97049b1a1ea41" class="i field">Auto</a>;
				<b>case</b> <a href="/Xwt3/A.html#db9ace7b1c7d9c22" class="t t">ScrollPolicy</a>.<a href="/Xwt3/A.html#26b5c6dad750fc8e" class="i field">Never</a>:
					<b>return</b> <a href="@0@PresentationFramework/A.html#cc606f9d55be03ae" class="t t">ScrollBarVisibility</a>.<a href="@0@PresentationFramework/A.html#d23a3b737b4893e3" class="i field">Hidden</a>;

				<b>default</b>:
					<b>throw</b> <b>new</b> <a href="@0@mscorlib/A.html#ab0acd5f99886747" class="t constructor">NotSupportedException</a>();
			}
		}

		<b>private</b> <a href="/Xwt3/A.html#db9ace7b1c7d9c22" class="t t">ScrollPolicy</a> <a id="f63e4d20c8263c60" href="../R/f63e4d20c8263c60.html" target="n" data-glyph="76,1" class="i method">GetScrollPolicy</a> (<a href="@0@PresentationFramework/A.html#cc606f9d55be03ae" class="t t">ScrollBarVisibility</a> <span id="r9 rd" class="r9 r">visibility</span>)
		{
			<b>switch</b> (<span class="r9 r">visibility</span>) {
				<b>case</b> <a href="@0@PresentationFramework/A.html#cc606f9d55be03ae" class="t t">ScrollBarVisibility</a>.<a href="@0@PresentationFramework/A.html#0ac97049b1a1ea41" class="i field">Auto</a>:
					<b>return</b> <a href="/Xwt3/A.html#db9ace7b1c7d9c22" class="t t">ScrollPolicy</a>.<a href="/Xwt3/A.html#c13347e95c5d1bcd" class="i field">Automatic</a>;
				<b>case</b> <a href="@0@PresentationFramework/A.html#cc606f9d55be03ae" class="t t">ScrollBarVisibility</a>.<a href="@0@PresentationFramework/A.html#d33c12e369a1b9fc" class="i field">Visible</a>:
					<b>return</b> <a href="/Xwt3/A.html#db9ace7b1c7d9c22" class="t t">ScrollPolicy</a>.<a href="/Xwt3/A.html#36f9e866f30f6609" class="i field">Always</a>;
				<b>case</b> <a href="@0@PresentationFramework/A.html#cc606f9d55be03ae" class="t t">ScrollBarVisibility</a>.<a href="@0@PresentationFramework/A.html#d23a3b737b4893e3" class="i field">Hidden</a>:
					<b>return</b> <a href="/Xwt3/A.html#db9ace7b1c7d9c22" class="t t">ScrollPolicy</a>.<a href="/Xwt3/A.html#26b5c6dad750fc8e" class="i field">Never</a>;

				<b>default</b>:
					<b>throw</b> <b>new</b> <a href="@0@mscorlib/A.html#ab0acd5f99886747" class="t constructor">NotSupportedException</a>();
			}
		}
	}
}
</pre></td></tr></table></div></body></html>
