<!DOCTYPE html>
<html><head><title>localFileSystem.cs</title><link rel="stylesheet" href="../../../styles.css"><script src="../../../scripts.js"></script></head>
<body class="cB" onload="i(512);"><div class="dH">
<table style="width: 100%">
<tr><td>File: <a id="filePath" class="blueLink" href="/#fcmdp/base-plugins/fs/localFileSystem.cs" target="_top">base-plugins\fs\localFileSystem.cs</a><br/></td><td></td></tr>
<tr><td>Project: <a id="projectPath" class="blueLink" href="/#fcmdp" target="_top">fcmd\fcmdp.csproj</a> (fcmdp)</td><td></td></tr>
</table>
</div>
<div class="cz"><table class="tb" cellpadding="0" cellspacing="0"><tr><td valign="top" align="right"><pre id="ln"></pre></td><td valign="top" align="left"><pre id="code">
<span class="c">/* The File Commander base plugins - Local filesystem adapter
 * The main part of the LocalFS FS plugin
 * (C) The File Commander Team - https://github.com/atauenis/fcmd
 * (C) 2013-15, Alexander Tauenis (atauenis@yandex.ru)
 * (С) 2014, Zhigunov Andrew (breakneck11@gmail.com)
 * (C) 2014, Evgeny Akhtimirov (wilbit@me.com)
 * Contributors should place own signs here.
 */</span>
<b>using</b> <span class="i n">System</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Collections</span>.<span class="i n">Generic</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">IO</span>;
<b>using</b> <span class="i n">pluginner</span>;
<b>using</b> <span class="i n">pluginner</span>.<span class="i n">Toolkit</span>;
<b>using</b> <span class="i n">Xwt</span>;
<b>using</b> <span class="i n">AiLib</span>.<span class="i n">IOFile</span>;
 
<b>namespace</b> <span class="i n">fcmd</span>.<span class="i n">base_plugins</span>.<span class="i n">fs</span>
{
    <b>public</b> <a href="../../P/4f8a45c7e31df06c.html" target="s" class="k">partial</a> <b>class</b> <a id="4f8a45c7e31df06c" href="../../R/4f8a45c7e31df06c.html" target="n" data-glyph="0,0" class="t t"><span id="cf9e296c4dbdd4a1">localFileSystem</span></a> : <span class="i n">pluginner</span>.<a href="/pluginner/A.html#a05a46d8951816c2" class="t t">IFSPlugin</a>
    {
        <b>public const string</b> <a id="ea3f0b6595e77ce0" href="../../R/ea3f0b6595e77ce0.html" target="n" data-glyph="6,1" class="i field">FilePrefix</a> = <span class="s">&quot;file://&quot;</span>;
 
        <span class="c">/* ЗАМЕТКА РАЗРАБОТЧИКУ				DEVELOPER NOTES
		 * В данном файле содержится код	This file contanis the local FS
		 * плагина доступа к локальным ФС.	adapter for the File Commander.
		 * Не забывайте про отличия сред	Please don&#39;t forget about the differences
		 * *nix и MacOS X от Windows.		between OSX, *nix and Win32.
		 * Код должен работать везде!		THE CODE MUST WORK EVERYWHERE!
		 */</span>
        <b>public string</b> <a id="b23095faf4aa9984" href="../../R/b23095faf4aa9984.html" target="n" data-glyph="102,1" class="i property">Name</a> { <b>get</b> { <b>return</b> <a href="../../FileList/Localizator.cs.html#0b0c6268a53237f4" class="t t">Localizator</a>.<a href="../../FileList/Localizator.cs.html#546af5a79d2e88a9" class="i method">GetString</a>(<span class="s">&quot;LocalFSVer&quot;</span>); } }
        <b>public string</b> <a id="76ab16f527d1a2e2" href="../../R/76ab16f527d1a2e2.html" target="n" data-glyph="102,1" class="i property">Version</a> { <b>get</b> { <b>return</b> <span class="i n">System</span>.<span class="i n">Reflection</span>.<a href="@0@mscorlib/A.html#73b5be5e9c2474b2" class="t t">Assembly</a>.<a href="@0@mscorlib/A.html#bd671af9926207e9" class="i method">GetExecutingAssembly</a>().<a href="@0@mscorlib/A.html#1fd23b897ffa9a75" class="i method">GetName</a>().<a href="@0@mscorlib/A.html#c36677aa25838c8c" class="i property">Version</a>.<a href="@0@mscorlib/A.html#3b32a91c30a49c52" class="i method">ToString</a>(); } }
        <b>public string</b> <a id="871c4315755042ff" href="../../R/871c4315755042ff.html" target="n" data-glyph="102,1" class="i property">Author</a> { <b>get</b> { <b>return</b> <span class="s">&quot;A.T.;ankr&quot;</span>; } }
 
        <b>public</b> <span class="i n">System</span>.<span class="i n">Configuration</span>.<a href="@0@System.Configuration/A.html#78b81739a12e78a6" class="t t">Configuration</a> <a id="4f229ae0e053f046" href="../../R/4f229ae0e053f046.html" target="n" data-glyph="102,1" class="i property">FCConfig</a> { <b>set</b> { } } <span class="c">//it can be a placeholder because the LFS can use the fcmd.Properties.Settings...</span>
        <b>public</b> <a href="@0@mscorlib/A.html#3acf01620172c7f0" class="t t">IEnumerable</a>&lt;<span class="i n">pluginner</span>.<a href="/pluginner/A.html#7b5301e979ad0ac7" class="t t">DirItem</a>&gt; <a id="efc563391dd8ab73" href="../../R/efc563391dd8ab73.html" target="n" data-glyph="102,1" class="i property">DirectoryContent</a> { <b>get</b> { <b>return</b> <a href="#f1486225a22c33a8" class="i field">DirContent</a>; } } <span class="c">//возврат директории в FC</span>
 
<span class="k preprocess">#</span><span class="k preprocess">pragma</span> <span class="k preprocess">warning</span> <span class="k preprocess">disable</span> 0649, 0414, 0067  <span class="c">// is assigned but never used</span>
        <b>public event</b> <span class="i n">pluginner</span>.<a href="/pluginner/A.html#c00ff1b8d4f1ccd5" class="t t">TypedEvent</a>&lt;<b>string</b>&gt; <a id="8d35acd0fb2c36e7" href="../../R/8d35acd0fb2c36e7.html" target="n" data-glyph="30,1" class="i">StatusChanged</a>;
        <b>public event</b> <span class="i n">pluginner</span>.<a href="/pluginner/A.html#c00ff1b8d4f1ccd5" class="t t">TypedEvent</a>&lt;<b>double</b>&gt; <a id="349516acda3f824e" href="../../R/349516acda3f824e.html" target="n" data-glyph="30,1" class="i">ProgressChanged</a>;
        <b>public event</b> <span class="i n">pluginner</span>.<a href="/pluginner/A.html#c00ff1b8d4f1ccd5" class="t t">TypedEvent</a>&lt;<b>object</b>[]&gt; <a id="ebf17056c0890dd4" href="../../R/../../0000000000.html" target="n" data-glyph="30,1" class="i">APICallHost</a> = <b>null</b>;
 
        <b>public</b> <a href="@0@mscorlib/A.html#f092fb2b893a0162" class="t t">Exception</a> <a id="d2093e4354aacc77" href="../../R/d2093e4354aacc77.html" target="n" data-glyph="102,1" class="i property">LastError</a> { <b>get</b>; <b>set</b>; }
 
        <b>protected void</b> <a id="adbc49f529030588" href="../../R/adbc49f529030588.html" target="n" data-glyph="75,1" class="i method">RaiseProgressChanged</a>(<b>double</b> <span id="r0 rd" class="r0 r">data</span>)
        {
            <a href="/Xwt3/A.html#687215caac5b1b53" class="t t">Application</a>.<a href="/Xwt3/A.html#19c640ba41a65ffb" class="i method">Invoke</a>(<b>delegate</b>()
            {
                <a href="/pluginner/A.html#c00ff1b8d4f1ccd5" class="k">var</a> <span id="r1 rd" class="r1 r">handler</span> = <a href="#349516acda3f824e" class="i">ProgressChanged</a>;
                <b>if</b> (<span class="r1 r">handler</span> != <b>null</b>)
                {
                    <span class="r1 r">handler</span>(<span class="r0 r">data</span>);
                }
            });
        }
 
        <b>protected void</b> <a id="5a9882ddf84c6502" href="../../R/5a9882ddf84c6502.html" target="n" data-glyph="75,1" class="i method">RaiseStatusChanged</a>(<b>string</b> <span id="r2 rd" class="r2 r">data</span>)
        {
            <a href="/Xwt3/A.html#687215caac5b1b53" class="t t">Application</a>.<a href="/Xwt3/A.html#19c640ba41a65ffb" class="i method">Invoke</a>(<b>delegate</b>()
            {
                <a href="/pluginner/A.html#c00ff1b8d4f1ccd5" class="k">var</a> <span id="r3 rd" class="r3 r">handler</span> = <a href="#8d35acd0fb2c36e7" class="i">StatusChanged</a>;
                <b>if</b> (<span class="r3 r">handler</span> != <b>null</b>)
                {
                    <span class="r3 r">handler</span>(<span class="r2 r">data</span>);
                }
            });
        }
 
        <a href="@0@mscorlib/A.html#cf7f4095e4de7646" class="t t">List</a>&lt;<span class="i n">pluginner</span>.<a href="/pluginner/A.html#7b5301e979ad0ac7" class="t t">DirItem</a>&gt; <a id="f1486225a22c33a8" href="../../R/f1486225a22c33a8.html" target="n" data-glyph="46,1" class="i field">DirContent</a> = <b>new</b> <a href="@0@mscorlib/A.html#9e5352b2b304ceba" class="t constructor">List</a>&lt;<span class="i n">pluginner</span>.<a href="/pluginner/A.html#7b5301e979ad0ac7" class="t t">DirItem</a>&gt;();
 
        <span class="k preprocess">#</span><span class="k preprocess">region</span> dir
 
        <b>protected string</b> <a id="4e2aef16c84cd731" href="../../R/4e2aef16c84cd731.html" target="n" data-glyph="45,1" class="i field">curDir</a>;
        <b>protected string</b> <a id="b99b24830cb61515" href="../../R/b99b24830cb61515.html" target="n" data-glyph="45,1" class="i field">rootDir</a>;
 
        <span class="c">// public void GetDirectoryContent(ref List&lt;pluginner.DirItem&gt; output, FileSystemOperationStatus FSOS)</span>
        <b>public</b> <a href="@0@mscorlib/A.html#3acf01620172c7f0" class="t t">IEnumerable</a>&lt;<span class="i n">pluginner</span>.<a href="/pluginner/A.html#7b5301e979ad0ac7" class="t t">DirItem</a>&gt; <a id="6925b032e51da5f5" href="../../R/6925b032e51da5f5.html" target="n" data-glyph="72,1" class="i method">GetDirectoryContent</a>(<a href="/pluginner/A.html#fb518fd9795cef48" class="t t">FileSystemOperationStatus</a> <span id="r4 rd" class="r4 r">FSOS</span>)
        {
<span class="k preprocess">#</span><span class="k preprocess">if</span> <span class="i">DEBUG</span>
            <a href="@0@mscorlib/A.html#f907d79481da6ba4" class="t t">Console</a>.<a href="@0@mscorlib/A.html#45cf4dc5a446377f" class="i method">WriteLine</a>(<span class="s">&quot;{0:HH:mm:ss.fff} DEBUG: Loading started {1} &quot;</span>, <a href="@0@mscorlib/A.html#df6b1eba7461813b" class="t t">DateTime</a>.<a href="@0@mscorlib/A.html#1cd5dd408a32124f" class="i property">Now</a>, <a href="#4e2aef16c84cd731" class="i field">curDir</a>);
<span class="k preprocess">#</span><span class="k preprocess">endif</span>
            <a href="#d2093e4354aacc77" class="i property">LastError</a> = <b>null</b>;
            <a href="#f1486225a22c33a8" class="i field">DirContent</a>.<a href="@0@mscorlib/A.html#ca7bce81a50b0aeb" class="i method">Clear</a>();
            <b>string</b> <span id="r5 rd" class="r5 r">InternalURL</span> = <a href="#4e2aef16c84cd731" class="i field">curDir</a>.<a href="@0@mscorlib/A.html#69fc1d0aa6df8a90" class="i method">Replace</a>(<a href="../../P/4f8a45c7e31df06c.html#4f8a45c7e31df06c" class="t t">localFileSystem</a>.<a href="#ea3f0b6595e77ce0" class="i field">FilePrefix</a>, <b>string</b>.<a href="@0@mscorlib/A.html#c9f70a27facb27cf" class="i field">Empty</a>);
            <span class="r4 r">FSOS</span>.<a href="/pluginner/A.html#3000006050c341e2" class="i field">StatusMessage</a> = <b>string</b>.<a href="@0@mscorlib/A.html#7432dab173fae5fc" class="i method">Format</a>(<a href="../../FileList/Localizator.cs.html#0b0c6268a53237f4" class="t t">Localizator</a>.<a href="../../FileList/Localizator.cs.html#546af5a79d2e88a9" class="i method">GetString</a>(<span class="s">&quot;DoingListdir&quot;</span>), <span class="s">&quot;&quot;</span>, <span class="r5 r">InternalURL</span>);
 
            <span class="i n">pluginner</span>.<a href="/pluginner/A.html#7b5301e979ad0ac7" class="t t">DirItem</a> <span id="r6 rd" class="r6 r">tmpVar</span> = <b>new</b> <span class="i n">pluginner</span>.<a href="/pluginner/A.html#7b5301e979ad0ac7" class="t constructor">DirItem</a>();
 
            <span class="c">// </span>
            <b>string</b>[] <span id="r7 rd" class="r7 r">filesNames</span>;
            <a href="@0@mscorlib/A.html#3acf01620172c7f0" class="t t">IEnumerable</a>&lt;<a href="../../Platform/AiLib/IOFile/DirectoryEnum.cs.html#4ecb496bc134d6f4" class="t t">FileDataInfo</a>&gt; <span id="r8 rd" class="r8 r">files</span> = <b>null</b>;
 
            <b>if</b> (!<a href="/pluginner/A.html#9fe6b539828fce94" class="t t">OSVersionEx</a>.<a href="/pluginner/A.html#763843fc2bbfd024" class="i property">IsWindows</a>)
                <span class="r7 r">filesNames</span> = <span class="i n">System</span>.<span class="i n">IO</span>.<a href="@0@mscorlib/A.html#b3ad5f0ba800bb28" class="t t">Directory</a>.<a href="@0@mscorlib/A.html#f9704790d3b23471" class="i method">GetFiles</a>(<span class="r5 r">InternalURL</span>);
            <b>else</b>
                <span class="r8 r">files</span> = <span class="i n">AiLib</span>.<span class="i n">IOFile</span>.<a href="../../Platform/AiLib/IOFile/DirectoryEnum.cs.html#a57504bfe8142ec4" class="t t">DirectoryEnum</a>.<a href="../../Platform/AiLib/IOFile/DirectoryEnum.cs.html#6e6fbb6ef58217d0" class="i method">ReadFilesInfo</a>(<span class="r5 r">InternalURL</span>);
 
            <b>string</b>[] <span id="r9 rd" class="r9 r">dirs</span> = <b>null</b>;
            <a href="@0@mscorlib/A.html#f092fb2b893a0162" class="t t">Exception</a> <span id="r10 rd" class="r10 r">error</span> = <b>null</b>;
            <b>try</b> {
                <span class="r9 r">dirs</span> = <span class="i n">System</span>.<span class="i n">IO</span>.<a href="@0@mscorlib/A.html#b3ad5f0ba800bb28" class="t t">Directory</a>.<a href="@0@mscorlib/A.html#44b0fd73d2306777" class="i method">GetDirectories</a>(<span class="r5 r">InternalURL</span>);
            }
            <b>catch</b> (<a href="@0@mscorlib/A.html#f092fb2b893a0162" class="t t">Exception</a> <span id="r11 rd" class="r11 r">ex</span>) { <span class="r10 r">error</span> = <span class="r11 r">ex</span>; }    <span class="c">// access denied</span>
            <b>if</b> (<span class="r10 r">error</span> != <b>null</b>)
            {
                <a href="../../P/4f8a45c7e31df06c.html#4f8a45c7e31df06c" class="k">this</a>.<a href="#d2093e4354aacc77" class="i property">LastError</a> = <span class="r10 r">error</span>;
                <b>yield break</b>; <span class="c">// return System.Linq.Enumerable.Empty&lt;pluginner.DirItem&gt;();</span>
            }
 
            <span class="c">// UpDir element : элемент &quot;вверх по древу&quot;</span>
            <a href="@0@mscorlib/A.html#30fa608717e5ce8e" class="t t">DirectoryInfo</a> <span id="r12 rd" class="r12 r">currentdir</span> = <b>new</b> <a href="@0@mscorlib/A.html#683f5ff112df8d3a" class="t constructor">DirectoryInfo</a>(<span class="r5 r">InternalURL</span>);
            <b>if</b> (<span class="r12 r">currentdir</span>.<a href="@0@mscorlib/A.html#4b0f923e4e34075e" class="i property">Parent</a> != <b>null</b>)
            {
                <span class="r6 r">tmpVar</span>.<a href="/pluginner/A.html#2b021a73f3c1e7f7" class="i field">URL</a> = <a href="../../P/4f8a45c7e31df06c.html#4f8a45c7e31df06c" class="t t">localFileSystem</a>.<a href="#ea3f0b6595e77ce0" class="i field">FilePrefix</a> + <span class="r12 r">currentdir</span>.<a href="@0@mscorlib/A.html#4b0f923e4e34075e" class="i property">Parent</a>.<a href="@0@mscorlib/A.html#0f9b506168f8cec0" class="i property">FullName</a>;   <span class="c">//  &quot;file://&quot;</span>
 
                <span class="c">// if (!MainWindow.AppLoading) { }</span>
 
                <span class="r6 r">tmpVar</span>.<a href="/pluginner/A.html#fbc24940daa56d61" class="i field">TextToShow</a> = <span class="s">&quot;..&quot;</span>;
                <span class="r6 r">tmpVar</span>.<a href="/pluginner/A.html#798d312904a9521a" class="i field">MIMEType</a> = <span class="s">&quot;x-fcmd/up&quot;</span>;
                <span class="c">// tmpVar.IconSmall = Utilities.GetIconForMIME(&quot;x-fcmd/up&quot;);</span>
                <span class="r6 r">tmpVar</span>.<a href="/pluginner/A.html#89b4b3973a14e897" class="i field">IsDirectory</a> = <b>true</b>;
                <span class="c">// output.Add(tmpVar);</span>
                <b>yield return</b> <span class="r6 r">tmpVar</span>;
            }
 
            <b>float</b> <span id="r13 rd" class="r13 r">Progress</span> = 0;
            <span class="c">// float FileWeight = 1 / ((float)files.Length + (float)dirs.Length);</span>
            <span class="c">// uint counter = 0;</span>
            <span class="c">// 2 ** 10 ~= 1000 (is about 1000)</span>
            <span class="c">// so dispatching will be done every time 1000 files will have been looked throught</span>
            <span class="c">// update_every == 00...0011...11 in binary format and count of &#39;1&#39; is 10</span>
            <span class="c">// so (++counter &amp; update_every) == 0 will be true after every 2 ** 10 ~= 1000</span>
            <span class="c">// passed files</span>
 
            <span class="c">// ankr</span>
            <span class="c">// const uint update_every = ~(((~(uint)0) &gt;&gt; 10) &lt;&lt; 10);</span>
 
            <b>foreach</b> (<b>string</b> <span id="r14 rd" class="r14 r">directory</span> <b>in</b> <span class="r9 r">dirs</span>)
            {
                <span class="c">//перебираю каталоги</span>
                <a href="@0@mscorlib/A.html#30fa608717e5ce8e" class="t t">DirectoryInfo</a> <span id="r15 rd" class="r15 r">di</span> = <b>new</b> <a href="@0@mscorlib/A.html#683f5ff112df8d3a" class="t constructor">DirectoryInfo</a>(<span class="r14 r">directory</span>);
                <span class="r6 r">tmpVar</span>.<a href="/pluginner/A.html#89b4b3973a14e897" class="i field">IsDirectory</a> = <b>true</b>;
                <span class="r6 r">tmpVar</span>.<a href="/pluginner/A.html#2b021a73f3c1e7f7" class="i field">URL</a> = <a href="../../P/4f8a45c7e31df06c.html#4f8a45c7e31df06c" class="t t">localFileSystem</a>.<a href="#ea3f0b6595e77ce0" class="i field">FilePrefix</a> + <span class="r14 r">directory</span>;
                <span class="r6 r">tmpVar</span>.<a href="/pluginner/A.html#fbc24940daa56d61" class="i field">TextToShow</a> = <span class="r15 r">di</span>.<a href="@0@mscorlib/A.html#5846640afdace004" class="i property">Name</a>;
                <span class="r6 r">tmpVar</span>.<a href="/pluginner/A.html#8813b431ccc5b225" class="i field">Date</a> = <span class="r15 r">di</span>.<a href="@0@mscorlib/A.html#f81d500241d7e3bf" class="i property">CreationTime</a>;
 
                <b>if</b> (<span class="r15 r">di</span>.<a href="@0@mscorlib/A.html#5846640afdace004" class="i property">Name</a>.<a href="@0@mscorlib/A.html#23804789ea4c9c0e" class="i method">StartsWith</a>(<span class="s">&quot;.&quot;</span>))        <span class="c">// .git, .vs, .svn and other ignores</span>
                {
                    <span class="r6 r">tmpVar</span>.<a href="/pluginner/A.html#bfaa29e483de06a4" class="i field">Hidden</a> = <b>true</b>;
                }
                <b>else</b>
                {
                    <span class="r6 r">tmpVar</span>.<a href="/pluginner/A.html#bfaa29e483de06a4" class="i field">Hidden</a> = <b>false</b>;
                }
 
                <span class="r6 r">tmpVar</span>.<a href="/pluginner/A.html#798d312904a9521a" class="i field">MIMEType</a> = <span class="s">&quot;x-fcmd/directory&quot;</span>;
                <span class="c">//tmpVar.IconSmall = Utilities.GetIconForMIME(&quot;x-fcmd/directory&quot;);</span>
                <span class="c">//output.Add(tmpVar);</span>
                <b>yield return</b> <span class="r6 r">tmpVar</span>;
 
                <span class="r4 r">FSOS</span>.<a href="/pluginner/A.html#b1d494e763b26fe5" class="i field">CompletePercents</a> = (<b>int</b>)<span class="r13 r">Progress</span> * 100;
 
                <span class="c">// Progress += FileWeight;</span>
                <span class="c">/*if ((++counter &amp; update_every) == 0)
				{
					Xwt.Application.MainLoop.DispatchPendingEvents();
				}*/</span>
            }
 
            <b>if</b> (<span class="r8 r">files</span> != <b>null</b>)
                <b>foreach</b> (<a href="../../Platform/AiLib/IOFile/DirectoryEnum.cs.html#4ecb496bc134d6f4" class="t t">FileDataInfo</a> <span id="r16 rd" class="r16 r">curFile</span> <b>in</b> <span class="r8 r">files</span>)
                {
                    <span class="c">//FileInfo fi = new FileInfo(curFile);</span>
 
                    <span class="r6 r">tmpVar</span>.<a href="/pluginner/A.html#89b4b3973a14e897" class="i field">IsDirectory</a> = <b>false</b>;
                    <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r17 rd" class="r17 r">Name</span> = <span class="r16 r">curFile</span>.<a href="../../Platform/AiLib/IOFile/DirectoryEnum.cs.html#26d5dbb71c4cfcc2" class="i property">Name</a>;
 
                    <span class="r6 r">tmpVar</span>.<a href="/pluginner/A.html#2b021a73f3c1e7f7" class="i field">URL</a> = <a href="../../P/4f8a45c7e31df06c.html#4f8a45c7e31df06c" class="t t">localFileSystem</a>.<a href="#ea3f0b6595e77ce0" class="i field">FilePrefix</a> + <a href="@0@mscorlib/A.html#090eca8621a248ee" class="t t">Path</a>.<a href="@0@mscorlib/A.html#2d7263f86a526264" class="i method">Combine</a>(<span class="r5 r">InternalURL</span>, <span class="r17 r">Name</span>).<a href="@0@mscorlib/A.html#987da5dfb39f1927" class="i method">Replace</a>(<span class="s">&#39;\\&#39;</span>, <span class="s">&#39;/&#39;</span>);
                    <span class="r6 r">tmpVar</span>.<a href="/pluginner/A.html#fbc24940daa56d61" class="i field">TextToShow</a> = <span class="r16 r">curFile</span>.<a href="../../Platform/AiLib/IOFile/DirectoryEnum.cs.html#7c7fc6f6a1b1c382" class="i field">cFileName</a>; <span class="c">// fi.Name;</span>
                    <span class="r6 r">tmpVar</span>.<a href="/pluginner/A.html#8813b431ccc5b225" class="i field">Date</a> = <span class="r16 r">curFile</span>.<a href="../../Platform/AiLib/IOFile/DirectoryEnum.cs.html#1d6af0e6f53a9124" class="i property">LastWriteTime</a>;   <span class="c">// fi.LastWriteTime;</span>
                    <span class="r6 r">tmpVar</span>.<a href="/pluginner/A.html#02129bce9ec56468" class="i field">Size</a> = <span class="r16 r">curFile</span>.<a href="../../Platform/AiLib/IOFile/DirectoryEnum.cs.html#46fdfc8ab017454d" class="i property">Length</a>;          <span class="c">// fi.Length;</span>
 
                    <b>if</b> (<span class="r17 r">Name</span>.<a href="@0@mscorlib/A.html#23804789ea4c9c0e" class="i method">StartsWith</a>(<span class="s">&quot;.&quot;</span>))
                    {
                        <span class="r6 r">tmpVar</span>.<a href="/pluginner/A.html#bfaa29e483de06a4" class="i field">Hidden</a> = <b>true</b>;
                    }
                    <b>else</b>
                    {
                        <span class="r6 r">tmpVar</span>.<a href="/pluginner/A.html#bfaa29e483de06a4" class="i field">Hidden</a> = <b>false</b>;
                    }
 
                    <b>if</b> (<span class="r17 r">Name</span>.<a href="@0@mscorlib/A.html#43ea090a2243545e" class="i method">LastIndexOf</a>(<span class="s">&#39;.&#39;</span>) &gt; 0)
                        <span class="r6 r">tmpVar</span>.<a href="/pluginner/A.html#798d312904a9521a" class="i field">MIMEType</a> = <a href="/pluginner/A.html#5fd4a8de29bac7e7" class="t t">Utilities</a>.<a href="/pluginner/A.html#25ec5cf1758f9e58" class="i method">GetContentType</a>(
                            <span class="r17 r">Name</span>.<a href="@0@mscorlib/A.html#882fa7998d6ca35a" class="i method">Substring</a>(<span class="r17 r">Name</span>.<a href="@0@mscorlib/A.html#43ea090a2243545e" class="i method">LastIndexOf</a>(<span class="s">&#39;.&#39;</span>) + 1));
                    <b>else</b>
                        <span class="r6 r">tmpVar</span>.<a href="/pluginner/A.html#798d312904a9521a" class="i field">MIMEType</a> = <span class="s">&quot;application/octet-stream&quot;</span>;
 
                    <span class="c">// tmpVar.IconSmall = Utilities.GetIconForMIME(tmpVar.MIMEType);</span>
                    <span class="c">// output.Add(tmpVar);</span>
                    <b>yield return</b> <span class="r6 r">tmpVar</span>;
 
                    <span class="c">// Progress += FileWeight;</span>
                    <b>if</b> (<span class="r13 r">Progress</span> &lt;= 1)
                    {
                        <span class="r4 r">FSOS</span>.<a href="/pluginner/A.html#b1d494e763b26fe5" class="i field">CompletePercents</a> = (<b>int</b>)<span class="r13 r">Progress</span> * 100;
                    }
                    <span class="c">/*if ((++counter &amp; update_every) == 0)
                    {
                        //Xwt.Application.MainLoop.DispatchPendingEvents();
                    }*/</span>
                }
 
 
            <a href="localFileSystem-CLI.cs.html#5680b00d72d84843" class="i method">RaiseCLIpromptChanged</a>(<span class="s">&quot;FC: &quot;</span> + <span class="r5 r">InternalURL</span> + <span class="s">&quot;&gt;&quot;</span>);
<span class="k preprocess">#</span><span class="k preprocess">if</span> <span class="i">DEBUG</span>
            <a href="@0@mscorlib/A.html#f907d79481da6ba4" class="t t">Console</a>.<a href="@0@mscorlib/A.html#45cf4dc5a446377f" class="i method">WriteLine</a>(<span class="s">&quot;{0:HH:mm:ss.fff} DEBUG: Loading completed {1}&quot;</span>, <a href="@0@mscorlib/A.html#df6b1eba7461813b" class="t t">DateTime</a>.<a href="@0@mscorlib/A.html#1cd5dd408a32124f" class="i property">Now</a>, <span class="r5 r">InternalURL</span>);
<span class="k preprocess">#</span><span class="k preprocess">endif</span>
        }
 
        <b>public string</b> <a id="2f26280e0c9bb287" href="../../R/2f26280e0c9bb287.html" target="n" data-glyph="102,1" class="i property">CurrentDirectory</a>
        {
            <b>get</b> { <b>return</b> <a href="#4e2aef16c84cd731" class="i field">curDir</a>; }
            <b>set</b>
            {
                <b>if</b> (!<b>string</b>.<a href="@0@mscorlib/A.html#55e241b6143365ef" class="i method">IsNullOrWhiteSpace</a>(<b>value</b>))
                    <a href="#4e2aef16c84cd731" class="i field">curDir</a> = <b>value</b>.<a href="@0@mscorlib/A.html#23804789ea4c9c0e" class="i method">StartsWith</a>(<a href="#d3ef6bb63fd2be91" class="i property">Prefix</a>) ? <b>value</b> : <a href="#d3ef6bb63fd2be91" class="i property">Prefix</a> + <b>value</b> ;
            }
        }
 
        <b>public string</b> <a id="d3ef6bb63fd2be91" href="../../R/d3ef6bb63fd2be91.html" target="n" data-glyph="102,1" class="i property">Prefix</a> { <b>get</b> { <b>return</b> <a href="#ea3f0b6595e77ce0" class="i field">FilePrefix</a>; } }
 
        <b>public string</b> <a id="af2244f26d3e423a" href="../../R/af2244f26d3e423a.html" target="n" data-glyph="102,1" class="i property">RootDirectory</a>
        {
            <b>get</b> { <b>return</b> <a href="#b99b24830cb61515" class="i field">rootDir</a>; }
            <b>set</b> { <a href="#b99b24830cb61515" class="i field">rootDir</a> = <b>value</b>.<a href="@0@mscorlib/A.html#428c5c9954dea844" class="i method">Contains</a>(<a href="#d3ef6bb63fd2be91" class="i property">Prefix</a>) ? <b>value</b> : <a href="#d3ef6bb63fd2be91" class="i property">Prefix</a> + <b>value</b>; }
        }
        <span class="c">// return OSVersionEx.IsWindows</span>
 
        <b>private void</b> <a id="7059485f25faa41d" href="../../R/7059485f25faa41d.html" target="n" data-glyph="76,1" class="i method">_CheckProtocol</a>(<b>string</b> <span id="r18 rd" class="r18 r">url</span>)
        { <span class="c">//проверка на то, чтобы нечаянно через localfs не попытались зайти в ftp, webdav, реестр и т.п. :-)</span>
            <b>if</b> (!<span class="r18 r">url</span>.<a href="@0@mscorlib/A.html#23804789ea4c9c0e" class="i method">StartsWith</a>(<a href="#d3ef6bb63fd2be91" class="i property">Prefix</a>))
                <b>throw</b> <b>new</b> <span class="i n">pluginner</span>.<a href="/pluginner/A.html#a2e835838099e8cb" class="t constructor">PleaseSwitchPluginException</a>();
        }
 
        <span class="k preprocess">#</span><span class="k preprocess">endregion</span>
 
        <span class="k preprocess">#</span><span class="k preprocess">region</span> Methods
 
        <b>public string</b> <a id="66e4e837182fd7c7" href="../../R/66e4e837182fd7c7.html" target="n" data-glyph="102,1" class="i property">DirSeparator</a> { <b>get</b> { <b>return</b> <a href="@0@mscorlib/A.html#090eca8621a248ee" class="t t">Path</a>.<a href="@0@mscorlib/A.html#d1bb57592858d485" class="i field">DirectorySeparatorChar</a>.<a href="@0@mscorlib/A.html#8da116b4ffb677f2" class="i method">ToString</a>(); } }
 
        <b>public bool</b> <a id="90350a81d00c9212" href="../../R/90350a81d00c9212.html" target="n" data-glyph="72,1" class="i method">FileExists</a>(<b>string</b> <span id="r19 rd" class="r19 r">URL</span>)
        {<span class="c">//проверить наличие файла</span>
            <a href="#7059485f25faa41d" class="i method">_CheckProtocol</a>(<span class="r19 r">URL</span>);
            <b>string</b> <span id="r20 rd" class="r20 r">InternalURL</span> = <span class="r19 r">URL</span>.<a href="@0@mscorlib/A.html#69fc1d0aa6df8a90" class="i method">Replace</a>(<a href="../../P/4f8a45c7e31df06c.html#4f8a45c7e31df06c" class="t t">localFileSystem</a>.<a href="#ea3f0b6595e77ce0" class="i field">FilePrefix</a>, <b>string</b>.<a href="@0@mscorlib/A.html#c9f70a27facb27cf" class="i field">Empty</a>);
            <b>if</b> (<a href="@0@mscorlib/A.html#1c7421e464f67b7e" class="t t">File</a>.<a href="@0@mscorlib/A.html#3360368484a9f131" class="i method">Exists</a>(<span class="r20 r">InternalURL</span>)) <b>return true</b>; <span class="c">//файл е?</span>
            <b>return false</b>; <span class="c">//та ничого нэма! [не забываем, что return xxx прекращает выполнение подпрограммы]</span>
        }
 
        <b>public bool</b> <a id="cf7fb73af0e6b7ed" href="../../R/cf7fb73af0e6b7ed.html" target="n" data-glyph="72,1" class="i method">DirectoryExists</a>(<b>string</b> <span id="r21 rd" class="r21 r">URL</span>)
        {<span class="c">//проверить наличие папки</span>
            <a href="#7059485f25faa41d" class="i method">_CheckProtocol</a>(<span class="r21 r">URL</span>);
            <b>string</b> <span id="r22 rd" class="r22 r">InternalURL</span> = <span class="r21 r">URL</span>.<a href="@0@mscorlib/A.html#69fc1d0aa6df8a90" class="i method">Replace</a>(<a href="../../P/4f8a45c7e31df06c.html#4f8a45c7e31df06c" class="t t">localFileSystem</a>.<a href="#ea3f0b6595e77ce0" class="i field">FilePrefix</a>, <b>string</b>.<a href="@0@mscorlib/A.html#c9f70a27facb27cf" class="i field">Empty</a>);
            <b>if</b> (<a href="@0@mscorlib/A.html#b3ad5f0ba800bb28" class="t t">Directory</a>.<a href="@0@mscorlib/A.html#6a2a3bee6b62826f" class="i method">Exists</a>(<span class="r22 r">InternalURL</span>)) <b>return true</b>; <span class="c">//каталох е?</span>
            <b>return false</b>; <span class="c">//та ничого нэма! [не забываем, что return xxx прекращает выполнение подпрограммы]</span>
        }
 
        <b>public bool</b> <a id="9529f8b840973704" href="../../R/9529f8b840973704.html" target="n" data-glyph="72,1" class="i method">CanBeRead</a>(<b>string</b> <span id="r23 rd" class="r23 r">url</span>)
        { <span class="c">//проверить файл/папку &quot;URL&quot; на читаемость</span>
            <a href="#7059485f25faa41d" class="i method">_CheckProtocol</a>(<span class="r23 r">url</span>);
            <b>string</b> <span id="r24 rd" class="r24 r">InternalURL</span> = <span class="r23 r">url</span>.<a href="@0@mscorlib/A.html#69fc1d0aa6df8a90" class="i method">Replace</a>(<a href="../../P/4f8a45c7e31df06c.html#4f8a45c7e31df06c" class="t t">localFileSystem</a>.<a href="#ea3f0b6595e77ce0" class="i field">FilePrefix</a>, <b>string</b>.<a href="@0@mscorlib/A.html#c9f70a27facb27cf" class="i field">Empty</a>);
 
            <b>try</b>
            {
                <b>bool</b> <span id="r25 rd" class="r25 r">IsDir</span> = <a href="@0@mscorlib/A.html#b3ad5f0ba800bb28" class="t t">Directory</a>.<a href="@0@mscorlib/A.html#6a2a3bee6b62826f" class="i method">Exists</a>(<span class="r24 r">InternalURL</span>);
                <b>if</b> (<span class="r25 r">IsDir</span>)
                {<span class="c">//проверка читаемости каталога</span>
                    <span class="i n">System</span>.<span class="i n">IO</span>.<a href="@0@mscorlib/A.html#b3ad5f0ba800bb28" class="t t">Directory</a>.<a href="@0@mscorlib/A.html#f9704790d3b23471" class="i method">GetFiles</a>(<span class="r24 r">InternalURL</span>);
                }
                <b>else</b>
                {<span class="c">//проверка читаемости файла</span>
                    <a href="@0@mscorlib/A.html#1c7421e464f67b7e" class="t t">File</a>.<a href="@0@mscorlib/A.html#ee8033fcb7e7a677" class="i method">ReadAllBytes</a>(<span class="r24 r">InternalURL</span>);
                }
                <b>return true</b>;
            }
            <b>catch</b> (<a href="@0@mscorlib/A.html#f092fb2b893a0162" class="t t">Exception</a> <span id="r26 rd" class="r26 r">ex</span>)
            {
                <a href="@0@mscorlib/A.html#f907d79481da6ba4" class="t t">Console</a>.<a href="@0@mscorlib/A.html#5ac7c4fda643413b" class="i method">WriteLine</a>(<span class="s">&quot;LocalFS: Can&#39;t get access to &quot;</span> + <span class="r24 r">InternalURL</span> + <span class="s">&quot;\nThe blocking reason is: &quot;</span> + <span class="r26 r">ex</span>.<a href="@0@mscorlib/A.html#5fba0e16215b42a3" class="i property">Message</a>);
                <b>return false</b>;
            }
        }
 
        <b>public void</b> <a id="3413c24d4e261c70" href="../../R/3413c24d4e261c70.html" target="n" data-glyph="72,1" class="i method">Touch</a>(<span class="i n">pluginner</span>.<a href="/pluginner/A.html#e039ce3cbcc9466a" class="t t">FSEntryMetadata</a> <span id="r27 rd" class="r27 r">Metadata</span>)
        {
            <b>string</b> <span id="r28 rd" class="r28 r">url</span> = <span class="r27 r">Metadata</span>.<a href="/pluginner/A.html#7dc2c0eaa63e3465" class="i field">FullURL</a>;
            <a href="#7059485f25faa41d" class="i method">_CheckProtocol</a>(<span class="r28 r">url</span>);
            <b>string</b> <span id="r29 rd" class="r29 r">InternalURL</span> = <span class="r28 r">url</span>.<a href="@0@mscorlib/A.html#69fc1d0aa6df8a90" class="i method">Replace</a>(<a href="../../P/4f8a45c7e31df06c.html#4f8a45c7e31df06c" class="t t">localFileSystem</a>.<a href="#ea3f0b6595e77ce0" class="i field">FilePrefix</a>, <b>string</b>.<a href="@0@mscorlib/A.html#c9f70a27facb27cf" class="i field">Empty</a>);
 
            <b>if</b> (!<a href="@0@mscorlib/A.html#b3ad5f0ba800bb28" class="t t">Directory</a>.<a href="@0@mscorlib/A.html#6a2a3bee6b62826f" class="i method">Exists</a>(<span class="r29 r">InternalURL</span>) &amp;&amp; !<a href="@0@mscorlib/A.html#1c7421e464f67b7e" class="t t">File</a>.<a href="@0@mscorlib/A.html#3360368484a9f131" class="i method">Exists</a>(<span class="r29 r">InternalURL</span>))
            {
                <a href="@0@mscorlib/A.html#9e38cb1c84769eba" class="t t">StreamWriter</a> <span id="r30 rd" class="r30 r">sw</span> = <a href="@0@mscorlib/A.html#1c7421e464f67b7e" class="t t">File</a>.<a href="@0@mscorlib/A.html#56f09f4144421ebc" class="i method">CreateText</a>(<span class="r29 r">InternalURL</span>);
                <span class="r30 r">sw</span>.<a href="@0@mscorlib/A.html#ab19992c30648b1d" class="i method">Close</a>();
                <span class="r30 r">sw</span>.<a href="@0@mscorlib/A.html#2e39b8daeeed8db5" class="i method">Dispose</a>();
            }
 
            <b>try</b>
            {
                <a href="@0@mscorlib/A.html#1c7421e464f67b7e" class="t t">File</a>.<a href="@0@mscorlib/A.html#1c29d149b752c4e0" class="i method">SetAttributes</a>(<span class="r29 r">InternalURL</span>, <span class="r27 r">Metadata</span>.<a href="/pluginner/A.html#a3ce802f464cee2b" class="i field">Attrubutes</a>);
                <a href="@0@mscorlib/A.html#1c7421e464f67b7e" class="t t">File</a>.<a href="@0@mscorlib/A.html#0ab15cc9c418f4f5" class="i method">SetCreationTime</a>(<span class="r29 r">InternalURL</span>, <span class="r27 r">Metadata</span>.<a href="/pluginner/A.html#eafb1ec6906390b7" class="i field">CreationTimeUTC</a>);
                <a href="@0@mscorlib/A.html#1c7421e464f67b7e" class="t t">File</a>.<a href="@0@mscorlib/A.html#506a8ec95d92b7fc" class="i method">SetLastWriteTime</a>(<span class="r29 r">InternalURL</span>, <a href="@0@mscorlib/A.html#df6b1eba7461813b" class="t t">DateTime</a>.<a href="@0@mscorlib/A.html#1cd5dd408a32124f" class="i property">Now</a>);
            }
            <b>catch</b> (<a href="@0@mscorlib/A.html#f092fb2b893a0162" class="t t">Exception</a> <span id="r31 rd" class="r31 r">ex</span>)
            {
                <a href="@0@mscorlib/A.html#f907d79481da6ba4" class="t t">Console</a>.<a href="@0@mscorlib/A.html#5ac7c4fda643413b" class="i method">WriteLine</a>(<span class="r31 r">ex</span>.<a href="@0@mscorlib/A.html#5fba0e16215b42a3" class="i property">Message</a>);
            }
        }
 
        <b>public void</b> <a id="93dd6b395708f201" href="../../R/93dd6b395708f201.html" target="n" data-glyph="72,1" class="i method">Touch</a>(<b>string</b> <span id="r32 rd" class="r32 r">URL</span>)
        {
            <a href="#7059485f25faa41d" class="i method">_CheckProtocol</a>(<span class="r32 r">URL</span>);
            <b>string</b> <span id="r33 rd" class="r33 r">InternalURL</span> = <span class="r32 r">URL</span>.<a href="@0@mscorlib/A.html#69fc1d0aa6df8a90" class="i method">Replace</a>(<a href="../../P/4f8a45c7e31df06c.html#4f8a45c7e31df06c" class="t t">localFileSystem</a>.<a href="#ea3f0b6595e77ce0" class="i field">FilePrefix</a>, <b>string</b>.<a href="@0@mscorlib/A.html#c9f70a27facb27cf" class="i field">Empty</a>);
 
            <span class="i n">pluginner</span>.<a href="/pluginner/A.html#e039ce3cbcc9466a" class="t t">FSEntryMetadata</a> <span id="r34 rd" class="r34 r">newmd</span> = <b>new</b> <span class="i n">pluginner</span>.<a href="/pluginner/A.html#e039ce3cbcc9466a" class="t constructor">FSEntryMetadata</a>();
            <span class="r34 r">newmd</span>.<a href="/pluginner/A.html#7dc2c0eaa63e3465" class="i field">FullURL</a> = <span class="r33 r">InternalURL</span>;
            <span class="r34 r">newmd</span>.<a href="/pluginner/A.html#eafb1ec6906390b7" class="i field">CreationTimeUTC</a> = <a href="@0@mscorlib/A.html#df6b1eba7461813b" class="t t">DateTime</a>.<a href="@0@mscorlib/A.html#b0d5e4c9a8d4ddac" class="i property">UtcNow</a>;
            <span class="r34 r">newmd</span>.<a href="/pluginner/A.html#80e341cd1b28e870" class="i field">LastWriteTimeUTC</a> = <a href="@0@mscorlib/A.html#df6b1eba7461813b" class="t t">DateTime</a>.<a href="@0@mscorlib/A.html#b0d5e4c9a8d4ddac" class="i property">UtcNow</a>;
            <a href="#3413c24d4e261c70" class="i method">Touch</a>(<span class="r34 r">newmd</span>);
        }
 
        <b>public</b> <span class="i n">System</span>.<span class="i n">IO</span>.<a href="@0@mscorlib/A.html#f956b0c07e86df64" class="t t">Stream</a> <a id="a7b24a8b7c8b8507" href="../../R/a7b24a8b7c8b8507.html" target="n" data-glyph="72,1" class="i method">GetFileStream</a>(<b>string</b> <span id="r35 rd" class="r35 r">url</span>, <b>bool</b> <span id="r36 rd" class="r36 r">Lock</span> = <b>false</b>)
        { <span class="c">//запрос потока для файла</span>
            <a href="#7059485f25faa41d" class="i method">_CheckProtocol</a>(<span class="r35 r">url</span>);
            <b>string</b> <span id="r37 rd" class="r37 r">InternalURL</span> = <span class="r35 r">url</span>.<a href="@0@mscorlib/A.html#69fc1d0aa6df8a90" class="i method">Replace</a>(<a href="../../P/4f8a45c7e31df06c.html#4f8a45c7e31df06c" class="t t">localFileSystem</a>.<a href="#ea3f0b6595e77ce0" class="i field">FilePrefix</a>, <b>string</b>.<a href="@0@mscorlib/A.html#c9f70a27facb27cf" class="i field">Empty</a>);
 
            <a href="@0@mscorlib/A.html#5cc5644ae3acd24b" class="t t">FileAccess</a> <span id="r38 rd" class="r38 r">fa</span> = (<span class="r36 r">Lock</span> ? <a href="@0@mscorlib/A.html#5cc5644ae3acd24b" class="t t">FileAccess</a>.<a href="@0@mscorlib/A.html#b08514795c2e0488" class="i field">ReadWrite</a> : <a href="@0@mscorlib/A.html#5cc5644ae3acd24b" class="t t">FileAccess</a>.<a href="@0@mscorlib/A.html#0f1c68c756d0636b" class="i field">Read</a>);
 
            <b>return</b> <b>new</b> <a href="@0@mscorlib/A.html#234a29d0d3012e5c" class="t constructor">FileStream</a>(<span class="r37 r">InternalURL</span>, <a href="@0@mscorlib/A.html#c0cb6ba6af625b3a" class="t t">FileMode</a>.<a href="@0@mscorlib/A.html#f4421e1d202f76fa" class="i field">Open</a>, <span class="r38 r">fa</span>);
        }
 
        <b>public byte</b>[] <a id="484267d83041e124" href="../../R/484267d83041e124.html" target="n" data-glyph="72,1" class="i method">GetFileContent</a>(<b>string</b> <span id="r39 rd" class="r39 r">url</span>)
        {
            <a href="#7059485f25faa41d" class="i method">_CheckProtocol</a>(<span class="r39 r">url</span>);
            <b>string</b> <span id="r40 rd" class="r40 r">InternalURL</span> = <span class="r39 r">url</span>.<a href="@0@mscorlib/A.html#69fc1d0aa6df8a90" class="i method">Replace</a>(<a href="../../P/4f8a45c7e31df06c.html#4f8a45c7e31df06c" class="t t">localFileSystem</a>.<a href="#ea3f0b6595e77ce0" class="i field">FilePrefix</a>, <b>string</b>.<a href="@0@mscorlib/A.html#c9f70a27facb27cf" class="i field">Empty</a>);
            <a href="@0@mscorlib/A.html#e23a38af5d11ddd3" class="t t">FileStream</a> <span id="r41 rd" class="r41 r">fistr</span> = <b>new</b> <a href="@0@mscorlib/A.html#756b978acfa47bc7" class="t constructor">FileStream</a>(<span class="r40 r">InternalURL</span>, <a href="@0@mscorlib/A.html#c0cb6ba6af625b3a" class="t t">FileMode</a>.<a href="@0@mscorlib/A.html#f4421e1d202f76fa" class="i field">Open</a>, <a href="@0@mscorlib/A.html#5cc5644ae3acd24b" class="t t">FileAccess</a>.<a href="@0@mscorlib/A.html#0f1c68c756d0636b" class="i field">Read</a>, <a href="@0@mscorlib/A.html#2bfafb4d44a4f126" class="t t">FileShare</a>.<a href="@0@mscorlib/A.html#581aa2ff4e59056b" class="i field">Read</a>);
            <a href="@0@mscorlib/A.html#4f6cad84482876ff" class="t t">BinaryReader</a> <span id="r42 rd" class="r42 r">bire</span> = <b>new</b> <a href="@0@mscorlib/A.html#6fcf6f88785c9632" class="t constructor">BinaryReader</a>(<span class="r41 r">fistr</span>);
            <b>int</b> <span id="r43 rd" class="r43 r">Length</span> = 0;
            <b>try</b>
            { <span class="r43 r">Length</span> = (<b>int</b>)<span class="r41 r">fistr</span>.<a href="@0@mscorlib/A.html#fa88edfdb51ed91c" class="i property">Length</a>; }
            <b>catch</b>
            { <span class="r43 r">Length</span> = <b>int</b>.<a href="@0@mscorlib/A.html#c45153c0501d7122" class="i field">MaxValue</a>; <a href="@0@mscorlib/A.html#f907d79481da6ba4" class="t t">Console</a>.<a href="@0@mscorlib/A.html#5ac7c4fda643413b" class="i method">WriteLine</a>(<span class="s">&quot;LOCALFS: the file is too long, reading only first &quot;</span> + <b>int</b>.<a href="@0@mscorlib/A.html#c45153c0501d7122" class="i field">MaxValue</a> + <span class="s">&quot; bytes.\nCall fs.GetFileContent() with length definition.&quot;</span>); }
            <b>return</b> <span class="r42 r">bire</span>.<a href="@0@mscorlib/A.html#f4904e94e7164f50" class="i method">ReadBytes</a>(<span class="r43 r">Length</span>);
        }
 
        <b>public void</b> <a id="c8772ee9224aa37f" href="../../R/c8772ee9224aa37f.html" target="n" data-glyph="72,1" class="i method">WriteFileContent</a>(<b>string</b> <span id="r44 rd" class="r44 r">url</span>, <a href="@0@mscorlib/A.html#225942ed7b7a3252" class="t t">Int32</a> <span id="r45 rd" class="r45 r">Start</span>, <b>byte</b>[] <span id="r46 rd" class="r46 r">Content</span>)
        {
            <a href="#7059485f25faa41d" class="i method">_CheckProtocol</a>(<span class="r44 r">url</span>);
            <b>string</b> <span id="r47 rd" class="r47 r">InternalURL</span> = <span class="r44 r">url</span>.<a href="@0@mscorlib/A.html#69fc1d0aa6df8a90" class="i method">Replace</a>(<a href="../../P/4f8a45c7e31df06c.html#4f8a45c7e31df06c" class="t t">localFileSystem</a>.<a href="#ea3f0b6595e77ce0" class="i field">FilePrefix</a>, <b>string</b>.<a href="@0@mscorlib/A.html#c9f70a27facb27cf" class="i field">Empty</a>);
 
            <a href="@0@mscorlib/A.html#e23a38af5d11ddd3" class="t t">FileStream</a> <span id="r48 rd" class="r48 r">fistr</span> = <b>new</b> <a href="@0@mscorlib/A.html#234a29d0d3012e5c" class="t constructor">FileStream</a>(<span class="r47 r">InternalURL</span>, <a href="@0@mscorlib/A.html#c0cb6ba6af625b3a" class="t t">FileMode</a>.<a href="@0@mscorlib/A.html#80a500db887477f8" class="i field">OpenOrCreate</a>, <a href="@0@mscorlib/A.html#5cc5644ae3acd24b" class="t t">FileAccess</a>.<a href="@0@mscorlib/A.html#b08514795c2e0488" class="i field">ReadWrite</a>);
            <a href="@0@mscorlib/A.html#cf806b417abe1a35" class="t t">BinaryWriter</a> <span id="r49 rd" class="r49 r">biwr</span> = <b>new</b> <a href="@0@mscorlib/A.html#93163b0edbac85a5" class="t constructor">BinaryWriter</a>(<span class="r48 r">fistr</span>);
            <span class="r49 r">biwr</span>.<a href="@0@mscorlib/A.html#fae34c4f5667c7a2" class="i method">Write</a>(<span class="r46 r">Content</span>, <span class="r45 r">Start</span>, <span class="r46 r">Content</span>.<a href="@0@mscorlib/A.html#42e9b7616956cf94" class="i property">Length</a>);
        }
 
        <b>public void</b> <a id="81855615a7157e3d" href="../../R/81855615a7157e3d.html" target="n" data-glyph="72,1" class="i method">DeleteFile</a>(<b>string</b> <span id="r50 rd" class="r50 r">url</span>)
        {<span class="c">//удалить файл</span>
            <a href="#7059485f25faa41d" class="i method">_CheckProtocol</a>(<span class="r50 r">url</span>);
            <b>string</b> <span id="r51 rd" class="r51 r">InternalURL</span> = <span class="r50 r">url</span>.<a href="@0@mscorlib/A.html#69fc1d0aa6df8a90" class="i method">Replace</a>(<a href="../../P/4f8a45c7e31df06c.html#4f8a45c7e31df06c" class="t t">localFileSystem</a>.<a href="#ea3f0b6595e77ce0" class="i field">FilePrefix</a>, <b>string</b>.<a href="@0@mscorlib/A.html#c9f70a27facb27cf" class="i field">Empty</a>);
 
            <a href="@0@mscorlib/A.html#1c7421e464f67b7e" class="t t">File</a>.<a href="@0@mscorlib/A.html#c4e7406e837331d5" class="i method">Delete</a>(<span class="r51 r">InternalURL</span>);
        }
 
        <b>public void</b> <a id="aa33c5ff1178735f" href="../../R/aa33c5ff1178735f.html" target="n" data-glyph="72,1" class="i method">DeleteDirectory</a>(<b>string</b> <span id="r52 rd" class="r52 r">url</span>, <b>bool</b> <span id="r53 rd" class="r53 r">TryFirst</span>)
        {<span class="c">//удалить папку</span>
            <a href="#7059485f25faa41d" class="i method">_CheckProtocol</a>(<span class="r52 r">url</span>);
            <b>string</b> <span id="r54 rd" class="r54 r">InternalURL</span> = <span class="r52 r">url</span>.<a href="@0@mscorlib/A.html#69fc1d0aa6df8a90" class="i method">Replace</a>(<a href="../../P/4f8a45c7e31df06c.html#4f8a45c7e31df06c" class="t t">localFileSystem</a>.<a href="#ea3f0b6595e77ce0" class="i field">FilePrefix</a>, <b>string</b>.<a href="@0@mscorlib/A.html#c9f70a27facb27cf" class="i field">Empty</a>);
            <b>if</b> (<span class="r53 r">TryFirst</span>)
            {
                <b>if</b> (!<a href="#bae85c35c7400dec" class="i method">CheckForDeletePossiblity</a>(<span class="r54 r">InternalURL</span>)) <b>throw</b> <b>new</b> <span class="i n">pluginner</span>.<a href="/pluginner/A.html#05908a3f2dccbc57" class="t constructor">ThisDirCannotBeRemovedException</a>();
            }
            <a href="@0@mscorlib/A.html#b3ad5f0ba800bb28" class="t t">Directory</a>.<a href="@0@mscorlib/A.html#7edbf8078ebb7f63" class="i method">Delete</a>(<span class="r54 r">InternalURL</span>, <b>true</b>);<span class="c">//рекурсивное удаление</span>
        }
 
        <b>public void</b> <a id="5e1b8315a9436fe5" href="../../R/5e1b8315a9436fe5.html" target="n" data-glyph="72,1" class="i method">CreateDirectory</a>(<b>string</b> <span id="r55 rd" class="r55 r">url</span>)
        {<span class="c">//создать каталог</span>
            <a href="#7059485f25faa41d" class="i method">_CheckProtocol</a>(<span class="r55 r">url</span>);
            <b>string</b> <span id="r56 rd" class="r56 r">InternalURL</span> = <span class="r55 r">url</span>.<a href="@0@mscorlib/A.html#69fc1d0aa6df8a90" class="i method">Replace</a>(<a href="../../P/4f8a45c7e31df06c.html#4f8a45c7e31df06c" class="t t">localFileSystem</a>.<a href="#ea3f0b6595e77ce0" class="i field">FilePrefix</a>, <b>string</b>.<a href="@0@mscorlib/A.html#c9f70a27facb27cf" class="i field">Empty</a>);
 
            <a href="@0@mscorlib/A.html#b3ad5f0ba800bb28" class="t t">Directory</a>.<a href="@0@mscorlib/A.html#5c99436f88797b6a" class="i method">CreateDirectory</a>(<span class="r56 r">InternalURL</span>);
        }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Check the directory &quot;url&quot;, it is may be purged</span><span class="c">&amp;deleted</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span><span class="c"> </span><span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r57 r">url</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <b>private bool</b> <a id="bae85c35c7400dec" href="../../R/bae85c35c7400dec.html" target="n" data-glyph="76,1" class="i method">CheckForDeletePossiblity</a>(<b>string</b> <span id="r57 rd" class="r57 r">url</span>)
        {
            <b>try</b>
            {
                <a href="@0@mscorlib/A.html#30fa608717e5ce8e" class="t t">DirectoryInfo</a> <span id="r58 rd" class="r58 r">d</span> = <b>new</b> <a href="@0@mscorlib/A.html#683f5ff112df8d3a" class="t constructor">DirectoryInfo</a>(<span class="r57 r">url</span>);
                <b>foreach</b> (<a href="@0@mscorlib/A.html#4ee673c1a4ecad41" class="t t">FileInfo</a> <span id="r59 rd" class="r59 r">file</span> <b>in</b> <span class="r58 r">d</span>.<a href="@0@mscorlib/A.html#830504d0bd9706f2" class="i method">GetFiles</a>())
                {
                    <span class="c">//перебираю все файлы в каталоге</span>
                    <b>string</b> <span id="r60 rd" class="r60 r">newName</span> = <span class="r59 r">file</span>.<a href="@0@mscorlib/A.html#0f9b506168f8cec0" class="i property">FullName</a> + <span class="s">&quot;.fcdeltest&quot;</span>;
                    <b>string</b> <span id="r61 rd" class="r61 r">oldName</span> = <span class="r59 r">file</span>.<a href="@0@mscorlib/A.html#0f9b506168f8cec0" class="i property">FullName</a>;
                    <b>try</b>
                    {
                        <span class="r59 r">file</span>.<a href="@0@mscorlib/A.html#c524868af67eb0f2" class="i method">MoveTo</a>(<span class="r60 r">newName</span>);
                        <b>new</b> <a href="@0@mscorlib/A.html#1fe2c3953ba2a577" class="t constructor">FileInfo</a>(<span class="r60 r">newName</span>).<a href="@0@mscorlib/A.html#c524868af67eb0f2" class="i method">MoveTo</a>(<span class="r61 r">oldName</span>);
                    }
                    <b>catch</b> (<a href="@0@mscorlib/A.html#f092fb2b893a0162" class="t t">Exception</a> <span id="r62 rd" class="r62 r">nesudba</span>)
                    {
<span class="k preprocess">#</span><span class="k preprocess">if</span> <span class="i">DEBUG</span>
                        <a href="@0@mscorlib/A.html#f907d79481da6ba4" class="t t">Console</a>.<a href="@0@mscorlib/A.html#5ac7c4fda643413b" class="i method">WriteLine</a>(<span class="s">&quot;Check for deleteability was breaked by &quot;</span> + <span class="r61 r">oldName</span> + <span class="s">&quot;: &quot;</span> + <span class="r62 r">nesudba</span>.<a href="@0@mscorlib/A.html#5fba0e16215b42a3" class="i property">Message</a>);
<span class="k preprocess">#</span><span class="k preprocess">endif</span>
                        <b>return false</b>;
                    }
                }
 
                <b>foreach</b> (<a href="@0@mscorlib/A.html#30fa608717e5ce8e" class="t t">DirectoryInfo</a> <span id="r63 rd" class="r63 r">dir</span> <b>in</b> <span class="r58 r">d</span>.<a href="@0@mscorlib/A.html#0efed0313328198f" class="i method">GetDirectories</a>())
                {
                    <span class="c">//рекурсивно перебираю все подкаталоги в каталоге (папки хранятся в фейле, фейлы в подкаталогах, подкаталог в каталоге. Марь Иванна, правильно?)</span>
                    <b>return</b> <a href="#bae85c35c7400dec" class="i method">CheckForDeletePossiblity</a>(<span class="r63 r">dir</span>.<a href="@0@mscorlib/A.html#0f9b506168f8cec0" class="i property">FullName</a>);
                }
                <b>return true</b>;
            }
            <b>catch</b> (<a href="@0@mscorlib/A.html#f092fb2b893a0162" class="t t">Exception</a> <span id="r64 rd" class="r64 r">ex</span>) { <a href="@0@mscorlib/A.html#f907d79481da6ba4" class="t t">Console</a>.<a href="@0@mscorlib/A.html#5ac7c4fda643413b" class="i method">WriteLine</a>(<span class="s">&quot;ERROR: CheckForDeletePossiblity failed: &quot;</span> + <span class="r64 r">ex</span>.<a href="@0@mscorlib/A.html#5fba0e16215b42a3" class="i property">Message</a> + <span class="r64 r">ex</span>.<a href="@0@mscorlib/A.html#950d763693dd32d3" class="i property">StackTrace</a> + <span class="s">&quot;\nThe FC&#39;s crash was prevented. Please inform the program authors.&quot;</span>); <b>return false</b>; }
        }
 
        <b>public void</b> <a id="d0f67287d5c04a06" href="../../R/d0f67287d5c04a06.html" target="n" data-glyph="72,1" class="i method">MoveFile</a>(<b>string</b> <span id="r65 rd" class="r65 r">source</span>, <b>string</b> <span id="r66 rd" class="r66 r">destination</span>)
        {
            <a href="#7059485f25faa41d" class="i method">_CheckProtocol</a>(<span class="r65 r">source</span>);
            <b>string</b> <span id="r67 rd" class="r67 r">internalSource</span> = <span class="r65 r">source</span>.<a href="@0@mscorlib/A.html#69fc1d0aa6df8a90" class="i method">Replace</a>(<a href="../../P/4f8a45c7e31df06c.html#4f8a45c7e31df06c" class="t t">localFileSystem</a>.<a href="#ea3f0b6595e77ce0" class="i field">FilePrefix</a>, <b>string</b>.<a href="@0@mscorlib/A.html#c9f70a27facb27cf" class="i field">Empty</a>);
            <b>string</b> <span id="r68 rd" class="r68 r">internalDestination</span> = <span class="r66 r">destination</span>.<a href="@0@mscorlib/A.html#69fc1d0aa6df8a90" class="i method">Replace</a>(<a href="../../P/4f8a45c7e31df06c.html#4f8a45c7e31df06c" class="t t">localFileSystem</a>.<a href="#ea3f0b6595e77ce0" class="i field">FilePrefix</a>, <b>string</b>.<a href="@0@mscorlib/A.html#c9f70a27facb27cf" class="i field">Empty</a>);
 
            <a href="@0@mscorlib/A.html#1c7421e464f67b7e" class="t t">File</a>.<a href="@0@mscorlib/A.html#9635b474663856ac" class="i method">Move</a>(<span class="r67 r">internalSource</span>, <span class="r68 r">internalDestination</span>);
        }
 
        <b>public void</b> <a id="6436c4e6c4ad9091" href="../../R/6436c4e6c4ad9091.html" target="n" data-glyph="72,1" class="i method">MoveDirectory</a>(<b>string</b> <span id="r69 rd" class="r69 r">source</span>, <b>string</b> <span id="r70 rd" class="r70 r">destination</span>)
        {
            <a href="#7059485f25faa41d" class="i method">_CheckProtocol</a>(<span class="r69 r">source</span>);
            <b>string</b> <span id="r71 rd" class="r71 r">internalSource</span> = <span class="r69 r">source</span>.<a href="@0@mscorlib/A.html#69fc1d0aa6df8a90" class="i method">Replace</a>(<a href="../../P/4f8a45c7e31df06c.html#4f8a45c7e31df06c" class="t t">localFileSystem</a>.<a href="#ea3f0b6595e77ce0" class="i field">FilePrefix</a>, <b>string</b>.<a href="@0@mscorlib/A.html#c9f70a27facb27cf" class="i field">Empty</a>);
            <b>string</b> <span id="r72 rd" class="r72 r">internalDestination</span> = <span class="r70 r">destination</span>.<a href="@0@mscorlib/A.html#69fc1d0aa6df8a90" class="i method">Replace</a>(<a href="../../P/4f8a45c7e31df06c.html#4f8a45c7e31df06c" class="t t">localFileSystem</a>.<a href="#ea3f0b6595e77ce0" class="i field">FilePrefix</a>, <b>string</b>.<a href="@0@mscorlib/A.html#c9f70a27facb27cf" class="i field">Empty</a>);
 
            <a href="@0@mscorlib/A.html#b3ad5f0ba800bb28" class="t t">Directory</a>.<a href="@0@mscorlib/A.html#8c018cfc5241afac" class="i method">Move</a>(<span class="r71 r">internalSource</span>, <span class="r72 r">internalDestination</span>);
        }
 
        <span class="k preprocess">#</span><span class="k preprocess">endregion</span>
 
        <b>public</b> <span class="i n">pluginner</span>.<a href="/pluginner/A.html#e039ce3cbcc9466a" class="t t">FSEntryMetadata</a> <a id="8bb4e609c50e1868" href="../../R/8bb4e609c50e1868.html" target="n" data-glyph="72,1" class="i method">GetMetadata</a>(<b>string</b> <span id="r73 rd" class="r73 r">url</span>)
        {
            <a href="#7059485f25faa41d" class="i method">_CheckProtocol</a>(<span class="r73 r">url</span>);
            <b>string</b> <span id="r74 rd" class="r74 r">InternalURL</span> = <span class="r73 r">url</span>.<a href="@0@mscorlib/A.html#69fc1d0aa6df8a90" class="i method">Replace</a>(<a href="../../P/4f8a45c7e31df06c.html#4f8a45c7e31df06c" class="t t">localFileSystem</a>.<a href="#ea3f0b6595e77ce0" class="i field">FilePrefix</a>, <b>string</b>.<a href="@0@mscorlib/A.html#c9f70a27facb27cf" class="i field">Empty</a>);
            <span class="i n">pluginner</span>.<a href="/pluginner/A.html#e039ce3cbcc9466a" class="t t">FSEntryMetadata</a> <span id="r75 rd" class="r75 r">lego</span> = <b>new</b> <span class="i n">pluginner</span>.<a href="/pluginner/A.html#e039ce3cbcc9466a" class="t constructor">FSEntryMetadata</a>();
            <a href="@0@mscorlib/A.html#4ee673c1a4ecad41" class="t t">FileInfo</a> <span id="r76 rd" class="r76 r">metadatasource</span> = <b>new</b> <a href="@0@mscorlib/A.html#1fe2c3953ba2a577" class="t constructor">FileInfo</a>(<span class="r74 r">InternalURL</span>);
 
            <span class="r75 r">lego</span>.<a href="/pluginner/A.html#52470894417ea42a" class="i field">Name</a> = <span class="r76 r">metadatasource</span>.<a href="@0@mscorlib/A.html#f559e2409f4dfe9e" class="i property">Name</a>;
            <span class="r75 r">lego</span>.<a href="/pluginner/A.html#7dc2c0eaa63e3465" class="i field">FullURL</a> = <span class="r73 r">url</span>;
            <b>try</b>
            {
                <b>if</b> (<b>string</b>.<a href="@0@mscorlib/A.html#55e241b6143365ef" class="i method">IsNullOrWhiteSpace</a>(<span class="r75 r">lego</span>.<a href="/pluginner/A.html#52470894417ea42a" class="i field">Name</a>))
                    <span class="r75 r">lego</span>.<a href="/pluginner/A.html#52470894417ea42a" class="i field">Name</a> = <a href="@0@mscorlib/A.html#090eca8621a248ee" class="t t">Path</a>.<a href="@0@mscorlib/A.html#f9128b02ffd0d3ea" class="i method">GetDirectoryName</a>(<span class="r74 r">InternalURL</span>) ?? <span class="r74 r">InternalURL</span>;  <span class="c">// Root dir</span>
 
                <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r77 rd" class="r77 r">dirName</span> = <span class="r76 r">metadatasource</span>.<a href="@0@mscorlib/A.html#63ca08d541ffef6c" class="i property">DirectoryName</a> ?? <span class="r74 r">InternalURL</span>;
                <span class="r75 r">lego</span>.<a href="/pluginner/A.html#db0151b79c0155b1" class="i field">UpperDirectory</a> = <a href="../../P/4f8a45c7e31df06c.html#4f8a45c7e31df06c" class="t t">localFileSystem</a>.<a href="#ea3f0b6595e77ce0" class="i field">FilePrefix</a> + <span class="r77 r">dirName</span>;
                <span class="r75 r">lego</span>.<a href="/pluginner/A.html#6dd80cc62584cf9b" class="i field">RootDirectory</a> = <a href="../../P/4f8a45c7e31df06c.html#4f8a45c7e31df06c" class="t t">localFileSystem</a>.<a href="#ea3f0b6595e77ce0" class="i field">FilePrefix</a> + <a href="@0@mscorlib/A.html#090eca8621a248ee" class="t t">Path</a>.<a href="@0@mscorlib/A.html#6b603e7e517e223c" class="i method">GetPathRoot</a>(<span class="r77 r">dirName</span>);
                                     <span class="c">// + metadatasource.Directory.Root.FullName;</span>
                <span class="r75 r">lego</span>.<a href="/pluginner/A.html#a3ce802f464cee2b" class="i field">Attrubutes</a> = <span class="r76 r">metadatasource</span>.<a href="@0@mscorlib/A.html#397d905785886f44" class="i property">Attributes</a>;
                <span class="r75 r">lego</span>.<a href="/pluginner/A.html#eafb1ec6906390b7" class="i field">CreationTimeUTC</a> = <span class="r76 r">metadatasource</span>.<a href="@0@mscorlib/A.html#0472f874c68a6644" class="i property">CreationTimeUtc</a>;
                <span class="r75 r">lego</span>.<a href="/pluginner/A.html#5e5d9ec08af6905e" class="i field">IsReadOnly</a> = <span class="r76 r">metadatasource</span>.<a href="@0@mscorlib/A.html#37ee700f18773394" class="i property">IsReadOnly</a>;
                <span class="r75 r">lego</span>.<a href="/pluginner/A.html#79a880743453e69f" class="i field">LastAccessTimeUTC</a> = <span class="r76 r">metadatasource</span>.<a href="@0@mscorlib/A.html#928d64f24098c6d8" class="i property">LastAccessTimeUtc</a>;
                <span class="r75 r">lego</span>.<a href="/pluginner/A.html#80e341cd1b28e870" class="i field">LastWriteTimeUTC</a> = <span class="r76 r">metadatasource</span>.<a href="@0@mscorlib/A.html#8e6114897e2cced6" class="i property">LastWriteTimeUtc</a>;
                <b>if</b> (!<a href="@0@mscorlib/A.html#b3ad5f0ba800bb28" class="t t">Directory</a>.<a href="@0@mscorlib/A.html#6a2a3bee6b62826f" class="i method">Exists</a>(<span class="r74 r">InternalURL</span>)) <span class="r75 r">lego</span>.<a href="/pluginner/A.html#feef1dd0309c27ad" class="i field">Lenght</a> = <span class="r76 r">metadatasource</span>.<a href="@0@mscorlib/A.html#0ab84ec3507f6ed4" class="i property">Length</a>;
            }
            <b>catch</b> (<a href="@0@mscorlib/A.html#f092fb2b893a0162" class="t t">Exception</a> <span id="r78 rd" class="r78 r">ex</span>) { <a href="@0@mscorlib/A.html#f907d79481da6ba4" class="t t">Console</a>.<a href="@0@mscorlib/A.html#5ac7c4fda643413b" class="i method">WriteLine</a>(<span class="s">&quot;WARNING: can&#39;t build metadata lego for &quot;</span> + <span class="r73 r">url</span> + <span class="s">&quot;: &quot;</span> + <span class="r78 r">ex</span>.<a href="@0@mscorlib/A.html#5fba0e16215b42a3" class="i property">Message</a> + <span class="r78 r">ex</span>.<a href="@0@mscorlib/A.html#950d763693dd32d3" class="i property">StackTrace</a>); }
 
            <b>return</b> <span class="r75 r">lego</span>;
        }
 
        <span class="k preprocess">#</span><span class="k preprocess">region</span> api
 
        <b>public int</b>[] <a id="f583d48a39e1268d" href="../../R/f583d48a39e1268d.html" target="n" data-glyph="102,1" class="i property">APICompatibility</a>
        {
            <b>get</b>
            {
                <b>int</b>[] <span id="r79 rd" class="r79 r">fapiver</span> = { 0, 1, 0, 0, 1, 0 };
                <b>return</b> <span class="r79 r">fapiver</span>;
            }
        }
 
        <b>public object</b> <a id="3f05ec9442ac52ee" href="../../R/3f05ec9442ac52ee.html" target="n" data-glyph="72,1" class="i method">APICallPlugin</a>(<b>string</b> <span id="r80 rd" class="r80 r">call</span>, <b>params object</b>[] <span id="r81 rd" class="r81 r">arguments</span>)
        {
            <b>return null</b>;
        }
 
        <span class="k preprocess">#</span><span class="k preprocess">endregion</span>
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span><span class="c"> Send new feedback data to UI</span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span><span class="c"> </span><span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r82 r">Progress</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">The new progress value (or -1.79769e+308 if it should stay w/o changes): from 0.0 to 1.0 (or &gt; 1.0 to hide the bar)</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span><span class="c"> </span><span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r83 r">Status</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">The new status text (or null if it should stay w/o changes)</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <b>private void</b> <a id="3bb3dc82fc3c44e9" href="../../R/../../0000000000.html" target="n" data-glyph="76,1" class="i method">SetFeedback</a>(<b>double</b> <span id="r82 rd" class="r82 r">Progress</span> = <b>double</b>.<a href="@0@mscorlib/A.html#00c1b741b8eb8a64" class="i field">MinValue</a>, <b>string</b> <span id="r83 rd" class="r83 r">Status</span> = <b>null</b>)
        {
            <b>if</b> (<span class="r82 r">Progress</span> != <b>double</b>.<a href="@0@mscorlib/A.html#00c1b741b8eb8a64" class="i field">MinValue</a>)
            {
                <a href="#adbc49f529030588" class="i method">RaiseProgressChanged</a>(<span class="r82 r">Progress</span>);
            }
 
            <b>if</b> (<span class="r83 r">Status</span> != <b>null</b>)
            {
                <a href="#5a9882ddf84c6502" class="i method">RaiseStatusChanged</a>(<span class="r83 r">Status</span>);
            }
        }
    }
}
</pre></td></tr></table></div></body></html>
