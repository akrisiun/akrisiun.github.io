<!DOCTYPE html>
<html><head><title>WindowData.cs</title><link rel="stylesheet" href="../../styles.css"><script src="../../scripts.js"></script></head>
<body class="cB" onload="i(315);"><div class="dH">
<table style="width: 100%">
<tr><td>File: <a id="filePath" class="blueLink" href="/#fcmdp/View.Xaml/WindowData.cs" target="_top">View.Xaml\WindowData.cs</a><br/></td><td></td></tr>
<tr><td>Project: <a id="projectPath" class="blueLink" href="/#fcmdp" target="_top">fcmd\fcmdp.csproj</a> (fcmdp)</td><td></td></tr>
</table>
</div>
<div class="cz"><table class="tb" cellpadding="0" cellspacing="0"><tr><td valign="top" align="right"><pre id="ln"></pre></td><td valign="top" align="left"><pre id="code">
<b>using</b> <span class="i n">System</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Diagnostics</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Collections</span>.<span class="i n">Generic</span>;
 
<b>using</b> <span class="i n">fcmd</span>.<span class="i n">Controller</span>;
<b>using</b> <span class="i n">fcmd</span>.<span class="i n">View</span>.<span class="i n">Xaml</span>;
<b>using</b> <span class="i n">pluginner</span>;
<b>using</b> <span class="i n">pluginner</span>.<span class="i n">Widgets</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Threading</span>.<span class="i n">Tasks</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Windows</span>.<span class="i n">Threading</span>;
<b>using</b> <span class="i n">fcmd</span>.<span class="i n">View</span>;
<b>using</b> <span class="i n">fcmd</span>.<span class="i n">View</span>.<span class="i n">ctrl</span>;
<b>using</b> <span class="t">Directory</span> = <span class="i n">System</span>.<span class="i n">IO</span>.<a href="@0@mscorlib/A.html#b3ad5f0ba800bb28" class="t t">Directory</a>;
<b>using</b> <span class="i n">fcmd</span>.<span class="i n">base_plugins</span>.<span class="i n">fs</span>;
 
<b>namespace</b> <span class="i n">fcmd</span>.<span class="i n">Model</span>
{
    <b>public class</b> <a id="3d79153f00b768f8" href="../R/3d79153f00b768f8.html" target="n" data-glyph="0,0" class="t t"><span id="0f6ea1839e8ac33c">WindowDataWpf</span></a> : <a href="../Model/CommanderData.cs.html#790bacf1355ca198" class="t t">CommanderData</a>
    {
 
        <span class="k preprocess">#</span><span class="k preprocess">region</span> Properties 
 
        <b>public override</b> <a href="../Model/PanelSide.cs.html#de51780b17361ade" class="t t">PanelSide</a>? <a id="a8c8718e7ebd51f7" href="../R/a8c8718e7ebd51f7.html" target="n" data-glyph="102,1" class="i property">ActiveSide</a>
        {
            <b>get</b>
            {
                <b>return</b> <a href="#c172f1a7cec743a3" class="i property">PanelLayout</a> == <b>null</b> || !<a href="#c172f1a7cec743a3" class="i property">PanelLayout</a>.<a href="../Model/IPanelLayout.cs.html#2432bb8fd1b867be" class="i property">Panel1</a>.<a href="../Model/IPanelLayout.cs.html#5b549888e3f39506" class="i property">IsActive</a>.<a href="@0@mscorlib/A.html#7bbe60e33e857298" class="i property">HasValue</a> ? <a href="../Model/PanelSide.cs.html#de51780b17361ade" class="t t">PanelSide</a>.<a href="../Model/PanelSide.cs.html#5099c2b02a9a2087" class="i field">Undefined</a>
                     : <a href="#c172f1a7cec743a3" class="i property">PanelLayout</a>.<a href="../Model/IPanelLayout.cs.html#2432bb8fd1b867be" class="i property">Panel1</a>.<a href="../Model/IPanelLayout.cs.html#5b549888e3f39506" class="i property">IsActive</a>.<a href="@0@mscorlib/A.html#7b38d1fa76071c95" class="i property">Value</a> ? <a href="../Model/PanelSide.cs.html#de51780b17361ade" class="t t">PanelSide</a>.<a href="../Model/PanelSide.cs.html#afc76cacbe9ba50b" class="i field">Left</a> : <a href="../Model/PanelSide.cs.html#de51780b17361ade" class="t t">PanelSide</a>.<a href="../Model/PanelSide.cs.html#4cc4ec3c3e348664" class="i field">Right</a>;
            }
        }
 
        <b>public</b> <a href="../P/6628552ccd0b005b.html#6628552ccd0b005b" class="t t">MainWindow</a> <a id="8faafff8f0eb9f86" href="../R/8faafff8f0eb9f86.html" target="n" data-glyph="102,1" class="i property">WindowWpf</a> { <b>get</b> { <b>return</b> <a href="../Model/CommanderData.cs.html#42ac2bf7f1f4aade" class="i property">Window</a> <b>as</b> <a href="../P/6628552ccd0b005b.html#6628552ccd0b005b" class="t t">MainWindow</a>; } }
        <b>public</b> <a href="XamlBackend.cs.html#6d16b52b1141d28d" class="t t">WpfBackend</a> <a id="83bcfc2a2b7a5d25" href="../R/83bcfc2a2b7a5d25.html" target="n" data-glyph="102,1" class="i property">BackendWpf</a> {[<a href="@0@mscorlib/A.html#15085db4bf5c94f0" class="t constructor">DebuggerStepThrough</a>] <b>get</b> { <b>return</b> <a href="../Model/View/Control.cs.html#e6d9d81580a42239" class="t t">CommanderBackend</a>.<a href="../Model/View/Control.cs.html#b5a4c92293431bf8" class="i property">Current</a> <b>as</b> <a href="XamlBackend.cs.html#6d16b52b1141d28d" class="t t">WpfBackend</a>; } }
        <b>public</b> <a href="MenuPanelWpf.xaml.cs.html#e75095ba07a29e6c" class="t t">MenuPanelWpf</a> <a id="458bd9930ac38834" href="../R/458bd9930ac38834.html" target="n" data-glyph="102,1" class="i property">MainMenu</a> { <b>get</b> { <b>return</b> (<a href="../Model/CommanderData.cs.html#42ac2bf7f1f4aade" class="i property">Window</a> <b>as</b> <a href="../P/6628552ccd0b005b.html#6628552ccd0b005b" class="t t">MainWindow</a>).<span class="i">Menu</span>; } }
 
        <b>public</b> <a href="ListPanel/FileListPanelWpf.cs.html#f0412df50e284318" class="t t">FileListPanelWpf</a> <a id="a4ad56a3eed1c6e3" href="../R/a4ad56a3eed1c6e3.html" target="n" data-glyph="102,1" class="i property">ActivePanel</a> { <b>get</b> { <b>return</b> <a href="#8faafff8f0eb9f86" class="i property">WindowWpf</a>.<a href="../Model/MainDataContext.cs.html#da3944c7790f3d4d" class="i property">ActivePanelWpf</a> <b>as</b> <a href="ListPanel/FileListPanelWpf.cs.html#f0412df50e284318" class="t t">FileListPanelWpf</a>; } }
        <b>public</b> <a href="ListPanel/FileListPanelWpf.cs.html#f0412df50e284318" class="t t">FileListPanelWpf</a> <a id="f5f9c52ac50880bc" href="../R/../../0000000000.html" target="n" data-glyph="102,1" class="i property">PassivePanel</a> { <b>get</b> { <b>return</b> <a href="#8faafff8f0eb9f86" class="i property">WindowWpf</a>.<a href="../Model/MainDataContext.cs.html#5bc6595eeee2c998" class="i property">PassivePanelWpf</a> <b>as</b> <a href="ListPanel/FileListPanelWpf.cs.html#f0412df50e284318" class="t t">FileListPanelWpf</a>; } }
 
        <b>protected</b> <a href="#49f0070b7417e40e" class="t t">PanelLayoutClass</a> <a id="8d2f1645ddbfaae2" href="../R/8d2f1645ddbfaae2.html" target="n" data-glyph="105,1" class="i property">_panelLayout</a> { <b>get</b>; <b>set</b>; }
        <b>public override</b> <a href="../Model/IPanelLayout.cs.html#0a76975d444540cb" class="t t">IPanelLayout</a> <a id="c172f1a7cec743a3" href="../R/c172f1a7cec743a3.html" target="n" data-glyph="102,1" class="i property">PanelLayout</a> { <b>get</b> { <b>return</b> <a href="#8d2f1645ddbfaae2" class="i property">_panelLayout</a>; } }     <span class="c">// was: Xwt.HPaned();</span>
 
        <span class="c">// public Xwt.HBox KeyBoardHelp = new Xwt.HBox();</span>
        <b>public override object</b> <a id="dcf9445eadb19840" href="../R/dcf9445eadb19840.html" target="n" data-glyph="102,1" class="i property">KeybHelpButtons</a> { <b>get</b> { <b>return null</b>; } }
        <span class="c">// KeyboardHelpButton[] KeybHelpButtons = new KeyboardHelpButton[11];//одна лишняя, которая нумбер [0]</span>
 
        <span class="c">// public override object Layout { get { return Window.Content; } }    // was: Xwt.VBox </span>
 
        <b>public</b> <a href="../FileList/Panel/FileListPanel.cs.html#416284a069ebe3cf" class="t t">CommanderStatusBar</a> <a id="448a905fd262324c" href="../R/../../0000000000.html" target="n" data-glyph="102,1" class="i property">StatusBar</a> { <b>get</b>; <b>protected set</b>; }
 
        <span class="k preprocess">#</span><span class="k preprocess">endregion</span>
 
        <span class="k preprocess">#</span><span class="k preprocess">region</span> Init, Show 
 
        <b>public class</b> <a id="49f0070b7417e40e" href="../R/49f0070b7417e40e.html" target="n" data-glyph="0,1" class="t t"><span id="69e00a16fd1afbb8">PanelLayoutClass</span></a> : <a href="../Model/IPanelLayout.cs.html#0a76975d444540cb" class="t t">IPanelLayout</a>
        {
            <b>public</b> <a href="../Model/IPanelLayout.cs.html#b1a45f74ffef1ea0" class="t t">IPanel</a> <a id="e1d91f8edc879b4f" href="../R/e1d91f8edc879b4f.html" target="n" data-glyph="102,2" class="i property">Panel1</a> {[<a href="@0@mscorlib/A.html#15085db4bf5c94f0" class="t constructor">DebuggerStepThrough</a>] <b>get</b> { <b>return</b> <a href="#cc29abaa90fe2e6d" class="i property">wpfPanel1</a>; } }
            <b>public</b> <a href="../Model/IPanelLayout.cs.html#b1a45f74ffef1ea0" class="t t">IPanel</a> <a id="8a814acbfdfde887" href="../R/8a814acbfdfde887.html" target="n" data-glyph="102,2" class="i property">Panel2</a> {[<a href="@0@mscorlib/A.html#15085db4bf5c94f0" class="t constructor">DebuggerStepThrough</a>] <b>get</b> { <b>return</b> <a href="#5fa9245165f1545e" class="i property">wpfPanel2</a>; } }
 
            <b>public</b> <a href="ListPanel/PanelWpf.xaml.cs.html#d33749159c63c8eb" class="t t">PanelWpf</a> <a id="cc29abaa90fe2e6d" href="../R/cc29abaa90fe2e6d.html" target="n" data-glyph="102,2" class="i property">wpfPanel1</a> { <b>get</b>; <b>protected set</b>; }
            <b>public</b> <a href="ListPanel/PanelWpf.xaml.cs.html#d33749159c63c8eb" class="t t">PanelWpf</a> <a id="5fa9245165f1545e" href="../R/5fa9245165f1545e.html" target="n" data-glyph="102,2" class="i property">wpfPanel2</a> { <b>get</b>; <b>protected set</b>; }
 
            <b>public static</b> <a href="#49f0070b7417e40e" class="t t">PanelLayoutClass</a> <a id="5048e679bf6ad2cf" href="../R/5048e679bf6ad2cf.html" target="n" data-glyph="72,2" class="i method">Create</a>(<a href="../P/6628552ccd0b005b.html#6628552ccd0b005b" class="t t">MainWindow</a> <span id="r0 rd" class="r0 r">w</span>)
            {
                <span class="c">// Initialize Undefined sides</span>
                <span class="r0 r">w</span>.<span class="i">LeftPanel</span>.<span class="i">PanelDataWpf</span>.<span class="i">Initialize</span>(<a href="../Model/PanelSide.cs.html#de51780b17361ade" class="t t">PanelSide</a>.<a href="../Model/PanelSide.cs.html#afc76cacbe9ba50b" class="i field">Left</a>);
                <span class="r0 r">w</span>.<span class="i">RightPanel</span>.<span class="i">PanelDataWpf</span>.<span class="i">Initialize</span>(<a href="../Model/PanelSide.cs.html#de51780b17361ade" class="t t">PanelSide</a>.<a href="../Model/PanelSide.cs.html#4cc4ec3c3e348664" class="i field">Right</a>);
 
                <span class="c">// left and right</span>
                <span class="r0 r">w</span>.<a href="../Model/MainDataContext.cs.html#da3944c7790f3d4d" class="i property">ActivePanelWpf</a> = <span class="r0 r">w</span>.<span class="i">LeftPanel</span>.<span class="i">PanelDataWpf</span> <b>as</b> <a href="ListPanel/FileListPanelWpf.cs.html#f0412df50e284318" class="t t">FileListPanelWpf</a>;
                <span class="r0 r">w</span>.<a href="../Model/MainDataContext.cs.html#5bc6595eeee2c998" class="i property">PassivePanelWpf</a> = <span class="r0 r">w</span>.<span class="i">RightPanel</span>.<span class="i">PanelDataWpf</span> <b>as</b> <a href="ListPanel/FileListPanelWpf.cs.html#f0412df50e284318" class="t t">FileListPanelWpf</a>;
 
                <span class="r0 r">w</span>.<a href="../Model/MainDataContext.cs.html#1342faf0662e9cf1" class="i property">p1</a> = <span class="r0 r">w</span>.<a href="../Model/MainDataContext.cs.html#da3944c7790f3d4d" class="i property">ActivePanelWpf</a>;
                <span class="r0 r">w</span>.<a href="../Model/MainDataContext.cs.html#3cb8da6975357aac" class="i property">p2</a> = <span class="r0 r">w</span>.<a href="../Model/MainDataContext.cs.html#5bc6595eeee2c998" class="i property">PassivePanelWpf</a>;
                <span class="r0 r">w</span>.<span class="i">RightPanel</span>.<span class="i">Side</span> = <a href="../Model/PanelSide.cs.html#de51780b17361ade" class="t t">PanelSide</a>.<a href="../Model/PanelSide.cs.html#4cc4ec3c3e348664" class="i field">Right</a>;
 
                <b>return</b> <b>new</b> <a href="#49f0070b7417e40e" class="t constructor">PanelLayoutClass</a> { <a href="#cc29abaa90fe2e6d" class="i property">wpfPanel1</a> = <span class="r0 r">w</span>.<span class="i">LeftPanel</span>, <a href="#5fa9245165f1545e" class="i property">wpfPanel2</a> = <span class="r0 r">w</span>.<span class="i">RightPanel</span> };
            }
 
        }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span><span class="c">Switches the active panel</span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <b>protected override void</b> <a id="a2adfcab062990c7" href="../R/a2adfcab062990c7.html" target="n" data-glyph="75,1" class="i method">SwitchPanel</a>(<a href="../FileList/Panel/FileListPanel.cs.html#27ed234fde6fafc4" class="t t">FileListPanel</a> <span id="r1 rd" class="r1 r">NewPanel</span>)
        {
            <b>bool</b> <span id="r2 rd" class="r2 r">isLeft</span> = (<span class="r1 r">NewPanel</span> == <a href="../Model/CommanderData.cs.html#42ac2bf7f1f4aade" class="i property">Window</a>.<a href="../Model/MainDataContext.cs.html#1342faf0662e9cf1" class="i property">p1</a>);
            <a href="ListPanel/PanelWpf.xaml.cs.html#d33749159c63c8eb" class="k">var</a> <span id="r3 rd" class="r3 r">passiveNow</span> = <a href="../Model/CommanderData.cs.html#42ac2bf7f1f4aade" class="i property">Window</a>.<a href="../Model/MainDataContext.cs.html#5bc6595eeee2c998" class="i property">PassivePanelWpf</a>.<a href="ListPanel/FileListPanelWpf.cs.html#c56acad2cdddcbe7" class="i property">Parent</a> <b>as</b> <a href="ListPanel/PanelWpf.xaml.cs.html#d33749159c63c8eb" class="t t">PanelWpf</a>;
 
            <b>if</b> (<span class="r1 r">NewPanel</span> == <a href="../Model/CommanderData.cs.html#42ac2bf7f1f4aade" class="i property">Window</a>.<a href="../Model/MainDataContext.cs.html#9b15721940548510" class="i property">ActivePanel</a> &amp;&amp; !<span class="r3 r">passiveNow</span>.<a href="ListPanel/PanelWpf.xaml.cs.html#528ab6c746863345" class="i property">IsActive</a>.<a href="@0@mscorlib/A.html#7b38d1fa76071c95" class="i property">Value</a>) <b>return</b>;
 
            <a href="../Model/CommanderData.cs.html#42ac2bf7f1f4aade" class="i property">Window</a>.<a href="../Model/MainDataContext.cs.html#5bc6595eeee2c998" class="i property">PassivePanelWpf</a> = <span class="r2 r">isLeft</span> ? <a href="../Model/CommanderData.cs.html#42ac2bf7f1f4aade" class="i property">Window</a>.<a href="../Model/MainDataContext.cs.html#6e2cbcb83741394f" class="i property">p2Wpf</a> : <a href="../Model/CommanderData.cs.html#42ac2bf7f1f4aade" class="i property">Window</a>.<a href="../Model/MainDataContext.cs.html#26c3bf2ea7ff238d" class="i property">p1Wpf</a>;
            <a href="../Model/CommanderData.cs.html#42ac2bf7f1f4aade" class="i property">Window</a>.<a href="../Model/MainDataContext.cs.html#da3944c7790f3d4d" class="i property">ActivePanelWpf</a> = <span class="r1 r">NewPanel</span> <b>as</b> <a href="ListPanel/FileListPanelWpf.cs.html#f0412df50e284318" class="t t">FileListPanelWpf</a>;
            <a href="ListPanel/PanelWpf.xaml.cs.html#d33749159c63c8eb" class="k">var</a> <span id="r4 rd" class="r4 r">passive</span> = <a href="../Model/CommanderData.cs.html#42ac2bf7f1f4aade" class="i property">Window</a>.<a href="../Model/MainDataContext.cs.html#5bc6595eeee2c998" class="i property">PassivePanelWpf</a>.<a href="ListPanel/FileListPanelWpf.cs.html#c56acad2cdddcbe7" class="i property">Parent</a> <b>as</b> <a href="ListPanel/PanelWpf.xaml.cs.html#d33749159c63c8eb" class="t t">PanelWpf</a>;
            <span class="r4 r">passive</span>.<a href="ListPanel/PanelWpf.xaml.cs.html#528ab6c746863345" class="i property">IsActive</a> = <b>false</b>;
 
<span class="k preprocess">#</span><span class="k preprocess">if</span> <span class="i">DEBUG</span>
            <b>string</b> <span id="r5 rd" class="r5 r">PanelName</span> = <span class="r2 r">isLeft</span> ? <span class="s">&quot;LEFT&quot;</span> : <span class="s">&quot;RIGHT&quot;</span>;
<span class="k preprocess">#</span><span class="k preprocess">endif</span>
 
            <span class="c">// AssemblyName an = Assembly.GetExecutingAssembly().GetName();</span>
            <a href="../Model/CommanderData.cs.html#42ac2bf7f1f4aade" class="i property">Window</a>.<a href="@0@PresentationFramework/A.html#5002b3a8c196a7d1" class="i property">Title</a> = <b>string</b>.<a href="@0@mscorlib/A.html#7432dab173fae5fc" class="i method">Format</a>(
                <span class="s">&quot;{0} - {1}&quot;</span>,
                <span class="s">&quot;FC&quot;</span>,<span class="c">//System.Reflection.Assembly.GetExecutingAssembly().GetName().Name, //todo: add the ProductName w/o WinForms usage</span>
                <span class="r1 r">NewPanel</span>.<a href="../FileList/Panel/FileListPanel.cs.html#6fa526281a55b072" class="i property">FS</a>.<a href="/pluginner/A.html#53050e9ff0b5dd2d" class="i property">CurrentDirectory</a>
            );
        }
 
        <b>protected override void</b> <a id="ebe8927527d5348f" href="../R/ebe8927527d5348f.html" target="n" data-glyph="75,1" class="i method">LayoutInit</a>()
        {
            <span class="c">// base.LayoutInit();</span>
            <a href="ListPanel/FileListPanelWpf.cs.html#f0412df50e284318" class="k">var</a> <span id="r6 rd" class="r6 r">p1</span> = <a href="../Model/CommanderData.cs.html#42ac2bf7f1f4aade" class="i property">Window</a>.<a href="../Model/MainDataContext.cs.html#1342faf0662e9cf1" class="i property">p1</a> <b>as</b> <a href="ListPanel/FileListPanelWpf.cs.html#f0412df50e284318" class="t t">FileListPanelWpf</a>;
            <a href="ListPanel/FileListPanelWpf.cs.html#f0412df50e284318" class="k">var</a> <span id="r7 rd" class="r7 r">p2</span> = <a href="../Model/CommanderData.cs.html#42ac2bf7f1f4aade" class="i property">Window</a>.<a href="../Model/MainDataContext.cs.html#3cb8da6975357aac" class="i property">p2</a> <b>as</b> <a href="ListPanel/FileListPanelWpf.cs.html#f0412df50e284318" class="t t">FileListPanelWpf</a>;
 
            <a href="/pluginner/A.html#c00ff1b8d4f1ccd5" class="k">var</a> <span id="r8 rd" class="r8 r">openFileHandler</span> = <b>new</b> <span class="i n">pluginner</span>.<span class="t">TypedEvent</span>&lt;<b>string</b>&gt;(<a href="../Model/CommanderData.cs.html#e842c981df26a65d" class="i method">Panel_OpenFile</a>);
            <span class="r6 r">p1</span>.<a href="ListPanel/FileListPanelWpf.cs.html#11f4ccca7af8fc37" class="i">OpenFile</a> += <span class="r8 r">openFileHandler</span>;
            <span class="r7 r">p2</span>.<a href="ListPanel/FileListPanelWpf.cs.html#11f4ccca7af8fc37" class="i">OpenFile</a> += <span class="r8 r">openFileHandler</span>;
 
            <span class="c">// Ankr</span>
            <a href="@0@mscorlib/A.html#b19f71a84062554b" class="k">var</a> <span id="r9 rd" class="r9 r">LVCols</span> = <a href="../Model/CommanderData.cs.html#42ac2bf7f1f4aade" class="i property">Window</a>.<a href="../Model/MainDataContext.cs.html#bac6cf52021acad5" class="i property">LVCols</a>;
            <span class="c">//LVCols.Add(new ListView2.ColumnInfo { Title = &quot;&quot;, Tag = &quot;Icon&quot;, Width = 16, Visible = true });</span>
            <span class="c">//LVCols.Add(new ListView2.ColumnInfo { Title = &quot;URL&quot;, Tag = &quot;Path&quot;, Width = 0, Visible = false });</span>
            <span class="c">//LVCols.Add(new ListView2.ColumnInfo</span>
            <span class="c">//{ Title = Localizator.GetString(&quot;FName&quot;), Tag = &quot;FName&quot;, Width = 100, Visible = true });</span>
            <span class="c">//LVCols.Add(new ListView2.ColumnInfo</span>
            <span class="c">//{ Title = Localizator.GetString(&quot;FSize&quot;), Tag = &quot;FSize&quot;, Width = 50, Visible = true });</span>
            <span class="c">//LVCols.Add(new ListView2.ColumnInfo</span>
            <span class="c">//{ Title = Localizator.GetString(&quot;FDate&quot;), Tag = &quot;FDate&quot;, Width = 50, Visible = true });</span>
            <span class="c">//LVCols.Add(new ListView2.ColumnInfo</span>
            <span class="c">//{ Title = &quot;Directory item info&quot;, Tag = &quot;DirItem&quot;, Width = 0, Visible = false });</span>
 
            <span class="r6 r">p1</span>.<a href="../FileList/Panel/FileListPanel.cs.html#6fa526281a55b072" class="i property">FS</a> = <b>new</b> <span class="i n">base_plugins</span>.<span class="i n">fs</span>.<a href="../P/4f8a45c7e31df06c.html#4f8a45c7e31df06c" class="t constructor">localFileSystem</a>();
            <span class="r7 r">p2</span>.<a href="../FileList/Panel/FileListPanel.cs.html#6fa526281a55b072" class="i property">FS</a> = <b>new</b> <span class="i n">base_plugins</span>.<span class="i n">fs</span>.<a href="../P/4f8a45c7e31df06c.html#4f8a45c7e31df06c" class="t constructor">localFileSystem</a>();
 
            <span class="c">//p1.GotFocus += (o, ea) =&gt; SwitchPanel(p1);</span>
            <span class="c">//p2.GotFocus += (o, ea) =&gt; SwitchPanel(p2);</span>
        }
 
        <b>protected override void</b> <a id="b26372abd50083d4" href="../R/b26372abd50083d4.html" target="n" data-glyph="75,1" class="i method">Initialize</a>()
        {
            <a href="../P/6628552ccd0b005b.html#6628552ccd0b005b" class="k">var</a> <span id="r10 rd" class="r10 r">window</span> = <a href="../Model/CommanderData.cs.html#42ac2bf7f1f4aade" class="i property">Window</a> <b>as</b> <a href="../P/6628552ccd0b005b.html#6628552ccd0b005b" class="t t">MainWindow</a>;
            <span class="r10 r">window</span>.<a href="@0@PresentationFramework/A.html#5002b3a8c196a7d1" class="i property">Title</a> = <span class="s">&quot;File Commander&quot;</span>;
 
            <span class="r10 r">window</span>.<a href="../Model/MainDataContext.cs.html#bac6cf52021acad5" class="i property">LVCols</a> = <b>new</b> <a href="@0@mscorlib/A.html#9e5352b2b304ceba" class="t constructor">List</a>&lt;<a href="/pluginner/A.html#8e543a548f0554da" class="t t">IColumnInfo</a>&gt;();
 
            <b>if</b> (<a href="../Model/CommanderData.cs.html#ae049a11e90eebb2" class="i property">Backend</a> != <b>null</b>)
                <a href="../Model/CommanderData.cs.html#ae049a11e90eebb2" class="i property">Backend</a>.<a href="../Model/IBackend.cs.html#88dc905d50261fc5" class="i method">Init</a>(<span class="r10 r">window</span>);
            <a href="#8d2f1645ddbfaae2" class="i property">_panelLayout</a> = <a href="#49f0070b7417e40e" class="t t">PanelLayoutClass</a>.<a href="#5048e679bf6ad2cf" class="i method">Create</a>(<span class="r10 r">window</span>);
 
            <a href="../Model/CommanderData.cs.html#7d15113d15d82a33" class="i method">TranslateMenu</a>(<a href="#458bd9930ac38834" class="i property">MainMenu</a>);
            <a href="../Model/CommanderData.cs.html#7475295d74ba6329" class="i method">BindMenu</a>();
            <a href="#458bd9930ac38834" class="i property">MainMenu</a>.<span class="i">itemAbout</span>.<span class="i">Click</span> += (<span id="r11 rd" class="r11 r">s</span>, <span id="r12 rd" class="r12 r">e</span>)
                     =&gt; <a href="#3d79153f00b768f8" class="k">this</a>.<span class="i">mnuHelpAbout_Clicked</span>(<span class="r11 r">s</span>, <span class="r12 r">e</span>);
 
            <a href="#ebe8927527d5348f" class="i method">LayoutInit</a>();
            <a href="#3b7131f3dd10f439" class="i method">KeyBoardHelpInit</a>();
 
            <a href="../FileList/Localizator.cs.html#0b0c6268a53237f4" class="t t">Localizator</a>.<a href="../FileList/Localizator.cs.html#bb9c4c99ce936c02" class="i">LocalizationChanged</a> += (<span id="r13 rd" class="r13 r">o</span>, <span id="r14 rd" class="r14 r">ea</span>)
                =&gt; <a href="../Model/CommanderData.cs.html#209680bf1030c88b" class="i method">Localize</a>();
            <b>if</b> (<a href="../Model/CommanderData.cs.html#ae049a11e90eebb2" class="i property">Backend</a> != <b>null</b>)
                <a href="../Model/CommanderData.cs.html#209680bf1030c88b" class="i method">Localize</a>();
 
            <span class="c">//apply user&#39;s settings</span>
            <span class="c">//window size</span>
            <a href="../Model/CommanderData.cs.html#42ac2bf7f1f4aade" class="i property">Window</a>.<a href="@0@PresentationFramework/A.html#d0e1f940abafebe8" class="i property">Width</a> = <a href="@0@mscorlib/A.html#fc990bd1275d43d6" class="t t">Convert</a>.<a href="@0@mscorlib/A.html#6b5ceb6f15922f22" class="i method">ToInt16</a>(<span class="i n">fcmd</span>.<span class="i n">Properties</span>.<a href="../P/4e3439e35507a3dd.html#4e3439e35507a3dd" class="t t">Settings</a>.<a href="../Properties/Settings.Designer.cs.html#627bac430d77dfaf" class="i property">Default</a>.<a href="../Properties/Settings.Designer.cs.html#9cb462e6fbe5cb2f" class="i property">WinWidth</a>);
            <a href="../Model/CommanderData.cs.html#42ac2bf7f1f4aade" class="i property">Window</a>.<a href="@0@PresentationFramework/A.html#df2641c07f10d929" class="i property">Height</a> = <a href="@0@mscorlib/A.html#fc990bd1275d43d6" class="t t">Convert</a>.<a href="@0@mscorlib/A.html#6b5ceb6f15922f22" class="i method">ToInt16</a>(<span class="i n">fcmd</span>.<span class="i n">Properties</span>.<a href="../P/4e3439e35507a3dd.html#4e3439e35507a3dd" class="t t">Settings</a>.<a href="../Properties/Settings.Designer.cs.html#627bac430d77dfaf" class="i property">Default</a>.<a href="../Properties/Settings.Designer.cs.html#03bbe59f8d1d2bc6" class="i property">WinHeight</a>);
 
<span class="k preprocess">#</span><span class="k preprocess">if</span> <span class="i">DEBUG</span>
            <a href="../App.xaml.cs.html#76450589a57e2db8" class="t t">App</a>.<a href="../App.xaml.cs.html#d16324194bcf5e9e" class="i method">ConsoleWriteLine</a>(<span class="s">@&quot;DEBUG: MainWindow initialization has been completed.&quot;</span>);
<span class="k preprocess">#</span><span class="k preprocess">endif</span>
        }
 
        <b>protected override void</b> <a id="1b93d99971629edf" href="../R/1b93d99971629edf.html" target="n" data-glyph="75,1" class="i method">OnShown</a>()
        {
            <a href="../App.xaml.cs.html#76450589a57e2db8" class="t t">App</a>.<a href="../App.xaml.cs.html#d16324194bcf5e9e" class="i method">ConsoleWriteLine</a>(<span class="s">@&quot;DEBUG: MainWindow Begin Loaded&quot;</span>);
 
            <a href="ListPanel/PanelWpf.xaml.cs.html#d33749159c63c8eb" class="k">var</a> <span id="r15 rd" class="r15 r">panel1</span> = <a href="#3d79153f00b768f8" class="k">this</a>.<a href="#c172f1a7cec743a3" class="i property">PanelLayout</a>.<a href="../Model/IPanelLayout.cs.html#2432bb8fd1b867be" class="i property">Panel1</a> <b>as</b> <a href="ListPanel/PanelWpf.xaml.cs.html#d33749159c63c8eb" class="t t">PanelWpf</a>;
            <a href="ListPanel/PanelWpf.xaml.cs.html#d33749159c63c8eb" class="k">var</a> <span id="r16 rd" class="r16 r">panel2</span> = <a href="#3d79153f00b768f8" class="k">this</a>.<a href="#c172f1a7cec743a3" class="i property">PanelLayout</a>.<a href="../Model/IPanelLayout.cs.html#84a4483cca703f11" class="i property">Panel2</a> <b>as</b> <a href="ListPanel/PanelWpf.xaml.cs.html#d33749159c63c8eb" class="t t">PanelWpf</a>;
            <span class="r16 r">panel2</span>.<a href="ListPanel/PanelWpf.xaml.cs.html#528ab6c746863345" class="i property">IsActive</a> = <b>false</b>;
            <span class="r15 r">panel1</span>.<a href="ListPanel/PanelWpf.xaml.cs.html#528ab6c746863345" class="i property">IsActive</a> = <b>true</b>;
 
            <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="k">var</a> <span id="r17 rd" class="r17 r">loaderTask</span> = (<a href="../Model/CommanderData.cs.html#ae049a11e90eebb2" class="i property">Backend</a> <b>as</b> <a href="XamlBackend.cs.html#6d16b52b1141d28d" class="t t">WpfBackend</a>).<a href="XamlBackend.cs.html#2bbe2a6ef58b6c43" class="i property">LoaderTask</a>;
            <b>if</b> (<span class="r17 r">loaderTask</span> == <b>null</b> || <span class="r17 r">loaderTask</span>.<a href="@0@mscorlib/A.html#771e3c39534a4177" class="i property">Status</a> == <a href="@0@mscorlib/A.html#79588e534a82b826" class="t t">TaskStatus</a>.<a href="@0@mscorlib/A.html#72e69fc0e811b3d2" class="i field">RanToCompletion</a>)
                <a href="#1aeb1a5495084a18" class="i method">FinishShown</a>(<a href="#3d79153f00b768f8" class="k">this</a>);
            <b>else</b>
                <span class="r17 r">loaderTask</span>.<a href="@0@mscorlib/A.html#e71924f994d1bb54" class="i method">ContinueWith</a>(
                    (<span id="r18 rd" class="r18 r">t</span>) =&gt; <a href="#1aeb1a5495084a18" class="i method">FinishShown</a>(<a href="#3d79153f00b768f8" class="k">this</a>));
 
<span class="k preprocess">#</span><span class="k preprocess">if</span> <span class="i">DEBUG</span>
            <a href="@0@mscorlib/A.html#ffebe438fd9cbf0e" class="k">var</a> <span id="r19 rd" class="r19 r">active</span> = <a href="#a8c8718e7ebd51f7" class="i property">ActiveSide</a>; <span class="c">// = PanelSide.Left;</span>
            <a href="../App.xaml.cs.html#76450589a57e2db8" class="t t">App</a>.<a href="../App.xaml.cs.html#d16324194bcf5e9e" class="i method">ConsoleWriteLine</a>(<span class="s">@&quot;DEBUG: MainWindow initialization has been completed. Side=&quot;</span> + <span class="r19 r">active</span>.<a href="@0@mscorlib/A.html#d83d2db767b43db7" class="i method">ToString</a>());
<span class="k preprocess">#</span><span class="k preprocess">endif</span>
        }
 
        <b>public static void</b> <a id="1aeb1a5495084a18" href="../R/1aeb1a5495084a18.html" target="n" data-glyph="72,1" class="i method">FinishShown</a>(<a href="#3d79153f00b768f8" class="t t">WindowDataWpf</a> <span id="r20 rd" class="r20 r">@this</span>)
        {
            <a href="XamlBackend.cs.html#6d16b52b1141d28d" class="k">var</a> <span id="r21 rd" class="r21 r">visual</span> = <span class="r20 r">@this</span>.<a href="../Model/CommanderData.cs.html#ae049a11e90eebb2" class="i property">Backend</a> <b>as</b> <a href="XamlBackend.cs.html#6d16b52b1141d28d" class="t t">WpfBackend</a>;
            <a href="ListPanel/PanelWpf.xaml.cs.html#d33749159c63c8eb" class="k">var</a> <span id="r22 rd" class="r22 r">panel1</span> = <span class="r20 r">@this</span>.<a href="#c172f1a7cec743a3" class="i property">PanelLayout</a>.<a href="../Model/IPanelLayout.cs.html#2432bb8fd1b867be" class="i property">Panel1</a> <b>as</b> <a href="ListPanel/PanelWpf.xaml.cs.html#d33749159c63c8eb" class="t t">PanelWpf</a>;
            <a href="ListPanel/PanelWpf.xaml.cs.html#d33749159c63c8eb" class="k">var</a> <span id="r23 rd" class="r23 r">panel2</span> = <span class="r20 r">@this</span>.<a href="#c172f1a7cec743a3" class="i property">PanelLayout</a>.<a href="../Model/IPanelLayout.cs.html#84a4483cca703f11" class="i property">Panel2</a> <b>as</b> <a href="ListPanel/PanelWpf.xaml.cs.html#d33749159c63c8eb" class="t t">PanelWpf</a>;
 
            <span class="r21 r">visual</span>.<a href="XamlBackend.cs.html#d9095f1dcde67423" class="i method">Shown</a>(<span class="r22 r">panel1</span>, <span class="r23 r">panel2</span>);
            <span class="r21 r">visual</span>.<a href="XamlBackend.cs.html#2bbe2a6ef58b6c43" class="i property">LoaderTask</a> = <b>null</b>;
        }
 
        <span class="k preprocess">#</span><span class="k preprocess">endregion</span>
 
        <b>public</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="ef215480163b3ad9" href="../R/ef215480163b3ad9.html" target="n" data-glyph="72,1" class="i method">Preload</a>()
        {
            <a href="ListPanel/PanelWpf.xaml.cs.html#d33749159c63c8eb" class="k">var</a> <span id="r24 rd" class="r24 r">panel1</span> = <a href="#3d79153f00b768f8" class="k">this</a>.<a href="#c172f1a7cec743a3" class="i property">PanelLayout</a>.<a href="../Model/IPanelLayout.cs.html#2432bb8fd1b867be" class="i property">Panel1</a> <b>as</b> <a href="ListPanel/PanelWpf.xaml.cs.html#d33749159c63c8eb" class="t t">PanelWpf</a>;
            <a href="ListPanel/PanelWpf.xaml.cs.html#d33749159c63c8eb" class="k">var</a> <span id="r25 rd" class="r25 r">panel2</span> = <a href="#3d79153f00b768f8" class="k">this</a>.<a href="#c172f1a7cec743a3" class="i property">PanelLayout</a>.<a href="../Model/IPanelLayout.cs.html#84a4483cca703f11" class="i property">Panel2</a> <b>as</b> <a href="ListPanel/PanelWpf.xaml.cs.html#d33749159c63c8eb" class="t t">PanelWpf</a>;
            <a href="XamlBackend.cs.html#6d16b52b1141d28d" class="k">var</a> <span id="r26 rd" class="r26 r">visual</span> = <a href="#3d79153f00b768f8" class="k">this</a>.<a href="../Model/CommanderData.cs.html#ae049a11e90eebb2" class="i property">Backend</a> <b>as</b> <a href="XamlBackend.cs.html#6d16b52b1141d28d" class="t t">WpfBackend</a>;
 
            <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="k">var</a> <span id="r27 rd" class="r27 r">task</span> = <span class="r26 r">visual</span>.<a href="XamlBackend.cs.html#d63815281174909e" class="i method">LoadTask</a>(<span class="r24 r">panel1</span>, <span class="r25 r">panel2</span>);
            <b>return</b> <span class="r27 r">task</span>;
        }
 
        <b>public override void</b> <a id="a8f2dee472b75840" href="../R/a8f2dee472b75840.html" target="n" data-glyph="72,1" class="i method">OnSideFocus</a>(<a href="../Model/PanelSide.cs.html#de51780b17361ade" class="t t">PanelSide</a> <span id="r28 rd" class="r28 r">newSide</span>)
        {
            <b>if</b> (<a href="#a8c8718e7ebd51f7" class="i property">ActiveSide</a> == <span class="r28 r">newSide</span>)
                <b>return</b>;
 
            <a href="../Model/CommanderData.cs.html#42ac2bf7f1f4aade" class="i property">Window</a>.<a href="../Model/MainDataContext.cs.html#da3944c7790f3d4d" class="i property">ActivePanelWpf</a> = <b>null</b>;
            <a href="#a2adfcab062990c7" class="i method">SwitchPanel</a>(<span class="r28 r">newSide</span> == <a href="../Model/PanelSide.cs.html#de51780b17361ade" class="t t">PanelSide</a>.<a href="../Model/PanelSide.cs.html#afc76cacbe9ba50b" class="i field">Left</a> ? <a href="../Model/CommanderData.cs.html#42ac2bf7f1f4aade" class="i property">Window</a>.<a href="../Model/MainDataContext.cs.html#26c3bf2ea7ff238d" class="i property">p1Wpf</a> : <a href="../Model/CommanderData.cs.html#42ac2bf7f1f4aade" class="i property">Window</a>.<a href="../Model/MainDataContext.cs.html#6e2cbcb83741394f" class="i property">p2Wpf</a>);
        }
 
        <b>public override void</b> <a id="702da529c184f876" href="../R/702da529c184f876.html" target="n" data-glyph="72,1" class="i method">OnSelectedItem</a>(<a href="/pluginner/A.html#9ee21ee708254b79" class="t t">IPointedItem</a> <span id="r29 rd" class="r29 r">item</span>)
        {
            <a href="PanelCmd.xaml.cs.html#30003d3bf812fb9f" class="k">var</a> <span id="r30 rd" class="r30 r">cmdPanel</span> = <a href="#3d79153f00b768f8" class="k">this</a>.<a href="#8faafff8f0eb9f86" class="i property">WindowWpf</a>.<span class="i">FooterCmd</span> <b>as</b> <a href="PanelCmd.xaml.cs.html#30003d3bf812fb9f" class="t t">PanelCmd</a>;
            <span class="r30 r">cmdPanel</span>.<span class="i">selected</span>.<span class="i">Text</span> = <span class="r29 r">item</span>.<a href="@0@mscorlib/A.html#ff31a6bf27c58f89" class="i method">ToString</a>();
        }
 
        <span class="k preprocess">#</span><span class="k preprocess">region</span> LoadDir
 
        <b>public void</b> <a id="17c9771a7c47fb67" href="../R/17c9771a7c47fb67.html" target="n" data-glyph="72,1" class="i method">LoadDirAsync</a>(<b>string</b>[] <span id="r31 rd" class="r31 r">argv</span>, <a href="@0@mscorlib/A.html#b76a4a6f77962f28" class="t t">TaskScheduler</a> <span id="r32 rd" class="r32 r">scheduler</span>)
        {
            <a href="#93f1c9d0c6ec403f" class="i method">LoadDir</a>(<span class="r31 r">argv</span>);
            <span class="c">// scheduler.D</span>
        }
 
        <b>public override void</b> <a id="93f1c9d0c6ec403f" href="../R/93f1c9d0c6ec403f.html" target="n" data-glyph="72,1" class="i method">LoadDir</a>(<b>string</b>[] <span id="r33 rd" class="r33 r">argv</span>)
        {
            <span class="c">//file size display policy</span>
            <b>char</b>[] <span id="r34 rd" class="r34 r">Policies</span> = <span class="i n">fcmd</span>.<span class="i n">Properties</span>.<a href="../P/4e3439e35507a3dd.html#4e3439e35507a3dd" class="t t">Settings</a>.<a href="../Properties/Settings.Designer.cs.html#627bac430d77dfaf" class="i property">Default</a>.<a href="../Properties/Settings.Designer.cs.html#b0d6e9352585d5f8" class="i property">SizeShorteningPolicy</a>.<a href="@0@mscorlib/A.html#81c2d980f5d0ee35" class="i method">ToCharArray</a>();
            <a href="/pluginner/A.html#80c09e8be7ddfea2" class="k">var</a> <span id="r35 rd" class="r35 r">Shorten</span> = <b>new</b> <a href="/pluginner/A.html#80c09e8be7ddfea2" class="t constructor">ShortenPolicies</a>
            {
                <a href="/pluginner/A.html#eb958029540d2516" class="i property">KB</a> = <a href="../Model/CommanderData.cs.html#c589a9f56afa70d7" class="i method">ConvertSDP</a>(<span class="r34 r">Policies</span>[0]),
                <a href="/pluginner/A.html#5fdb552d3cf867e4" class="i property">MB</a> = <a href="../Model/CommanderData.cs.html#c589a9f56afa70d7" class="i method">ConvertSDP</a>(<span class="r34 r">Policies</span>[1]),
                <a href="/pluginner/A.html#d8ce1a3bcd7c78d9" class="i property">GB</a> = <a href="../Model/CommanderData.cs.html#c589a9f56afa70d7" class="i method">ConvertSDP</a>(<span class="r34 r">Policies</span>[2])
            };
 
            <a href="ListPanel/FileListPanelWpf.cs.html#f0412df50e284318" class="k">var</a> <span id="r36 rd" class="r36 r">p1</span> = <a href="#8faafff8f0eb9f86" class="i property">WindowWpf</a>.<a href="../Model/MainDataContext.cs.html#1342faf0662e9cf1" class="i property">p1</a> <b>as</b> <a href="ListPanel/FileListPanelWpf.cs.html#f0412df50e284318" class="t t">FileListPanelWpf</a>;
            <b>if</b> (<span class="r36 r">p1</span> == <b>null</b>)
                <b>return</b>;
 
            <a href="ListPanel/FileListPanelWpf.cs.html#f0412df50e284318" class="k">var</a> <span id="r37 rd" class="r37 r">p2</span> = <a href="#8faafff8f0eb9f86" class="i property">WindowWpf</a>.<a href="../Model/MainDataContext.cs.html#3cb8da6975357aac" class="i property">p2</a> <b>as</b> <a href="ListPanel/FileListPanelWpf.cs.html#f0412df50e284318" class="t t">FileListPanelWpf</a>;
 
            <span class="c">// load last directory or the current directory if the last directory hasn&#39;t remembered</span>
            <b>if</b> (<span class="i n">Properties</span>.<a href="../P/4e3439e35507a3dd.html#4e3439e35507a3dd" class="t t">Settings</a>.<a href="../Properties/Settings.Designer.cs.html#627bac430d77dfaf" class="i property">Default</a>.<a href="../Properties/Settings.Designer.cs.html#970a215ebe6087bf" class="i property">Panel1URL</a>.<a href="@0@mscorlib/A.html#e13f5829ef28aa07" class="i property">Length</a> != 0)
                <span class="r36 r">p1</span>.<a href="ListPanel/FileListPanelWpf.cs.html#5af9bee929658b6d" class="i method">LoadDir</a>(<span class="i n">Properties</span>.<a href="../P/4e3439e35507a3dd.html#4e3439e35507a3dd" class="t t">Settings</a>.<a href="../Properties/Settings.Designer.cs.html#627bac430d77dfaf" class="i property">Default</a>.<a href="../Properties/Settings.Designer.cs.html#970a215ebe6087bf" class="i property">Panel1URL</a>, <span class="r35 r">Shorten</span>);
            <b>else</b>
                <span class="r36 r">p1</span>.<a href="ListPanel/FileListPanelWpf.cs.html#5af9bee929658b6d" class="i method">LoadDir</a>(<a href="../P/4f8a45c7e31df06c.html#4f8a45c7e31df06c" class="t t">localFileSystem</a>.<a href="../base-plugins/fs/localFileSystem.cs.html#ea3f0b6595e77ce0" class="i field">FilePrefix</a> + <span class="i n">System</span>.<span class="i n">IO</span>.<a href="@0@mscorlib/A.html#b3ad5f0ba800bb28" class="t t">Directory</a>.<a href="@0@mscorlib/A.html#4de7d0d0c291277b" class="i method">GetCurrentDirectory</a>(), <span class="r35 r">Shorten</span>);
 
            <b>if</b> (<span class="i n">Properties</span>.<a href="../P/4e3439e35507a3dd.html#4e3439e35507a3dd" class="t t">Settings</a>.<a href="../Properties/Settings.Designer.cs.html#627bac430d77dfaf" class="i property">Default</a>.<a href="../Properties/Settings.Designer.cs.html#271d4515e5bd9682" class="i property">Panel2URL</a>.<a href="@0@mscorlib/A.html#e13f5829ef28aa07" class="i property">Length</a> != 0)
                <span class="r37 r">p2</span>.<a href="ListPanel/FileListPanelWpf.cs.html#5af9bee929658b6d" class="i method">LoadDir</a>(<span class="i n">Properties</span>.<a href="../P/4e3439e35507a3dd.html#4e3439e35507a3dd" class="t t">Settings</a>.<a href="../Properties/Settings.Designer.cs.html#627bac430d77dfaf" class="i property">Default</a>.<a href="../Properties/Settings.Designer.cs.html#271d4515e5bd9682" class="i property">Panel2URL</a>, <span class="r35 r">Shorten</span>);
            <b>else</b>
            {
                <b>string</b> <span id="r38 rd" class="r38 r">dir</span> = <a href="@0@mscorlib/A.html#b3ad5f0ba800bb28" class="t t">Directory</a>.<a href="@0@mscorlib/A.html#4de7d0d0c291277b" class="i method">GetCurrentDirectory</a>();
                <b>string</b> <span id="r39 rd" class="r39 r">url2</span> = <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="t t">String</a>.<a href="@0@mscorlib/A.html#55b2f6374a7cf7c1" class="i method">Concat</a>(<a href="../P/4f8a45c7e31df06c.html#4f8a45c7e31df06c" class="t t">localFileSystem</a>.<a href="../base-plugins/fs/localFileSystem.cs.html#ea3f0b6595e77ce0" class="i field">FilePrefix</a>, <span class="r38 r">dir</span>);
                <b>if</b> (<span class="r36 r">p1</span>.<a href="../FileList/Panel/FileListPanel.cs.html#6fa526281a55b072" class="i property">FS</a>.<a href="/pluginner/A.html#53050e9ff0b5dd2d" class="i property">CurrentDirectory</a> == <span class="r39 r">url2</span>)
                {
                    <a href="ctrl/ListView2DataGrid.cs.html#09c99f4928324f7f" class="k">var</a> <span id="r40 rd" class="r40 r">source</span> = <span class="r36 r">p1</span>.<a href="ListPanel/FileListPanelWpf.cs.html#dfe319fd9c662b7b" class="i property">ListingWidget</a>;
                    <a href="ctrl/ListView2DataGrid.cs.html#09c99f4928324f7f" class="k">var</a> <span id="r41 rd" class="r41 r">target</span> = <span class="r37 r">p2</span>.<a href="ListPanel/FileListPanelWpf.cs.html#dfe319fd9c662b7b" class="i property">ListingWidget</a>;
 
                    <span class="r37 r">p2</span>.<a href="../FileList/Panel/FileListPanel.cs.html#6fa526281a55b072" class="i property">FS</a>.<a href="/pluginner/A.html#53050e9ff0b5dd2d" class="i property">CurrentDirectory</a> = <span class="r39 r">url2</span>;
                    <span class="r37 r">p2</span>.<a href="../FileList/Panel/FileListPanel.cs.html#6fa526281a55b072" class="i property">FS</a>.<a href="/pluginner/A.html#f26e609f548d13a7" class="i property">RootDirectory</a> = <span class="r37 r">p2</span>.<a href="../FileList/Panel/FileListPanel.cs.html#6fa526281a55b072" class="i property">FS</a>.<a href="/pluginner/A.html#cbda9a95a4c0ebd6" class="i property">Prefix</a> + <span class="r37 r">p2</span>.<a href="../FileList/Panel/FileListPanel.cs.html#6fa526281a55b072" class="i property">FS</a>.<a href="/pluginner/A.html#61c44166b9429bcb" class="i method">NoPrefix</a>(<a href="@0@mscorlib/A.html#b3ad5f0ba800bb28" class="t t">Directory</a>.<a href="@0@mscorlib/A.html#41a4698c4785454d" class="i method">GetDirectoryRoot</a>(<span class="r38 r">dir</span>));
                    <span class="r41 r">target</span>.<a href="ctrl/ListView2DataGrid.cs.html#807d6a39eff2bca3" class="i method">CloneList</a>(<span class="r40 r">source</span>);
                }
                <b>else</b>
                    <span class="r37 r">p2</span>.<a href="ListPanel/FileListPanelWpf.cs.html#5af9bee929658b6d" class="i method">LoadDir</a>(<span class="r39 r">url2</span>, <span class="r35 r">Shorten</span>);
            }
 
            <span class="c">//default panel</span>
            <a href="../P/6628552ccd0b005b.html#6628552ccd0b005b" class="k">var</a> <span id="r42 rd" class="r42 r">window</span> = <a href="../Model/CommanderData.cs.html#42ac2bf7f1f4aade" class="i property">Window</a>;
            <b>bool</b> <span id="r43 rd" class="r43 r">isAccess</span> = (<span class="r42 r">window</span> <b>as</b> <a href="@0@WindowsBase/A.html#85082c8bba6e8038" class="t t">DispatcherObject</a>).<a href="@0@WindowsBase/A.html#757fc2dc09790852" class="i method">CheckAccess</a>();
 
            <b>switch</b> (<span class="i n">fcmd</span>.<span class="i n">Properties</span>.<a href="../P/4e3439e35507a3dd.html#4e3439e35507a3dd" class="t t">Settings</a>.<a href="../Properties/Settings.Designer.cs.html#627bac430d77dfaf" class="i property">Default</a>.<a href="../Properties/Settings.Designer.cs.html#67288076e8318fa6" class="i property">LastActivePanel</a>)
            {
                <b>case</b> 1:
                    <b>if</b> (<span class="r43 r">isAccess</span>)
                        <span class="r36 r">p1</span>.<a href="ListPanel/FileListPanelWpf.cs.html#42632b73707ed1ac" class="i property">ListingView</a>.<a href="/pluginner/A.html#33cfddea3b8ff586" class="i method">SetFocus</a>();
                    <span class="r42 r">window</span>.<a href="../Model/MainDataContext.cs.html#9b15721940548510" class="i property">ActivePanel</a> = <span class="r36 r">p1</span>;
                    <span class="r42 r">window</span>.<a href="../Model/MainDataContext.cs.html#6d9fac18aaec85aa" class="i property">PassivePanel</a> = <span class="r37 r">p2</span>;
                    <span class="c">//if (argv.Length == 1 &amp;&amp; !argv[0].EndsWith(&quot;.exe&quot;))</span>
                    <span class="c">//    p1.LoadDir(argv[0]);</span>
                    <b>break</b>;
                <b>case</b> 2:
                    <b>if</b> (<span class="r43 r">isAccess</span>)
                        <span class="r37 r">p2</span>.<a href="ListPanel/FileListPanelWpf.cs.html#42632b73707ed1ac" class="i property">ListingView</a>.<a href="/pluginner/A.html#33cfddea3b8ff586" class="i method">SetFocus</a>();
                    <span class="r42 r">window</span>.<a href="../Model/MainDataContext.cs.html#9b15721940548510" class="i property">ActivePanel</a> = <span class="r37 r">p2</span>;
                    <span class="r42 r">window</span>.<a href="../Model/MainDataContext.cs.html#6d9fac18aaec85aa" class="i property">PassivePanel</a> = <span class="r36 r">p1</span>;
                    <span class="c">//if (argv.Length == 1) p2.LoadDir(argv[0]);</span>
                    <b>break</b>;
                <b>default</b>:
                    <b>if</b> (<span class="r43 r">isAccess</span>)
                        <span class="r36 r">p1</span>.<a href="ListPanel/FileListPanelWpf.cs.html#42632b73707ed1ac" class="i property">ListingView</a>.<a href="/pluginner/A.html#33cfddea3b8ff586" class="i method">SetFocus</a>();
                    <span class="r42 r">window</span>.<a href="../Model/MainDataContext.cs.html#9b15721940548510" class="i property">ActivePanel</a> = <span class="r36 r">p1</span>;
                    <span class="r42 r">window</span>.<a href="../Model/MainDataContext.cs.html#6d9fac18aaec85aa" class="i property">PassivePanel</a> = <span class="r37 r">p2</span>;
                    <span class="c">//if (argv.Length == 1) p1.LoadDir(argv[0]);</span>
                    <b>break</b>;
            }
        }
 
        <span class="k preprocess">#</span><span class="k preprocess">endregion</span>
 
        <b>protected override void</b> <a id="3b7131f3dd10f439" href="../R/3b7131f3dd10f439.html" target="n" data-glyph="75,1" class="i method">KeyBoardHelpInit</a>() { }
    }
 
}</pre></td></tr></table></div></body></html>
