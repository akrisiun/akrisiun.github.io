<!DOCTYPE html>
<html><head><title>InputBox.cs</title><link rel="stylesheet" href="../../../styles.css"><script src="../../../scripts.js"></script></head>
<body class="cB" onload="i(118);"><div class="dH">
<table style="width: 100%">
<tr><td>File: <a id="filePath" class="blueLink" href="/#fcmdp/View.Xaml/ctrl/InputBox.cs" target="_top">View.Xaml\ctrl\InputBox.cs</a><br/></td><td></td></tr>
<tr><td>Project: <a id="projectPath" class="blueLink" href="/#fcmdp" target="_top">fcmd\fcmdp.csproj</a> (fcmdp)</td><td></td></tr>
</table>
</div>
<div class="cz"><table class="tb" cellpadding="0" cellspacing="0"><tr><td valign="top" align="right"><pre id="ln"></pre></td><td valign="top" align="left"><pre id="code">
<span class="c">/* The File Commander - InputBox
 * The dialog box for asking the user (like VBA InputBox)
 * (C) The File Commander Team - https://github.com/atauenis/fcmd
 * (C) 2013-14, Alexander Tauenis (atauenis@yandex.ru)
 * Contributors should place own signs here.
 */</span>
<b>namespace</b> <span class="i n">fcmd</span>.<span class="i n">View</span>.<span class="i n">Xaml</span>
{
    <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span><span class="c">The dialog box for asking the user</span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
    <b>public class</b> <a id="035db5e40d191184" href="../../R/../../0000000000.html" target="n" data-glyph="0,0" class="t t">InputBoxXmal</a> : <span class="i n">Xwt</span>.<a href="/Xwt3/A.html#abdce136d27fec8f" class="t t">Dialog</a>
    {
        <span class="i n">Xwt</span>.<a href="/Xwt3/A.html#b9367e1aeb9d7517" class="t t">Label</a> <a id="512925046fb17586" href="../../R/512925046fb17586.html" target="n" data-glyph="46,1" class="i field">lblQuestion</a> = <b>new</b> <span class="i n">Xwt</span>.<a href="/Xwt3/A.html#8646a6f4aa6c4cf4" class="t constructor">Label</a>();
        <span class="i n">Xwt</span>.<a href="/Xwt3/A.html#1c860f41463c9ce9" class="t t">TextEntry</a> <a id="4a3784fa459c020f" href="../../R/4a3784fa459c020f.html" target="n" data-glyph="46,1" class="i field">txtAnwser</a> = <b>new</b> <span class="i n">Xwt</span>.<a href="/Xwt3/A.html#959063db6617876a" class="t constructor">TextEntry</a>();
        <span class="i n">Xwt</span>.<a href="/Xwt3/A.html#aa7e003364a05769" class="t t">VBox</a> <a id="5120974ad63496cf" href="../../R/5120974ad63496cf.html" target="n" data-glyph="46,1" class="i field">box</a> = <b>new</b> <span class="i n">Xwt</span>.<a href="/Xwt3/A.html#da80f4696885ff46" class="t constructor">VBox</a>();
        <b>public</b> <span class="i n">Xwt</span>.<a href="/Xwt3/A.html#932cdddddef88c16" class="t t">Table</a> <a id="d92b26046b3e820d" href="../../R/d92b26046b3e820d.html" target="n" data-glyph="42,1" class="i field">OtherWidgets</a> = <b>new</b> <span class="i n">Xwt</span>.<a href="/Xwt3/A.html#0d71eca11ca0628b" class="t constructor">Table</a>();
 
        <b>public</b> <a id="8d456424599605b3" href="../../R/../../0000000000.html" target="n" data-glyph="72,1" class="i constructor">InputBoxXmal</a>(<b>string</b> <span id="r0 rd" class="r0 r">AskText</span>)
        {
            <a href="#512925046fb17586" class="i field">lblQuestion</a>.<a href="/Xwt3/A.html#e1385dbb967268cb" class="i property">Text</a> = <span class="r0 r">AskText</span>;
 
            <a href="#035db5e40d191184" class="k">this</a>.<a href="/Xwt3/A.html#7f96128447bf9279" class="i property">Buttons</a>.<a href="/Xwt3/A.html#e7db0bbe997549dc" class="i method">Add</a>(<span class="i n">Xwt</span>.<a href="/Xwt3/A.html#e25dede4b0e9efac" class="t t">Command</a>.<a href="/Xwt3/A.html#1b7c5fd6fc2419b8" class="i field">Ok</a>);
            <a href="#035db5e40d191184" class="k">this</a>.<a href="/Xwt3/A.html#7f96128447bf9279" class="i property">Buttons</a>.<a href="/Xwt3/A.html#e7db0bbe997549dc" class="i method">Add</a>(<span class="i n">Xwt</span>.<a href="/Xwt3/A.html#e25dede4b0e9efac" class="t t">Command</a>.<a href="/Xwt3/A.html#6056a01315b8415b" class="i field">Cancel</a>);
        }
 
        <b>public</b> <a id="0a34d0f85f1ce30b" href="../../R/../../0000000000.html" target="n" data-glyph="72,1" class="i constructor">InputBoxXmal</a>(<b>string</b> <span id="r1 rd" class="r1 r">AskText</span>, <b>string</b> <span id="r2 rd" class="r2 r">DefaultValue</span>)
        {
            <a href="#512925046fb17586" class="i field">lblQuestion</a>.<a href="/Xwt3/A.html#e1385dbb967268cb" class="i property">Text</a> = <span class="r1 r">AskText</span>;
            <a href="#4a3784fa459c020f" class="i field">txtAnwser</a>.<a href="/Xwt3/A.html#3653408afc9d6ca7" class="i property">Text</a> = <span class="r2 r">DefaultValue</span>;
 
            <a href="#035db5e40d191184" class="k">this</a>.<a href="/Xwt3/A.html#7f96128447bf9279" class="i property">Buttons</a>.<a href="/Xwt3/A.html#e7db0bbe997549dc" class="i method">Add</a>(<span class="i n">Xwt</span>.<a href="/Xwt3/A.html#e25dede4b0e9efac" class="t t">Command</a>.<a href="/Xwt3/A.html#1b7c5fd6fc2419b8" class="i field">Ok</a>);
            <a href="#035db5e40d191184" class="k">this</a>.<a href="/Xwt3/A.html#7f96128447bf9279" class="i property">Buttons</a>.<a href="/Xwt3/A.html#e7db0bbe997549dc" class="i method">Add</a>(<span class="i n">Xwt</span>.<a href="/Xwt3/A.html#e25dede4b0e9efac" class="t t">Command</a>.<a href="/Xwt3/A.html#6056a01315b8415b" class="i field">Cancel</a>);
        }
 
        <b>public</b> <a id="83de74e9d3f8c3b9" href="../../R/../../0000000000.html" target="n" data-glyph="72,1" class="i constructor">InputBoxXmal</a>(<b>string</b> <span id="r3 rd" class="r3 r">AskText</span>, <b>string</b> <span id="r4 rd" class="r4 r">DefaultValue</span>, <span class="i n">Xwt</span>.<a href="/Xwt3/A.html#e25dede4b0e9efac" class="t t">Command</a>[] <span id="r5 rd" class="r5 r">Buttons</span>)
        {
            <a href="#512925046fb17586" class="i field">lblQuestion</a>.<a href="/Xwt3/A.html#e1385dbb967268cb" class="i property">Text</a> = <span class="r3 r">AskText</span>;
            <a href="#4a3784fa459c020f" class="i field">txtAnwser</a>.<a href="/Xwt3/A.html#3653408afc9d6ca7" class="i property">Text</a> = <span class="r4 r">DefaultValue</span>;
 
            <a href="#035db5e40d191184" class="k">this</a>.<a href="/Xwt3/A.html#7f96128447bf9279" class="i property">Buttons</a>.<a href="/Xwt3/A.html#e7db0bbe997549dc" class="i method">Add</a>(<span class="r5 r">Buttons</span>);
        }
 
        <span class="c">//public bool ShowDialog(System.Windows.Window parent)</span>
        <span class="c">//{</span>
        <span class="c">//    return false;</span>
        <span class="c">//}</span>
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span><span class="c">Shows dialog</span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">returns</span><span class="c">&gt;</span><span class="c">&lt;</span><span class="c">value</span><span class="c">&gt;</span><span class="c">True</span><span class="c">&lt;/</span><span class="c">value</span><span class="c">&gt;</span><span class="c"> if user want to proceed current operation, and </span><span class="c">&lt;</span><span class="c">value</span><span class="c">&gt;</span><span class="c">False</span><span class="c">&lt;/</span><span class="c">value</span><span class="c">&gt;</span><span class="c"> if user don&#39;t.</span><span class="c">&lt;/</span><span class="c">returns</span><span class="c">&gt;</span>
        <b>public bool</b> <a id="71e993d011f16a76" href="../../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">ShowDialog</a>(<span class="i n">Xwt</span>.<a href="/Xwt3/A.html#2c6fcddc595f5ee8" class="t t">WindowFrame</a> <span id="r6 rd" class="r6 r">parent</span> = <b>null</b>)
        {
            <a href="#cc0a501c06218ab0" class="i method">Build</a>();
            <a href="/Xwt3/A.html#0d0d1a7be9349648" class="k">var</a> <span id="r7 rd" class="r7 r">Backend</span> = <a href="#035db5e40d191184" class="k">this</a>.<a href="/Xwt3/A.html#ebc862e964fddd37" class="i property">BackendHost</a>.<a href="/Xwt3/A.html#54344794c28b4e65" class="i property">Backend</a>;
            <span class="r7 r">Backend</span>.<a href="/Xwt3/A.html#659dde78abdfebcb" class="i property">Resizable</a> = <b>true</b>;
            <span class="r7 r">Backend</span>.<a href="/Xwt3/A.html#07835518ceeeca12" class="i method">SetSize</a>(500, 150);

            <span class="i n">Xwt</span>.<a href="/Xwt3/A.html#e25dede4b0e9efac" class="t t">Command</a> <span id="r8 rd" class="r8 r">DialogResult</span> = <b>null</b>;
            <b>if</b> (<span class="r6 r">parent</span> == <b>null</b>)
            {
                <span class="r8 r">DialogResult</span> = <a href="#035db5e40d191184" class="k">this</a>.<a href="/Xwt3/A.html#2020131941ae77ff" class="i method">Run</a>();
            }
            <b>else</b>
            {
                <span class="r8 r">DialogResult</span> = <a href="#035db5e40d191184" class="k">this</a>.<a href="/Xwt3/A.html#36a2367eafd497e8" class="i method">Run</a>(<span class="r6 r">parent</span>);
            }
            <span class="c">//4beginners: xwtdialog.Run() == winform.ShowDialog() == vb6form.Show(vbModal);</span>
 
            <b>if</b> (<span class="r8 r">DialogResult</span> == <b>null</b>) <b>return false</b>;
            <b>switch</b> (<span class="r8 r">DialogResult</span>.<a href="/Xwt3/A.html#6dfc7b2b0983227a" class="i property">Id</a>) <span class="c">//hack due to C# limitation (it&#39;s unable to do switch(){} on custon types) </span>
            {
                <b>case</b> <span class="s">&quot;Add&quot;</span>:
                <b>case</b> <span class="s">&quot;Apply&quot;</span>:
                <b>case</b> <span class="s">&quot;Clear&quot;</span>:
                <b>case</b> <span class="s">&quot;Copy&quot;</span>:
                <b>case</b> <span class="s">&quot;Cut&quot;</span>:
                <b>case</b> <span class="s">&quot;Delete&quot;</span>:
                <b>case</b> <span class="s">&quot;Ok&quot;</span>:
                <b>case</b> <span class="s">&quot;Paste&quot;</span>:
                <b>case</b> <span class="s">&quot;Remove&quot;</span>:
                <b>case</b> <span class="s">&quot;Save&quot;</span>:
                <b>case</b> <span class="s">&quot;SaveAs&quot;</span>:
                <b>case</b> <span class="s">&quot;Yes&quot;</span>:
                    <b>return true</b>;
            }
            <b>return false</b>;
        }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span><span class="c">Builds the InputBox dialog</span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <b>private void</b> <a id="cc0a501c06218ab0" href="../../R/cc0a501c06218ab0.html" target="n" data-glyph="76,1" class="i method">Build</a>()
        {
            <a href="#5120974ad63496cf" class="i field">box</a>.<a href="/Xwt3/A.html#f76c11cd7b75d2d8" class="i method">PackStart</a>(<a href="#512925046fb17586" class="i field">lblQuestion</a>);
            <a href="#5120974ad63496cf" class="i field">box</a>.<a href="/Xwt3/A.html#f76c11cd7b75d2d8" class="i method">PackStart</a>(<a href="#4a3784fa459c020f" class="i field">txtAnwser</a>);
            <b>if</b> (<a href="#d92b26046b3e820d" class="i field">OtherWidgets</a>.<a href="/Xwt3/A.html#3e8a61d5c23415dc" class="i property">Placements</a>.<a href="@0@mscorlib/A.html#f2419069e9890f5d" class="i property">Count</a> &gt; 0)
                <a href="#5120974ad63496cf" class="i field">box</a>.<a href="/Xwt3/A.html#f76c11cd7b75d2d8" class="i method">PackStart</a>(<a href="#d92b26046b3e820d" class="i field">OtherWidgets</a>);
            <a href="#035db5e40d191184" class="k">this</a>.<a href="/Xwt3/A.html#477a01a30ab10f5c" class="i property">Content</a> = <a href="#5120974ad63496cf" class="i field">box</a>;
            <a href="#035db5e40d191184" class="k">this</a>.<a href="/Xwt3/A.html#9c05fdc98629e459" class="i property">ShowInTaskbar</a> = <b>false</b>;
            <a href="#035db5e40d191184" class="k">this</a>.<a href="/Xwt3/A.html#dc71c36ac1bd8acc" class="i property">Resizable</a> = <b>false</b>;
            <a href="#035db5e40d191184" class="k">this</a>.<a href="/Xwt3/A.html#18aa1f1845dd5271" class="i property">Title</a> = <span class="i n">System</span>.<span class="i n">Reflection</span>.<a href="@0@mscorlib/A.html#73b5be5e9c2474b2" class="t t">Assembly</a>.<a href="@0@mscorlib/A.html#bd671af9926207e9" class="i method">GetExecutingAssembly</a>().<a href="@0@mscorlib/A.html#1fd23b897ffa9a75" class="i method">GetName</a>().<a href="@0@mscorlib/A.html#c046fc46809f86dd" class="i method">ToString</a>();
            <a href="#035db5e40d191184" class="k">this</a>.<a href="/Xwt3/A.html#4fdc9f725e27f3f9" class="i">CloseRequested</a> += (<span id="r9 rd" class="r9 r">o</span>, <span id="r10 rd" class="r10 r">ea</span>) =&gt; { <a href="#035db5e40d191184" class="k">this</a>.<a href="/Xwt3/A.html#90a8fb1a602385e7" class="i method">Hide</a>(); };
            <b>foreach</b> (<span class="i n">Xwt</span>.<a href="/Xwt3/A.html#07d4cc23e5e82108" class="t t">DialogButton</a> <span id="r11 rd" class="r11 r">dbtn</span> <b>in</b> <a href="#035db5e40d191184" class="k">this</a>.<a href="/Xwt3/A.html#7f96128447bf9279" class="i property">Buttons</a>)
            {
                <span class="r11 r">dbtn</span>.<a href="/Xwt3/A.html#e1847c64e5ed7b58" class="i">Clicked</a> += (<span id="r12 rd" class="r12 r">o</span>, <span id="r13 rd" class="r13 r">ea</span>) =&gt; { <a href="#035db5e40d191184" class="k">this</a>.<a href="/Xwt3/A.html#90a8fb1a602385e7" class="i method">Hide</a>(); };
            }
        }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span><span class="c">Which text user entered</span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <b>public string</b> <a id="79b3c773a7187998" href="../../R/../../0000000000.html" target="n" data-glyph="102,1" class="i property">Result</a>
        {
            <b>get</b> { <b>return</b> <a href="#4a3784fa459c020f" class="i field">txtAnwser</a>.<a href="/Xwt3/A.html#3653408afc9d6ca7" class="i property">Text</a>; }
        }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span><span class="c">What button user clicked</span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <b>public</b> <span class="i n">Xwt</span>.<a href="/Xwt3/A.html#e25dede4b0e9efac" class="t t">Command</a> <a id="dafc8fe713932598" href="../../R/dafc8fe713932598.html" target="n" data-glyph="102,1" class="i property">Command</a>
        {
            <b>get</b> { <b>return</b> <a href="#035db5e40d191184" class="k">this</a>.<a href="#dafc8fe713932598" class="i property">Command</a>; }
        }
    }
}
</pre></td></tr></table></div></body></html>
